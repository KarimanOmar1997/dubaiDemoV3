/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{createResolver as r}from"../../core/promiseUtils.js";import{whenOnce as t}from"../../core/reactiveUtils.js";import{debug as e}from"../../core/scheduling.js";import{d as s}from"../../chunks/watch.js";import"../../chunks/handleUtils.js";import"../../core/Error.js";import"../../core/lang.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/events.js";import"../../chunks/maybe.js";import"../../chunks/ObjectPool.js";import"../../chunks/nextTick.js";import"../../chunks/PooledArray.js";import"../../chunks/SetUtils.js";import"../../chunks/get.js";import"../../chunks/utils.js";import"../../chunks/Lifecycle.js";import"../../chunks/tracking.js";import"../../chunks/SimpleTrackingTarget.js";async function o(o){await function(o){switch(o.type){case"2d":return function(t){const o=r();let n=performance.now();return setTimeout((function r(){t.destroyed||(s(),e.dispatch(),t.ready&&!t.updating&&t.stationary&&!t.rendering)?(n||(n=performance.now()),performance.now()-n>=100?o():setTimeout(r,16)):(n=null,setTimeout(r,16))}),16),o.promise}(o);case"3d":if(o)return s(),e.dispatch(),t((()=>!o.updating))}return Promise.resolve()}(o);const n="3d"===o.type?o.resourceController?.scheduler?.test?.getRunning()??null:null;if(null!=n)throw new Error(`View is not updating, but scheduler is running:${n} at ${(new Error).stack}`)}export{o as waitUpdated};
