"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[5320,5629,7725,8010],{13281:(e,t,n)=>{n.d(t,{D:()=>P,m:()=>_,s:()=>p,w:()=>g});var s=n(32816),i=n(23160),a=n(6550),r=n(82604),o=n(43802);function _(){return{outPoint:new i.P,index:-1,t:Number.NaN}}function h(e,t,n){return{outPoint:e.clone(),index:t,t:n}}function m(e,t,n,s){e.outPoint.assign(t),e.index=n,e.t=s}function u(e,t){e.outPoint.assign(t.outPoint),e.index=t.index,e.t=t.t}function c(e,t,n,s){e.index=n,e.t=s,t.queryCoord2D(e.t,e.outPoint)}function l(e,t){const n=_();u(n,e),u(e,t),u(t,n)}function g(e,t,n,s,r,o){if(e.getGeometryType()===i.G.enumPolygon){for(;s.nextPath();)if(s.hasNextSegment()){const t=s.nextSegment();if(0!==(0,a.q)(e,t.getEndXY(),0))return m(r,t.getEndXY(),-1,Number.NaN),m(o,t.getEndXY(),-1,Number.NaN),!0}s.resetToFirstPath()}if(t.getGeometryType()===i.G.enumPolygon){for(;n.nextPath();)if(n.hasNextSegment()){const e=n.nextSegment();if(0!==(0,a.q)(t,e.getEndXY(),0))return m(r,e.getEndXY(),-1,Number.NaN),m(o,e.getEndXY(),-1,Number.NaN),!0}n.resetToFirstPath()}return!1}function p(e){const t=e.getPathCount(),n=(0,i.r)(e.getSegmentCount(),0);let s=0;for(let i=0;i<t;++i){const t=s+e.getSegmentCountPath(i);for(let a=s,r=e.getPathStart(i);a<t;++a,++r)n[a]=r;s=t}return(0,a.t)(e.getPointCount(),n),n}function d(e,t){return!!Number.isNaN(t)||e<=t}function y(e){const t=new a.P;return t.addEnvelope(e,!1),t}class P{constructor(e,t){if(this.m_env2DgeometryA=null,this.m_env2DgeometryB=null,this.m_progressCounter=0,this.m_progressTracker=t,this.m_maxSqrDistance=e*e,this.m_maxDistance=e,this.m_bIsNearCalc=!1,Number.isNaN(this.m_maxDistance)?this.m_maxDistance=Number.POSITIVE_INFINITY:this.m_maxDistance=e,this.m_maxSqrDistance=this.m_maxDistance*this.m_maxDistance,Number.isFinite(this.m_maxSqrDistance)){let e=Math.sqrt(this.m_maxSqrDistance);for(;e<this.m_maxDistance;)this.m_maxSqrDistance*=1+Number.EPSILON,e=Math.sqrt(this.m_maxSqrDistance)}}calculate(e,t,n,s){if((e.getGeometryType()!==o.P.type||t.getGeometryType()!==o.P.type)&&(this.m_env2DgeometryA=new r.Envelope2D,this.m_env2DgeometryB=new r.Envelope2D,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB),!d(this.m_env2DgeometryA.distanceFromEnvelope(this.m_env2DgeometryB),this.m_maxDistance)))return Number.POSITIVE_INFINITY;const a=h(new i.P,(0,i.x)(),Number.NaN),_=h(new i.P,(0,i.x)(),Number.NaN),m=this._ExecuteBruteForce(e,t,a,_);return d(m,this.m_maxDistance)?(null!==n&&u(n,a),null!==s&&u(s,_),m):Number.POSITIVE_INFINITY}isNear(e,t){if(this.m_bIsNearCalc=!0,e.isEmpty()||t.isEmpty())return!1;if(e===t)return!0;let n=!0;if(e.getGeometryType()!==o.P.type&&e.getGeometryType()!==o.E.type||t.getGeometryType()!==o.P.type&&t.getGeometryType()!==o.E.type||(n=!1),n){if(this.m_env2DgeometryA=new r.Envelope2D,this.m_env2DgeometryB=new r.Envelope2D,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB),!(this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)>this.m_maxSqrDistance))return!0;if(this.m_env2DgeometryA.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>this.m_maxSqrDistance)return!1}const s=h(new i.P,(0,i.x)(),Number.NaN),a=h(new i.P,(0,i.x)(),Number.NaN);return this._ExecuteBruteForce(e,t,s,a)<=this.m_maxDistance}progress_(e=!1){}_ExecuteBruteForce(e,t,n,s){switch(e.getGeometryType()){case i.G.enumPoint:return this.distancePointGeometry(e,t,n,s);case i.G.enumMultiPoint:return this.distanceMultipointGeometry(e,t,n,s);case i.G.enumEnvelope:return this.distanceEnvelopeGeometry(e,t,n,s);case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipathGeometry(e,t,n,s);default:return Number.NaN}}distancePointGeometry(e,t,n,s){switch(t.getGeometryType()){case i.G.enumPoint:return this.distancePointPoint(e,t,n,s);case i.G.enumMultiPoint:return this.distancePointMultipoint(e,t,n,s);case i.G.enumPolyline:case i.G.enumPolygon:return this.distancePointMultipath(e,t,n,s);case i.G.enumEnvelope:return this.distancePointEnvelope(e,t,n,s);default:return Number.NaN}}distancePointPoint(e,t,n,s){const a=e.getXY(),r=t.getXY();return m(n,a,0,0),m(s,r,0,0),Math.sqrt(i.P.sqrDistance(a,r))}distancePointMultipoint(e,t,n,s){const a=e.getXY();let r=this.m_maxSqrDistance,o=r,_=!1;const h=t.getPointCount(),u=new i.P;for(let e=0;e<h;++e)if(t.queryXY(e,u),o=i.P.sqrDistance(a,u),this.m_bIsNearCalc){if(o<=r)return 0}else if(!(o>r)&&(!_&&o===r||o<r)&&(r=o,m(n,a,0,0),m(s,u,e,0),_=!0,0===r))return 0;return _?Math.sqrt(r):Number.POSITIVE_INFINITY}distancePointMultipath(e,t,n,s){const o=!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB),_=e.getXY();if(!o&&t.getGeometryType()===i.G.enumPolygon&&0!==(0,a.q)(t,_,0))return m(n,_,0,0),m(s,_,-1,Number.NaN),0;t.getImpl().getAccelerators();let h=this.m_maxSqrDistance,u=h,c=-1;const l=new r.Envelope2D,g=t.querySegmentIterator();let p=!1;for(;g.nextPath();)for(;g.hasNextSegment();){const e=g.nextSegment();e.queryEnvelope(l);const t=l.sqrDistance(_);if(t>h)continue;if(!this.m_bIsNearCalc&&p&&t===h)continue;c=e.getClosestCoordinate(_,!1);const a=e.getCoord2D(c);if(u=i.P.sqrDistance(_,a),this.m_bIsNearCalc){if(u<=h)return 0}else if(!(u>h)&&(!p||u<h)&&(h=u,m(n,_,0,0),m(s,a,g.getStartPointIndex(),c),p=!0,0===h))return 0}return p?Math.sqrt(h):Number.POSITIVE_INFINITY}distancePointEnvelope(e,t,n,s){const i=e.getXY();m(n,i,0,0),m(s,i,-1,Number.NaN);const a=t.asEnvelope2D();return a.contains(i)?0:Math.sqrt(a.sqrDistance(i,s.outPoint))}distanceMultipointGeometry(e,t,n,s){switch(t.getGeometryType()){case i.G.enumPoint:{this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const a=this.distancePointMultipoint(t,e,s,n);return this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),a}case i.G.enumMultiPoint:return this.distanceMultipointMultipoint(e,t,n,s,1,1);case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipointMultipath(e,t,n,s);case i.G.enumEnvelope:return this.distanceMultipointMultipath(e,y(t),n,s);default:return Number.NaN}}distanceMultipointMultipoint(e,t,n,a,r,o){const _={stack:[],error:void 0,hasError:!1};try{if(this.m_bIsNearCalc&&1===r&&1===o){const s=Math.trunc((0,i.s)(Math.sqrt(e.getPointCount())+1,1,(0,i.n)())),r=Math.trunc((0,i.s)(Math.sqrt(t.getPointCount())+1,1,(0,i.n)()));if((s>=4||r>=4)&&this.distanceMultipointMultipoint(e,t,n,a,s,r)<=this.m_maxSqrDistance)return 0}let h=this.m_maxSqrDistance;const u=[e],c=[t],g=this.swapGeometriesIfBGtA(u,c);g&&(this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),o=(0,i.f)(r,r=o),l(n,a)),(0,s.a)(_,(0,i.q)((()=>{l(n,a),this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)}),!g),!1);const p=u[0].getImpl(),d=c[0].getImpl(),y=p.getPointCount(),P=d.getPointCount(),f=P>1;let E=!1;const S=new i.P,x=new i.P;for(let e=0;e<y;e+=r){if(p.queryXY(e,S),f){const e=this.m_env2DgeometryB.sqrDistance(S);if(this.m_bIsNearCalc){if(e>h)continue;if(this.m_env2DgeometryB.sqrMaxMinDistance(S)<=h)return 0}else if(e>=h)continue}for(let t=0;t<P;t+=o){d.queryXY(t,x);const s=i.P.sqrDistance(S,x);if(this.m_bIsNearCalc){if(s<=h)return 0}else if(!(s>h||E&&s===h)&&(!E||s<h)&&(m(n,S,e,0),m(a,x,t,0),E=!0,h=s,0===h))return E?Math.sqrt(h):Number.POSITIVE_INFINITY}}return E?Math.sqrt(h):Number.POSITIVE_INFINITY}catch(e){_.error=e,_.hasError=!0}finally{(0,s.b)(_)}}distanceMultipointMultipath(e,t,n,s){let o=!!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)&&t.getGeometryType()===i.G.enumPolygon;const _=t.querySegmentIterator();_.stripAttributes();const h=new r.Envelope2D,u=new i.P;let c=this.m_maxSqrDistance;const l=e.getImpl(),g=l.getPointCount(),p=g>1;let d=!1;for(;_.nextPath();)for(;_.hasNextSegment();){const e=_.nextSegment();if(e.queryLooseEnvelope(h),p){const e=h.sqrDistanceEnvelope(this.m_env2DgeometryA,null,null);if(this.m_bIsNearCalc){if(e>c)continue}else if(e>c||d&&e===c)continue}for(let i=0;i<g;i++){if(l.queryXY(i,u),o&&0!==(0,a.q)(t,u,0))return m(n,u,-1,Number.NaN),m(s,u,i,0),0;{const e=h.sqrDistance(u);if(this.m_bIsNearCalc){if(e>c)continue}else if(e>c)continue}const r=e.getClosestCoordinate(u,!1),g=e.getCoord2D(r);u.subThis(g);const p=u.sqrLength();if(this.m_bIsNearCalc){if(p<=c)return 0}else if(!(p>c)&&(!d||p<c)&&(c=p,m(n,l.getXY(i),i,0),m(s,g,_.getStartPointIndex(),r),d=!0,0===c))return 0}o=!1}return d?Math.sqrt(c):Number.POSITIVE_INFINITY}distanceEnvelopeGeometry(e,t,n,s){switch(t.getGeometryType()){case i.G.enumPoint:return this.distancePointEnvelope(t,e,s,n);case i.G.enumMultiPoint:{this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const a=this.distanceMultipointMultipath(t,y(e),s,n);return this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),a}case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipathMultipath(y(e),t,n,s);case i.G.enumEnvelope:return this.distanceEnvelopeEnvelope(e,t,n,s);default:return Number.NaN}}distanceEnvelopeEnvelope(e,t,n,s){n.t=Number.NaN,n.index=-1,s.t=Number.NaN,s.index=-1;const i=e.asEnvelope2D(),a=t.asEnvelope2D();return Math.sqrt(i.sqrDistanceEnvelope(a,n.outPoint,s.outPoint))}distanceMultipathGeometry(e,t,n,s){switch(t.getGeometryType()){case i.G.enumPoint:{this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const a=this.distancePointMultipath(t,e,s,n);return this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),a}case i.G.enumMultiPoint:{this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const a=this.distanceMultipointMultipath(t,e,s,n);return this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),a}case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipathMultipath(e,t,n,s);case i.G.enumEnvelope:return this.distanceMultipathMultipath(e,y(t),n,s);default:return Number.NaN}}distanceMultipathMultipath(e,t,n,o){const h={stack:[],error:void 0,hasError:!1};try{const m=[e],d=[t],y=this.swapGeometriesIfAGtB(m,d);y&&(this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),l(n,o)),(0,s.a)(h,(0,i.q)((()=>{l(n,o),this.m_env2DgeometryB=(0,i.f)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)}),!y),!1);const P=m[0],f=d[0],E=P.querySegmentIterator();E.stripAttributes();const S=f.querySegmentIterator();if(S.stripAttributes(),this.m_bIsNearCalc&&this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)<=this.m_maxSqrDistance)return 0;if(this.m_bIsNearCalc){const e=Math.trunc((0,i.s)(Math.sqrt(P.getPointCount())+1,1,(0,i.n)())),t=Math.trunc((0,i.s)(Math.sqrt(P.getPointCount())+1,1,(0,i.n)()));if(this.distanceMultipointMultipoint(P,f,n,o,e,t)<=this.m_maxSqrDistance)return 0}if(this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)){const e=_(),t=_();if(g(P,f,E,S,e,t))return u(n,e),u(o,t),0}const x=p(P),v=[],N=new a.S,D=new r.Envelope2D,A=new r.Envelope2D,M=new r.Envelope2D;let T=this.m_maxSqrDistance,C=!0,q=!1;for(let e=0,t=x.length;e<t;++e){P.querySegment(x[e],N,!0);const t=N.get();if(t.queryEnvelope(D),!(D.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>T)){if(this.m_bIsNearCalc&&D.sqrMaxDistanceEnvelope(this.m_env2DgeometryB)<=T)return 0;for(;S.nextPath();){if(this.progress_(),C)f.queryPathEnvelope(S.getPathIndex(),M),v[S.getPathIndex()]=M.clone();else if(D.sqrDistanceEnvelope(v[S.getPathIndex()],null,null)>T)continue;for(;S.hasNextSegment();){const s=S.nextSegment();if(s.queryEnvelope(A),D.sqrDistanceEnvelope(A,null,null)<=T){const i=!D.isIntersecting(A),a=[0],r=[0];let _=t.distance(s,i,a,r);if(_*=_,this.m_bIsNearCalc&&_<=this.m_maxSqrDistance)return 0;if(_<T||_===T&&x[e]<n.index){if(q=!0,c(n,t,x[e],a[0]),c(o,s,S.getStartPointIndex(),r[0]),0===_)return 0;T=_}}}}S.resetToFirstPath(),C=!1}}return q?Math.sqrt(T):Number.POSITIVE_INFINITY}catch(e){h.error=e,h.hasError=!0}finally{(0,s.b)(h)}}swapGeometriesIfAGtB(e,t){return(0,i.w)(e[0])>(0,i.w)(t[0])&&(t[0]=(0,i.f)(e[0],e[0]=t[0]),!0)}swapGeometriesIfBGtA(e,t){return this.swapGeometriesIfAGtB(t,e)}}},61846:(e,t,n)=>{n.d(t,{O:()=>u});var s=n(23160),i=n(6550),a=n(43802),r=n(82604);function o(){return{m_pGcs:new s.P,m_xyz:new a.d,m_factor:Number.NaN,m_geoLength:Number.NaN,setValues:_,setLength:h,assign:m}}function _(e,t,n,s){this.m_factor=e,this.m_pGcs.assign(t),this.m_xyz.assign(s),this.m_geoLength=n}function h(e){this.m_geoLength=e}function m(e){this.m_pGcs.assign(e.m_pGcs),this.m_xyz.assign(e.m_xyz),this.m_factor=e.m_factor,this.m_geoLength=e.m_geoLength}class u{getOperatorType(){return 10315}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}_ExecuteShapePreservingLength(e,t,n,s,a){if(e.hasNonLinearSegments()&&(e=(new i.f).execute(e,0,t.getTolerance(0),0,a)),t.isPannable()){let s=90,o=-90;if(1===n.getUnit().getUnitToBaseFactor()&&(s*=Math.PI/180,o*=Math.PI/180),2===t.getCoordinateSystemType()){let e=null;const n=[0,0,0,0];e=t.getPECoordSys(),n[0]=0,n[1]=s,n[2]=0,n[3]=o,i.J.geogToProj(e,2,n),s=n[1],o=n[3]}const _=new r.Envelope2D;e.queryEnvelope(_),_.ymin=o,_.ymax=s,e=(new i.K).execute(e,_,t,a)}else{const n=t.getPCSHorizon();if((e=(new i.u).execute(e,n,t,a))===n){const t=e.clone();e=t}}return e.isEmpty()?0:this._ExecuteIterativeApproach(e,t,n,s,1,a)}_ExecuteIterativeApproach(e,t,n,r,_,h){const m=(0,i.y)();n.querySpheroidData(m);const u=m.majorSemiAxis,g=m.e2,p=n.getUnit().getUnitToBaseFactor(),d=(0,s.y)(o,40),y=(0,s.r)(40,Number.NaN),P=o(),f=o();let E;const S=[0,0,0,0],x=t.getPECoordSys(),v=new s.P,N=new s.P,D=new s.P,A=new s.P,M=new s.P;let T=0;const C=e.querySegmentIterator();for(;C.nextPath();)for(;C.hasNextSegment();){const e=C.nextSegment();v.assign(e.getStartXY()),N.assign(e.getEndXY()),2===t.getCoordinateSystemType()?(S[0]=v.x,S[1]=v.y,S[2]=N.x,S[3]=N.y,i.J.projToGeog(x,2,S),D.x=S[0]*p,D.y=S[1]*p,A.x=S[2]*p,A.y=S[3]*p):(D.setCoordsPoint2D(v),A.setCoordsPoint2D(N),D.scale(p),A.scale(p));const n=new a.d,r=new a.d;c(u,g,D,n),c(u,g,A,r);let o=l(u,n,r);P.setValues(0,D,Number.NaN,n),f.setValues(1,A,o,r),E=_,d[0].assign(f),y[0]=_;let h=0;for(;;){h>128&&(0,s.p)("iterations exceeded");const n=.5*(P.m_factor+f.m_factor),r=e.getCoord2D(n);2===t.getCoordinateSystemType()?(S[0]=r.x,S[1]=r.y,i.J.projToGeog(x,1,S),M.x=S[0]*p,M.y=S[1]*p):(M.setCoordsPoint2D(r),M.scale(p)),D.setCoordsPoint2D(P.m_pGcs),A.setCoordsPoint2D(f.m_pGcs);const m=new a.d;c(u,g,M,m);const v=l(u,P.m_xyz,m),N=l(u,f.m_xyz,m);o=f.m_geoLength,Number.isNaN(o)&&(o=l(u,P.m_xyz,f.m_xyz));const C=v+N,q=E===_&&C>=20&&Math.abs(C-o)>1e-8*(o+C);if(h+2<40&&(q||Math.abs(C-o)>0&&E>0))f.setLength(N),d[h].assign(f),f.setValues(n,M,v,m),d[++h].assign(f),q?(E=_,y[h]=_):(E--,y[h-1]=E,y[h]=E);else{if(T+=C,0===h)break;P.assign(f),f.assign(d[--h]),E=y[h]}}}return T}execute(e,t,n){if(t&&0!==t.getCoordinateSystemType()||(0,s.a)(""),e.isEmpty()||e.getDimension()<1)return 0;let a=null;const r=t.getGCS();r!==t&&(a=(0,i.N)(t,r,null));const o=e.getGeometryType();if(o===s.G.enumEnvelope){const s=new i.P;return s.addEnvelope(e,!1),this._ExecuteShapePreservingLength(s,t,r,a,n)}if((0,s.o)(o)){const s=new i.b;return s.addSegment(e,!0),this._ExecuteShapePreservingLength(s,t,r,a,n)}return this._ExecuteShapePreservingLength(e,t,r,a,n)}}function c(e,t,n,s){s.assign((0,i.Q)(e,t,n))}function l(e,t,n){const s=e,i=new a.d;i.setSub(t,n);const r=i.length();return 2*s*Math.asin(r/(2*s))}},87725:(e,t,n)=>{n.r(t),n.d(t,{OperatorGeodeticDensifyByLength:()=>r,OperatorGeodeticDensifyCursor:()=>o});var s=n(88010),i=n(23160),a=n(6550);n(82604),n(43802),n(94981),n(32816);class r{getOperatorType(){return 10310}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,n,s,i){return new o(e,n,s,t,-1,-1,i)}execute(e,t,n,a,r){const o=new s.S([e]),_=this.executeMany(o,t,n,a,r).next();return _||(0,i.p)("null output"),_}}class o extends s.G{constructor(e,t,n,s,a,r,o){super(),this.m_progressTracker=o,r>0&&(0,i.t)(""),4!==n&&a>0&&(0,i.t)(""),t||(0,i.a)(""),0===t.getCoordinateSystemType()&&(0,i.a)(""),s>0||a>0||(0,i.a)(""),this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=t,this.m_curveType=n,this.m_maxLengthMeters=s,this.m_maxDeviationMeters=a,this.m_maxAngle=r}next(){{let e;for(;e=this.m_inputGeoms.next();)return(0,i.v)(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.geodeticDensify(e);return null}}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}geodeticDensify(e){return(0,a.U)(e,this.m_spatialReference,this.m_curveType,this.m_maxLengthMeters,this.m_maxDeviationMeters,this.m_progressTracker)}}},88010:(e,t,n)=>{n.d(t,{G:()=>s,S:()=>i});class s{*[Symbol.iterator](){let e=this.next();for(;e;)yield e,e=this.next()}}class i extends s{constructor(e){super(),this.m_iGeom=-1,this.m_aGeoms=e?e.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const e=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,e}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}}},95320:(e,t,n)=>{n.r(t),n.d(t,{OperatorGeodeticArea:()=>A});var s=n(23160),i=n(6550),a=n(82604),r=n(43802),o=n(61846),_=n(32816),h=n(94981);n(13281),n(88010),n(87725),Symbol.dispose;class m{constructor(e,t,n,a,o=0,_=4){this.m_ptDistFrom=new s.P,this.m_segStartPt=new s.P,this.m_segEndPt=new s.P,this.m_geodeticLength=new i.H,this.m_az12=new i.H,this.m_minGeodeticDist=new i.H,this.m_segStartPt3d=new r.d,this.m_segEndPt3d=new r.d,this.m_sr=a,this.m_distCurveType=o,this.m_segCurveType=_,this.m_inputGCS=this.m_sr.getGCS(),this.m_rpu=this.m_inputGCS.getUnit().getUnitToBaseFactor(),this.m_bIsPannablePcs=2===this.m_sr.getCoordinateSystemType()&&this.m_sr.isPannable();const h=(0,i.y)();this.m_inputGCS.querySpheroidData(h),this.m_a=h.majorSemiAxis,this.m_eSquared=h.e2,this.setPointDistFrom(e),this.setSegmentEndPoints(t,n)}setSegmentEndPoints(e,t){this.m_segStartPt.assign(e),this.m_segEndPt.assign(t),this.m_bIsPannablePcs||(this.m_segStartPt.mulThis(this.m_rpu),this.m_segEndPt.mulThis(this.m_rpu)),2===this.m_segCurveType&&(this.m_segStartPt3d.assign((0,i.Q)(this.m_a,this.m_eSquared,this.m_segStartPt)),this.m_segEndPt3d.assign((0,i.Q)(this.m_a,this.m_eSquared,this.m_segEndPt))),this.calculateAndUpdateSegmentLength()}setPointDistFrom(e){this.m_ptDistFrom.assign(e),this.m_ptDistFrom.scale(this.m_rpu)}setSegmentCurveType(e){this.m_segCurveType=e}setDistanceCurveType(e){this.m_distCurveType=e}makeFunctor(){return e=>{let t;switch(this.m_segCurveType){case 0:case 1:case 3:{const n={stack:[],error:void 0,hasError:!1};try{const a=(0,_.a)(n,new i.H,!1),r=(0,_.a)(n,new i.H,!1);i.I.geodeticCoordinate(this.m_a,this.m_eSquared,this.m_segStartPt.x,this.m_segStartPt.y,this.m_geodeticLength.val*e,this.m_az12.val,a,r,this.m_segCurveType),t=new s.P(a.val,r.val);break}catch(e){n.error=e,n.hasError=!0}finally{(0,_.b)(n)}}case 2:{const n=r.d.lerp(this.m_segStartPt3d,this.m_segEndPt3d,e);t=(0,i.ad)(this.m_a,this.m_eSquared,n);break}case 4:t=s.P.lerp(this.m_segStartPt,this.m_segEndPt,e),this.m_bIsPannablePcs&&((0,i.aj)(this.m_sr,0,[t],1),t.mulThis(this.m_rpu));break;default:(0,s.p)("Invalid curve type")}return i.I.geodeticDistance(this.m_a,this.m_eSquared,this.m_ptDistFrom.x,this.m_ptDistFrom.y,t.x,t.y,this.m_minGeodeticDist,null,null,this.m_distCurveType),this.m_minGeodeticDist.val}}calculateAndUpdateSegmentLength(){switch(this.m_segCurveType){case 0:case 2:case 1:case 3:i.I.geodeticDistance(this.m_a,this.m_eSquared,this.m_segStartPt.x,this.m_segStartPt.y,this.m_segEndPt.x,this.m_segEndPt.y,this.m_geodeticLength,this.m_az12,null,this.m_segCurveType);break;case 4:this.m_geodeticLength.val=s.P.distance(this.m_segStartPt,this.m_segEndPt);break;default:(0,s.p)("Invalid curve type")}}[Symbol.dispose](){this.m_geodeticLength[Symbol.dispose](),this.m_az12[Symbol.dispose](),this.m_minGeodeticDist[Symbol.dispose]()}}Symbol.dispose;class u{constructor(e,t,n,i,a=100){this.m_startPt=e.clone(),this.m_endPt=t.clone(),this.m_cE2=i,this.m_cE=Math.sqrt(this.m_cE2),this.m_c1By2e=1/(2*this.m_cE),this.m_cRpu=n.getGCS().getUnit().getUnitToBaseFactor(),this.isPcs=2===n.getCoordinateSystemType(),this.PEProjcs=n.getPECoordSys(),this.m_points=(0,s.r)(2*a,Number.NaN)}setSegmentEndPoints(e,t){this.m_startPt.assign(e),this.m_endPt.assign(t)}makeFunctor(){return e=>{const t=[0,0];t[0]=this.m_startPt.x*(1-e)+this.m_endPt.x*e,t[1]=this.m_startPt.y*(1-e)+this.m_endPt.y*e,this.isPcs&&i.J.projToGeogCenter(this.PEProjcs,1,t,0);const n=Math.sin(t[1]*this.m_cRpu);return 0===this.m_cE2?n:-Math.log((1-this.m_cE*n)/(1+this.m_cE*n))*this.m_c1By2e+n/(1-this.m_cE2*n*n)}}}function c(e,t,n,s,r){const o=(new i.f).execute(e,t,0,0,r);let _;_=s?(new i.G).execute(o,s,r):o;const h=1===n.getUnit().getUnitToBaseFactor()?Math.PI/180:1,m=new a.Envelope2D;_.queryEnvelope(m);const u=new a.Envelope2D,c=new a.Envelope2D,g=new a.Envelope2D;u.setCoords({xmin:m.xmin,ymin:75*h,xmax:m.xmax,ymax:90*h}),c.setCoords({xmin:m.xmin,ymin:-60*h,xmax:m.xmax,ymax:75*h}),g.setCoords({xmin:m.xmin,ymin:-90*h,xmax:m.xmax,ymax:-60*h}),u.inflateCoords(.01*u.width(),0),c.inflateCoords(.01*c.width(),0),g.inflateCoords(.01*g.width(),0);let p=0;return p+=l(_,u,n,r),p+=l(_,c,n,r),p+=l(_,g,n,r),p}function l(e,t,n,r){const o=(new i.K).execute(e,t,n,r);if(null!==o&&!o.isEmpty()){const e=new a.Envelope2D;o.queryEnvelope(e);const{first:t,second:_}=function(e,t){const n=function(e,t){const n=e.getUnit().getUnitToBaseFactor(),a=t.getCenter();a.scale(180*n/Math.PI);const r=new s.P;r.x=0,r.y=0;let o=0;if(0===o){a.y>45?(r.y=s.B,o=0):a.y<-45?(r.y=-s.B,o=1):a.x>=45&&a.x<135?(r.x=s.B,o=2):a.x>=135||a.x<-135?(r.x=s.B,o=3):a.x<-45&&a.x>=-135?(r.x=-s.B,o=4):(r.x=0,o=5);const e=n*Math.sqrt((0,s.c)(t.xmin-t.xmax)+(0,s.c)(t.ymin-t.ymax)),i=r.clone(),_=t.getCenter();if(_.scale(n),o<2&&(i.x=_.x),s.P.distance(i,_)+.5*e>s.B)return null}const _=g[o];if(null!==_&&_.getGCS().equalHorizontal(e))return _;const h=e.getText(),m=r.x,u=r.y;let c=0,l=-1;6!==o?l=i.ai.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:((0,s.b)(!1),c=0,l=i.ai.PE_PRJ_CYLINDRICAL_EQAREA);const p=(0,i.aE)("EqualAreaPCS");let d;l===i.ai.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?d=`PROJCS["${p}",${h},PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${m}],PARAMETER["Latitude_of_Origin",${u}],UNIT["Meter",1.0]]`:l===i.ai.PE_PRJ_CYLINDRICAL_EQAREA?d=`PROJCS["${p}",${h},PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${m}],PARAMETER["Standard_Parallel_1",${c}],PARAMETER["Latitude_of_Origin",${u}],UNIT["Meter",1.0]]`:(0,s.p)("getEqualAreaPcsFixed");const y=(0,i.a)(d);return g[o]&&g[o].destroy(),g[o]=y,y}(e,t);if(null!==n)return(0,s.D)(n,!1);const a=e.getText(),r=e.getUnit().getUnitToBaseFactor(),o=(t.xmin+t.width()/2)*r,_=(t.ymin+t.height()/2)*r;let h=0,m=0,u=-1;t.ymin*r>=75*Math.PI/180||t.ymax*r<=-60*Math.PI/180?u=i.ai.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:t.ymin>0||t.ymax<0?(h=(t.ymin+1/3*t.height())*r,m=(t.ymin+2/3*t.height())*r,u=i.ai.PE_PRJ_ALBERS):(h=(t.ymin+2/3*t.height())*r,u=i.ai.PE_PRJ_CYLINDRICAL_EQAREA);const c=(0,i.aE)("EqualAreaPCS");let l;return u===i.ai.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?l=`PROJCS["${c}",${a},PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${o}],PARAMETER["Latitude_of_Origin",${_}],UNIT["Meter",1.0]]`:u===i.ai.PE_PRJ_ALBERS?l=`PROJCS["${c}",${a},PROJECTION["Albers"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${o}],PARAMETER["Standard_Parallel_1",${h}],PARAMETER["Standard_Parallel_2",${m}],PARAMETER["Latitude_of_Origin",${_}],UNIT["Meter",1.0]]`:u===i.ai.PE_PRJ_CYLINDRICAL_EQAREA?l=`PROJCS["${c}",${a},PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${o}],PARAMETER["Standard_Parallel_1",${h}],PARAMETER["Latitude_of_Origin",${_}],UNIT["Meter",1.0]]`:(0,s.p)("getEqualAreaPCSInstance"),(0,s.D)((0,i.a)(l),!0)}(n,e),h=(0,i.N)(n,t,null),m=(new i.G).execute(o,h,r).calculateArea2D();return _&&t.destroy(),m}return 0}const g=[null,null,null,null,null,null,null];class p{getOperatorType(){return 10314}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}execute(e,t,n){if(0===t.getCoordinateSystemType()&&(0,s.a)(""),e.isEmpty()||e.getDimension()<2)return 0;if((0,s.v)(e),e.getGeometryType()===s.G.enumEnvelope){const s=new i.P;return s.addEnvelope(e,!1),this.execute(s,t,n)}let _=e;e.getDescription().getAttributeCount()>1&&(_=e.clone(),_.dropAllAttributes());const h=(new i.f).execute(_,0,t.getTolerance(0),0,n);let m=null;const l=t.getGCS();l!==t&&(m=(0,i.N)(t,l));let g=(new i.d).execute(h,t,!1,n);return g.isEmpty()?0:(g===e&&(g=e.clone()),t.isPannable()?function(e,t,n){const o=new a.Envelope2D;e.queryEnvelope(o);const _=(0,r.c)(t,o,!0).total(),h=t.getPannableExtent();h.xmin=o.xmin-10*_,h.xmax=o.xmax+10*_;const m=(new i.K).execute(e,h,t,n).getImpl().querySegmentIterator();m.stripAttributes();const c=(0,i.y)();t.querySpheroidData(c);const l=c.e2,g=0===l?2:1,p=new s.P(0,0),d=new s.P(0,0),y=new s.K(0),P=new u(p,d,t,l,100);for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment();p.assign(e.getStartXY()),d.assign(e.getEndXY()),P.setSegmentEndPoints(p,d);const t=(0,i.aD)(6,0,1,1e-12,1e-15,P.makeFunctor());y.pe((d.x-p.x)*t)}const f=c.majorSemiAxis;return g*f*f*(1-l)*Math.PI*y.getResult()/t.getPannableExtent().width()}(g,t,n):function(e,t,n,i,a){const r=function(e,t,n){const i=e.calculateLength2D(),a=(new o.O).execute(e,t,n)/25e3,r=i/e.getSegmentCount()*2;let _=Math.min(r,i/a);return 0===_&&(_=1),(0,s.D)(_,i/_)}(e,t,a);let _=c(e,r.first,n,i,a),h=1,m=0,u=0;do{if(h++,r.first*=.5,r.first<50*t.getTolerance(0))return _;r.second*=2,u=c(e,r.first,n,i,a),m=Math.abs(u-_),_=u}while(Math.abs(_)>1&&m>1e-8*Math.abs(_)&&(r.second<65e3&&h<8||h<4));return u}(g,t,l,m,n))}}function d(){return{m_p_PCS:new s.P,m_factor:Number.NaN,setValues:y,assign:P}}function y(e,t){this.m_factor=e,this.m_p_PCS.assign(t)}function P(e){this.m_factor=e.m_factor,this.m_p_PCS.assign(e.m_p_PCS)}class f{constructor(e,t,n,i){this.m_ptStart=new r.d,this.m_ptEnd=new r.d,this.m_ptStart.assign(t),this.m_ptEnd.assign(n),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y,this.m_e=Math.sqrt(e),this.m_e2=e,this.m_c1MinusE2=1-e;const a=Math.sin(i);let o;o=0===this.m_e2?2*a:a*((0,s.R)(this.m_e*a)+1/(1-this.m_e2*a*a)),this.m_baseA=o}setSegmentEndPoints(e,t){this.m_ptStart.assign(e),this.m_ptEnd.assign(t),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y}makeFunctor(){return e=>{const t=1-e,n=t*this.m_ptStart.x+e*this.m_ptEnd.x,i=t*this.m_ptStart.y+e*this.m_ptEnd.y,a=t*this.m_ptStart.z+e*this.m_ptEnd.z,r=n*n+i*i,o=a/Math.sqrt(a*a+this.m_c1MinusE2*this.m_c1MinusE2*r);let _;return _=0===this.m_e2?2*o:o*((0,s.R)(this.m_e*o)+1/(1-this.m_e2*o*o)),(this.m_deltaY*n-this.m_deltaX*i)/r*(_-this.m_baseA)}}}function E(){return{sin_phi:Number.NaN,one_p_sin_phi:Number.NaN,one_m_sin_phi:Number.NaN,one_m_e_2_sin_2_phi:Number.NaN,sin_half_phi_pf:Number.NaN,sin_half_phi_pz:Number.NaN,sin_half_asin_e_sin_phi_pf:Number.NaN,sin_half_asin_e_sin_phi_pz:Number.NaN,atanh_sin_phi:Number.NaN,atanh_esin_phi:Number.NaN,make_negative:!1,initialize:S,changeSign:x,assign:v,clone:N}}function S(e,t,n,s){const i=.5*e;this.sin_phi=Math.sin(e);const a=t*this.sin_phi,r=.5*Math.asin(a);this.one_p_sin_phi=1+this.sin_phi,this.one_m_sin_phi=1-this.sin_phi,this.one_m_e_2_sin_2_phi=(1+a)*(1-a),this.sin_half_phi_pf=Math.sin(i+n),this.sin_half_phi_pz=Math.sin(i+s),this.sin_half_asin_e_sin_phi_pf=Math.sin(r+n),this.sin_half_asin_e_sin_phi_pz=Math.sin(r+s),this.atanh_sin_phi=Math.log(this.sin_half_phi_pf/this.sin_half_phi_pz),this.atanh_esin_phi=Math.log(this.sin_half_asin_e_sin_phi_pf/this.sin_half_asin_e_sin_phi_pz)}function x(){this.sin_phi=-this.sin_phi;let e=this.one_p_sin_phi;this.one_p_sin_phi=this.one_m_sin_phi,this.one_m_sin_phi=e,e=this.sin_half_phi_pf,this.sin_half_phi_pf=this.sin_half_phi_pz,this.sin_half_phi_pz=e,e=this.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pf=this.sin_half_asin_e_sin_phi_pz,this.sin_half_asin_e_sin_phi_pz=e,this.atanh_sin_phi=-this.atanh_sin_phi,this.atanh_esin_phi=-this.atanh_esin_phi}function v(e){this.sin_phi=e.sin_phi,this.one_p_sin_phi=e.one_p_sin_phi,this.one_m_sin_phi=e.one_m_sin_phi,this.one_m_e_2_sin_2_phi=e.one_m_e_2_sin_2_phi,this.sin_half_phi_pf=e.sin_half_phi_pf,this.sin_half_phi_pz=e.sin_half_phi_pz,this.sin_half_asin_e_sin_phi_pf=e.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pz=e.sin_half_asin_e_sin_phi_pz,this.atanh_sin_phi=e.atanh_sin_phi,this.atanh_esin_phi=e.atanh_esin_phi,this.make_negative=e.make_negative}function N(){return{...this}}class D{constructor(e,t,n){this.m_transformPCS2GCS=null,this.m_scaleToRadians=new h.T,this.m_scaleToDegrees=new h.T,this.m_progressTracker=n,(0,s.b)(4!==t),this.m_curveType=t,this.m_inputSR=e,e&&0!==e.getCoordinateSystemType()||(0,s.a)(""),this.m_inputGCS=e.getGCS(),this.m_a=0,this.m_eSquared=0,this.m_b=0,this.m_rpu=0}executePolygonGeodeticArea(e){let t,n=e.clone();if(n.dropAllAttributes(),e.hasNonLinearSegments()&&(n=(new i.f).execute(n,0,this.m_inputSR.getTolerance(0),0,this.m_progressTracker)),this.m_inputSR.isPannable()){const e=new a.Envelope2D;n.queryEnvelope(e);const t=this.m_inputSR.getPannableExtent();if(!t.containsEnvelope(e)){const a=t.getCenterX()-e.getCenterX(),r=new h.T;r.setShiftCoords(a,0),n.applyTransformation(r),e.move(a,0);const o=new s.E;t.queryIntervalX(o);const _=new s.E;e.queryIntervalX(_),n=o.contains(_)?(0,i.A)(n,this.m_inputSR):(new i.G).foldInto360RangeGeodetic(n,this.m_inputSR,this.m_curveType)}}if(this.m_transformPCS2GCS?(n=(new i.d).execute(n,this.m_inputSR,!1,this.m_progressTracker),t=n.createInstance(),(0,i.F)(this.m_transformPCS2GCS,n,t,this.m_progressTracker)||(t=(new i.G).execute(n,this.m_transformPCS2GCS,this.m_progressTracker))):t=(new i.d).execute(n,this.m_inputGCS,!1,this.m_progressTracker),t.isEmpty())return 0;if(1===this.m_curveType){const e=(0,i.y)();return this.m_inputGCS.querySpheroidData(e),this.m_a=e.majorSemiAxis,this.m_eSquared=e.e2,this.loxodromeArea(t)}const r=t.getImpl();this.m_rpu=this.m_inputGCS.getUnit().getUnitToBaseFactor(),this.m_scaleToRadians.setScale(this.m_rpu),r.applyTransformation(this.m_scaleToRadians),this.m_scaleToDegrees=this.m_scaleToRadians,this.m_scaleToDegrees.invertThis();const o=(0,i.y)();if(this.m_inputGCS.querySpheroidData(o),this.m_a=o.majorSemiAxis,this.m_b=o.minorSemiAxis,this.m_eSquared=o.e2,2===this.m_curveType)return this.executeClippedPolygonGreatEllipticArea(t);{const e={stack:[],error:void 0,hasError:!1};try{const n=i.aF.unit(9101),s=this.m_inputGCS.getPECoordSys(),a=(0,_.a)(e,s.cloneAlterUnits(n),!1);let r,o,h=this.executeClippedPolygonGeodeticArea(t,a,0),m=0;do{m++,r=this.executeClippedPolygonGeodeticArea(t,a,m),o=Math.abs(r-h),h=r}while(Math.abs(r)>1&&o>1e-8*Math.abs(r)&&m<7);return r}catch(t){e.error=t,e.hasError=!0}finally{(0,_.b)(e)}}}executeClippedPolygonGeodeticArea(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const o=new a.Envelope2D;e.queryEnvelope(o);const h=(0,_.a)(r,this.getEqualAreaPCSInstance(t,o),!1),m=e.clone();(0,i.aG)(h,m);const u=50,c=m.getImpl().getAttributeStreamRef(0),l=e.getImpl().getAttributeStreamRef(0),g=(0,_.a)(r,new i.H,!1),p=(0,_.a)(r,new i.H,!1),y=40,P=[0,0],f=(0,s.y)(d,y),E=(0,s.r)(y,-1),S=d(),x=d();let v,N;const D=h;let A=m.calculateArea2D();const M=new s.K(0),T=.5*Math.PI,C=1e-10*Math.abs(A)+1e-6,q=e.getPathCount();let b,I,w,R;const G=new s.P,B=new s.P,L=new s.P,F=new s.P,k=new s.P,O=new s.P;let z,Y;for(I=e.getPathStart(0),b=0;b<q;b++,I=w)for(w=e.getPathEnd(b),c.queryPoint2D(w-1<<1,L),l.queryPoint2D(w-1<<1,G),Math.abs(G.y)>T&&(G.y=(0,s.O)(T,G.y)),R=I;R<w;R++,L.assign(F),G.assign(B)){if(c.queryPoint2D(R<<1,F),l.queryPoint2D(R<<1,B),Math.abs(B.y)>T&&(B.y=(0,s.O)(T,B.y)),z=s.P.distance(L,F),z<u||0===G.y&&0===B.y)continue;i.I.geodeticDistance(this.m_a,this.m_eSquared,G.x,G.y,B.x,B.y,g,p,null,this.m_curveType);const e=g.val,t=p.val;for(S.setValues(0,L),x.setValues(1,F),N=n,f[0].assign(x),E[0]=n,v=0;v>=0;){Y=.5*(S.m_factor+x.m_factor),i.I.geodeticCoordinate(this.m_a,this.m_eSquared,G.x,G.y,e*Y,t,g,p,this.m_curveType),k.x=g.val,k.y=p.val,P[0]=k.x,P[1]=k.y,i.J.geogToProj(D,1,P),O.x=P[0],O.y=P[1];const n=.5*-O.offset(S.m_p_PCS,x.m_p_PCS)*s.P.distance(S.m_p_PCS,x.m_p_PCS);if(M.pe(n),Math.abs(n)>C||Math.abs(n)>0&&N>0)x.setValues(Y,O),v++,f[v].assign(x),Math.abs(n)<=C?(N--,E[v-1]=N,E[v]=N):(N=E[v-1],E[v]=N);else{if(v<=0)break;S.assign(x),v--,x.assign(f[v]),N=E[v]}}}return A+=M.getResult(),Math.abs(A)}catch(e){r.error=e,r.hasError=!0}finally{(0,_.b)(r)}}executeClippedPolygonGreatEllipticArea(e){const t=[],n=[],o=new s.P,_=new s.P,h=(0,i.Q)(1,this.m_eSquared,new s.P(0,.5*Math.PI)),m=new s.K(0),u=new s.K(0),c=new s.K(0),l=new r.d,g=new r.d,p=new a.Envelope2D;e.queryLooseEnvelope(p);let d=0;p.containsCoords(p.xmin,0)||(d=Math.abs(p.ymin)<Math.abs(p.ymax)?p.ymin:p.ymax);const y=new f(this.m_eSquared,l,g,d),P=this.m_a*this.m_a,E=e.getImpl().querySegmentIterator();for(E.stripAttributes();E.nextPath();)for(;E.hasNextSegment();){const e=E.nextSegment();o.assign(e.getStartXY()),_.assign(e.getEndXY()),_.x-o.x>Math.PI?o.x+=2*Math.PI:_.x-o.x<-Math.PI&&(_.x+=2*Math.PI),this.splitSegmentCrossingItegralThreshold(e,t,n);for(let e of t)l.assign((0,i.Q)(this.m_a,this.m_eSquared,e.getStartXY())),g.assign((0,i.Q)(this.m_a,this.m_eSquared,e.getEndXY())),y.setSegmentEndPoints(l,g),this.adaptiveIntegrationWithRomberg(y,m);for(let e of n){let t=e.getStartXY(),n=e.getEndXY(),a=d;t.y<0&&(n=(0,s.f)(t,t=n),t.y=-t.y,n.y=-n.y,a=-a);const o=(0,i.Q)(1,this.m_eSquared,t),_=(0,i.Q)(1,this.m_eSquared,n),m=Math.min(t.y,n.y),l=(0,i.aH)(this.m_eSquared,t.x,n.x,a,m);u.pe(l);const g=Math.abs((0,i.aH)(this.m_eSquared,t.x,n.x,m,s.B)),p=new r.d;p.setSub(o,h);const y=new r.d;y.setSub(_,h);const f=new r.d;f.setCrossProductVector(p,y);let E=P*(g-.5*f.length());E=(0,s.O)(E,n.x-t.x),c.pe(E)}t.length=0,n.length=0}return c.getResult()+P*(.5*(1-this.m_eSquared)*m.getResult()+u.getResult())}getEqualAreaPCSInstance(e,t){const n=t.getCenterX();let a,r;const o=t.height();let _,h;(_=t.ymin>45*Math.PI/180||t.ymax<45*-Math.PI/180)?a=(0,s.O)(.5*Math.PI,t.getCenterY()):(a=t.getCenterY(),r=t.ymin+o*(2/3));const m=(0,i.aE)("EqualAreaPCS"),u=e.toString();return h=_?i.aF.fromString(i.ai.PE_TYPE_PROJCS,`PROJCS["${m}", ${u}, PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing", 0],PARAMETER["Central_Meridian", ${n}], PARAMETER["Latitude_of_Origin", ${a}], UNIT["Meter",1.0]]`):i.aF.fromString(i.ai.PE_TYPE_PROJCS,`PROJCS["${m}", ${u}, PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting", 0],PARAMETER["False_Northing", 0],PARAMETER["Central_Meridian", ${n}],PARAMETER["Standard_Parallel_1", ${r}],PARAMETER["Latitude_of_Origin", ${a}],UNIT["Meter",1.0]]`),h}splitSegmentCrossingItegralThreshold(e,t,n){const a=100,o=400,_=(0,i.Q)(this.m_a,this.m_eSquared,new s.P(0,s.B)),h=(0,i.Q)(this.m_a,this.m_eSquared,new s.P(0,-s.B)),m=this.splitSegmentPassingThroughPole(e);for(let e of m){const m=e.getStartXY(),u=e.getEndXY(),c=(0,i.Q)(this.m_a,this.m_eSquared,m),l=(0,i.Q)(this.m_a,this.m_eSquared,u),g=new s.P,p=new r.d;let d=r.d.sqrDistance(_,c),y=r.d.sqrDistance(c,l);if(d<=a){if(!(y>o)){n.push(new i.L({start:m,end:u}));continue}p.assign(l.sub(c)),p.normalizeThis(),p.assign(c.add(p.mul(20))),g.assign((0,i.ad)(this.m_a,this.m_eSquared,p)),n.push(new i.L({start:m,end:g})),m.assign(g)}if(c.assign((0,i.Q)(this.m_a,this.m_eSquared,m)),d=r.d.sqrDistance(_,l),y=r.d.sqrDistance(c,l),d<=a){if(!(y>o)){n.push(new i.L({start:m,end:u}));continue}p.assign(l.sub(c)),p.normalizeThis(),p.assign(l.sub(p.mul(20))),g.assign((0,i.ad)(this.m_a,this.m_eSquared,p)),n.push(new i.L({start:g,end:u})),u.assign(g)}if(c.assign((0,i.Q)(this.m_a,this.m_eSquared,m)),l.assign((0,i.Q)(this.m_a,this.m_eSquared,u)),d=r.d.sqrDistance(h,c),y=r.d.sqrDistance(c,l),d<=a){if(!(y>o)){n.push(new i.L({start:m,end:u}));continue}p.assign(l.sub(c)),p.normalizeThis(),p.assign(c.add(p.mul(20))),g.assign((0,i.ad)(this.m_a,this.m_eSquared,p)),n.push(new i.L({start:m,end:g})),m.assign(g)}if(c.assign((0,i.Q)(this.m_a,this.m_eSquared,m)),l.assign((0,i.Q)(this.m_a,this.m_eSquared,u)),d=r.d.sqrDistance(h,l),y=r.d.sqrDistance(c,l),d<=a){if(!(y>o)){n.push(new i.L({start:m,end:u}));continue}p.assign(l.sub(c)),p.normalizeThis(),p.assign(l.sub(p.mul(20))),g.assign((0,i.ad)(this.m_a,this.m_eSquared,p)),n.push(new i.L({start:g,end:u})),u.assign(g)}t.push(new i.L({start:m,end:u}))}}splitSegmentPassingThroughPole(e){const t={stack:[],error:void 0,hasError:!1};try{const n=[],a=new r.d,o=new r.d,h=new r.d,u=new s.P,c=20,l=3.124139361,g=10,p=e.getStartXY(),d=e.getEndXY(),y=(0,_.a)(t,new i.H,!1);if(i.I.geodeticDistance(this.m_a,this.m_eSquared,p.x,p.y,d.x,d.y,y,null,null,2),Math.abs(d.x-p.x)>l&&y.val>c){const e=new m(new s.P(0,90),p.divide(this.m_rpu),d.divide(this.m_rpu),this.m_inputGCS,2,2);let t=(0,i.al)(e.makeFunctor(),0,1,1e-10);if(t.second<=g&&t.first>0&&t.first<1)return a.assign((0,i.Q)(this.m_a,this.m_eSquared,p)),o.assign((0,i.Q)(this.m_a,this.m_eSquared,d)),(0,s.Q)(a,o,t.first,h),u.assign((0,i.ad)(this.m_a,this.m_eSquared,h)),n.push(new i.L({start:p,end:u})),n.push(new i.L({start:u,end:d})),n;if(e.setPointDistFrom(new s.P(0,-90)),t=(0,i.al)(e.makeFunctor(),0,1,1e-10),t.second<=g&&t.first>0&&t.first<1)return a.assign((0,i.Q)(this.m_a,this.m_eSquared,p)),o.assign((0,i.Q)(this.m_a,this.m_eSquared,d)),(0,s.Q)(a,o,t.first,h),u.assign((0,i.ad)(this.m_a,this.m_eSquared,h)),n.push(new i.L({start:p,end:u})),n.push(new i.L({start:u,end:d})),n}return n.push(new i.L({start:p,end:d})),n}catch(e){t.error=e,t.hasError=!0}finally{(0,_.b)(t)}}adaptiveIntegrationWithRomberg(e,t){const n=e.makeFunctor();let s=0,a=1,r=n(s),o=n(a);const _=1e-17,h=1e-14;let m=(s+a)/2,u=n(m),c=Math.abs(u-r),l=Math.abs(o-u),g=0;for(;g++<32&&(c/l<.1||l/c<.1);)c<l?(t.pe((0,i.aD)(5,s,m,h,_,n)),s=m,r=u):(t.pe((0,i.aD)(5,m,a,h,_,n)),a=m,o=u),m=(s+a)/2,u=Math.abs(n(m)),c=Math.abs(u-r),l=Math.abs(o-u);t.pe((0,i.aD)(5,s,a,h,_,n))}loxodromeAreaHemi(e,t,n,i,a){const r=n.clone(),o=a.clone();let _,h,m,u,c,l,g,p,d,y,P,f,E,S,x,v;return r.make_negative&&r.changeSign(),o.make_negative&&o.changeSign(),P=i-t,1===Math.abs(r.sin_phi)||1===Math.abs(o.sin_phi)?e.half_qp*P:r.sin_phi===o.sin_phi?(y=.5*e.one_m_e_2*r.sin_phi*(1/r.one_m_e_2_sin_2_phi+(0,s.R)(e.e*r.sin_phi))*P,y):(x=Math.log(o.sin_half_phi_pf*r.sin_half_phi_pz/(o.sin_half_phi_pz*r.sin_half_phi_pf)),v=Math.log(o.sin_half_asin_e_sin_phi_pf*r.sin_half_asin_e_sin_phi_pz/(o.sin_half_asin_e_sin_phi_pz*r.sin_half_asin_e_sin_phi_pf)),1===this.m_eSquared?(c=0,_=.5*(x+o.sin_phi/o.one_m_e_2_sin_2_phi-r.sin_phi/r.one_m_e_2_sin_2_phi),h=0):(c=-2*e.atanh_e_over_e*(Math.log(o.one_p_sin_phi/r.one_p_sin_phi)-e.e*v),_=(x-e.e*v)/e.one_m_e_2,h=(Math.log(o.one_m_e_2_sin_2_phi/r.one_m_e_2_sin_2_phi)+c/e.atanh_e_over_e)/e.one_m_e_2),m=-v*(r.atanh_esin_phi+o.atanh_esin_phi),u=1/r.one_m_e_2_sin_2_phi-1/o.one_m_e_2_sin_2_phi,l=(0,s.T)(o.one_m_sin_phi/e.one_p_e,e.e)-(0,s.T)(r.one_m_sin_phi/e.one_p_e,e.e),g=(0,s.T)(o.one_p_sin_phi/e.one_p_e,e.e)-(0,s.T)(r.one_p_sin_phi/e.one_p_e,e.e),p=(0,s.T)(r.one_m_sin_phi/-e.one_m_e,e.e)-(0,s.T)(o.one_m_sin_phi/-e.one_m_e,e.e),d=(0,s.T)(r.one_p_sin_phi/-e.one_m_e,e.e)-(0,s.T)(o.one_p_sin_phi/-e.one_m_e,e.e),y=.25/_*(h+m+u+c+.5*(l+g+p+d)),y+=e.half_qp,f=.5*e.one_m_e_2*r.sin_phi*(1/r.one_m_e_2_sin_2_phi+(0,s.R)(e.e*r.sin_phi)),E=.5*e.one_m_e_2*o.sin_phi*(1/o.one_m_e_2_sin_2_phi+(0,s.R)(e.e*o.sin_phi)),E<f&&(S=f,f=E,E=S),y<f&&(y=f),y>E&&(y=E),y*=P,y)}loxodromeArea(e){const t=Math.PI/180;let n=0;const i={e:Number.NaN,one_p_e:Number.NaN,one_m_e:Number.NaN,one_m_e_2:Number.NaN,atanh_e_over_e:Number.NaN,half_qp:Number.NaN,f:Number.NaN,z:Number.NaN},a=E(),r=E();i.e=Math.sqrt(this.m_eSquared),i.one_p_e=1+i.e,i.one_m_e=1-i.e,i.one_m_e_2=1-this.m_eSquared,i.atanh_e_over_e=(0,s.R)(i.e),this.m_eSquared>=1?i.half_qp=1:i.half_qp=.5*(1+i.atanh_e_over_e*i.one_m_e_2),i.f=.25*Math.PI,i.z=.75*Math.PI,r.initialize(0,i.e,i.f,i.z);const o=e.getPathCount(),_=new s.P,h=new s.P,m=e.getImpl().getAttributeStreamRef(0);for(let s=0;s<o;s++){const o=e.getPathStart(s),u=e.getPathEnd(s);if(!(u-o<=1)){m.queryPoint2D(2*(u-1),_);for(let e=o;e<u;e++){m.queryPoint2D(2*e,h);const s=_.y*t,u=h.y*t;if(e===o?(a.initialize(s,i.e,i.f,i.z),a.make_negative=!1):a.assign(r),r.initialize(u,i.e,i.f,i.z),r.make_negative=!1,_.y*h.y<0){if(_.y>=90&&h.y<=-90||h.y>=90&&_.y<=-90)return Number.NaN;const e=E();e.initialize(0,i.e,i.f,i.z),e.make_negative=!1;const o=a.atanh_sin_phi-i.e*a.atanh_esin_phi,m=r.atanh_sin_phi-i.e*r.atanh_esin_phi,u=(m*_.x-o*h.x)/(m-o);s<0?(a.make_negative=!0,n-=this.loxodromeAreaHemi(i,_.x*t,a,u*t,e),a.make_negative=!1,n+=this.loxodromeAreaHemi(i,u*t,e,h.x*t,r)):(n+=this.loxodromeAreaHemi(i,_.x*t,a,u*t,e),r.make_negative=!0,n-=this.loxodromeAreaHemi(i,u*t,e,h.x*t,r),r.make_negative=!1)}else _.y>=0?n+=this.loxodromeAreaHemi(i,_.x*t,a,h.x*t,r):(a.make_negative=!0,r.make_negative=!0,n-=this.loxodromeAreaHemi(i,_.x*t,a,h.x*t,r),a.make_negative=!1,r.make_negative=!1);_.assign(h)}}}return this.m_a*n*this.m_a}calculate(e){if(e.isEmpty()||e.getDimension()<2)return 0;if(e.getGeometryType()===s.G.enumEnvelope){const t=new i.P;return t.addEnvelope(e,!1),this.calculate(t)}return this.m_inputSR!==this.m_inputGCS&&null===this.m_transformPCS2GCS&&(this.m_transformPCS2GCS=(0,i.N)(this.m_inputSR,this.m_inputGCS,null)),this.executePolygonGeodeticArea(e)}}class A{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}execute(e,t,n,i){return(0,s.v)(e),4===n?(new p).execute(e,t,i):new D(t,n,i).calculate(e)}}}}]);