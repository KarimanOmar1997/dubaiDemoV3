"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[3658],{2589:(e,t,n)=>{function r(){return[0,0,0]}function o(e){return[e[0],e[1],e[2]]}function a(e,t,n){return[e,t,n]}function i(e,t,n){return[e,t,n]}function u(e,t=[0,0,0]){const n=Math.min(3,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}n.d(t,{O:()=>c,U:()=>s,Z:()=>l,a:()=>u,b:()=>o,c:()=>r,d:()=>f,e:()=>d,f:()=>a,g:()=>i});const l=[0,0,0],c=a(1,1,1),s=a(1,0,0),f=a(0,1,0),d=a(0,0,1)},18527:(e,t,n)=>{function r(){return 1e-6}n.d(t,{R:()=>o,a:()=>l,g:()=>r,t:()=>u});const o=Math.random,a=Math.PI/180,i=180/Math.PI;function u(e){return e*a}function l(e){return e*i}},23658:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(32773),o=n(92349),a=n(80401),i=n(26809),u=n(74578),l=n(7969),c=n(47387),s=n(39928),f=n(8401),d=n(14232),h=n(56887);function C(e,t,n,r){const{rendererJSON:o,isRGBRenderer:a}=e;let i=null,u=null;if(t&&a)i=t;else if(t&&"pointCloudUniqueValueRenderer"===o?.type){u=d.A.fromJSON(o);const e=u.colorUniqueValueInfos;i=new Uint8Array(3*r);const n=A(u.fieldTransformType);for(let o=0;o<r;o++){const r=(n?n(t[o]):t[o])+"";for(let t=0;t<e.length;t++)if(e[t].values.includes(r)){i[3*o]=e[t].color.r,i[3*o+1]=e[t].color.g,i[3*o+2]=e[t].color.b;break}}}else if(t&&"pointCloudStretchRenderer"===o?.type){u=f.A.fromJSON(o);const e=u.stops;i=new Uint8Array(3*r);const n=A(u.fieldTransformType);for(let o=0;o<r;o++){const r=n?n(t[o]):t[o],a=e.length-1;if(r<e[0].value)i[3*o]=e[0].color.r,i[3*o+1]=e[0].color.g,i[3*o+2]=e[0].color.b;else if(r>=e[a].value)i[3*o]=e[a].color.r,i[3*o+1]=e[a].color.g,i[3*o+2]=e[a].color.b;else for(let t=1;t<e.length;t++)if(r<e[t].value){const n=(r-e[t-1].value)/(e[t].value-e[t-1].value);i[3*o]=e[t].color.r*n+e[t-1].color.r*(1-n),i[3*o+1]=e[t].color.g*n+e[t-1].color.g*(1-n),i[3*o+2]=e[t].color.b*n+e[t-1].color.b*(1-n);break}}}else if(t&&"pointCloudClassBreaksRenderer"===o?.type){u=s.A.fromJSON(o);const e=u.colorClassBreakInfos;i=new Uint8Array(3*r);const n=A(u.fieldTransformType);for(let o=0;o<r;o++){const r=n?n(t[o]):t[o];for(let t=0;t<e.length;t++)if(r>=e[t].minValue&&r<=e[t].maxValue){i[3*o]=e[t].color.r,i[3*o+1]=e[t].color.g,i[3*o+2]=e[t].color.b;break}}}else i=new Uint8Array(3*r).fill(255);if(n&&u?.colorModulation){const e=u.colorModulation.minValue,t=u.colorModulation.maxValue,o=.3;for(let a=0;a<r;a++){const r=n[a],u=r>=t?1:r<=e?o:o+(1-o)*(r-e)/(t-e);i[3*a]=u*i[3*a],i[3*a+1]=u*i[3*a+1],i[3*a+2]=u*i[3*a+2]}}return i}function g(e,t,n){return e?.attributeInfo.useElevation?t?function(e,t){const n=new Float64Array(t);for(let r=0;r<t;r++)n[r]=e[3*r+2];return n}(t,n):null:e?.attributeInfo.storageInfo?(0,h.r)(e.attributeInfo.storageInfo,e.buffer,n,!0):null}function A(e){switch(e){default:case null:case"none":return e=>e;case"low-four-bit":return e=>15&e;case"high-four-bit":return e=>(240&e)>>4;case"absolute-value":return e=>Math.abs(e);case"modulo-ten":return e=>e%10}}function E(e){let t=0;for(const n of e||[])t|=1<<n;return t}var M=n(23937);n(2589),n(18527),n(91276),n(32816),n(41390),n(20266),n(90740),n(69421),n(50704),n(40499),n(93181),n(13671),n(91047),n(36544),n(48064),n(6407),n(85176),n(36555),n(58498),n(29298),n(35819),n(45371),n(61532),n(80959),n(19247),n(36172),n(99924),n(69763),n(93804),n(96221),n(18683),n(64604),n(29512),n(99063),n(1178),n(56273),n(16699),n(46728),n(88663),n(21476),n(22858),n(41740),n(52731),n(35902),n(24330),n(24079),n(97538),n(62482),n(69277),n(29222),n(47812),n(85914),n(77641),n(46484),n(4685),n(8844);class b{transform(e){const t=this._transform(e),n=[t.points.buffer,t.rgb.buffer];null!=t.pointIdFilterMap&&n.push(t.pointIdFilterMap.buffer);for(const e of t.attributes)"buffer"in e.values&&(0,r.o)(e.values.buffer)&&e.values.buffer!==t.rgb.buffer&&n.push(e.values.buffer);return Promise.resolve({result:t,transferList:n})}_transform(e){const t=function(e,t){if(null==e.encoding||""===e.encoding){const n=(0,h.c)(t,e);if(null==n.vertexAttributes.position)return;const r=(0,h.a)(t,n.vertexAttributes.position),o=n.header.fields,a=[o.offsetX,o.offsetY,o.offsetZ],i=[o.scaleX,o.scaleY,o.scaleZ],u=r.length/3,l=new Float64Array(3*u);for(let e=0;e<u;e++)l[3*e]=r[3*e]*i[0]+a[0],l[3*e+1]=r[3*e+1]*i[1]+a[1],l[3*e+2]=r[3*e+2]*i[2]+a[2];return l}if("lepcc-xyz"===e.encoding)return(0,h.d)(t).result}(e.schema,e.geometryBuffer);let n=t.length/3,a=null;const s=new Array,f=g(e.primaryAttributeData,t,n);null!=e.primaryAttributeData&&f&&s.push({attributeInfo:e.primaryAttributeData.attributeInfo,values:f});const d=g(e.modulationAttributeData,t,n);null!=e.modulationAttributeData&&d&&s.push({attributeInfo:e.modulationAttributeData.attributeInfo,values:d});let A=C(e.rendererInfo,f,d,n);if(e.filterInfo&&e.filterInfo.length>0&&null!=e.filterAttributesData){const o=e.filterAttributesData.filter(r.i).map((e=>{const r=g(e,t,n),o={attributeInfo:e.attributeInfo,values:r};return s.push(o),o}));a=new Uint32Array(n),n=function(e,t,n,r,o){const a=e.length/3;let i=0;for(let u=0;u<a;u++){let a=!0;for(let e=0;e<r.length&&a;e++){const{filterJSON:t}=r[e],n=o[e].values[u];switch(t.type){case"pointCloudValueFilter":{const e="exclude"===t.mode;t.values.includes(n)===e&&(a=!1);break}case"pointCloudBitfieldFilter":{const e=E(t.requiredSetBits),r=E(t.requiredClearBits);(n&e)===e&&0===(n&r)||(a=!1);break}case"pointCloudReturnFilter":{const e=15&n,r=n>>>4&15,o=r>1,i=1===e,u=e===r;let l=!1;for(const e of t.includedReturns)if("last"===e&&u||"firstOfMany"===e&&i&&o||"lastOfMany"===e&&u&&o||"single"===e&&!o){l=!0;break}l||(a=!1);break}}}a&&(n[i]=u,e[3*i]=e[3*u],e[3*i+1]=e[3*u+1],e[3*i+2]=e[3*u+2],t[3*i]=t[3*u],t[3*i+1]=t[3*u+1],t[3*i+2]=t[3*u+2],i++)}return i}(t,A,a,e.filterInfo,o)}for(const r of e.userAttributesData){const e=g(r,t,n);s.push({attributeInfo:r.attributeInfo,values:e})}3*n<A.length&&(A=new Uint8Array(A.buffer.slice(0,3*n))),function(e,t,n){if(0!==n)for(let r=0;r<t;r++)e[3*r+2]+=n}(t,n,e.elevationOffset);const b=function(e,t,n,r,a){if(!(0,c.p)(e,r,0,e,a,0,t))throw new Error("Can't reproject");const l=(0,u.c)(n.center),s=(0,u.a)(),f=(0,u.a)(),d=(0,u.c)(n.halfSize);(0,o.c)(p,n.quaternion);const h=new Float32Array(3*t);for(let n=0;n<t;n++){let t=3*n;s[0]=e[t]-l[0],s[1]=e[t+1]-l[1],s[2]=e[t+2]-l[2],(0,i.r)(f,s,p),d[0]=Math.max(d[0],Math.abs(f[0])),d[1]=Math.max(d[1],Math.abs(f[1])),d[2]=Math.max(d[2],Math.abs(f[2])),h[t++]=s[0],h[t++]=s[1],h[t]=s[2]}return n.halfSize=d,h}(t,n,M.O.fromData(e.obbData),l.A.fromJSON(e.inSR),l.A.fromJSON(e.outSR));return{obbData:e.obbData,points:b,rgb:A,attributes:s,pointIdFilterMap:a}}}const p=(0,a.c)();function S(){return new b}},24330:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>g,c:()=>f,d:()=>M,e:()=>l,f:()=>a,g:()=>i,h:()=>c,i:()=>o,j:()=>C,p:()=>h,s:()=>A});const r={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function o(e){return!!r[e]||!!r[e.toLowerCase()]}function a(e){return r[e]??r[e.toLowerCase()]}function i(e){return[...a(e)]}function u(e,t,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?e+(t-e)*r:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function l(e,t,n,r=1){const o=(e%360+360)%360/360,a=n<=.5?n*(t+1):n+t-n*t,i=2*n-a;return[Math.round(255*u(i,a,o+1/3)),Math.round(255*u(i,a,o)),Math.round(255*u(i,a,o-1/3)),r]}function c(e){const t=e.length>5,n=t?8:4,r=(1<<n)-1,o=t?1:17,a=t?9===e.length:5===e.length;let i=Number("0x"+e.slice(1));if(isNaN(i))return null;const u=[0,0,0,1];let l;return a&&(l=i&r,i>>=n,u[3]=o*l/255),l=i&r,i>>=n,u[2]=o*l,l=i&r,i>>=n,u[1]=o*l,l=i&r,i>>=n,u[0]=o*l,u}function s(e){if("#"!==e[0]||isNaN(Number(`0x${e.slice(1)}`)))return null;switch(e.length){case 4:case 5:{const t=parseInt(e.slice(1,2),16),n=parseInt(e.slice(2,3),16),r=parseInt(e.slice(3,4),16),o=4===e.length?15:parseInt(e.slice(4),16);return[t+16*t,n+16*n,r+16*r,(o+16*o)/255]}case 7:case 9:return[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16),(7===e.length?255:parseInt(e.slice(7),16))/255];default:return null}}function f(e){const t=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(t){const e=t[2].split(/\s*,\s*/),n=t[1];if("rgb"===n&&3===e.length||"rgba"===n&&4===e.length){const t=e[0];if("%"===t.charAt(t.length-1)){const t=e.map((e=>2.56*parseFloat(e)));return 4===e.length&&(t[3]=parseFloat(e[3])),d(t)}return d(e.map((e=>parseFloat(e))))}if("hsl"===n&&3===e.length||"hsla"===n&&4===e.length)return l(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3]??"1"))}return null}function d(e){return e[0]=A(e[0]),e[1]=A(e[1]),e[2]=A(e[2]),e[3]=4===e.length?g(e[3]):1,e}function h(e){let t=o(e)?a(e):null;return t??=f(e),t??=s(e),t}function C(e){const t=h(e);return null!=t?[t[0]/255,t[1]/255,t[2]/255,t[3]]:null}function g(e){return E(e,0,1)}function A(e){return Math.round(E(e,0,255))}function E(e,t,n){return e=Number(e),isNaN(e)?n:e<t?t:e>n?n:e}const M=2.2},46728:(e,t,n)=>{n.d(t,{e:()=>i});var r=n(69763);Math.PI;const o=r.j.radius,a=r.j.eccentricitySquared,i={a1:o*a,a2:o*a*o*a,a3:o*a*a/2,a4:o*a*o*a*2.5,a5:o*a+o*a*a/2,a6:1-a};r.j.radius,r.j.flattening,r.k.radius,r.k.flattening,r.m.radius,r.m.flattening,r.m.radius},47387:(e,t,n)=>{n.r(t),n.d(t,{P:()=>r,a:()=>s,b:()=>l,c:()=>h,d:()=>f,e:()=>j,g:()=>c,i:()=>x,l:()=>E,p:()=>D,s:()=>P,w:()=>M});var r,o,a=n(16699),i=n(69763),u=n(46728);(o=r||(r={}))[o.UNKNOWN=0]="UNKNOWN",o[o.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",o[o.WGS84=2]="WGS84",o[o.WEB_MERCATOR=3]="WEB_MERCATOR",o[o.WGS84_ECEF=4]="WGS84_ECEF",o[o.CGCS2000=5]="CGCS2000",o[o.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",o[o.GCSMARS2000=7]="GCSMARS2000",o[o.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",o[o.GCSMOON2000=9]="GCSMOON2000",o[o.LON_LAT=10]="LON_LAT",o[o.PLATE_CARREE=11]="PLATE_CARREE";const l={[r.WGS84]:{[r.CGCS2000]:h,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:h,[r.SPHERICAL_ECEF]:m,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:M,[r.PLATE_CARREE]:b,[r.WGS84]:h,[r.WGS84_ECEF]:L},[r.CGCS2000]:{[r.CGCS2000]:h,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:h,[r.SPHERICAL_ECEF]:m,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:M,[r.PLATE_CARREE]:b,[r.WGS84]:h,[r.WGS84_ECEF]:L},[r.GCSMARS2000]:{[r.CGCS2000]:null,[r.GCSMARS2000]:h,[r.GCSMOON2000]:null,[r.LON_LAT]:h,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:R,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.GCSMOON2000]:{[r.CGCS2000]:null,[r.GCSMARS2000]:null,[r.GCSMOON2000]:h,[r.LON_LAT]:h,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:y,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.WEB_MERCATOR]:{[r.CGCS2000]:C,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:C,[r.SPHERICAL_ECEF]:g,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:h,[r.PLATE_CARREE]:S,[r.WGS84]:C,[r.WGS84_ECEF]:A},[r.WGS84_ECEF]:{[r.CGCS2000]:U,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:U,[r.SPHERICAL_ECEF]:T,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:v,[r.PLATE_CARREE]:function(e,t,n,r){U(e,t,n,r),b(n,r,n,r)},[r.WGS84]:U,[r.WGS84_ECEF]:h},[r.SPHERICAL_ECEF]:{[r.CGCS2000]:N,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:N,[r.SPHERICAL_ECEF]:h,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:I,[r.PLATE_CARREE]:function(e,t,n,r){N(e,t,n,r),b(n,r,n,r)},[r.WGS84]:N,[r.WGS84_ECEF]:F},[r.SPHERICAL_MARS_PCPF]:{[r.CGCS2000]:null,[r.GCSMARS2000]:_,[r.GCSMOON2000]:null,[r.LON_LAT]:_,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:h,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.SPHERICAL_MOON_PCPF]:{[r.CGCS2000]:null,[r.GCSMARS2000]:null,[r.GCSMOON2000]:O,[r.LON_LAT]:O,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:h,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.UNKNOWN]:{[r.CGCS2000]:null,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:null,[r.SPHERICAL_ECEF]:null,[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:h,[r.WEB_MERCATOR]:null,[r.PLATE_CARREE]:null,[r.WGS84]:null,[r.WGS84_ECEF]:null},[r.LON_LAT]:{[r.CGCS2000]:h,[r.GCSMARS2000]:h,[r.GCSMOON2000]:h,[r.LON_LAT]:h,[r.SPHERICAL_ECEF]:m,[r.SPHERICAL_MARS_PCPF]:R,[r.SPHERICAL_MOON_PCPF]:y,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:M,[r.PLATE_CARREE]:b,[r.WGS84]:h,[r.WGS84_ECEF]:L},[r.PLATE_CARREE]:{[r.CGCS2000]:p,[r.GCSMARS2000]:null,[r.GCSMOON2000]:null,[r.LON_LAT]:p,[r.SPHERICAL_ECEF]:function(e,t,n,r){p(e,t,n,r),m(n,r,n,r)},[r.SPHERICAL_MARS_PCPF]:null,[r.SPHERICAL_MOON_PCPF]:null,[r.UNKNOWN]:null,[r.WEB_MERCATOR]:function(e,t,n,r){p(e,t,n,r),M(n,r,n,r)},[r.PLATE_CARREE]:h,[r.WGS84]:p,[r.WGS84_ECEF]:function(e,t,n,r){p(e,t,n,r),L(n,r,n,r)}}};function c(e,t){return s(e,t)?.projector}function s(e,t){if(null==e||null==t)return null;if(G.source.spatialReference===e&&G.dest.spatialReference===t)return G;const n=d(e,G.source),o=d(t,G.dest);return n===r.UNKNOWN&&o===r.UNKNOWN?(0,i.e)(e,t)?G.projector=h:G.projector=null:G.projector=l[n][o],G}function f(e,t){switch(c(e,t)){case h:return"copy3";case m:return"wgs84ToSphericalECEF";case M:return"wgs84ToWebMercator";case b:return"wgs84ToPlateCarree";case L:return"wgs84ToWGS84ECEF";case C:return"webMercatorToWGS84";case g:return"webMercatorToSphericalECEF";case A:return"webMercatorToWGS84ECEF";case S:return"webMercatorToPlateCarree";case U:return"wgs84ECEFToWGS84";case T:return"wgs84ECEFToSphericalECEF";case v:return"wgs84ECEFToWebMercator";case N:return"sphericalECEFToWGS84";case I:return"sphericalECEFToWebMercator";case _:return"sphericalMarsPCPFToMars2000";case O:return"sphericalMoonPCPFToMoon2000";case F:return"sphericalECEFToWGS84ECEF";case R:return"mars2000ToSphericalPCPF";case y:return"moon2000ToSphericalPCPF";default:return null}}function d(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=(0,i.g)(e,1)),(0,i.C)(e)?t.spatialReferenceId=r.SPHERICAL_ECEF:(0,i.b)(e)?t.spatialReferenceId=r.WGS84:(0,i.i)(e)?t.spatialReferenceId=r.WEB_MERCATOR:(0,i.a3)(e)?t.spatialReferenceId=r.PLATE_CARREE:e.wkt===i.W.wkt?t.spatialReferenceId=r.WGS84_ECEF:e.wkid===i.$.CGCS2000?t.spatialReferenceId=r.CGCS2000:e.wkt===i.S.wkt?t.spatialReferenceId=r.SPHERICAL_MARS_PCPF:e.wkt===i.z.wkt?t.spatialReferenceId=r.SPHERICAL_MOON_PCPF:(0,i.a4)(e)?t.spatialReferenceId=r.GCSMARS2000:(0,i.a5)(e)?t.spatialReferenceId=r.GCSMOON2000:t.spatialReferenceId=r.UNKNOWN):r.UNKNOWN}function h(e,t,n,r){e!==n&&(n[r++]=e[t++],n[r++]=e[t++],n[r]=e[t])}function C(e,t,n,r){n[r]=k*(e[t]/B),n[r+1]=k*(H-2*Math.atan(Math.exp(-e[t+1]/B))),n[r+2]=e[t+2]}function g(e,t,n,r){const o=e[t]/B,a=H-2*Math.atan(Math.exp(-e[t+1]/B)),i=B+e[t+2],u=Math.cos(a)*i;n[r]=Math.cos(o)*u,n[r+1]=Math.sin(o)*u,n[r+2]=Math.sin(a)*i}function A(e,t,n,r){C(e,t,n,r),L(n,r,n,r)}function E(e,t,n,r,o){const i=.4999999*Math.PI,u=(0,a.c)(W*e[t+1],-i,i),l=Math.sin(u);n[r++]=W*e[t]*o.radius,n[r++]=o.halfSemiMajorAxis*Math.log((1+l)/(1-l)),n[r]=e[t+2]}function M(e,t,n,r){E(e,t,n,r,i.j)}function b(e,t,n,r){n[r]=e[t]*q,n[r+1]=e[t+1]*q,n[r+2]=e[t+2]}function p(e,t,n,r){n[r]=e[t]*x,n[r+1]=e[t+1]*x,n[r+2]=e[t+2]}function S(e,t,n,r){C(e,t,n,r),b(n,r,n,r)}function w(e,t,n,r,o){const a=o+e[t+2],i=W*e[t+1],u=W*e[t],l=Math.cos(i)*a;n[r]=Math.cos(u)*l,n[r+1]=Math.sin(u)*l,n[r+2]=Math.sin(i)*a}function y(e,t,n,r){w(e,t,n,r,i.k.radius)}function R(e,t,n,r){w(e,t,n,r,i.m.radius)}function m(e,t,n,r){w(e,t,n,r,i.j.radius)}function P(e,t,n,r,o){const i=e[t],u=e[t+1],l=e[t+2],c=Math.sqrt(i*i+u*u+l*l),s=(0,a.h)(l/(0===c?1:c)),f=Math.atan2(u,i);n[r++]=k*f,n[r++]=k*s,n[r]=c-o}function O(e,t,n,r){P(e,t,n,r,i.k.radius)}function _(e,t,n,r){P(e,t,n,r,i.m.radius)}function N(e,t,n,r){P(e,t,n,r,i.j.radius)}function I(e,t,n,r){N(e,t,n,r),M(n,r,n,r)}function F(e,t,n,r){N(e,t,n,r),L(n,r,n,r)}function L(e,t,n,r){!function(e,t,n,r,o){const a=W*e[t],i=W*e[t+1],u=e[t+2],l=Math.sin(i),c=Math.cos(i),s=o.radius/Math.sqrt(1-o.eccentricitySquared*l*l);n[r++]=(s+u)*c*Math.cos(a),n[r++]=(s+u)*c*Math.sin(a),n[r++]=(s*(1-o.eccentricitySquared)+u)*l}(e,t,n,r,i.j)}function U(e,t,n,r){const o=u.e,a=e[t],l=e[t+1],c=e[t+2];let s,f,d,h,C,g,A,E,M,b,p,S,w,y,R,m,P,O,_,N,I;s=Math.abs(c),f=a*a+l*l,d=Math.sqrt(f),h=f+c*c,C=Math.sqrt(h),N=Math.atan2(l,a),g=c*c/h,A=f/h,y=o.a2/C,R=o.a3-o.a4/C,A>.3?(E=s/C*(1+A*(o.a1+y+g*R)/C),_=Math.asin(E),b=E*E,M=Math.sqrt(1-b)):(M=d/C*(1-g*(o.a5-y-A*R)/C),_=Math.acos(M),b=1-M*M,E=Math.sqrt(b)),p=1-i.j.eccentricitySquared*b,S=i.j.radius/Math.sqrt(p),w=o.a6*S,y=d-S*M,R=s-w*E,P=M*y+E*R,m=M*R-E*y,O=m/(w/p+P),_+=O,I=P+m*O/2,c<0&&(_=-_),n[r++]=k*N,n[r++]=k*_,n[r]=I}function T(e,t,n,r){U(e,t,n,r),m(n,r,n,r)}function v(e,t,n,r){U(e,t,n,r),M(n,r,n,r)}const G={source:{spatialReference:null,spatialReferenceId:r.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:r.UNKNOWN,metersPerUnit:1},projector:h},W=(0,a.e)(1),k=(0,a.r)(1),H=.5*Math.PI,B=i.j.radius,q=B*Math.PI/180,x=180/(B*Math.PI);function D(e,t,n,r,o,a,i=Math.floor(e.length/3)){const u=c(t,o);if(null==u)return!1;if(u===h){if(e===r&&n===a)return!0;const t=n+3*i;for(let o=n,i=a;o<t;o++,i++)r[i]=e[o];return!0}const l=n+3*i;for(let t=n,o=a;t<l;t+=3,o+=3)u(e,t,r,o);return!0}const j=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:D},Symbol.toStringTag,{value:"Module"}))},47812:(e,t,n)=>{n.d(t,{A:()=>d,C:()=>p,D:()=>y,G:()=>w,c:()=>o,d:()=>C,e:()=>S,f:()=>b,g:()=>M,i:()=>l,j:()=>h,k:()=>i,l:()=>a,m:()=>c,o:()=>E,s:()=>f,t:()=>u,v:()=>s,w:()=>A,z:()=>g});var r=n(18527);function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(e,t,n,r,o,a,i,u,l,c,s,f,d,h,C,g,A){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e[6]=u,e[7]=l,e[8]=c,e[9]=s,e[10]=f,e[11]=d,e[12]=h,e[13]=C,e[14]=g,e[15]=A,e}function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e,t){if(e===t){const n=t[1],r=t[2],o=t[3],a=t[6],i=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=o,e[13]=i,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function l(e,t){const n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],l=t[6],c=t[7],s=t[8],f=t[9],d=t[10],h=t[11],C=t[12],g=t[13],A=t[14],E=t[15],M=n*u-r*i,b=n*l-o*i,p=n*c-a*i,S=r*l-o*u,w=r*c-a*u,y=o*c-a*l,R=s*g-f*C,m=s*A-d*C,P=s*E-h*C,O=f*A-d*g,_=f*E-h*g,N=d*E-h*A;let I=M*N-b*_+p*O+S*P-w*m+y*R;return I?(I=1/I,e[0]=(u*N-l*_+c*O)*I,e[1]=(o*_-r*N-a*O)*I,e[2]=(g*y-A*w+E*S)*I,e[3]=(d*w-f*y-h*S)*I,e[4]=(l*P-i*N-c*m)*I,e[5]=(n*N-o*P+a*m)*I,e[6]=(A*p-C*y-E*b)*I,e[7]=(s*y-d*p+h*b)*I,e[8]=(i*_-u*P+c*R)*I,e[9]=(r*P-n*_-a*R)*I,e[10]=(C*w-g*p+E*M)*I,e[11]=(f*p-s*w-h*M)*I,e[12]=(u*m-i*O-l*R)*I,e[13]=(n*O-r*m+o*R)*I,e[14]=(g*b-C*S-A*M)*I,e[15]=(s*S-f*b+d*M)*I,e):null}function c(e,t,n){const r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],l=t[5],c=t[6],s=t[7],f=t[8],d=t[9],h=t[10],C=t[11],g=t[12],A=t[13],E=t[14],M=t[15];let b=n[0],p=n[1],S=n[2],w=n[3];return e[0]=b*r+p*u+S*f+w*g,e[1]=b*o+p*l+S*d+w*A,e[2]=b*a+p*c+S*h+w*E,e[3]=b*i+p*s+S*C+w*M,b=n[4],p=n[5],S=n[6],w=n[7],e[4]=b*r+p*u+S*f+w*g,e[5]=b*o+p*l+S*d+w*A,e[6]=b*a+p*c+S*h+w*E,e[7]=b*i+p*s+S*C+w*M,b=n[8],p=n[9],S=n[10],w=n[11],e[8]=b*r+p*u+S*f+w*g,e[9]=b*o+p*l+S*d+w*A,e[10]=b*a+p*c+S*h+w*E,e[11]=b*i+p*s+S*C+w*M,b=n[12],p=n[13],S=n[14],w=n[15],e[12]=b*r+p*u+S*f+w*g,e[13]=b*o+p*l+S*d+w*A,e[14]=b*a+p*c+S*h+w*E,e[15]=b*i+p*s+S*C+w*M,e}function s(e,t,n){const r=n[0],o=n[1],a=n[2];if(t===e)e[12]=t[0]*r+t[4]*o+t[8]*a+t[12],e[13]=t[1]*r+t[5]*o+t[9]*a+t[13],e[14]=t[2]*r+t[6]*o+t[10]*a+t[14],e[15]=t[3]*r+t[7]*o+t[11]*a+t[15];else{const n=t[0],i=t[1],u=t[2],l=t[3],c=t[4],s=t[5],f=t[6],d=t[7],h=t[8],C=t[9],g=t[10],A=t[11];e[0]=n,e[1]=i,e[2]=u,e[3]=l,e[4]=c,e[5]=s,e[6]=f,e[7]=d,e[8]=h,e[9]=C,e[10]=g,e[11]=A,e[12]=n*r+c*o+h*a+t[12],e[13]=i*r+s*o+C*a+t[13],e[14]=u*r+f*o+g*a+t[14],e[15]=l*r+d*o+A*a+t[15]}return e}function f(e,t,n){const r=n[0],o=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function d(e,t,n,a){let i=a[0],u=a[1],l=a[2],c=Math.sqrt(i*i+u*u+l*l);if(c<=(0,r.g)())return void o(e,t);c=1/c,i*=c,u*=c,l*=c;const s=Math.sin(n),f=Math.cos(n),d=1-f,h=t[0],C=t[1],g=t[2],A=t[3],E=t[4],M=t[5],b=t[6],p=t[7],S=t[8],w=t[9],y=t[10],R=t[11],m=i*i*d+f,P=u*i*d+l*s,O=l*i*d-u*s,_=i*u*d-l*s,N=u*u*d+f,I=l*u*d+i*s,F=i*l*d+u*s,L=u*l*d-i*s,U=l*l*d+f;e[0]=h*m+E*P+S*O,e[1]=C*m+M*P+w*O,e[2]=g*m+b*P+y*O,e[3]=A*m+p*P+R*O,e[4]=h*_+E*N+S*I,e[5]=C*_+M*N+w*I,e[6]=g*_+b*N+y*I,e[7]=A*_+p*N+R*I,e[8]=h*F+E*L+S*U,e[9]=C*F+M*L+w*U,e[10]=g*F+b*L+y*U,e[11]=A*F+p*L+R*U,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function h(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function C(e,t,n){if(0===t)return i(e);let o=n[0],a=n[1],u=n[2],l=Math.sqrt(o*o+a*a+u*u);if(l<=(0,r.g)())return null;l=1/l,o*=l,a*=l,u*=l;const c=Math.sin(t),s=Math.cos(t),f=1-s;return e[0]=o*o*f+s,e[1]=a*o*f+u*c,e[2]=u*o*f-a*c,e[3]=0,e[4]=o*a*f-u*c,e[5]=a*a*f+s,e[6]=u*a*f+o*c,e[7]=0,e[8]=o*u*f+a*c,e[9]=a*u*f-o*c,e[10]=u*u*f+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function g(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function E(e,t){const n=t[0],r=t[1],o=t[2],a=t[4],i=t[5],u=t[6],l=t[8],c=t[9],s=t[10];return e[0]=Math.sqrt(n*n+r*r+o*o),e[1]=Math.sqrt(a*a+i*i+u*u),e[2]=Math.sqrt(l*l+c*c+s*s),e}function M(e,t){const n=t[0]+t[5]+t[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function b(e,t,n,r){const o=t[0],a=t[1],i=t[2],u=t[3],l=o+o,c=a+a,s=i+i,f=o*l,d=o*c,h=o*s,C=a*c,g=a*s,A=i*s,E=u*l,M=u*c,b=u*s,p=r[0],S=r[1],w=r[2];return e[0]=(1-(C+A))*p,e[1]=(d+b)*p,e[2]=(h-M)*p,e[3]=0,e[4]=(d-b)*S,e[5]=(1-(f+A))*S,e[6]=(g+E)*S,e[7]=0,e[8]=(h+M)*w,e[9]=(g-E)*w,e[10]=(1-(f+C))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function p(e,t,n,r,o){const a=t[0],i=t[1],u=t[2],l=t[3],c=a+a,s=i+i,f=u+u,d=a*c,h=a*s,C=a*f,g=i*s,A=i*f,E=u*f,M=l*c,b=l*s,p=l*f,S=r[0],w=r[1],y=r[2],R=o[0],m=o[1],P=o[2],O=(1-(g+E))*S,_=(h+p)*S,N=(C-b)*S,I=(h-p)*w,F=(1-(d+E))*w,L=(A+M)*w,U=(C+b)*y,T=(A-M)*y,v=(1-(d+g))*y;return e[0]=O,e[1]=_,e[2]=N,e[3]=0,e[4]=I,e[5]=F,e[6]=L,e[7]=0,e[8]=U,e[9]=T,e[10]=v,e[11]=0,e[12]=n[0]+R-(O*R+I*m+U*P),e[13]=n[1]+m-(_*R+F*m+T*P),e[14]=n[2]+P-(N*R+L*m+v*P),e[15]=1,e}function S(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function w(e){const t=(0,r.g)(),n=e[0],o=e[1],a=e[2],i=e[4],u=e[5],l=e[6],c=e[8],s=e[9],f=e[10];return Math.abs(1-(n*n+i*i+c*c))<=t&&Math.abs(1-(o*o+u*u+s*s))<=t&&Math.abs(1-(a*a+l*l+f*f))<=t}function y(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[8]&&0===e[9]&&1===e[10]}},56887:(e,t,n)=>{n.d(t,{a:()=>M,c:()=>S,d:()=>c,g:()=>b,r:()=>y});var r=n(6407),o=n(32773),a=n(20266),i=n(97538);const u=!0;function l(e,t,n){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,n+0,10)),version:t.getUint16(n+10,u),checksum:t.getUint32(n+12,u)}}function c(e){const t=new DataView(e,0);let n=0;const{identifier:o,version:a}=l(e,t,n);if(n+=16,"LEPCC     "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(a>1)throw new r.A("lepcc-decode-error","Unknown version");const i=function(e,t){return{sizeLo:e.getUint32(t+0,u),sizeHi:e.getUint32(t+4,u),minX:e.getFloat64(t+8,u),minY:e.getFloat64(t+16,u),minZ:e.getFloat64(t+24,u),maxX:e.getFloat64(t+32,u),maxY:e.getFloat64(t+40,u),maxZ:e.getFloat64(t+48,u),errorX:e.getFloat64(t+56,u),errorY:e.getFloat64(t+64,u),errorZ:e.getFloat64(t+72,u),count:e.getUint32(t+80,u),reserved:e.getUint32(t+84,u)}}(t,n);if(n+=88,i.sizeHi*2**32+i.sizeLo!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const c=new Float64Array(3*i.count),f=[],d=[],h=[],C=[];if(n=s(e,n,f),n=s(e,n,d),n=s(e,n,h),n=s(e,n,C),n!==e.byteLength)throw new r.A("lepcc-decode-error","Bad length");let g=0,A=0;for(let e=0;e<f.length;e++){A+=f[e];let t=0;for(let n=0;n<d[e];n++){t+=h[g];const e=C[g];c[3*g]=Math.min(i.maxX,i.minX+2*i.errorX*t),c[3*g+1]=Math.min(i.maxY,i.minY+2*i.errorY*A),c[3*g+2]=Math.min(i.maxZ,i.minZ+2*i.errorZ*e),g++}}return{errorX:i.errorX,errorY:i.errorY,errorZ:i.errorZ,result:c}}function s(e,t,n){const r=[];t=f(e,t,r);const o=[];for(let a=0;a<r.length;a++){o.length=0,t=f(e,t,o);for(let e=0;e<o.length;e++)n.push(o[e]+r[a])}return t}function f(e,t,n){const o=new DataView(e,t),a=o.getUint8(0),i=31&a,l=!!(32&a),c=(192&a)>>6;let s=0;if(0===c)s=o.getUint32(1,u),t+=5;else if(1===c)s=o.getUint16(1,u),t+=3;else{if(2!==c)throw new r.A("lepcc-decode-error","Bad count type");s=o.getUint8(1),t+=2}if(l)throw new r.A("lepcc-decode-error","LUT not implemented");const f=Math.ceil(s*i/8),d=new Uint8Array(e,t,f);let h=0,C=0,g=0;const A=-1>>>32-i;for(let e=0;e<s;e++){for(;C<i;)h|=d[g]<<C,C+=8,g+=1;n[e]=h&A,h>>>=i,C-=i,C+i>32&&(h|=d[g-1]>>8-C)}return t+g}function d(e){const t=new DataView(e,0);let n=0;const{identifier:o,version:a}=l(e,t,n);if(n+=16,"ClusterRGB"!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(a>1)throw new r.A("lepcc-decode-error","Unknown version");const i=function(e,t){return{sizeLo:e.getUint32(t+0,u),sizeHi:e.getUint32(t+4,u),count:e.getUint32(t+8,u),colorMapCount:e.getUint16(t+12,u),lookupMethod:e.getUint8(t+14),compressionMethod:e.getUint8(t+15)}}(t,n);if(n+=16,i.sizeHi*2**32+i.sizeLo!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");if((2===i.lookupMethod||1===i.lookupMethod)&&0===i.compressionMethod){if(3*i.colorMapCount+i.count+n!==e.byteLength||i.colorMapCount>256)throw new r.A("lepcc-decode-error","Bad count");const t=new Uint8Array(e,n,3*i.colorMapCount),o=new Uint8Array(e,n+3*i.colorMapCount,i.count),a=new Uint8Array(3*i.count);for(let e=0;e<i.count;e++){const n=o[e];a[3*e]=t[3*n],a[3*e+1]=t[3*n+1],a[3*e+2]=t[3*n+2]}return a}if(0===i.lookupMethod&&0===i.compressionMethod){if(3*i.count+n!==e.byteLength||0!==i.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");return new Uint8Array(e,n).slice()}if(i.lookupMethod<=2&&1===i.compressionMethod){if(n+3!==e.byteLength||1!==i.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");const o=t.getUint8(n),a=t.getUint8(n+1),u=t.getUint8(n+2),l=new Uint8Array(3*i.count);for(let e=0;e<i.count;e++)l[3*e]=o,l[3*e+1]=a,l[3*e+2]=u;return l}throw new r.A("lepcc-decode-error","Bad method "+i.lookupMethod+","+i.compressionMethod)}function h(e){const t=new DataView(e,0);let n=0;const{identifier:o,version:a}=l(e,t,n);if(n+=16,"Intensity "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(a>1)throw new r.A("lepcc-decode-error","Unknown version");const i=function(e,t){return{sizeLo:e.getUint32(t+0,u),sizeHi:e.getUint32(t+4,u),count:e.getUint32(t+8,u),scaleFactor:e.getUint16(t+12,u),bitsPerPoint:e.getUint8(t+14),reserved:e.getUint8(t+15)}}(t,n);if(n+=16,i.sizeHi*2**32+i.sizeLo!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const c=new Uint16Array(i.count);if(8===i.bitsPerPoint){if(i.count+n!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const t=new Uint8Array(e,n,i.count);for(let e=0;e<i.count;e++)c[e]=t[e]*i.scaleFactor}else if(16===i.bitsPerPoint){if(2*i.count+n!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const t=new Uint16Array(e,n,i.count);for(let e=0;e<i.count;e++)c[e]=t[e]*i.scaleFactor}else{const t=[];if(f(e,n,t)!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");for(let e=0;e<i.count;e++)c[e]=t[e]*i.scaleFactor}return c}const C=()=>a.L.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function g(e,t,n){let o="",a=0;for(;a<n;){const i=e[t+a];if(i<128)o+=String.fromCharCode(i),a++;else if(i>=192&&i<224){if(a+1>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const u=(31&i)<<6|63&e[t+a+1];o+=String.fromCharCode(u),a+=2}else if(i>=224&&i<240){if(a+2>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const u=(15&i)<<12|(63&e[t+a+1])<<6|63&e[t+a+2];o+=String.fromCharCode(u),a+=3}else{if(!(i>=240&&i<248))throw new r.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(a+3>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const u=(7&i)<<18|(63&e[t+a+1])<<12|(63&e[t+a+2])<<6|63&e[t+a+3];if(u>=65536){const e=55296+(u-65536>>10),t=56320+(1023&u);o+=String.fromCharCode(e,t)}else o+=String.fromCharCode(u);a+=4}}}return o}function A(e,t){const n={byteOffset:0,byteCount:0,fields:Object.create(null)};let r=0;for(let o=0;o<t.length;o++){const a=t[o],i=a.valueType||a.type,u=m[i];n.fields[a.property]=u(e,r),r+=R[i].BYTES_PER_ELEMENT}return n.byteCount=r,n}function E(e,t,n){const o=[];let a,i,u=0;for(i=0;i<e;i+=1){if(a=t[i],a>0){if(o.push(g(n,u,a-1)),0!==n[u+a-1])throw new r.A("string-array-error","Invalid string array: missing null termination.")}else o.push(null);u+=a}return o}function M(e,t){return new(0,R[t.valueType])(e,t.byteOffset,t.count*t.valuesPerElement)}function b(e,t){if(!e)return null;const n=e[t];return(0,o.D)(e)?n===o.E?null:n:(0,o.F)(e)?n===o.G?null:n:n!=n?null:n}function p(e,t,n){if(t!==e&&C().error(`Invalid ${n} buffer size\n expected: ${e}, actual: ${t})`),t<e)throw new r.A("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function S(e,t){const n=A(e,t&&t.header);let r=n.byteCount;const o={isDraco:!1,header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:{}},a=n.fields,i=null!=a.vertexCount?a.vertexCount:a.count;for(const e of t.ordering){if(!t.vertexAttributes[e])continue;const n={...t.vertexAttributes[e],byteOffset:r,count:i},a=w[e]||"_"+e;o.vertexAttributes[a]=n,r+=O(n.valueType)*n.valuesPerElement*i}const u=a.faceCount;if(t.faces&&u){o.faces={};for(const e of t.ordering){if(!t.faces[e])continue;const n={...t.faces[e],byteOffset:r,count:u};o.faces[e]=n,r+=O(n.valueType)*n.valuesPerElement*u}}const l=a.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&l){o.featureAttributes={};for(const e of t.featureAttributeOrder){if(!t.featureAttributes[e])continue;const n={...t.featureAttributes[e],byteOffset:r,count:l};o.featureAttributes[e]=n,r+=("UInt64"===n.valueType?8:O(n.valueType))*n.valuesPerElement*l}}return p(r,e.byteLength,"geometry"),o.byteCount=r-o.byteOffset,o}const w={position:i.V.POSITION,normal:i.V.NORMAL,color:i.V.COLOR,uv0:i.V.UV0,region:i.V.UVREGION};function y(e,t,n,a=!1){if("lepcc-rgb"===e.encoding)return a?d(t):(i=d(t),Array.isArray(i)?i.length<o.n?i:new Uint8Array(i):i.length<o.n?Array.from(i):i);var i,u;if("lepcc-intensity"===e.encoding)return a?h(t):(u=h(t),Array.isArray(u)?u.length<o.n?u:new Uint16Array(u):u.length<o.n?Array.from(u):u);if(null!=e.encoding&&""!==e.encoding)throw new r.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(C().warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(C().warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");const l=function(e,t,n){const a=null!=t.header?A(e,t.header):{byteOffset:0,byteCount:0,fields:{count:n}},i={header:a,byteOffset:a.byteCount,byteCount:0,entries:Object.create(null)};let u=a.byteCount;for(let e=0;e<t.ordering.length;e++){const n=t.ordering[e],l=(0,o.o8)(t[n]);if(l.count=a.fields.count??0,"String"===l.valueType){if(l.byteOffset=u,l.byteCount=a.fields[n+"ByteCount"],"UTF-8"!==l.encoding)throw new r.A("unsupported-encoding","Unsupported String encoding.",{encoding:l.encoding});if(l.timeEncoding&&"ECMA_ISO8601"!==l.timeEncoding)throw new r.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:l.timeEncoding})}else{if(!P(l.valueType))throw new r.A("unsupported-value-type","Unsupported binary valueType",{valueType:l.valueType});{const e=O(l.valueType);u+=u%e!==0?e-u%e:0,l.byteOffset=u,l.byteCount=e*l.valuesPerElement*l.count}}u+=l.byteCount??0,i.entries[n]=l}return i.byteCount=u-i.byteOffset,i}(t,e,n);p(l.byteOffset+l.byteCount,t.byteLength,"attribute");const c=l.entries.attributeValues||l.entries.objectIds;if(c){if("String"===c.valueType){const e=l.entries.attributeByteCounts,n=M(t,e),r=function(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}(t,c);return c.timeEncoding?function(e,t,n){return E(e,t,n).map((e=>{const t=e?Date.parse(e):null;return null==t||Number.isNaN(t)?null:t}))}(e.count,n,r):E(e.count,n,r)}return a?M(t,c):function(e,t){const n=M(e,t);if(n.length>=o.n)return n;const r=new Array;return n.forEach(((e,t)=>r.push(b(n,t)))),r}(t,c)}throw new r.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const R={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},m={Float32:(e,t)=>new DataView(e,0).getFloat32(t,!0),Float64:(e,t)=>new DataView(e,0).getFloat64(t,!0),UInt8:(e,t)=>new DataView(e,0).getUint8(t),Int8:(e,t)=>new DataView(e,0).getInt8(t),UInt16:(e,t)=>new DataView(e,0).getUint16(t,!0),Int16:(e,t)=>new DataView(e,0).getInt16(t,!0),UInt32:(e,t)=>new DataView(e,0).getUint32(t,!0),Int32:(e,t)=>new DataView(e,0).getInt32(t,!0)};function P(e){return R.hasOwnProperty(e)}function O(e){return P(e)?R[e].BYTES_PER_ELEMENT:0}},62482:(e,t,n)=>{function r(){return[0,0,0,0]}function o(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,n,r){return[e,t,n,r]}function i(e,t,n,r){return[e,t,n,r]}function u(e,t=[0,0,0,0]){const n=Math.min(4,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}n.d(t,{O:()=>c,Z:()=>l,a:()=>o,b:()=>u,c:()=>r,d:()=>i,f:()=>a});const l=[0,0,0,0],c=a(1,1,1,1)},74578:(e,t,n)=>{function r(){return new Float32Array(3)}function o(e){const t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e,t,n){const r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}n.d(t,{a:()=>r,c:()=>o,f:()=>a}),a(1,1,1),a(1,0,0),a(0,1,0),a(0,0,1)},88663:(e,t,n)=>{n.d(t,{e:()=>a});var r=n(93804),o=n(29298);function a(e,t={}){const n=e instanceof r.J?e:new r.J(e,t),{alwaysWriteDefaults:a,default:i,ignoreUnknown:u=!0,name:l,nonNullable:c,readOnly:s=!1}=t;return(0,o.MZ)({type:u?n.apiValues:String,json:{type:n.jsonValues,default:i,name:l,read:!s&&{reader:n.read},write:{writer:n.write,alwaysWriteDefaults:a}},nonNullable:c,readOnly:s})}},91276:(e,t,n)=>{n.d(t,{a:()=>C,c:()=>o,e:()=>g,s:()=>a,t:()=>h});var r=n(18527);function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function u(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function l(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function c(e,t){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+a*a)}function s(e,t){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+o*o+a*a}function f(e){const t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)}function d(e){const t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o}function h(e,t,n){const r=t[0],o=t[1],a=t[2],i=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,e[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,e[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,e[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,e}function C(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function g(e,t){const n=e[0],o=e[1],a=e[2],i=e[3],u=t[0],l=t[1],c=t[2],s=t[3],f=(0,r.g)();return Math.abs(n-u)<=f*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-l)<=f*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-c)<=f*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))}const A=i,E=u,M=l,b=c,p=s,S=f,w=d;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:o,copyVec3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:b,distance:c,div:M,divide:l,dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},equals:g,exactEquals:C,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:S,length:f,lerp:function(e,t,n,r){const o=t[0],a=t[1],i=t[2],u=t[3];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e[2]=i+r*(n[2]-i),e[3]=u+r*(n[3]-u),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},mul:E,multiply:u,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:function(e,t){const n=t[0],r=t[1],o=t[2],a=t[3];let i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=n*i,e[1]=r*i,e[2]=o*i,e[3]=a*i),e},random:function(e,t=1){const n=r.R;let o,a,i,u,l,c;do{o=2*n()-1,a=2*n()-1,l=o*o+a*a}while(l>=1);do{i=2*n()-1,u=2*n()-1,c=i*i+u*u}while(c>=1);const s=Math.sqrt((1-l)/c);return e[0]=t*o,e[1]=t*a,e[2]=t*i*s,e[3]=t*u*s,e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},set:a,sqrDist:p,sqrLen:w,squaredDistance:s,squaredLength:d,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:A,subtract:i,transformMat4:h,transformQuat:function(e,t,n){const r=t[0],o=t[1],a=t[2],i=n[0],u=n[1],l=n[2],c=n[3],s=c*r+u*a-l*o,f=c*o+l*r-i*a,d=c*a+i*o-u*r,h=-i*r-u*o-l*a;return e[0]=s*c+h*-i+f*-l-d*-u,e[1]=f*c+h*-u+d*-i-s*-l,e[2]=d*c+h*-l+s*-u-f*-i,e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))}}]);