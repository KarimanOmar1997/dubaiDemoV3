"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[3628],{23164:(t,e,r)=>{r.d(e,{a:()=>n,b:()=>c,l:()=>f,n:()=>u,t:()=>i});var s=r(24330);function n(t,e,r){i(t.typedBuffer,e.typedBuffer,r,t.typedBufferStride,e.typedBufferStride)}function i(t,e,r,s=4,n=s){if(t.length/s!==e.length/n)return;const i=t.length/s,u=r[0],f=r[1],c=r[2],o=r[3],l=r[4],y=r[5],h=r[6],p=r[7],a=r[8];let d=0,B=0;for(let r=0;r<i;r++){const r=e[d],i=e[d+1],T=e[d+2],E=e[d+3];t[B]=u*r+o*i+h*T,t[B+1]=f*r+l*i+p*T,t[B+2]=c*r+y*i+a*T,t[B+3]=E,d+=n,B+=s}}function u(t,e){const r=Math.min(t.count,e.count),s=t.typedBuffer,n=t.typedBufferStride,i=e.typedBuffer,u=e.typedBufferStride;for(let t=0;t<r;t++){const e=t*n,r=t*u,f=i[r],c=i[r+1],o=i[r+2],l=f*f+c*c+o*o;if(l>0){const t=1/Math.sqrt(l);s[e]=t*f,s[e+1]=t*c,s[e+2]=t*o}}}function f(t,e,r,s){c(t.typedBuffer,e,r,s,t.typedBufferStride)}function c(t,e,r,n,i=4){const u=Math.min(t.length/i,e.count),f=e.typedBuffer,c=e.typedBufferStride;let o=0,l=0;const y=1/s.d;for(let e=0;e<u;e++)t[l]=n*(r*f[o])**y,t[l+1]=n*(r*f[o+1])**y,t[l+2]=n*(r*f[o+2])**y,t[l+3]=n*r*f[o+3],o+=c,l+=i}r(32773),r(20266)},37322:(t,e,r)=>{function s(t,e){return t[0]=e[0],t[1]=e[1],t}function n(t,e,r){return t[0]=e,t[1]=r,t}function i(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function u(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function f(t,e){const r=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(r*r+s*s)}function c(t,e){const r=e[0],s=e[1];let n=r*r+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function o(t,e,r,s){const n=e[0],i=e[1];return t[0]=n+s*(r[0]-n),t[1]=i+s*(r[1]-i),t}function l(t,e,r){const s=e[0],n=e[1];return t[0]=r[0]*s+r[2]*n+r[4],t[1]=r[1]*s+r[3]*n+r[5],t}function y(t,e,r,s){const n=e[0]-r[0],i=e[1]-r[1],u=Math.sin(s),f=Math.cos(s);return t[0]=n*f-i*u+r[0],t[1]=n*u+i*f+r[1],t}r.d(e,{b:()=>u,c:()=>s,d:()=>h,f:()=>c,j:()=>i,l:()=>o,r:()=>y,s:()=>n,t:()=>l,u:()=>f}),r(18527);const h=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}},72509:(t,e,r)=>{r.d(e,{A:()=>T,B:()=>S,C:()=>Y,D:()=>k,E:()=>$,F:()=>q,G:()=>W,H:()=>J,I:()=>K,J:()=>Q,K:()=>Z,L:()=>tt,M:()=>et,N:()=>rt,O:()=>st,P:()=>nt,Q:()=>E,W:()=>c,a:()=>g,b:()=>P,c:()=>_,d:()=>R,e:()=>L,f:()=>b,g:()=>x,h:()=>o,i:()=>O,j:()=>M,k:()=>C,l:()=>F,m:()=>N,n:()=>G,o:()=>m,p:()=>A,q:()=>w,r:()=>v,s:()=>I,t:()=>z,u:()=>H,v:()=>X,w:()=>U,x:()=>V,y:()=>j,z:()=>D});var s=r(37322),n=r(26809),i=r(91276),u=(r(46484),r(62482));let f=globalThis.Float16Array;function c(){return f}let o=!!f;class l{static{this.ElementCount=9}constructor(t,e,r=0,s,n){this.TypedArrayConstructor=t,this.elementCount=9;const i=this.TypedArrayConstructor;void 0===s&&(s=9*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==n?new i(e,u):new i(e,u,(n-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=s/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const s=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,s,this.stride,s+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<9;t++)e[t]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<9;t++)this.typedBuffer[r++]=e[t]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const s=this.typedBuffer,n=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;for(let t=0;t<9;++t)s[i++]=n[u++]}get buffer(){return this.typedBuffer.buffer}}class y{static{this.ElementCount=16}constructor(t,e,r=0,s,n){this.TypedArrayConstructor=t,this.elementCount=16;const i=this.TypedArrayConstructor;void 0===s&&(s=16*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==n?new i(e,u):new i(e,u,(n-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=s/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const s=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,s,this.stride,s+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<16;t++)e[t]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<16;t++)this.typedBuffer[r++]=e[t]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){this.copyFromTypedBuffer(t,e.typedBuffer,r*e.typedBufferStride)}copyFromTypedBuffer(t,e,r){const s=this.typedBuffer;let n=t*this.typedBufferStride;for(let t=0;t<16;++t)s[n++]=e[r++]}get buffer(){return this.typedBuffer.buffer}}class h{static{this.ElementCount=1}constructor(t,e,r=0,s,n){this.TypedArrayConstructor=t,this.elementCount=1;const i=this.TypedArrayConstructor;void 0===s&&(s=i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==n?new i(e,u):new i(e,u,(n-r)/i.BYTES_PER_ELEMENT),this.stride=s,this.typedBufferStride=s/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(t,e,r=this.count-e){const s=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,s,this.stride,s+r*this.stride)}get(t){return this.typedBuffer[t*this.typedBufferStride]}set(t,e){this.typedBuffer[t*this.typedBufferStride]=e}get buffer(){return this.typedBuffer.buffer}}class p{static{this.ElementCount=2}constructor(t,e,r=0,s,n){this.TypedArrayConstructor=t,this.start=r,this.elementCount=2;const i=this.TypedArrayConstructor;void 0===s&&(s=2*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==n?new i(e,u):new i(e,u,(n-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=s/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const s=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,s,this.stride,s+r*this.stride)}getVec(t,e){return t*=this.typedBufferStride,(0,s.s)(e,this.typedBuffer[t],this.typedBuffer[t+1])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t]=e[1]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t]=r}copyFrom(t,e,r){const s=this.typedBuffer,n=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;s[i++]=n[u++],s[i]=n[u]}get buffer(){return this.typedBuffer.buffer}}class a{static{this.ElementCount=3}constructor(t,e,r=0,s,n){this.TypedArrayConstructor=t,this.elementCount=3;const i=this.TypedArrayConstructor;void 0===s&&(s=3*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==n?new i(e,u):new i(e,u,(n-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=s/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const s=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,s,this.stride,s+r*this.stride)}getVec(t,e){return t*=this.typedBufferStride,(0,n.s)(e,this.typedBuffer[t],this.typedBuffer[t+1],this.typedBuffer[t+2])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t]=e[2]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,s){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t]=s}copyFrom(t,e,r){const s=this.typedBuffer,n=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;s[i++]=n[u++],s[i++]=n[u++],s[i]=n[u]}get buffer(){return this.typedBuffer.buffer}}class d{static{this.ElementCount=4}constructor(t,e,r=0,s,n){this.TypedArrayConstructor=t,this.start=r,this.elementCount=4;const i=this.TypedArrayConstructor;void 0===s&&(s=4*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==n?new i(e,u):new i(e,u,(n-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=s/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const s=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,s,this.stride,s+r*this.stride)}getVec(t,e){return t*=this.typedBufferStride,(0,i.s)(e,this.typedBuffer[t++],this.typedBuffer[t++],this.typedBuffer[t++],this.typedBuffer[t])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t++]=e[2],this.typedBuffer[t]=e[3]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,s,n){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t++]=s,this.typedBuffer[t]=n}copyFrom(t,e,r){const s=this.typedBuffer,n=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;s[i++]=n[u++],s[i++]=n[u++],s[i++]=n[u++],s[i]=n[u]}get buffer(){return this.typedBuffer.buffer}}(0,u.c)();class B{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function T(t,e="Assertion"){if(!t){const t=new Error(e).stack;throw new B(`${e} at ${t}`)}}function E(t,e,r,s){let n,i=(r[0]-t[0])/e[0],u=(s[0]-t[0])/e[0];i>u&&(n=i,i=u,u=n);let f=(r[1]-t[1])/e[1],c=(s[1]-t[1])/e[1];if(f>c&&(n=f,f=c,c=n),i>c||f>u)return!1;f>i&&(i=f),c<u&&(u=c);let o=(r[2]-t[2])/e[2],l=(s[2]-t[2])/e[2];return o>l&&(n=o,o=l,l=n),!(i>l||o>u||(l<u&&(u=l),u<0))}class m extends h{constructor(t,e=0,r,s){T(o),super(c(),t,e,r,s),this.elementType="f16"}static{this.ElementType="f16"}}class A extends h{constructor(t,e=0,r,s){super(Float32Array,t,e,r,s),this.elementType="f32"}static{this.ElementType="f32"}}class S extends p{constructor(t,e=0,r,s){T(o),super(c(),t,e,r,s),this.elementType="f16"}slice(t,e){return this.sliceBuffer(S,t,e)}static{this.ElementType="f16"}}class g extends p{constructor(t,e=0,r,s){super(Float32Array,t,e,r,s),this.elementType="f32"}slice(t,e){return this.sliceBuffer(g,t,e)}static{this.ElementType="f32"}}class _ extends a{constructor(t,e=0,r,s){T(o),super(c(),t,e,r,s),this.elementType="f16"}slice(t,e){return this.sliceBuffer(_,t,e)}static{this.ElementType="f16"}}class R extends a{constructor(t,e=0,r,s){super(Float32Array,t,e,r,s),this.elementType="f32"}slice(t,e){return this.sliceBuffer(R,t,e)}static fromTypedArray(t,e){return new R(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}static{this.ElementType="f32"}}class b extends d{constructor(t,e=0,r,s){T(o),super(c(),t,e,r,s),this.elementType="f16"}slice(t,e){return this.sliceBuffer(b,t,e)}static{this.ElementType="f16"}}class x extends d{constructor(t,e=0,r,s){super(Float32Array,t,e,r,s),this.elementType="f32"}slice(t,e){return this.sliceBuffer(x,t,e)}static{this.ElementType="f32"}}class M extends l{constructor(t,e=0,r,s){super(Float32Array,t,e,r,s),this.elementType="f32"}slice(t,e){return this.sliceBuffer(M,t,e)}static{this.ElementType="f32"}}class C extends l{constructor(t,e=0,r,s){super(Float64Array,t,e,r,s),this.elementType="f64"}slice(t,e){return this.sliceBuffer(C,t,e)}static{this.ElementType="f64"}}class F extends y{constructor(t,e=0,r,s){super(Float32Array,t,e,r,s),this.elementType="f32"}slice(t,e){return this.sliceBuffer(F,t,e)}static{this.ElementType="f32"}}class N extends y{constructor(t,e=0,r,s){super(Float64Array,t,e,r,s),this.elementType="f64"}slice(t,e){return this.sliceBuffer(N,t,e)}static{this.ElementType="f64"}}class w extends h{constructor(t,e=0,r,s){super(Float64Array,t,e,r,s),this.elementType="f64"}slice(t,e){return this.sliceBuffer(w,t,e)}static{this.ElementType="f64"}}class P extends p{constructor(t,e=0,r,s){super(Float64Array,t,e,r,s),this.elementType="f64"}slice(t,e){return this.sliceBuffer(P,t,e)}static{this.ElementType="f64"}}class L extends a{constructor(t,e=0,r,s){super(Float64Array,t,e,r,s),this.elementType="f64"}slice(t,e){return this.sliceBuffer(L,t,e)}static fromTypedArray(t,e){return new L(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}static{this.ElementType="f64"}}class O extends d{constructor(t,e=0,r,s){super(Float64Array,t,e,r,s),this.elementType="f64"}slice(t,e){return this.sliceBuffer(O,t,e)}static{this.ElementType="f64"}}class v extends h{constructor(t,e=0,r,s){super(Uint8Array,t,e,r,s),this.elementType="u8"}slice(t,e){return this.sliceBuffer(v,t,e)}static{this.ElementType="u8"}}class U extends p{constructor(t,e=0,r,s){super(Uint8Array,t,e,r,s),this.elementType="u8"}slice(t,e){return this.sliceBuffer(U,t,e)}static{this.ElementType="u8"}}class Y extends a{constructor(t,e=0,r,s){super(Uint8Array,t,e,r,s),this.elementType="u8"}slice(t,e){return this.sliceBuffer(Y,t,e)}static fromTypedArray(t,e){return new Y(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}static{this.ElementType="u8"}}class G extends d{constructor(t,e=0,r,s){super(Uint8Array,t,e,r,s),this.elementType="u8"}slice(t,e){return this.sliceBuffer(G,t,e)}static{this.ElementType="u8"}}class I extends h{constructor(t,e=0,r,s){super(Uint16Array,t,e,r,s),this.elementType="u16"}slice(t,e){return this.sliceBuffer(I,t,e)}static{this.ElementType="u16"}}class V extends p{constructor(t,e=0,r,s){super(Uint16Array,t,e,r,s),this.elementType="u16"}slice(t,e){return this.sliceBuffer(V,t,e)}static{this.ElementType="u16"}}class k extends a{constructor(t,e=0,r,s){super(Uint16Array,t,e,r,s),this.elementType="u16"}slice(t,e){return this.sliceBuffer(k,t,e)}static{this.ElementType="u16"}}class j extends d{constructor(t,e=0,r,s){super(Uint16Array,t,e,r,s),this.elementType="u16"}slice(t,e){return this.sliceBuffer(j,t,e)}static{this.ElementType="u16"}}class D extends h{constructor(t,e=0,r,s){super(Uint32Array,t,e,r,s),this.elementType="u32"}slice(t,e){return this.sliceBuffer(D,t,e)}static{this.ElementType="u32"}}class $ extends p{constructor(t,e=0,r,s){super(Uint32Array,t,e,r,s),this.elementType="u32"}slice(t,e){return this.sliceBuffer($,t,e)}static{this.ElementType="u32"}}class q extends a{constructor(t,e=0,r,s){super(Uint32Array,t,e,r,s),this.elementType="u32"}slice(t,e){return this.sliceBuffer(q,t,e)}static{this.ElementType="u32"}}class W extends d{constructor(t,e=0,r,s){super(Uint32Array,t,e,r,s),this.elementType="u32"}slice(t,e){return this.sliceBuffer(W,t,e)}static{this.ElementType="u32"}}class z extends h{constructor(t,e=0,r,s){super(Int8Array,t,e,r,s),this.elementType="i8"}slice(t,e){return this.sliceBuffer(z,t,e)}static{this.ElementType="i8"}}class H extends p{constructor(t,e=0,r,s){super(Int8Array,t,e,r,s),this.elementType="i8"}slice(t,e){return this.sliceBuffer(H,t,e)}static{this.ElementType="i8"}}class J extends a{constructor(t,e=0,r,s){super(Int8Array,t,e,r,s),this.elementType="i8"}slice(t,e){return this.sliceBuffer(J,t,e)}static{this.ElementType="i8"}}class K extends d{constructor(t,e=0,r,s){super(Int8Array,t,e,r,s),this.elementType="i8"}slice(t,e){return this.sliceBuffer(K,t,e)}static{this.ElementType="i8"}}class Q extends h{constructor(t,e=0,r,s){super(Int16Array,t,e,r,s),this.elementType="i16"}slice(t,e){return this.sliceBuffer(Q,t,e)}static{this.ElementType="i16"}}class X extends p{constructor(t,e=0,r,s){super(Int16Array,t,e,r,s),this.elementType="i16"}slice(t,e){return this.sliceBuffer(X,t,e)}static{this.ElementType="i16"}}class Z extends a{constructor(t,e=0,r,s){super(Int16Array,t,e,r,s),this.elementType="i16"}slice(t,e){return this.sliceBuffer(Z,t,e)}static{this.ElementType="i16"}}class tt extends d{constructor(t,e=0,r,s){super(Int16Array,t,e,r,s),this.elementType="i16"}slice(t,e){return this.sliceBuffer(tt,t,e)}static{this.ElementType="i16"}}class et extends h{constructor(t,e=0,r,s){super(Int32Array,t,e,r,s),this.elementType="i32"}slice(t,e){return this.sliceBuffer(et,t,e)}static{this.ElementType="i32"}}class rt extends p{constructor(t,e=0,r,s){super(Int32Array,t,e,r,s),this.elementType="i32"}slice(t,e){return this.sliceBuffer(rt,t,e)}static{this.ElementType="i32"}}class st extends a{constructor(t,e=0,r,s){super(Int32Array,t,e,r,s),this.elementType="i32"}slice(t,e){return this.sliceBuffer(st,t,e)}static{this.ElementType="i32"}}class nt extends d{constructor(t,e=0,r,s){super(Int32Array,t,e,r,s),this.elementType="i32"}slice(t,e){return this.sliceBuffer(nt,t,e)}static{this.ElementType="i32"}}},83628:(t,e,r)=>{r.d(e,{a:()=>S,b:()=>b,c:()=>j,d:()=>_,e:()=>F,f:()=>x,g:()=>H,h:()=>R,i:()=>N,l:()=>g,p:()=>k});var s=r(20266),n=r(16699),i=r(69763),u=r(87889),f=r(88485),c=r(47812),o=r(87162),l=r(26809),y=r(2589),h=r(69277),p=r(29222),a=r(86741),d=r(44366),B=r(19907),T=r(47387),E=r(29208),m=r(72509),A=r(23164);const S="Projection may be possible after calling projection.load().";function g(t,e,r,s){t.error(`Failed to project from (wkid:${e.wkid}) to (wkid:${r.wkid}).${s?" ":""}${s}`)}function _(t,e,r,s,n,i){return v(P.TO_PCPF,m.d.fromTypedArray(t),w.NORMAL,m.e.fromTypedArray(e),r,m.e.fromTypedArray(s),n,m.d.fromTypedArray(i))?i:null}function R(t,e,r,s,n,i){return v(P.FROM_PCPF,m.d.fromTypedArray(t),w.NORMAL,m.e.fromTypedArray(e),r,m.e.fromTypedArray(s),n,m.d.fromTypedArray(i))?i:null}function b(t,e,r,s){return(0,T.p)(t,e,0,r,s,0)?r:null}function x(t,e,r,s){return(0,T.p)(t,e,0,r,s,0)?r:null}function M(t,e,r){return(0,u.b)(I,r),(0,B.t)(e,t,I),(0,n.i)(I)&&(0,B.n)(e,e),e}function C(t,e,r){return(0,u.f)(I,r),(0,A.t)(e,t,I),(0,n.i)(I)&&(0,B.n)(e,e,4),e}function F(t,e,r,s,n,i){if(!v(P.TO_PCPF,m.d.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),w.TANGENT,m.e.fromTypedArray(e),r,m.e.fromTypedArray(s),n,m.d.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let e=3;e<t.length;e+=4)i[e]=t[e];return i}function N(t,e,r,s,n,i){if(!v(P.FROM_PCPF,m.d.fromTypedArray(t,16),w.TANGENT,m.e.fromTypedArray(e),r,m.e.fromTypedArray(s),n,m.d.fromTypedArray(i,16)))return null;for(let e=3;e<t.length;e+=4)i[e]=t[e];return i}var w,P,L;function O(t,e,r,s,n){switch((0,p.c)(s,r,G,s),t===P.FROM_PCPF&&(0,c.i)(G,G),e){case w.NORMAL:return(0,u.b)(n,G);case w.TANGENT:return(0,u.f)(n,G)}}function v(t,e,r,s,n,u,f,c){if(!e)return;const o=s.count;if(function(t){return t.isWGS84||(0,i.E)(t)||(0,i.a4)(t)||(0,i.a5)(t)}(n))for(let s=0;s<o;s++)u.getVec(s,U),e.getVec(s,Y),(0,l.q)(Y,Y,O(t,r,U,f,I)),c.setVec(s,Y);else for(let n=0;n<o;n++){u.getVec(n,U),e.getVec(n,Y);const i=(0,E.jg)(s.get(n,1));let o=Math.cos(i);r===w.TANGENT!=(t===P.TO_PCPF)&&(o=1/o),O(t,r,U,f,I),t===P.TO_PCPF?(I[0]*=o,I[1]*=o,I[2]*=o,I[3]*=o,I[4]*=o,I[5]*=o):(I[0]*=o,I[3]*=o,I[6]*=o,I[1]*=o,I[4]*=o,I[7]*=o),(0,l.q)(Y,Y,I),(0,l.n)(Y,Y),c.setVec(n,Y)}return c}(L=w||(w={}))[L.NORMAL=0]="NORMAL",L[L.TANGENT=1]="TANGENT",function(t){t[t.TO_PCPF=0]="TO_PCPF",t[t.FROM_PCPF=1]="FROM_PCPF"}(P||(P={}));const U=(0,y.c)(),Y=(0,y.c)(),G=(0,o.c)(),I=(0,f.c)(),V=()=>s.L.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function k(t,e,{vertexSpace:r,spatialReference:s}){if("georeferenced"===r.type){const n=t;if(!(0,a.p)(e,n,s))return!1;const{origin:i}=r;return(0,l.k)(t,n,i),!0}const n=(0,h.g)(s),i=t;if(!(0,a.p)(e,i,n))return!1;const{origin:u}=r,f=Z;if(!(0,p.c)(s,u,f,n))return!1;const o=(0,c.i)(Z,f);return null!=o&&((0,l.t)(t,i,o),!0)}function j(t,e,r){const{vertexSpace:s,transform:n,vertexAttributes:i}=t,f=(0,d.i)(s)?n:null,y=W(t.spatialReference,r,tt.SOURCE_AND_TARGET);if((0,d.b)(s,e)&&(!f||(0,c.e)(f.localMatrix,o.I))&&z(y)){const{position:t,normal:e,tangent:s}=i,n=r?.allowBufferReuse;return{position:n?t:t.slice(),normal:n?e:e?.slice(),tangent:n?s:s?.slice()}}switch(t.vertexSpace.type){case"local":return"local"===e.type?function({vertexAttributes:t,spatialReference:e,transform:r},{origin:s},n,i){const u=D(e,i);if(!(0,p.c)(e,s,J,u))return g(V(),e,u),null;if(r&&(0,c.m)(J,J,r.localMatrix),!(0,p.c)(e,n,K,u))return g(V(),u,e),null;(0,c.i)(K,K);const f=(0,c.m)(J,K,J);return q(f,e,i,tt.SOURCE_AND_TARGET),$(t,f)}(t,t.vertexSpace,e.origin,r):function({spatialReference:t,vertexAttributes:e,transform:r},{origin:s},n,i){const u=D(t,i);if(!(0,p.c)(t,s,J,u))return g(V(),t,u),null;r&&(0,c.m)(J,J,r.localMatrix),q(J,t,i,tt.SOURCE);const f=new Float64Array(e.position.length),o=function(t,e,r,s,n){(0,B.b)(s,t,J);const i=new Float64Array(t.length);return x(s,n,i,r)?i:(g(V(),n,r),null)}(e.position,0,t,f,u);if(!o)return null;const y=function(t,e,r,s,n,i){if(null==n)return null;const u=new Float32Array(n.length);return M(n,u,i),R(u,t,e,r,s,u)?u:(g(V(),s,e),null)}(o,t,f,u,e.normal,J);if(e.normal&&!y)return null;const h=function(t,e,r,s,n,i){if(null==n)return null;const u=new Float32Array(n.length);return C(n,u,i),N(u,t,e,r,s,u)?u:(g(V(),s,e),null)}(o,t,f,u,e.tangent,J);if(e.tangent&&!h)return null;if(n){const t=(0,l.u)(X,n);(0,B.a)(o,o,t)}return{position:o,normal:y,tangent:h}}(t,t.vertexSpace,e.origin,r);case"georeferenced":return"local"===e.type?function({vertexAttributes:t,spatialReference:e,transform:r},{origin:s},n,i){const f=D(e,i);if(!(0,p.c)(e,n,J,f))return g(V(),e,f),null;const o=1/W(e,i,tt.TARGET);(0,c.s)(J,J,[o,o,o]);const l=(0,c.i)(K,J),{position:y,normal:h,tangent:a}=function(t,e,r){if(!e)return t;if(!r){const{position:r,normal:s,tangent:n}=t;return{position:(0,B.a)(new Float64Array(r.length),r,e),tangent:n,normal:s}}const s=$(t,r.localMatrix);return(0,B.a)(s.position,s.position,e),s}(t,s,r),d=new Float64Array(y.length),T=function(t,e,r,s,n){const i=b(t,e,s,n);if(!i)return g(V(),e,n),null;const u=new Float64Array(i.length);return(0,B.b)(u,i,r),u}(y,e,l,d,f);if(!T)return null;const E=(0,u.b)(Q,l),m=function(t,e,r,s,n,i,u){if(null==t)return null;const f=u??new Float32Array(t.length);return _(t,e,r,s,n,f)?((0,B.t)(f,f,i),f):(g(V(),r,n),null)}(h,y,e,d,f,E,h!==t.normal?h:void 0);if(!m&&h)return null;const A=function(t,e,r,s,n,i,u){if(null==t)return null;const f=u??new Float32Array(t.length);return F(t,e,r,s,n,f)?((0,B.t)(f,f,i,4),f):(g(V(),r,n),null)}(a,y,e,d,f,E,a!==t.tangent?a:void 0);return!A&&a?null:{position:T,normal:m,tangent:A}}(t,t.vertexSpace,e.origin,r):function({vertexAttributes:t,transform:e,spatialReference:r},{origin:s},n,i){const u=W(r,i,tt.SOURCE_AND_TARGET),f=s||!z(u)?(0,c.c)(J,e?.localMatrix??o.I):null;f&&q(f,r,i,tt.SOURCE_AND_TARGET);const{position:y,normal:h,tangent:p}=f?$(t,f):t,a=i?.allowBufferReuse,d=a?y:new Float64Array(y.length);let T=y;if(s&&(T=(0,B.a)(d,T,s)),n){const t=(0,l.u)(X,n);T=(0,B.a)(d,T,t)}return{position:T!==t.position||a?T:T.slice(),normal:h!==t.normal||a?h:h?.slice(),tangent:p!==t.tangent||a?p:p?.slice()}}(t,t.vertexSpace,e.origin,r)}}function D(t,e){return e?.useEllipsoid&&(0,i.a6)(t)?h.W:(0,h.g)(t)}function $(t,e){const r=new Float64Array(t.position.length);(0,B.b)(r,t.position,e);const s=t.normal?new Float32Array(t.normal.length):null,n=t.tangent?new Float32Array(t.tangent.length):null;return s&&t.normal&&M(t.normal,s,e),n&&t.tangent&&C(t.tangent,n,e),{position:r,normal:s,tangent:n}}function q(t,e,r,s){const n=W(e,r,s);z(n)||(0,c.s)(t,t,[n,n,n])}function W(t,e,r){const s=!!(r&tt.SOURCE),n=!!(r&tt.TARGET),i=e?.sourceUnit,u=e?.targetUnit;if(!i&&!u)return 1;let f=H(i,t);s||!i||z(f)||(V().warn("source unit conversion not supported"),f=1);let c=1/H(u,t);return n||!u||z(c)||(V().warn("target unit conversion not supported"),c=1),f*c}function z(t){return(0,n.j)(t,1)}function H(t,e){if(null==t)return 1;const r=(0,i.P)(e);return 1/(0,i.c)(r,"meters",t)}const J=(0,o.c)(),K=(0,o.c)(),Q=(0,f.c)(),X=(0,y.c)(),Z=(0,o.c)();var tt;!function(t){t[t.NONE=0]="NONE",t[t.SOURCE=1]="SOURCE",t[t.TARGET=2]="TARGET",t[t.SOURCE_AND_TARGET=3]="SOURCE_AND_TARGET"}(tt||(tt={}))}}]);