"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6117],{5159:(t,e,n)=>{n(80959),n(30011)},5611:(t,e,n)=>{n.d(e,{a:()=>w,b:()=>b,c:()=>y,d:()=>R,f:()=>v,g:()=>A,i:()=>S,s:()=>F}),n(32773),n(20266);var r=n(16699),o=n(47812),i=n(26809),c=n(2589),a=n(91276),s=n(62482),u=n(18527),l=n(91695),f=n(92080),d=n(77641);function h(t,e){const n=(0,i.l)(t),o=(0,r.h)(t[2]/n),c=Math.atan2(t[1]/n,t[0]/n);return(0,i.s)(e,n,o,c),e}const g=y();function y(){return(0,s.c)()}const p=a.e,m=a.e;function w(t,e){return(0,a.c)(e,t)}function b(t){return t[3]}function A(t){return t}function v(t,e,n,r){return(0,s.f)(t,e,n,r)}function C(t,e,n){if(null==e)return!1;if(!T(t,e,U))return!1;let{t0:r,t1:o}=U;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(n){const{origin:t,direction:o}=e;n[0]=t[0]+o[0]*r,n[1]=t[1]+o[1]*r,n[2]=t[2]+o[2]*r}return!0}const U={t0:0,t1:0};function T(t,e,n){const{origin:r,direction:o}=e,i=M;i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2];const c=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===c)return!1;const a=2*(o[0]*i[0]+o[1]*i[1]+o[2]*i[2]),s=a*a-4*c*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(s<0)return!1;const u=Math.sqrt(s);return n.t0=(-a-u)/(2*c),n.t1=(-a+u)/(2*c),!0}const M=(0,c.c)();function S(t,e){return C(t,e,null)}function E(t,e,n){const r=d.a.get(),c=d.d.get();(0,i.f)(r,e.origin,e.direction);const a=b(t);(0,i.f)(n,r,e.origin),(0,i.j)(n,n,1/(0,i.l)(n)*a);const s=O(t,e.origin),u=(0,d.e)(e.origin,n);return(0,o.d)(c,u+s,r),(0,i.t)(n,n,c),n}function I(t,e,n){const r=(0,i.k)(d.a.get(),e,t),o=(0,i.j)(d.a.get(),r,t[3]/(0,i.l)(r));return(0,i.i)(n,o,t)}function O(t,e){const n=(0,i.k)(d.a.get(),e,t),o=(0,i.l)(n),c=b(t),a=c+Math.abs(c-o);return(0,r.g)(c/a)}const B=(0,c.c)();function x(t,e,n,r){const o=(0,i.k)(B,e,t);switch(n){case l.A.X:{const t=h(o,B)[2];return(0,i.s)(r,-Math.sin(t),Math.cos(t),0)}case l.A.Y:{const t=h(o,B),e=t[1],n=t[2],c=Math.sin(e);return(0,i.s)(r,-c*Math.cos(n),-c*Math.sin(n),Math.cos(e))}case l.A.Z:return(0,i.n)(r,o);default:return}}function D(t,e){const n=(0,i.k)(P,e,t);return(0,i.l)(n)-t[3]}function R(t,e){const n=(0,i.w)(t,e),r=b(t);return n<=r*r}const P=(0,c.c)(),_=y(),F=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:g,altitudeAt:D,angleToSilhouette:O,axisAt:x,cameraFrustumCoverage:function(t,e,n,r){const o=b(t),i=o*o,c=e+.5*Math.PI,a=n*n+i-2*Math.cos(c)*n*o,s=Math.sqrt(a),u=a-i;if(u<=0)return.5;const l=Math.sqrt(u),f=Math.acos(l/s)-Math.asin(o/(s/Math.sin(c)));return Math.min(1,(f+.5*r)/r)},clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,e,n){return C(t,e,n)?n:((0,f.e)(e,t,n),I(t,n,n))},closestPointOnSilhouette:E,containsPoint:R,copy:w,create:y,distanceToSilhouette:function(t,e){const n=(0,i.k)(d.a.get(),e,t),r=(0,i.v)(n),o=t[3]*t[3];return Math.sqrt(Math.abs(r-o))},elevate:function(t,e,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+e,n},equals:m,exactEquals:p,fromCenterAndRadius:function(t,e){return(0,s.f)(t[0],t[1],t[2],e)},fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},fromValues:v,getCenter:A,getExtent:function(t,e){return e},getRadius:b,intersectLine:function(t,e,n){const r=(0,f.f)(e,n);if(!T(t,r,U))return[];const{origin:o,direction:a}=r,{t0:s,t1:l}=U,d=e=>{const n=(0,c.c)();return(0,i.b)(n,o,a,e),I(t,n,n)};return Math.abs(s-l)<(0,u.g)()?[d(s)]:[d(s),d(l)]},intersectRay:C,intersectRayClosestSilhouette:function(t,e,n){if(C(t,e,n))return n;const r=E(t,e,d.a.get());return(0,i.i)(n,e.origin,(0,i.j)(d.a.get(),e.direction,(0,i.x)(e.origin,r)/(0,i.l)(e.direction))),n},intersectsRay:S,projectPoint:I,setAltitudeAt:function(t,e,n,r){const o=D(t,e),c=x(t,e,l.A.Z,P),a=(0,i.j)(P,c,n-o);return(0,i.i)(r,e,a)},setExtent:function(t,e,n){return t!==n&&w(t,n),n},tmpSphere:_,union:function(t,e,n=(0,s.c)()){const r=(0,i.x)(t,e),o=t[3],c=e[3];return r+c<o?((0,a.c)(n,t),n):r+o<c?((0,a.c)(n,e),n):((0,i.m)(n,t,e,(r+c-o)/(2*r)),n[3]=(r+o+c)/2,n)},wrap:function(t){return t}},Symbol.toStringTag,{value:"Module"}))},16055:(t,e,n)=>{n.d(e,{C:()=>r,D:()=>u,N:()=>i,a:()=>l}),n(16699);var r,o,i,c=n(91886),a=n(32773),s=n(97538);function u(t){t.vertex.code.add(c.g`
    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {
      float symbolAlpha = 0.0;

      const float maxTint = 85.0;
      const float maxReplace = 170.0;
      const float scaleAlpha = 3.0;

      if (symbolColor.a > maxReplace) {
        colorMixMode = ${c.g.int(r.Multiply)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);
      } else if (symbolColor.a > maxTint) {
        colorMixMode = ${c.g.int(r.Replace)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);
      } else if (symbolColor.a > 0.0) {
        colorMixMode = ${c.g.int(r.Tint)};
        symbolAlpha = scaleAlpha * symbolColor.a;
      } else {
        colorMixMode = ${c.g.int(r.Multiply)};
        symbolAlpha = 0.0;
      }

      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);
    }
  `)}function l(t,e){switch(e.normalType){case i.Compressed:t.attributes.add(s.V.NORMALCOMPRESSED,"vec2"),t.vertex.code.add(c.g`vec3 decompressNormal(vec2 normal) {
float z = 1.0 - abs(normal.x) - abs(normal.y);
return vec3(normal + sign(normal) * min(z, 0.0), z);
}
vec3 normalModel() {
return decompressNormal(normalCompressed);
}`);break;case i.Attribute:t.attributes.add(s.V.NORMAL,"vec3"),t.vertex.code.add(c.g`vec3 normalModel() {
return normal;
}`);break;case i.ScreenDerivative:t.fragment.code.add(c.g`vec3 screenDerivativeNormal(vec3 positionView) {
return normalize(cross(dFdx(positionView), dFdy(positionView)));
}`);break;default:(0,a.l)(e.normalType);case i.COUNT:}}(o=r||(r={}))[o.Multiply=1]="Multiply",o[o.Ignore=2]="Ignore",o[o.Replace=3]="Replace",o[o.Tint=4]="Tint",function(t){t[t.Attribute=0]="Attribute",t[t.Compressed=1]="Compressed",t[t.ScreenDerivative=2]="ScreenDerivative",t[t.COUNT=3]="COUNT"}(i||(i={}))},18435:(t,e,n)=>{n(6407),n(32773)},26442:(t,e,n)=>{n.d(e,{D:()=>c,M:()=>a});var r=n(80070),o=n(91886),i=n(70045);function c({code:t,uniforms:e},n){e.add(new r.F("dpDummy",(()=>1))),t.add(o.g`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 hiD = hiA + hiB;
vec3 loD = loA + loB;
return  dpDummy * hiD + loD;
}`)}class a extends r.U{constructor(t,e){super(t,"mat3",i.B.Draw,((n,r,o)=>n.setUniformMatrix3fv(t,e(r,o))))}}},36117:(t,e,n)=>{n.d(e,{i:()=>h,q:()=>d});var r,o,i=n(64604),c=(n(32773),n(6407),n(47812),n(87162)),a=(n(26809),n(2589)),s=(n(88321),n(7969),n(43577),n(48402)),u=(n(5611),n(5159),n(73600),n(56887)),l=(n(69763),n(29222),n(62214)),f=(n(16055),n(23937));async function d(t,e,n,r,o,c,a,s){const l=[];for(const r of e)if(r&&o.includes(r.name)){const e=`${t}/nodes/${n}/attributes/${r.key}/0`;l.push({url:e,storageInfo:r})}const f=await Promise.allSettled(l.map((t=>(0,i.A)(t.url,{responseType:"array-buffer",query:{...a,token:c},signal:s?.signal}).then((e=>(0,u.r)(t.storageInfo,e.data)))))),d=[];for(const t of r){const e={};for(let n=0;n<f.length;n++){const r=f[n];if("fulfilled"===r.status){const o=r.value;e[l[n].storageInfo.name]=(0,u.g)(o,t)}}d.push(e)}return d}function h(t){null!=t&&(t[3]=-1)}n(18435),(0,s.c)(),(o=r||(r={}))[o.OUTSIDE=0]="OUTSIDE",o[o.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",o[o.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",o[o.INSIDE=3]="INSIDE",(0,l.c)({color:[0,0,0,0],opacity:0}),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,a.c)(),(0,s.c)(),(0,s.c)(),new f.O,(0,a.c)(),new Array(72),(0,c.c)()},43577:(t,e,n)=>{n.d(e,{p:()=>i}),n(6407),n(20266),n(32773),n(69763),n(44600),n(36533),n(96221),n(64752),n(84200),n(67504);var r=n(7969),o=(n(47387),n(86741));function i(t,e,n,r,i){return!(null==e||null==r||t.length<2)&&(c.x=t[0],c.y=t[1],c.z=t[2],c.spatialReference=e,(0,o.p)(c,n,r,i))}const c={x:0,y:0,z:0,hasZ:!0,hasM:!1,spatialReference:r.A.WGS84,type:"point"}},51002:(t,e,n)=>{var r;function o(t){return t===r.Shadow||t===r.ShadowHighlight||t===r.ShadowExcludeHighlight||t===r.ViewshedShadow}function i(t){return function(t){return function(t){return s(t)||a(t)}(t)||f(t)}(t)||t===r.Normal}function c(t){return function(t){return l(t)||f(t)}(t)||t===r.Normal}function a(t){return t===r.Highlight||t===r.ObjectAndLayerIdColor}function s(t){return t===r.Color}function u(t){return s(t)||d(t)}function l(t){return u(t)||a(t)}function f(t){return t===r.Depth}function d(t){return t===r.ColorEmission}function h(t){switch(t){case r.Depth:case r.Shadow:case r.ShadowHighlight:case r.ShadowExcludeHighlight:case r.ViewshedShadow:return!0}return!1}n.d(e,{S:()=>r,g:()=>l,i:()=>u,k:()=>c,l:()=>o,m:()=>i,n:()=>d,o:()=>h}),function(t){t[t.Color=0]="Color",t[t.ColorEmission=1]="ColorEmission",t[t.Depth=2]="Depth",t[t.Normal=3]="Normal",t[t.Shadow=4]="Shadow",t[t.ShadowHighlight=5]="ShadowHighlight",t[t.ShadowExcludeHighlight=6]="ShadowExcludeHighlight",t[t.ViewshedShadow=7]="ViewshedShadow",t[t.Highlight=8]="Highlight",t[t.ObjectAndLayerIdColor=9]="ObjectAndLayerIdColor",t[t.COUNT=10]="COUNT"}(r||(r={}))},56887:(t,e,n)=>{n.d(e,{a:()=>w,c:()=>v,d:()=>u,g:()=>b,r:()=>U});var r=n(6407),o=n(32773),i=n(20266),c=n(97538);const a=!0;function s(t,e,n){return{identifier:String.fromCharCode.apply(null,new Uint8Array(t,n+0,10)),version:e.getUint16(n+10,a),checksum:e.getUint32(n+12,a)}}function u(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:i}=s(t,e,n);if(n+=16,"LEPCC     "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(i>1)throw new r.A("lepcc-decode-error","Unknown version");const c=function(t,e){return{sizeLo:t.getUint32(e+0,a),sizeHi:t.getUint32(e+4,a),minX:t.getFloat64(e+8,a),minY:t.getFloat64(e+16,a),minZ:t.getFloat64(e+24,a),maxX:t.getFloat64(e+32,a),maxY:t.getFloat64(e+40,a),maxZ:t.getFloat64(e+48,a),errorX:t.getFloat64(e+56,a),errorY:t.getFloat64(e+64,a),errorZ:t.getFloat64(e+72,a),count:t.getUint32(e+80,a),reserved:t.getUint32(e+84,a)}}(e,n);if(n+=88,c.sizeHi*2**32+c.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const u=new Float64Array(3*c.count),f=[],d=[],h=[],g=[];if(n=l(t,n,f),n=l(t,n,d),n=l(t,n,h),n=l(t,n,g),n!==t.byteLength)throw new r.A("lepcc-decode-error","Bad length");let y=0,p=0;for(let t=0;t<f.length;t++){p+=f[t];let e=0;for(let n=0;n<d[t];n++){e+=h[y];const t=g[y];u[3*y]=Math.min(c.maxX,c.minX+2*c.errorX*e),u[3*y+1]=Math.min(c.maxY,c.minY+2*c.errorY*p),u[3*y+2]=Math.min(c.maxZ,c.minZ+2*c.errorZ*t),y++}}return{errorX:c.errorX,errorY:c.errorY,errorZ:c.errorZ,result:u}}function l(t,e,n){const r=[];e=f(t,e,r);const o=[];for(let i=0;i<r.length;i++){o.length=0,e=f(t,e,o);for(let t=0;t<o.length;t++)n.push(o[t]+r[i])}return e}function f(t,e,n){const o=new DataView(t,e),i=o.getUint8(0),c=31&i,s=!!(32&i),u=(192&i)>>6;let l=0;if(0===u)l=o.getUint32(1,a),e+=5;else if(1===u)l=o.getUint16(1,a),e+=3;else{if(2!==u)throw new r.A("lepcc-decode-error","Bad count type");l=o.getUint8(1),e+=2}if(s)throw new r.A("lepcc-decode-error","LUT not implemented");const f=Math.ceil(l*c/8),d=new Uint8Array(t,e,f);let h=0,g=0,y=0;const p=-1>>>32-c;for(let t=0;t<l;t++){for(;g<c;)h|=d[y]<<g,g+=8,y+=1;n[t]=h&p,h>>>=c,g-=c,g+c>32&&(h|=d[y-1]>>8-g)}return e+y}function d(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:i}=s(t,e,n);if(n+=16,"ClusterRGB"!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(i>1)throw new r.A("lepcc-decode-error","Unknown version");const c=function(t,e){return{sizeLo:t.getUint32(e+0,a),sizeHi:t.getUint32(e+4,a),count:t.getUint32(e+8,a),colorMapCount:t.getUint16(e+12,a),lookupMethod:t.getUint8(e+14),compressionMethod:t.getUint8(e+15)}}(e,n);if(n+=16,c.sizeHi*2**32+c.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");if((2===c.lookupMethod||1===c.lookupMethod)&&0===c.compressionMethod){if(3*c.colorMapCount+c.count+n!==t.byteLength||c.colorMapCount>256)throw new r.A("lepcc-decode-error","Bad count");const e=new Uint8Array(t,n,3*c.colorMapCount),o=new Uint8Array(t,n+3*c.colorMapCount,c.count),i=new Uint8Array(3*c.count);for(let t=0;t<c.count;t++){const n=o[t];i[3*t]=e[3*n],i[3*t+1]=e[3*n+1],i[3*t+2]=e[3*n+2]}return i}if(0===c.lookupMethod&&0===c.compressionMethod){if(3*c.count+n!==t.byteLength||0!==c.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");return new Uint8Array(t,n).slice()}if(c.lookupMethod<=2&&1===c.compressionMethod){if(n+3!==t.byteLength||1!==c.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");const o=e.getUint8(n),i=e.getUint8(n+1),a=e.getUint8(n+2),s=new Uint8Array(3*c.count);for(let t=0;t<c.count;t++)s[3*t]=o,s[3*t+1]=i,s[3*t+2]=a;return s}throw new r.A("lepcc-decode-error","Bad method "+c.lookupMethod+","+c.compressionMethod)}function h(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:i}=s(t,e,n);if(n+=16,"Intensity "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(i>1)throw new r.A("lepcc-decode-error","Unknown version");const c=function(t,e){return{sizeLo:t.getUint32(e+0,a),sizeHi:t.getUint32(e+4,a),count:t.getUint32(e+8,a),scaleFactor:t.getUint16(e+12,a),bitsPerPoint:t.getUint8(e+14),reserved:t.getUint8(e+15)}}(e,n);if(n+=16,c.sizeHi*2**32+c.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const u=new Uint16Array(c.count);if(8===c.bitsPerPoint){if(c.count+n!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const e=new Uint8Array(t,n,c.count);for(let t=0;t<c.count;t++)u[t]=e[t]*c.scaleFactor}else if(16===c.bitsPerPoint){if(2*c.count+n!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const e=new Uint16Array(t,n,c.count);for(let t=0;t<c.count;t++)u[t]=e[t]*c.scaleFactor}else{const e=[];if(f(t,n,e)!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");for(let t=0;t<c.count;t++)u[t]=e[t]*c.scaleFactor}return u}const g=()=>i.L.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function y(t,e,n){let o="",i=0;for(;i<n;){const c=t[e+i];if(c<128)o+=String.fromCharCode(c),i++;else if(c>=192&&c<224){if(i+1>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const a=(31&c)<<6|63&t[e+i+1];o+=String.fromCharCode(a),i+=2}else if(c>=224&&c<240){if(i+2>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(15&c)<<12|(63&t[e+i+1])<<6|63&t[e+i+2];o+=String.fromCharCode(a),i+=3}else{if(!(c>=240&&c<248))throw new r.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(7&c)<<18|(63&t[e+i+1])<<12|(63&t[e+i+2])<<6|63&t[e+i+3];if(a>=65536){const t=55296+(a-65536>>10),e=56320+(1023&a);o+=String.fromCharCode(t,e)}else o+=String.fromCharCode(a);i+=4}}}return o}function p(t,e){const n={byteOffset:0,byteCount:0,fields:Object.create(null)};let r=0;for(let o=0;o<e.length;o++){const i=e[o],c=i.valueType||i.type,a=M[c];n.fields[i.property]=a(t,r),r+=T[c].BYTES_PER_ELEMENT}return n.byteCount=r,n}function m(t,e,n){const o=[];let i,c,a=0;for(c=0;c<t;c+=1){if(i=e[c],i>0){if(o.push(y(n,a,i-1)),0!==n[a+i-1])throw new r.A("string-array-error","Invalid string array: missing null termination.")}else o.push(null);a+=i}return o}function w(t,e){return new(0,T[e.valueType])(t,e.byteOffset,e.count*e.valuesPerElement)}function b(t,e){if(!t)return null;const n=t[e];return(0,o.D)(t)?n===o.E?null:n:(0,o.F)(t)?n===o.G?null:n:n!=n?null:n}function A(t,e,n){if(e!==t&&g().error(`Invalid ${n} buffer size\n expected: ${t}, actual: ${e})`),e<t)throw new r.A("buffer-too-small","Binary buffer is too small",{expectedSize:t,actualSize:e})}function v(t,e){const n=p(t,e&&e.header);let r=n.byteCount;const o={isDraco:!1,header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:{}},i=n.fields,c=null!=i.vertexCount?i.vertexCount:i.count;for(const t of e.ordering){if(!e.vertexAttributes[t])continue;const n={...e.vertexAttributes[t],byteOffset:r,count:c},i=C[t]||"_"+t;o.vertexAttributes[i]=n,r+=E(n.valueType)*n.valuesPerElement*c}const a=i.faceCount;if(e.faces&&a){o.faces={};for(const t of e.ordering){if(!e.faces[t])continue;const n={...e.faces[t],byteOffset:r,count:a};o.faces[t]=n,r+=E(n.valueType)*n.valuesPerElement*a}}const s=i.featureCount;if(e.featureAttributes&&e.featureAttributeOrder&&s){o.featureAttributes={};for(const t of e.featureAttributeOrder){if(!e.featureAttributes[t])continue;const n={...e.featureAttributes[t],byteOffset:r,count:s};o.featureAttributes[t]=n,r+=("UInt64"===n.valueType?8:E(n.valueType))*n.valuesPerElement*s}}return A(r,t.byteLength,"geometry"),o.byteCount=r-o.byteOffset,o}const C={position:c.V.POSITION,normal:c.V.NORMAL,color:c.V.COLOR,uv0:c.V.UV0,region:c.V.UVREGION};function U(t,e,n,i=!1){if("lepcc-rgb"===t.encoding)return i?d(e):(c=d(e),Array.isArray(c)?c.length<o.n?c:new Uint8Array(c):c.length<o.n?Array.from(c):c);var c,a;if("lepcc-intensity"===t.encoding)return i?h(e):(a=h(e),Array.isArray(a)?a.length<o.n?a:new Uint16Array(a):a.length<o.n?Array.from(a):a);if(null!=t.encoding&&""!==t.encoding)throw new r.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");t["attributeByteCounts "]&&!t.attributeByteCounts&&(g().warn("Warning: Trailing space in 'attributeByteCounts '."),t.attributeByteCounts=t["attributeByteCounts "]),"ObjectIds"===t.ordering[0]&&t.hasOwnProperty("objectIds")&&(g().warn("Warning: Case error in objectIds"),t.ordering[0]="objectIds");const s=function(t,e,n){const i=null!=e.header?p(t,e.header):{byteOffset:0,byteCount:0,fields:{count:n}},c={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let a=i.byteCount;for(let t=0;t<e.ordering.length;t++){const n=e.ordering[t],s=(0,o.o8)(e[n]);if(s.count=i.fields.count??0,"String"===s.valueType){if(s.byteOffset=a,s.byteCount=i.fields[n+"ByteCount"],"UTF-8"!==s.encoding)throw new r.A("unsupported-encoding","Unsupported String encoding.",{encoding:s.encoding});if(s.timeEncoding&&"ECMA_ISO8601"!==s.timeEncoding)throw new r.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:s.timeEncoding})}else{if(!S(s.valueType))throw new r.A("unsupported-value-type","Unsupported binary valueType",{valueType:s.valueType});{const t=E(s.valueType);a+=a%t!==0?t-a%t:0,s.byteOffset=a,s.byteCount=t*s.valuesPerElement*s.count}}a+=s.byteCount??0,c.entries[n]=s}return c.byteCount=a-c.byteOffset,c}(e,t,n);A(s.byteOffset+s.byteCount,e.byteLength,"attribute");const u=s.entries.attributeValues||s.entries.objectIds;if(u){if("String"===u.valueType){const t=s.entries.attributeByteCounts,n=w(e,t),r=function(t,e){return new Uint8Array(t,e.byteOffset,e.byteCount)}(e,u);return u.timeEncoding?function(t,e,n){return m(t,e,n).map((t=>{const e=t?Date.parse(t):null;return null==e||Number.isNaN(e)?null:e}))}(t.count,n,r):m(t.count,n,r)}return i?w(e,u):function(t,e){const n=w(t,e);if(n.length>=o.n)return n;const r=new Array;return n.forEach(((t,e)=>r.push(b(n,e)))),r}(e,u)}throw new r.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const T={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},M={Float32:(t,e)=>new DataView(t,0).getFloat32(e,!0),Float64:(t,e)=>new DataView(t,0).getFloat64(e,!0),UInt8:(t,e)=>new DataView(t,0).getUint8(e),Int8:(t,e)=>new DataView(t,0).getInt8(e),UInt16:(t,e)=>new DataView(t,0).getUint16(e,!0),Int16:(t,e)=>new DataView(t,0).getInt16(e,!0),UInt32:(t,e)=>new DataView(t,0).getUint32(e,!0),Int32:(t,e)=>new DataView(t,0).getInt32(e,!0)};function S(t){return T.hasOwnProperty(t)}function E(t){return S(t)?T[t].BYTES_PER_ELEMENT:0}},62214:(t,e,n)=>{n.d(e,{c:()=>l}),n(35902),n(32773);var r,o,i,c,a,s=n(62482),u=(n(85480),n(16055),n(51002),n(88160),n(91886),n(70045),n(80070));function l(t){return{...f,...t,type:c.Solid}}n(97538),n(26442),(i=r||(r={}))[i.TRANSPARENT=0]="TRANSPARENT",i[i.OPAQUE=1]="OPAQUE",u.U,function(t){t[t.Uniform=0]="Uniform",t[t.Varying=1]="Varying",t[t.COUNT=2]="COUNT"}(o||(o={})),function(t){t[t.Solid=0]="Solid",t[t.Sketch=1]="Sketch",t[t.Mixed=2]="Mixed",t[t.COUNT=3]="COUNT"}(c||(c={})),function(t){t[t.REGULAR=0]="REGULAR",t[t.SILHOUETTE=1]="SILHOUETTE"}(a||(a={}));const f={color:(0,s.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:r.OPAQUE,hasSlicePlane:!1};(0,s.f)(0,0,0,.2),r.OPAQUE},70045:(t,e,n)=>{var r;n.d(e,{B:()=>r}),function(t){t[t.Bind=0]="Bind",t[t.Pass=1]="Pass",t[t.Draw=2]="Draw"}(r||(r={}))},80070:(t,e,n)=>{n.d(e,{F:()=>s,M:()=>d,T:()=>c,U:()=>i,a:()=>l,b:()=>f,c:()=>u,o:()=>a});var r=n(70045),o=n(32773);class i{constructor(t,e,n,o,i=null){if(this.name=t,this.type=e,this.arraySize=i,this.bind={[r.B.Bind]:null,[r.B.Pass]:null,[r.B.Draw]:null},o)switch(n){case void 0:break;case r.B.Bind:this.bind[r.B.Bind]=o;break;case r.B.Pass:this.bind[r.B.Pass]=o;break;case r.B.Draw:this.bind[r.B.Draw]=o}}equals(t){return this.type===t.type&&this.name===t.name&&this.arraySize===t.arraySize}}class c extends i{constructor(t,e){super(t,"sampler2D",r.B.Draw,((n,r,o)=>n.bindTexture(t,e(r,o))))}}function a(){return!!(0,o.h)("enable-feature:objectAndLayerId-rendering")}class s extends i{constructor(t,e){super(t,"float",r.B.Bind,((n,r)=>n.setUniform1f(t,e(r))))}}class u extends i{constructor(t,e){super(t,"vec3",r.B.Draw,((n,r,o,i)=>n.setUniform3fv(t,e(r,o,i))))}}class l extends i{constructor(t,e){super(t,"vec3",r.B.Pass,((n,r,o)=>n.setUniform3fv(t,e(r,o))))}}class f extends i{constructor(t,e){super(t,"mat3",r.B.Pass,((n,r,o)=>n.setUniformMatrix3fv(t,e(r,o))))}}class d extends i{constructor(t,e){super(t,"mat4",r.B.Bind,((n,r)=>n.setUniformMatrix4fv(t,e(r))))}}},85480:(t,e,n)=>{n.d(e,{p:()=>o});var r=n(16699);function o(t,e,n=0){const o=(0,r.c)(t,0,a);for(let t=0;t<4;t++)e[n+t]=Math.floor(256*((c=o*i[t])-Math.floor(c)));var c}const i=[1,256,65536,16777216],c=[1/256,1/65536,1/16777216,1/4294967296],a=function(t,e=0){let n=0;for(let r=0;r<4;r++)n+=t[e+r]*c[r];return n}(new Uint8ClampedArray([255,255,255,255]))},86741:(t,e,n)=>{n.d(e,{p:()=>c});var r=n(2589),o=n(88321),i=n(47387);function c(t,e,n,r){if((0,o.canProjectWithoutEngine)(t.spatialReference,n)){a[0]=t.x,a[1]=t.y;const o=t.z;return a[2]=o??r??0,(0,i.p)(a,t.spatialReference,0,e,n,0)}const c=(0,o.tryProjectWithZConversion)(t,n);return!!c&&(e[0]=c?.x,e[1]=c?.y,e[2]=c?.z??r??0,!0)}const a=(0,r.c)()},88160:(t,e,n)=>{n.d(e,{F:()=>a,R:()=>c});var r=n(91886),o=n(70045),i=n(80070);function c(t){t.code.add(r.g`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}`),t.code.add(r.g`const vec4 RGBA_TO_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgbaTofloat(vec4 rgba) {
return dot(rgba, RGBA_TO_FLOAT_FACTORS);
}`),t.code.add(r.g`const vec4 uninterpolatedRGBAToFloatFactors = vec4(
1.0 / 256.0,
1.0 / 256.0 / 256.0,
1.0 / 256.0 / 256.0 / 256.0,
1.0 / 256.0 / 256.0 / 256.0 / 256.0
);
float uninterpolatedRGBAToFloat(vec4 rgba) {
return (dot(round(rgba * 255.0), uninterpolatedRGBAToFloatFactors) - 0.5) * 2.0;
}`)}class a extends i.U{constructor(t,e){super(t,"vec4",o.B.Draw,((n,r,o)=>n.setUniform4fv(t,e(r,o))))}}},91886:(t,e,n)=>{function r(t,...e){let n="";for(let r=0;r<e.length;r++)n+=t[r]+e[r];return n+=t[t.length-1],n}function o(t,e,n=""){return t?e:n}n.d(e,{I:()=>o,g:()=>r}),function(t){t.int=function(t){return Math.round(t).toString()},t.float=function(t){return t.toPrecision(8)}}(r||(r={}))},92080:(t,e,n)=>{n.d(e,{O:()=>s,c:()=>l,d:()=>y,e:()=>p,f:()=>g,g:()=>h,w:()=>d}),n(32773);var r=n(29818),o=n(88485),i=n(26809),c=n(2589),a=n(77641);class s{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.n)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*u);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,u));t++)this._items.push(this._allocator())}}const u=1024;function l(t){return t?f((0,c.b)(t.origin),(0,c.b)(t.direction)):f((0,c.c)(),(0,c.c)())}function f(t,e){return{origin:t,direction:e}}function d(t,e){const n=m.get();return n.origin=t,n.direction=e,n}function h(t,e=l()){return function(t,e,n=l()){return(0,i.c)(n.origin,t),(0,i.c)(n.direction,e),n}(t.origin,t.direction,e)}function g(t,e,n=l()){return(0,i.c)(n.origin,t),(0,i.k)(n.direction,e,t),n}function y(t,e){const n=(0,i.f)(a.a.get(),(0,i.n)(a.a.get(),t.direction),(0,i.k)(a.a.get(),e,t.origin));return(0,i.d)(n,n)}function p(t,e,n){const r=(0,i.d)(t.direction,(0,i.k)(n,e,t.origin));return(0,i.i)(n,t.origin,(0,i.j)(n,t.direction,r)),n}const m=new s((()=>l()));(0,c.c)(),(0,c.c)(),(0,c.c)(),(0,o.c)()}}]);