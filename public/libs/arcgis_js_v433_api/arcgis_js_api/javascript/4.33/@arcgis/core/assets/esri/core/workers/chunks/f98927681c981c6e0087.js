"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2461,6433],{2461:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ce});var i=r(32816),n=r(52731),a=r(17745),s=r(6407),o=r(65283),l=r(93217),u=r(2810),d=r(80959),c=r(67321),p=r(23381),h=r(99063),y=r(29298),m=r(32773),f=r(20266),g=r(49877),b=r(69421),T=r(73597),A=r(67315),M=r(8368),S=r(31315),w=r(4335),_=r(74285),v=r(99781),F=r(29201),I=r(88730),x=r(38424),E=r(46935),C=r(96807),Z=r(69448),O=r(64604),j=r(65174),k=r(58196),P=r(38093),N=r(30011),L=r(72393),G=r(80473),R=r(73509),U=r(57732),q=r(90740),$=r(56273),D=r(82530),V=r(50282),z=r(7969),B=r(78644),J=r(10224),K=r(60408),H=r(13226),Y=r(91381),W=r(60027),Q=r(16677),X=r(17813),ee=r(23875),te=r(70061),re=r(47252),ie=r(73600),ne=r(20978),ae=r(54616),se=r(53065);r(35819),r(36555),r(13671),r(45371),r(61532),r(19247),r(85176),r(93181),r(50704),r(91047),r(36172),r(81272),r(41390),r(40499),r(58498),r(36544),r(48064),r(44945),r(99924),r(48844),r(51961),r(62399),r(64995),r(70861),r(93804),r(33150),r(58173),r(66110),r(67520),r(27532),r(88663),r(48103),r(50214),r(59192),r(16345),r(54483),r(65085),r(33611),r(84857),r(60373),r(98187),r(35902),r(24330),r(16699),r(16794),r(52357),r(11090),r(49319),r(93546),r(29570),r(34592),r(79825),r(95101),r(67578),r(17857),r(82537),r(14896),r(95611),r(98089),r(91366),r(43435),r(73435),r(28276),r(85472),r(79323),r(66959),r(74148),r(78774),r(8884),r(81095),r(4798),r(67470),r(25579),r(69660),r(85994),r(43423),r(23070),r(95717),r(968),r(85901),r(82458),r(37740),r(25329),r(82140),r(40988),r(42586),r(44370),r(18653),r(95637),r(59930),r(45862),r(72762),r(71613),r(77219),r(70534),r(45817),r(15806),r(69763),r(96221),r(18683),r(29512),r(1178),r(44600),r(2160),r(64752),r(29208),r(49755),r(54131),r(19869),r(64524),r(73067),r(93049),r(86941),r(23916),r(93074),r(1739),r(79747),r(81618),r(81284),r(44864),r(17872),r(91815),r(36533),r(84200),r(97827),r(91695),r(18169),r(20762),r(48402),r(67504),r(92517),r(85232),r(93471),r(7182),r(47788),r(19297),r(82408),r(91658),r(70580),r(75191),r(24319),r(62092),r(53252),r(34039),r(43534),r(3495),r(97906),r(65023),r(31424),r(74676),r(32368),r(7391),r(22529),r(44747),r(38094),r(67723),r(2589),r(47239),r(63728),r(4157),r(62401),r(89322),r(20138),r(53370),r(59858),r(46946),r(3816),r(71992),r(80167),r(4478),r(91808),r(7161),r(55586),r(92229),r(18344),r(53610),r(29447),r(78273),r(49475),r(64884),r(23351),r(35121),r(51222),r(42870),r(54512),r(53103),r(19648),r(42948),r(79875),r(133),r(78016),r(36309),r(78328),r(25018),r(91276),r(18527),r(62482),r(56487),r(6399),r(9498),r(24079),r(38149),r(19681),r(40328),r(84539),r(65299),r(38641),r(27281),r(77037),r(3827),r(98238),r(41740),r(57111),r(75651),r(88614),r(1030),r(15319),r(60785),r(3112),r(46626),r(45560),r(56303),r(85890),r(55884),r(12856),r(91524),r(4718),r(60369),r(13201),r(47215),r(47812),r(56570),r(23787),r(22151),r(78860),r(26805),r(13983),r(58194),r(4734),r(20804),r(63834),r(87357),r(19969),r(9207);const oe={key:"type",base:W.A,errorContext:"renderer",typeMap:{simple:Q.A,"unique-value":X.A,"class-breaks":Y.A}},le=(0,b.c)({types:oe}),ue=["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"],de=(0,P.d)();let ce=0;function pe(e,t){let r=e.json.write;return"object"!=typeof r&&(r=e.json.write={}),r.ignoreOrigin=!0,t?.spatialOnly&&(r.layerContainerTypes=D.e),e}function he(e){const t={write:{ignoreOrigin:!0}};return e?.name&&(t.name=e.name),"object"==typeof t.write&&(e?.spatialOnly&&(t.write.layerContainerTypes=D.e),e?.target&&(t.write.target=e.target)),t}function ye(e){switch(e){case"point":case"multipoint":return ae.d.clone();case"polyline":return ae.a.clone();case"polygon":case"multipatch":return ae.c.clone();default:return null}}function me(e,t){return null==e?null:t.subtypes?.find((t=>t.code===e))}function fe(e,t){let r=null;switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":r="point";break;case"esriGeometryPolyline":r="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":r="polygon";break;default:t.type,r=null}const i={},n=me(e,t);if(null!=n){const{defaultValues:e}=n;for(const t in e)i[t]=e[t]}return i[t.subtypeField]=e,new B.A({name:"New Feature",drawingTool:r,prototype:{attributes:i}})}let ge=class extends((0,u.M)(n.A.ClonableMixin(G.A.IdentifiableMixin(R.A)))){constructor(e){super(e),this.attributeTableTemplate=null,this.charts=null,this.editingEnabled=!0,this.fieldOverrides=null,this.fieldsIndex=null,this.formTemplate=null,this.id=`${Date.now().toString(16)}-subtype-sublayer-${ce++}`,this.type="subtype-sublayer",this.labelsVisible=!0,this.labelingInfo=null,this.layerType="ArcGISFeatureLayer",this.legendEnabled=!0,this.listMode="show",this.minScale=0,this.maxScale=0,this.opacity=1,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.subtypeCode=null,this.templates=null,this.title=null,this.visible=!0}load(e){return(0,N.yp)(this.renderer,this.fieldsIndex),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return(0,U.d)(e),new re.T({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,displayField:this.parent?.displayField??"",fields:this.fields,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}get capabilities(){return this.parent?.capabilities}get effectiveCapabilities(){return this.parent?.effectiveCapabilities}get effectiveEditingEnabled(){const{parent:e}=this;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}get elevationInfo(){return this.parent?.elevationInfo}get featureTitleFields(){return[...this._titleCreator.requiredFields]}writeFieldOverrides(e,t,r){const{fields:i,parent:n}=this;let a;if(i){a=[];let e=0;i.forEach((({name:t,alias:r,editable:i,visible:s})=>{if(!s)return;const o=n?.fields?.find((e=>e.name===t));if(!o)return;const l={name:t};let u=!1;r!==o.alias&&(l.alias=r,u=!0),i!==o.editable&&(l.editable=i,u=!0),a.push(l),u&&e++})),0===e&&a.length===i.length&&(a=null)}else a=(0,m.o8)(e);a?.length&&(0,q.s)(r,a,t)}get fields(){const{parent:e,fieldOverrides:t,subtypeCode:r}=this,i=e?.fields;if(!e||!i?.length)return null;const{subtypes:n,subtypeField:a}=e,s=n?.find((e=>e.code===r)),o=s?.defaultValues,l=s?.domains,u=[];for(const e of i){const i=e.clone(),{name:n}=i,s=t?.find((e=>e.name===n));if(i.visible=!t?.length||!!s,s){const{alias:e,editable:t}=s;e&&(i.alias=e),!1===t&&(i.editable=!1)}const d=o?.[n]??null;i.defaultValue=n===a?r:d;const c=l?.[n]??null;i.domain=n===a?null:c?"inherited"===c.type?i.domain:c.clone():null,u.push(i)}return u}get floorInfo(){return this.parent?.floorInfo}get isTable(){return!!this.parent?.isTable}get geometryType(){return this.parent?.geometryType}get globalIdField(){return this.parent?this.parent.globalIdField:(f.L.getLogger(this).error(Ae("globalIdField")),null)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get objectIdField(){return this.parent||f.L.getLogger(this).error(Ae("objectIdField")),this.parent?.objectIdField}get defaultPopupTemplate(){return this.createPopupTemplate()}get relationships(){return this.parent?.relationships}set renderer(e){(0,N.yp)(e,this.fieldsIndex),this._override("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const{parent:e}=this;return e&&!e.isTable&&"mesh"!==e.geometryType?(t=e.geometryType,new Q.A({symbol:ye(t)})):null;var t}readRendererFromService(e,t,r){if("Table"===t.type)return null;const i=t.drawingInfo?.renderer,n=le(i,t,r);let a;const{subtypeCode:s}=this;if(null!=s&&function(e,t){return!(!t||"unique-value"!==e?.type||null==e.field||e.field.toLowerCase()!==t.toLowerCase()||e.field2||e.field3||e.valueExpression)}(n,t.subtypeField)){const e=n.uniqueValueInfos?.find((({value:e})=>(e="number"==typeof e?String(e):e)===String(s)));e&&(a=new Q.A({symbol:e.symbol}))}else"simple"!==n?.type||n.visualVariables?.length||(a=n);return a}readRenderer(e,t,r){const i=t?.layerDefinition?.drawingInfo?.renderer;if(!i)return;const n=i.visualVariables?.some((e=>"rotationInfo"!==e.type));return n?void 0:le(i,t,r)||void 0}get spatialReference(){return this.parent?.spatialReference??z.A.WGS84}get subtypeField(){return this.parent?.subtypeField}readTemplatesFromService(e,t){return[fe(this.subtypeCode,t)]}readTitleFromService(e,t){const r=me(this.subtypeCode,t);return null!=r?r.name:null}get url(){return this.parent?.url}get userHasUpdateItemPrivileges(){return!!this.parent?.userHasUpdateItemPrivileges}async addAttachment(e,t){const{parent:r}=this;if(!r)throw Ae("addAttachment");if(e.getAttribute(r.subtypeField)!==this.subtypeCode)throw new s.A("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");return r.addAttachment(e,t)}async updateAttachment(e,t,r){const{parent:i}=this;if(!i)throw Ae("updateAttachment");if(e.getAttribute(i.subtypeField)!==this.subtypeCode)throw new s.A("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");return i.updateAttachment(e,t,r)}async deleteAttachments(e,t){const{parent:r}=this;if(!r)throw Ae("deleteAttachments");if(e.getAttribute(r.subtypeField)!==this.subtypeCode)throw new s.A("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");return r.deleteAttachments(e,t)}async applyEdits(e,t){if(!this.parent)throw Ae("applyEdits");return this.parent.applyEdits(e,t)}createPopupTemplate(e){let t=this;const{parent:r,fields:i,title:n}=this;if(r){const{displayField:e,editFieldsInfo:a,objectIdField:s}=r;t={displayField:e,editFieldsInfo:a,fields:i,objectIdField:s,title:n}}return(0,ne.tn)(t,e)}createQuery(){if(!this.parent)throw Ae("createQuery");const e=(0,k.i)(this.parent),t=`${this.parent.subtypeField}=${this.subtypeCode}`;return e.where=(0,p.mA)(t,this.parent.definitionExpression),e}getFeatureTitle(e,t){return this._titleCreator.getTitle(this,e,t)}getFeatureTitles(e,t){return this._titleCreator.getTitles(this,e,t)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){if(!t?.excludeImpliedDomains&&this.parent){const t=(0,k.l)(this.parent,e);if(t)return t}return this._getLayerDomain(e)}async queryAttachments(e,t){const r=await this.load();if(!r.parent)throw Ae("queryAttachments");const i=e.clone();return i.where=Te(i.where,r.parent.subtypeField,r.subtypeCode),r.parent.queryAttachments(e,t)}async queryFeatureCount(e,t){const r=await this.load();if(!r.parent)throw Ae("queryFeatureCount");return r.parent.queryFeatureCount(be(r.parent,r,e),t)}async queryFeatures(e,t){const r=await this.load();if(!r.parent)throw Ae("queryFeatures");return r.parent.queryFeatures(be(r.parent,r,e),t)}async queryObjectIds(e,t){const r=await this.load();if(!r.parent)throw Ae("queryObjectIds");return r.parent.queryObjectIds(be(r.parent,r,e),t)}async queryRelatedFeatures(e,t){const r=await this.load();if(!r.parent)throw Ae("queryRelatedFeatures");return r.parent.queryRelatedFeatures(e,t)}async queryRelatedFeaturesCount(e,t){const r=await this.load();if(!r.parent)throw Ae("queryRelatedFeaturesCount");return r.parent.queryRelatedFeaturesCount(e,t)}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};(0,i._)([(0,y.MZ)({clonable:!1,readOnly:!0})],ge.prototype,"_titleCreator",null),(0,i._)([(0,y.MZ)({type:se.h,json:he({name:"attributeTableInfo"})})],ge.prototype,"attributeTableTemplate",void 0),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"capabilities",null),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"effectiveCapabilities",null),(0,i._)([(0,y.MZ)({json:he()})],ge.prototype,"charts",void 0),(0,i._)([(0,y.MZ)({type:Boolean,nonNullable:!0,json:he({name:"enableEditing"})})],ge.prototype,"editingEnabled",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],ge.prototype,"effectiveEditingEnabled",null),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"elevationInfo",null),(0,i._)([(0,y.MZ)({clonable:!1,readOnly:!0})],ge.prototype,"featureTitleFields",null),(0,i._)([(0,y.MZ)({json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],ge.prototype,"fieldOverrides",void 0),(0,i._)([(0,$.w)("fieldOverrides")],ge.prototype,"writeFieldOverrides",null),(0,i._)([(0,y.MZ)({...de.fields,readOnly:!0,json:{read:!1}})],ge.prototype,"fields",null),(0,i._)([(0,y.MZ)(de.fieldsIndex)],ge.prototype,"fieldsIndex",void 0),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"floorInfo",null),(0,i._)([(0,y.MZ)({type:V.A,json:he({name:"formInfo"})})],ge.prototype,"formTemplate",void 0),(0,i._)([(0,y.MZ)({type:String,clonable:!1,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],ge.prototype,"id",void 0),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"isTable",null),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"geometryType",null),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"globalIdField",null),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"type",void 0),(0,i._)([(0,y.MZ)(pe((0,m.o8)(j.l)))],ge.prototype,"labelsVisible",void 0),(0,i._)([(0,y.MZ)({type:[J.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:K.r},write:{ignoreOrigin:!0,layerContainerTypes:D.e}}})],ge.prototype,"labelingInfo",void 0),(0,i._)([(0,y.MZ)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,layerContainerTypes:D.e}}})],ge.prototype,"layerType",void 0),(0,i._)([(0,y.MZ)(pe((0,m.o8)(j.a)))],ge.prototype,"legendEnabled",void 0),(0,i._)([(0,y.MZ)({type:["show","hide"]})],ge.prototype,"listMode",void 0),(0,i._)([(0,y.MZ)((()=>{const e=(0,m.o8)(j.c);return e.json.origins.service.read=!1,pe(e,{spatialOnly:!0})})())],ge.prototype,"minScale",void 0),(0,i._)([(0,y.MZ)((()=>{const e=(0,m.o8)(j.m);return e.json.origins.service.read=!1,pe(e,{spatialOnly:!0})})())],ge.prototype,"maxScale",void 0),(0,i._)([(0,y.MZ)({readOnly:!0})],ge.prototype,"effectiveScaleRange",null),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"objectIdField",null),(0,i._)([(0,y.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0,json:he({spatialOnly:!0})})],ge.prototype,"opacity",void 0),(0,i._)([(0,y.MZ)({clonable:!1})],ge.prototype,"parent",void 0),(0,i._)([(0,y.MZ)(pe((0,m.o8)(j.p)))],ge.prototype,"popupEnabled",void 0),(0,i._)([(0,y.MZ)({type:L.A,json:he({name:"popupInfo"})})],ge.prototype,"popupTemplate",void 0),(0,i._)([(0,y.MZ)({readOnly:!0})],ge.prototype,"defaultPopupTemplate",null),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"relationships",null),(0,i._)([(0,y.MZ)({types:oe,json:he({target:"layerDefinition.drawingInfo.renderer",spatialOnly:!0})})],ge.prototype,"renderer",null),(0,i._)([(0,g.r)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],ge.prototype,"readRendererFromService",null),(0,i._)([(0,g.r)("renderer",["layerDefinition.drawingInfo.renderer"])],ge.prototype,"readRenderer",null),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"spatialReference",null),(0,i._)([(0,y.MZ)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],ge.prototype,"subtypeCode",void 0),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"subtypeField",null),(0,i._)([(0,y.MZ)({type:[B.A],json:he({name:"layerDefinition.templates"})})],ge.prototype,"templates",void 0),(0,i._)([(0,g.r)("service","templates",["geometryType","subtypeField","subtypes","type"])],ge.prototype,"readTemplatesFromService",null),(0,i._)([(0,y.MZ)({type:String,json:he()})],ge.prototype,"title",void 0),(0,i._)([(0,g.r)("service","title",["subtypes"])],ge.prototype,"readTitleFromService",null),(0,i._)([(0,y.MZ)({readOnly:!0,json:{read:!1}})],ge.prototype,"url",null),(0,i._)([(0,y.MZ)({readOnly:!0})],ge.prototype,"userHasUpdateItemPrivileges",null),(0,i._)([(0,y.MZ)({type:Boolean,nonNullable:!0,json:he({name:"visibility",spatialOnly:!0})})],ge.prototype,"visible",void 0),ge=(0,i._)([(0,b.$)("esri.layers.support.SubtypeSublayer")],ge);const be=(e,t,r)=>{if(!r)return t.createQuery();const i=ie.A.from(r);return i.where=Te(i.where,e.subtypeField,t.subtypeCode),i},Te=(e,t,r)=>{const i=new RegExp(`${t}\\s*=\\s*\\d+`),n=`${t}=${r}`,a=e??"";return i.test(a)?a.replace(i,n):(0,p.mA)(n,a)},Ae=e=>new s.A("subtype-sublayer:parent-missing",`This sublayer must have a parent SubtypeGroupLayer in order to use ${e}`);var Me=r(35619),Se=r(59955),we=r(55032),_e=r(74886);r(91028),r(71361),r(86688),r(64035),r(32826),r(89575),r(71895),r(27084),r(61904),r(21914),r(82454),r(88321),r(47387),r(46728),r(21632),r(64102),r(43059),r(89935),r(49813),r(31175);const ve="SubtypeGroupLayer";function Fe(e,t){return new s.A("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function Ie(e,t){const r=[];for(const i of e){const e=new ge;e.read(i,t),r.push(e)}return r}const xe=(0,P.d)();let Ee=class extends((0,F.j)((0,_.FJ)((0,v.E)((0,S.dM)((0,Z.e)((0,C.j)((0,E.J)((0,M.A)((0,I.q)((0,x.A)((0,u.M)((0,w.d)((0,A.p)(n.A.ClonableMixin(T.A))))))))))))))){constructor(...e){super(...e),this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.sublayers=new(a.A.ofType(ge)),this.useUniqueColorsForSublayers=!0,this.supportedSourceTypes=new Set(["Feature Layer","Table"]),this.timeInfo=null,this.title="Layer",this.type="subtype-group",this._debouncedSaveOperations=(0,d.sg)((async(e,t,i)=>{const{save:n,saveAs:a}=await r.e(9223).then(r.bind(r,91604));switch(e){case _e.S.SAVE:return n(this,t);case _e.S.SAVE_AS:return a(this,i,t)}})),this.addHandles((0,c.wB)((()=>this.sublayers),((e,t)=>this._handleSublayersChange(e,t)),c.OH))}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=null!=e?e.signal:null,r=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(d.QP).then((async()=>{if(!this.url)throw new s.A("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");if(null==this.layerId)throw new s.A("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");return this._initLayerProperties(await this.createGraphicsSource(t))})).then((()=>(0,k.e)(this,"load",e)));return this.addResolvingPromise(r),Promise.resolve(this)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return(0,k.d)(this)}get operationalLayerType(){return this.isTable?"SubtypeGroupTable":"SubtypeGroupLayer"}get parsedUrl(){const e=(0,h.An)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,h.fj)(e.path,this.layerId.toString())),e}set source(e){this._get("source")!==e&&this._set("source",e)}readTitleFromService(e,{name:t}){return this.url?(0,O.t)(this.url,t):t}async addAttachment(e,t){const r=await(0,k.f)(this,e,t,ve);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const i=await(0,k.u)(this,e,t,r,ve);return this.lastEditsEventDate=new Date,i}async applyEdits(e,t){return(0,k.a)(this,e,t)}on(e,t){return super.on(e,t)}async createGraphicsSource(e){const{default:t}=await(0,d.qr)(Promise.all([r.e(3609),r.e(1921),r.e(8380),r.e(6767)]).then(r.bind(r,38380)),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=(0,k.i)(this),t=this.sublayers.map((e=>e.subtypeCode));return e.where=(0,p.mA)(`${this.subtypeField} IN (${t.join(",")})`,this.definitionExpression),e}async deleteAttachments(e,t){const r=await(0,k.j)(this,e,t,ve);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return(0,k.k)(this,e,ve)}findSublayerForFeature(e){const t=this.fieldsIndex.get(this.subtypeField),r=e.attributes[t.name];return this.findSublayerForSubtypeCode(r)}findSublayerForSubtypeCode(e){return this._sublayerLookup.get(e)}getFieldDomain(e,t){if(!t?.excludeImpliedDomains){const t=(0,k.l)(this,e);if(t)return t}const r=(0,k.m)(this,t?.feature);if(r){const t=r.domains?.[e];return"inherited"===t?.type?this._getLayerDomain(e):t}return this._getLayerDomain(e)}loadAll(){return(0,o.l)(this,(e=>{e(this.sublayers)}))}async queryAttachments(e,t){return(0,k.q)(this,e,t,ve)}async queryFeatures(e,t){const r=await this.load(),i=ie.A.from(e)??r.createQuery(),n=i.outFields??[];n.includes(this.subtypeField)||(n.push(this.subtypeField),i.outFields=n);const a=await r.source.queryFeatures(i,t);if(a?.features)for(const e of a.features)e.layer=e.sourceLayer=this.findSublayerForFeature(e);return a}async queryObjectIds(e,t){return(await(0,k.n)(this,e,t,ve)).filter(we.i)}async queryFeatureCount(e,t){return(0,k.o)(this,e,t,ve)}async queryExtent(e,t){return(0,k.p)(this,e,t,ve)}async queryRelatedFeatures(e,t){return(0,k.r)(this,e,t,ve)}async queryRelatedFeaturesCount(e,t){return(0,k.s)(this,e,t,ve)}async save(e){return this._debouncedSaveOperations(_e.S.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(_e.S.SAVE_AS,t,e)}write(e,t){const{origin:r,layerContainerType:i,messages:n}=t;if(this.isTable){if("web-scene"===r||"web-map"===r&&"tables"!==i)return n?.push(Fe(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===r&&"tables"===i)return n?.push(Fe(this,"using a non-table source cannot be written to tables in web maps")),null;return this.sublayers?.length?super.write(e,t):(n?.push(new s.A("web-document-write:invalid-property",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`,{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&(0,Se.s)(this,e)}async getFeatureTitle(e,t){const r=this.findSublayerForFeature(e);return r?await r.getFeatureTitle(e,t):this._getFeatureTitleForUnknownSublayer(e)}async getFeatureTitles(e,t){const r=new Map,i=new Map,n=[i];e.forEach((e=>{const t=this.findSublayerForFeature(e);if(t)(0,l.g)(r,t,(()=>[])).push(e);else{const t=e.getObjectId()??e.attributes[this.objectIdField];i.set(t,this._getFeatureTitleForUnknownSublayer(e))}}));const a=await Promise.all(Array.from(r).map((([e,r])=>e.getFeatureTitles(r,t))));return a.forEach((e=>n.push(e))),new Map(n.flatMap((e=>[...e])))}get featureTitleFields(){const e=new Set;for(const t of this.sublayers){const r=t.featureTitleFields;for(const t of r)e.add(t)}return[...e]}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}async _initLayerProperties(e){this._set("source",e);const{sourceJSON:t}=e;if(t&&(this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})),!this.subtypes?.length)throw new s.A("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");this._verifyFields(),(0,N.sv)(this.timeInfo,this.fieldsIndex)}async hasDataChanged(){return(0,k.h)(this)}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||-1!==e.search(/\/FeatureServer\//i)||this.fields?.some((e=>"geometry"===e.type))||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_handleSublayersChange(e,t){t&&(t.forEach((e=>{e.parent=null})),this.removeHandles("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach((e=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),this.addHandles([e.on("after-add",(({item:e})=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),e.on("after-remove",(({item:e})=>{e.parent=null,this._sublayerLookup.delete(e.subtypeCode)}))],"sublayers-owner"))}_getFeatureTitleForUnknownSublayer(e){const{displayField:t,fieldsIndex:r,objectIdField:i}=this;if(t&&r.has(t))return e.attributes[r.get(t).name]??"";const n=e.getObjectId();return null!=n?n.toString():i&&r.has(i)?e.attributes[r.get(i).name]??"":""}};(0,i._)([(0,y.MZ)({readOnly:!0})],Ee.prototype,"createQueryVersion",null),(0,i._)([(0,y.MZ)({readOnly:!0})],Ee.prototype,"editingEnabled",null),(0,i._)([(0,y.MZ)({readOnly:!0})],Ee.prototype,"effectiveEditingEnabled",null),(0,i._)([(0,y.MZ)({...xe.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ee.prototype,"fields",void 0),(0,i._)([(0,y.MZ)(xe.fieldsIndex)],Ee.prototype,"fieldsIndex",void 0),(0,i._)([(0,y.MZ)(j.i)],Ee.prototype,"id",void 0),(0,i._)([(0,y.MZ)({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],Ee.prototype,"listMode",void 0),(0,i._)([(0,y.MZ)({type:["SubtypeGroupLayer","SubtypeGroupTable"],json:{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{"web-document":{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0}},"portal-item":{name:"layerType",read:{enabled:!0},write:{enabled:!0,ignoreOrigin:!0,isRequired:!0}}}}})],Ee.prototype,"operationalLayerType",null),(0,i._)([(0,y.MZ)(xe.outFields)],Ee.prototype,"outFields",void 0),(0,i._)([(0,y.MZ)({readOnly:!0})],Ee.prototype,"parsedUrl",null),(0,i._)([(0,y.MZ)({clonable:!1})],Ee.prototype,"source",null),(0,i._)([(0,y.MZ)({type:a.A.ofType(ge),json:{origins:{service:{read:{source:"subtypes",reader(e,t,r){let i=null;if(this.useUniqueColorsForSublayers){const n=function(e,t){const r=e.drawingInfo?.renderer,i=r?le(r,e,t):null;if("simple"===i?.type)return(0,te.e)(i.symbol,null)?i.symbol.clone():null}(t,r);i=n?function(e,t){return(0,H.d)(ue,e,{offset:!0,shuffle:!0}).reverse().map((e=>{const r=t.clone();return"cim"===r.type?(0,ee.Fe)(r,e):(0,te.c)(r,e),new Q.A({symbol:r})}))}(e.length,n):null}const n=e.map((({code:e},n)=>{const a=new ge({subtypeCode:e});a.read(t,r);const s=i?.[n];return s&&a.read({drawingInfo:{renderer:s.toJSON()}},r),a}));return new(a.A.ofType(ge))(n)}}}},read:{source:["layers","tables"],reader(e,t,r){let i;return"SubtypeGroupLayer"===t.layerType&&t.layers?.length?i=Ie(t.layers,r):"SubtypeGroupTable"===t.layerType&&t.tables?.length&&(i=Ie(t.tables,r)),new(a.A.ofType(ge))(i)}},write:{ignoreOrigin:!0,writer(e,t,r,i){const n=[];for(const t of e){const e=t.write({},i);n.push(e)}this.isTable?t.tables=n:t.layers=n}}}})],Ee.prototype,"sublayers",void 0),(0,i._)([(0,y.MZ)()],Ee.prototype,"useUniqueColorsForSublayers",void 0),(0,i._)([(0,y.MZ)({type:Me.A})],Ee.prototype,"timeInfo",void 0),(0,i._)([(0,y.MZ)({json:{origins:{"portal-item":{write:{enabled:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],Ee.prototype,"title",void 0),(0,i._)([(0,g.r)("service","title",["name"])],Ee.prototype,"readTitleFromService",null),(0,i._)([(0,y.MZ)({json:{read:!1}})],Ee.prototype,"type",void 0),(0,i._)([(0,y.MZ)({clonable:!1,readOnly:!0})],Ee.prototype,"featureTitleFields",null),Ee=(0,i._)([(0,b.$)("esri.layers.SubtypeGroupLayer")],Ee);const Ce=Ee},3112:(e,t,r)=>{r.d(t,{a:()=>h,b:()=>p,d:()=>y});var i=r(41390),n=r(17745),a=r(93181);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function o(e){return e instanceof i.A}function l(e){return e instanceof n.A?Object.keys(e.items):o(e)?(0,a.g)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof n.A?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function c(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const i=l(e),n=l(t);if(0===i.length&&0===n.length)return;if(!i.length||!n.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const a=n.filter((e=>!i.includes(e))),p=i.filter((e=>!n.includes(e))),h=i.filter((r=>n.includes(r)&&u(e,r)!==u(t,r))).concat(a,p).sort(),y=d(e);if(y&&s.has(y)&&h.length)return{type:"complete",oldValue:e,newValue:t};let m;const f=o(e)&&o(t);for(const i of h){const n=u(e,i),a=u(t,i);let s;if((f||"function"!=typeof n&&"function"!=typeof a)&&n!==a&&(null!=n||null!=a)){if(r&&r[i]&&"function"==typeof r[i])s=r[i]?.(n,a);else if(n instanceof Date&&a instanceof Date){if(n.getTime()===a.getTime())continue;s={type:"complete",oldValue:n,newValue:a}}else s="object"==typeof n&&"object"==typeof a&&d(n)===d(a)?c(n,a):{type:"complete",oldValue:n,newValue:a};null!=s&&(null!=m?m.diff[i]=s:m={type:"partial",diff:{[i]:s}})}}return m}function p(e,t){return function(e,t){if(null==e)return!1;const r=t.split(".");let i=e;for(const e of r){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;{const t=i.diff[e];if(!t)return!1;i=t}}return!0}(e,t)}function h(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function y(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)}},13226:(e,t,r)=>{r.d(t,{a:()=>g,b:()=>b,c:()=>T,d:()=>S,i:()=>a,t:()=>f});var i=r(35902),n=r(32773);function a(e){return"r"in e&&"g"in e&&"b"in e}function s(e){return"h"in e&&"s"in e&&"v"in e}function o(e){return"l"in e&&"a"in e&&"b"in e}function l(e){return"l"in e&&"c"in e&&"h"in e}r(16699),r(91276),r(62482);const u=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],d=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function c(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const a=e.length,s=e[0].length;let o=0;for(i=0;i<a;i++){for(o=0,n=0;n<s;n++)o+=e[i][n]*t[n];r.push(o)}return r}function p(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),r=c(u,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function h(e){const t=c(d,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function y(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function m(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function f(e){return a(e)?e:l(e)?function(e){return h(m(function(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}(e)))}(e):o(e)?function(e){return h(m(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?h(e):s(e)?function(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,a=n*(1-Math.abs(t%2-1));let s;switch(Math.floor(t)){case 0:s={r:n,g:a,b:0};break;case 1:s={r:a,g:n,b:0};break;case 2:s={r:0,g:n,b:a};break;case 3:s={r:0,g:a,b:n};break;case 4:s={r:a,g:0,b:n};break;case 5:case 6:s={r:n,g:0,b:a};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+i-n),s.g=Math.round(s.g+i-n),s.b=Math.round(s.b+i-n),s}(e):e}function g(e){return s(e)?e:function(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),a=n-Math.min(t,r,i);let s=n,o=0===a?0:n===t?(r-i)/a%6:n===r?(i-t)/a+2:(t-r)/a+4,l=0===a?0:a/s;return o<0&&(o+=6),o*=60,l*=100,s*=100/255,{h:o,s:l,v:s}}(f(e))}function b(e){return o(e)?e:function(e){return y(p(e))}(f(e))}function T(e){return l(e)?e:function(e){return function(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let a=Math.atan2(i,r);return a=a>0?a:a+2*Math.PI,{l:t,c:n,h:a}}(y(p(e)))}(f(e))}var A,M;function S(e,t,r={}){if(0===e.length||t<=0)return[];if(1===(e=e.map((e=>"string"==typeof e?new i.A(e):e))).length||1===t){const r=[],i=e[0];for(let e=0;e<t;e++)r.push(i.clone());return r}if(r.shuffle&&(e=(0,n.s)((0,n.o8)(e),r.seed)),e.length>=t){const r=[],i=(e.length-1)/(t-1);for(let n=0;n<t;n++){const t=Math.round(n*i);r.push(e[t].clone())}return r}return function(e,t,r={}){const i=[],a=e.length-1,s=Math.ceil((t-e.length)/a);e:for(let n=0;n<a;n++){const a=e[n],o=e[n+1];for(let n=1;n<=s;n++){const l=n/(s+1);if(i.push(_(a,o,l,r)),i.length+e.length===t)break e}}return[...e.map((e=>e.clone())),...(0,n.s)(i,r.seed??1)]}(e,t,r)}(M=A||(A={}))[M.Low=160]="Low",M[M.High=225]="High";const w=(e,t)=>{const r=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+r))};function _(e,t,r,a={}){const s=e.r,o=e.g,l=e.b,u=t.r,d=t.g,c=t.b,p=Math.round(s+(u-s)*r),h=Math.round(o+(d-o)*r),y=Math.round(l+(c-l)*r);if(!a.offset)return new i.A([p,h,y]);const m=(0,n.g)(a.seed);return new i.A([w(p,m),w(h,m),w(y,m)])}},23381:(e,t,r)=>{let i;async function n(){return null==i&&(i=Promise.all([r.e(8896),r.e(4362)]).then(r.bind(r,34362)).then((e=>new e.WhereClauseCache(500,500)))),i}async function a(e,t){const r=await n(),i=r.get(e,t);if(null==i)throw r.getError(e,t);return i}function s(e,t){return e||=null,t||=null,"1=1"===e?t??e:"1=1"===t?e??t:e&&t?`(${e}) AND (${t})`:e??t}function o(e,t){return e||=null,t||=null,"1=1"===e||"1=1"===t||e===t?"1=1"===e?e:t:e&&t?`(${e}) OR (${t})`:e??t}r.d(t,{GP:()=>a,IW:()=>o,mA:()=>s})},27084:(e,t,r)=>{r.d(t,{A:()=>c});var i=r(32816),n=r(52731),a=r(93804),s=r(99924),o=r(29298),l=(r(32773),r(20266),r(69421));r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(6407),r(90740),r(19247),r(36172),r(36544),r(48064);const u=new a.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),d=new a.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let c=class extends(n.A.ClonableMixin(s.A)){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,i._)([(0,o.MZ)({json:{read:u.read,write:u.write}})],c.prototype,"cardinality",void 0),(0,i._)([(0,o.MZ)({json:{name:"catalogID"}})],c.prototype,"catalogId",void 0),(0,i._)([(0,o.MZ)({json:{read:!0,write:!0}})],c.prototype,"composite",void 0),(0,i._)([(0,o.MZ)({json:{read:!0,write:!0}})],c.prototype,"id",void 0),(0,i._)([(0,o.MZ)({json:{read:!0,write:!0}})],c.prototype,"keyField",void 0),(0,i._)([(0,o.MZ)({json:{read:!0,write:!0}})],c.prototype,"keyFieldInRelationshipTable",void 0),(0,i._)([(0,o.MZ)({json:{read:!0,write:!0}})],c.prototype,"name",void 0),(0,i._)([(0,o.MZ)({json:{read:!0,write:!0}})],c.prototype,"relatedTableId",void 0),(0,i._)([(0,o.MZ)({json:{read:!0,write:!0}})],c.prototype,"relationshipTableId",void 0),(0,i._)([(0,o.MZ)({json:{read:d.read,write:d.write}})],c.prototype,"role",void 0),c=(0,i._)([(0,l.$)("esri.layers.support.Relationship")],c)},27281:(e,t,r)=>{r.d(t,{A:()=>A});var i,n=r(32816),a=r(72393),s=r(52731),o=r(41390),l=r(99924),u=r(20266),d=r(67321),c=r(35819),p=r(29298),h=(r(32773),r(69421)),y=r(12119),m=r(77037),f=r(91815),g=r(92963),b=r(92517);function T(e){if(null==e)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return 0!==Object.keys(t).length?t:null}r(17745),r(81272),r(13671),r(90740),r(85176),r(93181),r(50704),r(40499),r(36555),r(58498),r(91047),r(36544),r(6407),r(45371),r(61532),r(80959),r(19247),r(36172),r(48064),r(44945),r(48844),r(49877),r(56273),r(30011),r(54483),r(51961),r(62399),r(64995),r(70861),r(93804),r(33150),r(58173),r(66110),r(67520),r(27532),r(88663),r(48103),r(50214),r(59192),r(16345),r(65085),r(33611),r(84857),r(60373),r(98187),r(35902),r(24330),r(16699),r(16794),r(52357),r(11090),r(49319),r(93546),r(29570),r(34592),r(79825),r(95101),r(67578),r(17857),r(82537),r(14896),r(95611),r(98089),r(91366),r(80473),r(43435),r(73435),r(44600),r(2160),r(7969),r(69763),r(96221),r(18683),r(64604),r(29512),r(99063),r(1178),r(64752),r(29208),r(36533),r(84200),r(97827),r(91695),r(18169),r(20762),r(48402),r(67504),r(85232),r(93471),r(7182),r(47788),r(19297),r(82408),r(73509),r(28276),r(91658),r(70580),r(75191),r(24319),r(62092),r(53252),r(34039),r(43534),r(3495),r(97906),r(64524),r(65023),r(31424),r(74676),r(32368),r(7391),r(22529),r(44747),r(38094),r(67723),r(2589),r(47239),r(63728),r(4157),r(62401),r(89322),r(20138),r(53370),r(59858),r(46946),r(3816),r(71992),r(80167),r(4478),r(91808),r(7161),r(55586),r(92229),r(18344),r(53610),r(29447),r(78273),r(49475),r(64884),r(23351),r(35121),r(51222),r(42870),r(54512),r(53103),r(19648),r(42948);let A=class extends(s.A.ClonableMixin(l.A)){static{i=this}constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:(0,c.g)(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&(0,o.c)(u.L.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),"mesh"!==e?.type&&this._notifyLayer("geometry",t,e))}set popupTemplate(e){const t=this._get("popupTemplate");t!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new i({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&null!=r.defaultPopupTemplate)return r.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t}}getObjectId(){const e=this.sourceLayer??this.layer;return e?(0,g.c)(this,e):null}getGlobalId(){const e=this.sourceLayer??this.layer;return e&&"globalIdField"in e&&e.globalIdField?this.getAttribute(e.globalIdField):null}toJSON(){return{aggregateGeometries:T(this.aggregateGeometries),geometry:null!=this.geometry?this.geometry.toJSON():null,symbol:null!=this.symbol?this.symbol.toJSON():null,attributes:(0,y.i)(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if("mesh"===t?.type){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};"origin-transform"===e&&(n.action=i),"attributes"===e&&(n.attributeName=i),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([(0,d.z7)((()=>"mesh"===this.geometry?.type&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0),(({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())})),(0,d.z7)((()=>"mesh"===this.geometry?.type?{vertexAttributes:this.geometry.vertexAttributes}:void 0),(()=>{const e=this.geometry;"mesh"===e?.type&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)}),{equals:(e,t)=>e===t,sync:!0})])}};(0,n._)([(0,p.MZ)({value:null,json:{read:function(e){if(!e)return null;const t={};for(const r in e){const i=(0,m.rS)(e[r]);i&&(t[r]=i)}return 0!==Object.keys(t).length?t:null}}})],A.prototype,"aggregateGeometries",null),(0,n._)([(0,p.MZ)({value:null})],A.prototype,"attributes",null),(0,n._)([(0,p.MZ)({value:null,types:f.g,json:{read:m.rS}})],A.prototype,"geometry",null),(0,n._)([(0,p.MZ)({type:Boolean})],A.prototype,"isAggregate",void 0),(0,n._)([(0,p.MZ)({clonable:!1})],A.prototype,"layer",void 0),(0,n._)([(0,p.MZ)({clonable:"reference"})],A.prototype,"origin",void 0),(0,n._)([(0,p.MZ)({type:a.A,value:null})],A.prototype,"popupTemplate",null),(0,n._)([(0,p.MZ)({clonable:"reference"})],A.prototype,"sourceLayer",void 0),(0,n._)([(0,p.MZ)({value:null,types:b.s})],A.prototype,"symbol",null),(0,n._)([(0,p.MZ)({clonable:!1,json:{read:!1,write:!1}})],A.prototype,"_version",void 0),(0,n._)([(0,p.MZ)({type:Boolean,value:!0})],A.prototype,"visible",null),A=i=(0,n._)([(0,h.$)("esri.Graphic")],A)},36309:(e,t,r)=>{r.d(t,{a:()=>A,b:()=>h,c:()=>m,d:()=>y,g:()=>p,s:()=>d,t:()=>c});var i=r(20266);const n="__begin__",a="__end__",s=new RegExp(n,"ig"),o=new RegExp(a,"ig"),l=new RegExp("^"+n,"i"),u=new RegExp(a+"$","i");function d(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function c(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function p(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=d(e.labelExpression),t.type="conventional"),t}function h(e){const t=p(e);if(!t)return null;switch(t.type){case"conventional":return m(t.expression);case"arcade":return t.expression}return null}function y(e){const t=p(e);if(!t)return null;switch(t.type){case"conventional":return function(e){const t=e?.match(f);return t?.[1].trim()||null}(t.expression);case"arcade":return A(t.expression)}return null}function m(e){let t;return e?(t=(0,i.r)(e,(e=>n+'$feature["'+e+'"]'+a)),t=l.test(t)?t.replace(l,""):'"'+t,t=u.test(t)?t.replace(u,""):t+'"',t=t.replaceAll(s,'" + ').replaceAll(o,' + "')):t='""',t}const f=/^\s*\{([^}]+)\}\s*$/i,g=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,T=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function A(e){if(!e)return null;let t=g.exec(e)||b.exec(e);return t?t[1]||t[3]:(t=T.exec(e),t?t[2]:null)}},47215:(e,t,r)=>{r.d(t,{B:()=>o,C:()=>u,D:()=>d,H:()=>c,O:()=>p,a:()=>l,c:()=>f,i:()=>b,n:()=>g});var i=r(24330),n=r(87985),a=r(47812);function s(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}s();class o{constructor(e,t,r){this.strength=e,this.radius=t,this.threshold=r,this.type="bloom"}interpolate(e,t,r){this.strength=h(e.strength,t.strength,r),this.radius=h(e.radius,t.radius,r),this.threshold=h(e.threshold,t.threshold,r)}clone(){return new o(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:y(this.radius),strength:this.strength,threshold:this.threshold}}}class l{constructor(e){this.radius=e,this.type="blur"}interpolate(e,t,r){this.radius=Math.round(h(e.radius,t.radius,r))}clone(){return new l(this.radius)}toJSON(){return{type:"blur",radius:y(this.radius)}}}class u{constructor(e,t){this.type=e,this.amount=t,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.amount=h(e.amount,t.amount,r),this._updateMatrix()}clone(){return new u(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||s();switch(this.type){case"brightness":this._colorMatrix=((e,t)=>{const r=(0,a.l)(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return(0,a.t)(r,r)})(e,this.amount);break;case"contrast":this._colorMatrix=((e,t)=>{const r=(0,a.l)(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return(0,a.t)(r,r)})(e,this.amount);break;case"grayscale":this._colorMatrix=(e=>{const t=1-this.amount,r=(0,a.l)(e,.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,1);return(0,a.t)(r,r)})(e);break;case"invert":this._colorMatrix=((e,t)=>{const r=1-2*t,i=(0,a.l)(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return(0,a.t)(i,i)})(e,this.amount);break;case"saturate":this._colorMatrix=((e,t)=>{const r=(0,a.l)(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return(0,a.t)(r,r)})(e,this.amount);break;case"sepia":this._colorMatrix=(e=>{const t=1-this.amount,r=(0,a.l)(e,.393+.607*t,.769-.769*t,.189-.189*t,0,.349-.349*t,.686+.314*t,.168-.168*t,0,.272-.272*t,.534-.534*t,.131+.869*t,0,0,0,0,1);return(0,a.t)(r,r)})(e)}}}class d{constructor(e,t,r,i){this.offsetX=e,this.offsetY=t,this.blurRadius=r,this.color=i,this.type="drop-shadow"}interpolate(e,t,r){this.offsetX=h(e.offsetX,t.offsetX,r),this.offsetY=h(e.offsetY,t.offsetY,r),this.blurRadius=h(e.blurRadius,t.blurRadius,r),this.color[0]=Math.round(h(e.color[0],t.color[0],r)),this.color[1]=Math.round(h(e.color[1],t.color[1],r)),this.color[2]=Math.round(h(e.color[2],t.color[2],r)),this.color[3]=h(e.color[3],t.color[3],r)}clone(){return new d(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:y(this.offsetX),yoffset:y(this.offsetY),blurRadius:y(this.blurRadius),color:e}}}class c{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.angle=h(e.angle,t.angle,r),this._updateMatrix()}clone(){return new c(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||s();this._colorMatrix=((e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=(0,a.l)(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return(0,a.t)(n,n)})(e,this.angle)}}class p{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,t,r){this.amount=h(e.amount,t.amount,r)}clone(){return new p(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function h(e,t,r){return e+(t-e)*r}function y(e){return Math.round(1e3*(0,n.a)(e))/1e3}function m(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new u(e.type,0);case"saturate":case"brightness":case"contrast":return new u(e.type,1);case"opacity":return new p(1);case"hue-rotate":return new c(0);case"blur":return new l(0);case"drop-shadow":return new d(0,0,0,[...(0,i.f)("transparent")]);case"bloom":return new o(0,0,1)}}function f(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((e,t)=>e.type===r[t].type))}function g(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let e=i.length;e<r.length;e++)i.push(m(r[e]))}function b(e){const t=e[0];return!!t&&"type"in t}},47239:(e,t,r)=>{r.d(t,{A:()=>b,B:()=>f,C:()=>g,D:()=>c,E:()=>v,a:()=>M,b:()=>h,c:()=>l,d:()=>w,e:()=>y,f:()=>u,g:()=>A,h:()=>a,i:()=>S,n:()=>_,q:()=>T,r:()=>o,s:()=>m,t:()=>p,u:()=>s,x:()=>d});var i=r(44600),n=(r(48402),r(32773));function a(e,t=!1){return e<=n.n?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function s(e){return((0,n.c)(e)?e.byteLength/8:e.length)<=n.n?Array.from(e):new Float64Array(e)}function o(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function l(e=v){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function u(e,t,r,i,n,a,s=l()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s[4]=n,s[5]=a,s}function d(e,t=l()){return function(e,t,r,i=l()){return b(i,_),function(e,t,r=0,i=t.length/3){let n=e[0],a=e[1],s=e[2],o=e[3],l=e[4],u=e[5];for(let e=0;e<i;e++)n=Math.min(n,t[r+3*e]),a=Math.min(a,t[r+3*e+1]),s=Math.min(s,t[r+3*e+2]),o=Math.max(o,t[r+3*e]),l=Math.max(l,t[r+3*e+1]),u=Math.max(u,t[r+3*e+2]);e[0]=n,e[1]=a,e[2]=s,e[3]=o,e[4]=l,e[5]=u}(i,e,t,r),i}(e,0,e.length/3,t)}function c(e,t=a(24)){const[r,i,n,s,o,l]=e;return t[0]=r,t[1]=i,t[2]=n,t[3]=r,t[4]=i,t[5]=l,t[6]=r,t[7]=o,t[8]=n,t[9]=r,t[10]=o,t[11]=l,t[12]=s,t[13]=i,t[14]=n,t[15]=s,t[16]=i,t[17]=l,t[18]=s,t[19]=o,t[20]=n,t[21]=s,t[22]=o,t[23]=l,t}function p(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new i.A(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function h(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function y(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function m(e,t=[0,0,0]){return t[0]=function(e){return e[0]>=e[3]?0:e[3]-e[0]}(e),t[1]=function(e){return e[1]>=e[4]?0:e[4]-e[1]}(e),t[2]=function(e){return e[2]>=e[5]?0:e[5]-e[2]}(e),t}function f(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function g(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function b(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function T(e){return e?b(e,_):l(_)}function A(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function M(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function S(e){return 6===e.length}function w(e,t,r){if(null==e||null==t)return e===t;if(!S(e)||!S(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const _=[1/0,1/0,1/0,-1/0,-1/0,-1/0],v=[0,0,0,0,0,0];l()},47252:(e,t,r)=>{r.d(t,{T:()=>c});var i=r(32816),n=r(41390),a=r(32773),s=r(73067),o=r(17745),l=r(29298),u=(r(20266),r(69421)),d=r(30011);let c=class extends n.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,s.c)((()=>(0,d.l)())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??Promise.all([r.e(9191),r.e(6533)]).then(r.bind(r,96533)).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new o.A;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(r.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const t of this.calculatedExpressions?.toArray()??[])try{const r=this._arcadeTask.value.arcade.extractFieldLiterals(t.syntax);for(const t of r){const r=t.split("."),i=this.fieldsIndex.get(r.at(-1)??"");i&&e.add(i.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const r of t){const t=this.fieldsIndex.get(r);t&&e.add(t.name)}return null!=this.objectIdField&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,r){const i=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],r)).get(i)??""}async getTitles(e,t,r){const i=new Map,n=r?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);r?.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));const{fieldInfoMap:s,workingTitle:o}=this,l=o&&s;t.forEach((t=>{const r=t.getObjectId()??t.attributes[e.objectIdField],u=l?a({attributes:t.attributes,expressionAttributes:null,fieldInfoMap:s,globalAttributes:this._createFormattedAttributes(e,t,n).global,layer:e,text:o}):"";i.set(r,u)}))}catch{}return i}async _checkAndReQueryGraphics(e,t){const r=t.map((t=>t.getObjectId()??t.attributes[e.objectIdField])).filter(a.i);if(r.length!==t.length)return t;if(t.some((e=>!(0,d.Kl)(e,this.requiredFields)))){const i=e.createQuery();i.where="1=1",i.outFields=[...this.requiredFields],i.objectIds=r;const n=await e.queryFeatures(i);if(n?.features.length===t.length)return n.features}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const r of e){if(!r.fieldName)continue;const e=this.fieldsIndex.get(r.fieldName),i=e?.name??r.fieldName;r.fieldName=i,t.set(i.toLowerCase(),r)}return t}_createFormattedAttributes(e,t,r="system"){const i=this.effectivePopupTemplate?.fieldInfos??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const r=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{n[`expression/${e.name}`]=e.func({vars:{$feature:r}})}catch{}}const a={...t.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:a,graphic:t,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,d.nw)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,i._)([(0,l.MZ)({readOnly:!0})],c.prototype,"_arcadeTask",null),(0,i._)([(0,l.MZ)()],c.prototype,"_featureUtils",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],c.prototype,"featureUtilsPromise",null),(0,i._)([(0,l.MZ)({readOnly:!0})],c.prototype,"calculatedExpressions",null),(0,i._)([(0,l.MZ)()],c.prototype,"displayField",void 0),(0,i._)([(0,l.MZ)()],c.prototype,"effectivePopupTemplate",void 0),(0,i._)([(0,l.MZ)()],c.prototype,"expressionsUsedInTitle",null),(0,i._)([(0,l.MZ)()],c.prototype,"fieldsIndex",void 0),(0,i._)([(0,l.MZ)()],c.prototype,"fieldInfoMap",null),(0,i._)([(0,l.MZ)()],c.prototype,"fields",void 0),(0,i._)([(0,l.MZ)()],c.prototype,"objectIdField",void 0),(0,i._)([(0,l.MZ)()],c.prototype,"requiredFields",null),c=(0,i._)([(0,u.$)("esri.layers.support.TitleCreator")],c)},64035:(e,t,r)=>{r.d(t,{a:()=>s,c:()=>a});var i=r(16699),n=r(23381);function a(e,t){return{...t,filterMode:e.mode}}function s(e,t,r){const a=function(e){if("manual"===u(e))return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:i}of e.filters)t[0]=Math.max(t[0],d(r)),t[1]=Math.min(t[1],c(i));return t}(e);if(a&&((0,i.a)(t,a[0])||(0,i.b)(r,a[1])))return"";const s=Array.from(o(e,t,r)),l=function(e,t,r){if(0===e.length)return!0;const n=d(e.at(0)?.minScale),a=c(e.at(-1)?.maxScale);if((0,i.b)(n,t)||(0,i.a)(a,r))return!0;for(let t=0;t<e.length-1;t++){const r=e[t],n=e[t+1];if((0,i.b)(d(n.minScale),c(r.maxScale)))return!0}return!1}(s,t,r)?"1=1":s.map((e=>e.where||"1=1")).reduce(((e,t)=>(0,n.IW)(e,t)),"");return l&&"1=1"!==l?l:""}function*o(e,t,r){if("manual"===u(e)){const t=e.filters.find((t=>t.id===e.activeFilterId));t&&(yield t)}else{"object"==typeof t&&(t=t.scale);for(const i of e.filters)l(i.minScale,i.maxScale,t,r)&&(yield i)}}function l(e,t,r,n){return e=d(e),r=d(r),t=c(t),!(!(0,i.f)(r,e)&&(n??r)>e||(0,i.d)(t,r)||void 0!==n&&(0,i.f)(n,e))}function u(e){return"mode"in e?e.mode:e.filterMode}function d(e){return e||Number.POSITIVE_INFINITY}function c(e){return e||0}},65283:(e,t,r)=>{r.d(t,{a:()=>o,l:()=>s});var i=r(73067),n=r(17745),a=r(73509);async function s(e,t){return await e.load(),o(e,t)}async function o(e,t){const r=[],s=(...e)=>{for(const t of e)null!=t&&(Array.isArray(t)?s(...t):n.A.isCollection(t)?t.forEach((e=>s(e))):a.A.isLoadable(t)&&r.push(t))};t(s);let o=null;if(await(0,i.m)(r,(async e=>{const t=await(0,i.r)((r=e,"loadAll"in r&&"function"==typeof r.loadAll?e.loadAll():e.load()));var r;!1!==t.ok||o||(o=t)})),o)throw o.error;return e}},67315:(e,t,r)=>{r.d(t,{p:()=>s});var i=r(32816),n=r(29298),a=(r(32773),r(20266),r(69421));r(36544),r(85176),r(93181),r(13671),r(40499),r(6407),r(90740),r(50704),r(91047),r(48064);const s=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,i._)([(0,n.MZ)({type:String})],t.prototype,"apiKey",null),t=(0,i._)([(0,a.$)("esri.layers.mixins.APIKeyMixin")],t),t}},71895:(e,t,r)=>{r.d(t,{A:()=>u});var i,n=r(32816),a=r(17745),s=r(99924),o=r(29298),l=(r(32773),r(20266),r(69421));r(35819),r(36555),r(13671),r(45371),r(61532),r(80959),r(6407),r(90740),r(19247),r(85176),r(93181),r(50704),r(91047),r(36172),r(81272),r(41390),r(40499),r(58498),r(36544),r(48064),r(44945);let u=i=class extends s.A{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new a.A}clone(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,n._)([(0,o.MZ)({type:String,json:{write:{isRequired:!0}}})],u.prototype,"floorField",void 0),(0,n._)([(0,o.MZ)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),(0,n._)([(0,o.MZ)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=i=(0,n._)([(0,l.$)("esri.layers.support.LayerFloorInfo")],u)},74886:(e,t,r)=>{var i;r.d(t,{S:()=>i}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(i||(i={}))},78016:(e,t,r)=>{r.d(t,{f:()=>l,g:()=>u,i:()=>d,t:()=>o});var i=r(16345),n=r(54483);const a=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]),s="shortOffset";function o(e,t=!1){return{json:{read:{source:e,reader:(t,r)=>r[e]?l(r[e]):null},write:!!t&&{allowNull:!0,writer(t,r){r[e]=t?function(e){return{timeZoneIANA:e}}(t):null}}}}}function l(e,t=i.s){return e?"timeZoneIANA"in e?e.timeZoneIANA:function(e,t=i.s){if(!e||!a.has(e.timeZone))return t;const r=a.get(e.timeZone);return e.timeZone.startsWith("UTC")||e.respectsDaylightSaving?r:function(e){const t=n.D.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return 0===r?"Etc/UTC":`Etc/GMT${n.F.instance(-r).formatOffset(0,"narrow")}`}(r)}(e,t):t}function u(e,t,r,n,a){if(t&&"date"===a)return{timeZone:i.a,timeZoneName:void 0};const o=n.timeStyle||n.hour,l=r===i.u;return{timeZone:l?"timestamp-offset"===a?void 0:e??i.a:r,timeZoneName:l&&o?s:void 0}}function d(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map((e=>e.toLowerCase())));return e===i.s||e===i.u||t.has(e.toLowerCase())||r.has(e.toLowerCase())}},78644:(e,t,r)=>{r.d(t,{A:()=>d});var i=r(32816),n=r(52731),a=r(93804),s=r(99924),o=r(29298),l=(r(32773),r(20266),r(69421));r(41390),r(85176),r(93181),r(13671),r(50704),r(40499),r(36555),r(58498),r(91047),r(35819),r(45371),r(61532),r(80959),r(6407),r(90740),r(19247),r(36172),r(36544),r(48064);const u=new a.J({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let d=class extends(n.A.ClonableMixin(s.A)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,i._)([(0,o.MZ)({json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,o.MZ)({json:{write:!0}})],d.prototype,"description",void 0),(0,i._)([(0,o.MZ)({json:{read:u.read,write:u.write}})],d.prototype,"drawingTool",void 0),(0,i._)([(0,o.MZ)({json:{write:!0}})],d.prototype,"prototype",void 0),(0,i._)([(0,o.MZ)({json:{write:!0}})],d.prototype,"thumbnail",void 0),d=(0,i._)([(0,l.$)("esri.layers.support.FeatureTemplate")],d)},79747:(e,t,r)=>{r.d(t,{K:()=>p,Q:()=>u});var i=r(32816),n=r(93804),a=r(20266),s=r(29298),o=(r(32773),r(88663)),l=r(69421);r(90740),r(36544),r(85176),r(93181),r(13671),r(40499),r(6407),r(50704),r(91047),r(48064);const u=(0,n.s)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),d="percent-of-total",c="field",p=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&c||r&&d||null,t&&r&&a.L.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==c&&e!==d||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,i._)([(0,s.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),(0,i._)([(0,o.e)(u,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=(0,i._)([(0,l.$)("esri.rest.support.NormalizationBinParametersMixin")],t),t}},79875:(e,t,r)=>{r.d(t,{A:()=>h});var i=r(6407),n=r(20266),a=r(93217),s=r(133),o=r(12119),l=r(30011),u=r(16345),d=r(78016),c=r(54483);r(32773),r(90740);const p=new Map;class h{static fromJSON(e){return new h(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new h(e.fields??[],g(e))}static fromLayerJSON(e){return new h(e.fields??[],g(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const r=[];for(const e of this.fields){const t=e?.name,i=m(t);if(t&&i){const n=y(t);this._fieldsMap.set(t,e),this._fieldsMap.set(n,e),this._normalizedFieldsMap.set(i,e),r.push(`${n}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,l.vE)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,l.WA)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,l.te)(e)||(0,l.Xz)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,l.te)(e)||(0,l.Xz)(e)||e.nullable||void 0!==(0,l.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(y(e))??this._normalizedFieldsMap.get(m(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(n.L.getLogger("esri.layers.support.FieldsIndex").errorOnce(new i.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.a):f.has(t.type)?u.u:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.u?s.U.instance:t===u.a?c.F.utcInstance:(0,a.g)(p,t,(()=>c.I.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,l.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,o.i)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function y(e){return e.trim().toLowerCase()}function m(e){return(0,l.rS)(e)?.toLowerCase()??""}const f=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function g(e){const t=new Map;if(!e.fields)return t;const r=!0===e.datesInUnknownTimezone,{timeInfo:i,editFieldsInfo:n}=e,a=(i?"startField"in i?i.startField:i.startTimeField:"")??"",s=(i?"endField"in i?i.endField:i.endTimeField:"")??"",o="dateFieldsTimeZone"in e?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,d.f)(e.dateFieldsTimeReference):null,l=n?"timeZone"in n?n.timeZone??o:n.dateFieldsTimeReference?(0,d.f)(n.dateFieldsTimeReference):o??u.a:null,c=i?"timeZone"in i?i.timeZone??o:i.timeReference?(0,d.f)(i.timeReference):o:null,p=new Map([[y(n?.creationDateField??""),l],[y(n?.editDateField??""),l],[y(a),c],[y(s),c]]);for(const{name:i,type:n}of e.fields)if(f.has(n))t.set(i,u.u);else if("date"!==n&&"esriFieldTypeDate"!==n)t.set(i,null);else if(r)t.set(i,u.u);else{const e=p.get(y(i??""))??o;t.set(i,e)}return t}},91815:(e,t,r)=>{r.d(t,{f:()=>d,g:()=>p,t:()=>c});var i=r(93804),n=r(44600),a=r(2160),s=r(36533),o=r(64752),l=r(84200),u=r(67504);const d=(0,i.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),c=(0,i.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),p={base:a.A,key:"type",typeMap:{extent:n.A,multipoint:s.A,point:o.A,polyline:u.A,polygon:l.A}}},92963:(e,t,r)=>{function i(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const r=[];for(const i of t.fieldNames)r.push(e.attributes[i]??null);return JSON.stringify(r)}}}function n(e,t){if("uniqueIdFields"in t&&t.uniqueIdFields?.length){if(1===t.uniqueIdFields.length)return e.attributes?.[t.uniqueIdFields[0]];const r=t.uniqueIdFields.map((t=>e.attributes?.[t]));return JSON.stringify(r)}return"objectIdField"in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null}r.d(t,{a:()=>i,c:()=>n})},93049:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>s,g:()=>n,n:()=>o});const i="randomUUID"in crypto;function n(){if(i)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function a(){return`{${n().toUpperCase()}}`}function s(){return`{${n()}}`}function o(e){const t=e.toUpperCase();return"{"!==e[0]?`{${t}}`:t}}}]);