/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import"../core/lang.js";import{g as t}from"./watch.js";import{k as i}from"./vec3.js";import{f as s,c as r}from"./vec3f64.js";import{f as a}from"./vec4f64.js";import{p as e}from"./projectBuffer.js";import{A as o}from"./orientedBoundingBox.js";import{G as n,a as h}from"./Matrix4PassUniform.js";import{R as c,W as g,O as m}from"./RibbonLineMaterial.js";import{V as f}from"./VertexAttribute.js";var u,d,p;!function(t){t[t.RasterImage=0]="RasterImage",t[t.Features=1]="Features"}(u||(u={})),function(t){t[t.MapLayer=0]="MapLayer",t[t.ViewLayer=1]="ViewLayer",t[t.Outline=2]="Outline",t[t.SnappingHint=3]="SnappingHint"}(d||(d={})),function(t){t[t.WithRasterImage=0]="WithRasterImage",t[t.WithoutRasterImage=1]="WithoutRasterImage"}(p||(p={}));class _{constructor(t,i){this.vec3=t,this.id=i}}function M(t,i,r,a){return new _(s(t,i,r),a)}class w{constructor(i){this._originSR=i,this._rootOriginId="root/"+t(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const s=this._origins.get(this._rootOriginId);if(null==s){const i=M(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,i),i}const r=this._gridSize,a=Math.round(t[0]/r),e=Math.round(t[1]/r),o=Math.round(t[2]/r),n=`${a}/${e}/${o}`;let h=this._origins.get(n);const c=.5*r;if(i(l,t,s.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]),l[0]<c&&l[1]<c&&l[2]<c){if(h){const s=Math.max(...l);if(i(l,t,h.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]),Math.max(...l)<s)return h}return s}return h||(h=M(a*r,e*r,o*r,n),this._origins.set(n,h)),h}_drawOriginBox(t,i=a(1,1,0,1)){const s=window.view,r=s.stage,u=i.toString();if(!this._objects.has(u)){this._material=new c({width:2,color:i});const t=new g(r,{pickable:!1}),s=new m({castShadow:!1});t.add(s),this._objects.set(u,s)}const d=this._objects.get(u),p=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],_=p.length,M=new Array(3*_),w=new Array,l=.5*this._gridSize;for(let i=0;i<_;i++)M[3*i]=t[0]+(1&p[i]?l:-l),M[3*i+1]=t[1]+(2&p[i]?l:-l),M[3*i+2]=t[2]+(4&p[i]?l:-l),i>0&&w.push(i-1,i);e(M,this._originSR,0,M,s.renderSpatialReference,0,_);const b=new n(this._material,[[f.POSITION,new o(M,w,3,!0)]],null,h.Line);d.addGeometry(b)}get test(){}}const l=r();export{u as D,w as G,p as a,d as b,M as f};
