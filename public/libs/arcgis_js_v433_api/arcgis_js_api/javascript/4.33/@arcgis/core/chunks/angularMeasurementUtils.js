/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{c as e,C as t}from"./Cyclical.js";import{c as r,a}from"./quantityUtils.js";import{e as s,c as i}from"./unitUtils.js";import{a as n}from"./vec2.js";import{c as o,U as c}from"./vec2f64.js";import{e as l,c as u,s as f}from"./vec3.js";import{c as p}from"./vec3f64.js";import{p as g}from"./projectVectorToVector.js";import{geodesicCompatibleSpatialReference as m,inverseGeodeticSolver as v,InverseGeodeticSolverResult as d,directGeodeticSolver as h}from"../geometry/support/geodesicUtils.js";var j;function R(e,t){if(null==e||null==t)return;const r=b(e,t);return null!=r?a(r,"radians","geographic"):void 0}!function(e){e.Absolute="absolute",e.Relative="relative",e.RelativeBilateral="relative-bilateral"}(j||(j={}));const b=(()=>{const e=p(),t=p();return(r,a)=>(f(e,r.x,r.y,r.z??0),f(t,a.x,a.y,a.z??0),y(e,t,r.spatialReference,a.spatialReference))})(),y=(()=>{const e=o(),t=p(),r=p();return(a,o,u,f)=>{if(l(a,o))return;const p=m(u),d=m(f);if(p&&d&&s(p,d)&&g(a,u,t,p)&&g(o,f,r,d)){const{azimuth:e}=v(C,t,r,p);return null!=e?i(e,"degrees","radians"):void 0}e[0]=o[0]-a[0],e[1]=o[1]-a[1];let h=n(c,e);return e[0]<0&&(h=V-h),h}})();function z(e,t,r,a=j.Absolute){if(t&&r)switch(a){case j.Absolute:return R(t,r);case j.Relative:return A(w(e,t,r),j.Relative);case j.RelativeBilateral:return A(w(e,t,r),j.RelativeBilateral)}}function w(e,t,r){if(!e||!t||!r)return;const s=b(e,t),i=b(t,r);return null!=s&&null!=i?a(i-s,"radians","geographic"):void 0}function A(e,t){if(null!=e)switch(t){case j.Absolute:return B(e);case j.Relative:{const t=U(e);let r=D.normalize(t,0,!0);return-180===r&&(r=180),a(r,"degrees","geographic")}case j.RelativeBilateral:{const t=U(e),r=Math.abs(D.normalize(t,0,!0));return a(r,"degrees","geographic")}}}function B(e){const t=U(e),r=q.normalize(t,0,!0);return a(r,"degrees","geographic")}const M=(()=>{const e=p();return(t,a,s,n,o,c="geodesic")=>{u(e,a);const l=U(o);if("geodesic"===c){const r=m(s);if(r&&g(e,s,e,r))return h(t,e,l,n,r),t[2]=a[2],!!g(t,r,t,s)}const p=r(l,"geographic","arithmetic"),v=i(p,"degrees","radians"),d=a[0]+n*Math.cos(v),j=a[1]+n*Math.sin(v),R=a[2];return f(t,d,j,R),!0}})();function U(e){if(null!=e)return r(T(e),e.rotationType,"geographic")}function x(e){if(null!=e)return r(T(e),e.rotationType,"arithmetic")}function T(e){return i(e.value,e.unit,"degrees")}const C=new d,V=2*Math.PI,q=e,D=new t(-180,180);export{j as D,U as a,B as b,A as c,R as d,z as e,x as g,M as p,y as r};
