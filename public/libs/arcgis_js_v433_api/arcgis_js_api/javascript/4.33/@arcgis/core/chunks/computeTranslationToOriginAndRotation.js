/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{e as t}from"./mathUtils.js";import{t as s,j as n,k as r}from"./mat4.js";import{c as o}from"./vec3f64.js";import{a,P as e,b as c}from"./projectBuffer.js";import{e as i}from"./unitUtils.js";function u(t,s,n){const r=Math.sin(t),o=Math.cos(t),a=Math.sin(s),e=Math.cos(s),c=n;return c[0]=-r,c[4]=-a*o,c[8]=e*o,c[12]=0,c[1]=o,c[5]=-a*r,c[9]=e*r,c[13]=0,c[2]=0,c[6]=e,c[10]=a,c[14]=0,c[3]=0,c[7]=0,c[11]=0,c[15]=1,c}function f(t,o,f,m){const A=a(t,m);if(null==A)return!1;const L=A.source.spatialReferenceId,R=A.dest.spatialReferenceId;if(L===R&&!l(R)&&(L!==e.UNKNOWN||i(t,m)))return n(f,o),!0;if(l(R)){const t=c[L][e.LON_LAT],s=c[e.LON_LAT][R];return null!=t&&null!=s&&(t(o,0,E,0),s(E,0,_,0),u(C*E[0],C*E[1],f),f[12]=_[0],f[13]=_[1],f[14]=_[2],!0)}const p=l(L);if((R===e.WEB_MERCATOR||R===e.PLATE_CARREE||R===e.WGS84||R===e.CGCS2000)&&(L===e.WGS84||p||L===e.WEB_MERCATOR||L===e.CGCS2000)){const t=c[L][e.LON_LAT],n=c[e.LON_LAT][R];return null!=t&&null!=n&&(t(o,0,E,0),n(E,0,_,0),p?function(t,n,r){u(t,n,r),s(r,r)}(C*E[0],C*E[1],f):r(f),f[12]=_[0],f[13]=_[1],f[14]=_[2],!0)}return!1}function l(t){return t===e.SPHERICAL_ECEF||t===e.SPHERICAL_MARS_PCPF||t===e.SPHERICAL_MOON_PCPF||t===e.WGS84_ECEF}const C=t(1),E=o(),_=o();export{u as a,f as c};
