/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{b as t}from"./quantityUtils.js";import{V as r}from"./unitUtils.js";import{e}from"./earcut.js";import{s as o,b as s,v as n}from"./vec3.js";import{c as i}from"./vec3f64.js";import{p as a}from"./projectVectorToVector.js";import{l as c,w as u,g as l,m as f}from"./plane.js";import{a as m}from"./triangle.js";import{c as p}from"./geodesicLengthMeasurementUtils.js";import{geodesicAreas as g}from"../geometry/support/geodesicUtils.js";import{a as d}from"./geodesicMeasurementUtils.js";function j(t,r={positionsWorldCoords:[]}){return y(t,r)}function h(t,r={positionsWorldCoords:[]}){return y(t,r,!1)}function y(e,g,d=e.hasZ){const j=p(e.spatialReference),h=r(j);if(null==h)return null;let y=0;for(const t of e.rings){const r=t.length;if(r<3)continue;const{positionsWorldCoords:p}=g;for(;p.length<r;)p.push(i());const h=q,M=o(v,0,0,0),W=1/r;for(let n=0;n<r;n++){if(U=h,(C=t[n]).length<2||(o(U,C[0],C[1],d&&C[2]||0),0))return null;if(!a(h,e.spatialReference,p[n],j))return null;s(M,M,p[n],W)}const w=c(p[0],p[1],M,u());if(0===n(l(w)))continue;for(let t=0;t<r;t++)f(w,M,p[t],p[t]);const A=b(p);for(let t=0;t<A.length;t+=3)y+=m(p[A[t]],p[A[t+1]],p[A[t+2]])}var U,C;return t(y,h)}const q=i(),v=i();function U(){return{positionsWorldCoords:[]}}function b(t){return e(function(t){const r=new Float64Array(2*t.length);for(let e=0;e<t.length;++e){const o=t[e],s=2*e;r[s]=o[0],r[s+1]=o[1]}return r}(t),[],2)}async function C(){return r=await import("../geometry/geometryEngine.js"),{geodesicArea(e){const{spatialReference:o}=e;return d(o,M,(e=>function(r,e){try{return t(Math.abs(r.geodesicArea(e,"square-meters")),"square-meters")}catch(t){return null}}(r,e)),e)}};var r}function M(r){return t(Math.abs(g([r],"square-meters")[0]),"square-meters")}export{j as a,U as c,h as e,C as l,b as t};
