/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{d as t}from"./quantityUtils.js";import{a6 as n,b as e,i as r,E as i,C as s,e as o,a8 as a,O as c}from"./unitUtils.js";import{x as l,s as u}from"./vec3.js";import{c as f}from"./vec3f64.js";import{p}from"./projectVectorToVector.js";import{W as m,g as h}from"./spatialReferenceEllipsoidUtils.js";import z from"../geometry/Polyline.js";import{load as d,execute as g}from"../geometry/operators/geodeticLengthOperator.js";import{inverseGeodeticSolver as y,InverseGeodeticSolverResult as R,geodesicLengths as j}from"../geometry/support/geodesicUtils.js";import{a as x}from"./geodesicMeasurementUtils.js";function Z(t){return n(t)?e(t)||r(t)||i(t)||s(t)?m:t:h(t)}var v;function D(n){return function(n,e){const{hasZ:r,spatialReference:i}=n,s=Z(i);let o=0;const c=a(s);if(null==c)return null;const l=e===v.Direct?L:M;for(const t of n.paths){if(t.length<2)continue;const n=t.length-1;for(let e=0;e<n;++e){const n=t[e];S[0]=n[0],S[1]=n[1],S[2]=r?n[2]:0;const s=t[e+1];q[0]=s[0],q[1]=s[1],q[2]=r?s[2]:0;const a=l(S,q,i);if(null==a)return null;o+=a.value}}return t(o,c)}(n,v.Horizontal)}function V(n,e){const{spatialReference:r}=n;return o(r,e.spatialReference)?(S[0]=n.x,S[1]=n.y,S[2]=n.hasZ?n.z:0,q[0]=e.x,q[1]=e.y,q[2]=e.hasZ?e.z:0,function(n,e,r){const i=P(S,q,r);return null!=i?{direct:t(i.direct,i.unit),horizontal:t(i.horizontal,i.unit),vertical:t(i.vertical,i.unit)}:null}(0,0,r)):null}function H(t,n){const{spatialReference:e}=t;return o(e,n.spatialReference)?(S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,q[0]=n.x,q[1]=n.y,q[2]=n.hasZ?n.z:0,L(S,q,e)):null}function U(t,n){const{spatialReference:e}=t;return o(e,n.spatialReference)?(S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,q[0]=n.x,q[1]=n.y,q[2]=n.hasZ?n.z:0,M(S,q,e)):null}function w(t,n){const{spatialReference:e}=t;return o(e,n.spatialReference)?(S[0]=t.x,S[1]=t.y,S[2]=t.hasZ?t.z:0,q[0]=n.x,q[1]=n.y,q[2]=n.hasZ?n.z:0,O(S,q,e)):null}function b(t){return null!=t?E(t.hasZ?t.z:0,t.spatialReference):null}function E(n,e){const r=c(e);return null!=r?t(n??0,r):null}function L(n,e,r){const i=P(n,e,r,v.Direct);return null!=i?t(i.direct,i.unit):null}function M(n,e,r){const i=P(n,e,r,v.Horizontal);return null!=i?t(i.horizontal,i.unit):null}function O(n,e,r){const i=P(n,e,r,v.Vertical);return null!=i?t(i.verticalSigned,i.unit):null}function P(t,n,e,r){const i=Z(e),s=a(i);if(null==s)return null;const o=n[2]-t[2];if(r===v.Vertical)return{verticalSigned:o,unit:s};if(!p(t,e,B,i)||!p(n,e,C,i))return null;if(r===v.Direct)return{direct:l(C,B),unit:s};if(u(T,t[0],t[1],n[2]),!p(T,e,T,i))return null;const c=l(T,C);return r===v.Horizontal?{horizontal:c,unit:s}:{direct:l(C,B),horizontal:c,vertical:Math.abs(o),unit:s}}!function(t){t[t.Direct=0]="Direct",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"}(v||(v={}));const S=f(),q=f(),B=f(),C=f(),T=f();function W(t,n,e){return x(e,F,G,t,n,e)}const k={geodesicLength:function(t){const{spatialReference:n}=t;return x(n,I,J,t)},geodesicDistanceBetweenPoints:function(t,n){if(!o(t.spatialReference,n.spatialReference))return null;const{spatialReference:e}=t;return N[0]=t.x,N[1]=t.y,N[2]=t.hasZ?t.z:0,Q[0]=n.x,Q[1]=n.y,Q[2]=n.hasZ?n.z:0,W(N,Q,e)},geodesicDistance:W};async function A(){return await d(),k}function F(n,e,r){return t(y(K,n,e,r).distance,"meters")}function G(n,e,r){return t(g(function(t,n,e){return new z({spatialReference:e,paths:[[[...t],[...n]]]})}(n,e,r),{unit:"meters"}),"meters")}function I(n){return t(j([n],"meters")[0],"meters")}function J(n){return t(g(n,{unit:"meters"}),"meters")}const K=new R,N=f(),Q=f();export{U as a,D as b,Z as c,b as d,M as e,V as f,H as g,L as h,E as i,O as j,A as l,w as v};
