/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{g as t}from"./unitUtils.js";import{r as e,a as n,b as r}from"./mat4.js";import{c as i}from"./mat4f64.js";import{O as s,a}from"./vec3f64.js";import{s as o}from"./vec4.js";import{a as l,O as u}from"./vec4f64.js";import{projectPoint as m}from"./projectionUtils.js";import{w as c,k as f,l as p}from"./aaBoundingBox.js";import{c as h}from"./aaBoundingRect.js";import{r as x}from"../geometry/Polygon.js";import{d as y,a as d}from"./coordsUtils.js";import{v as g}from"./meshVertexSpaceUtils.js";import{m as j}from"./dehydratedPoint.js";import{i as v,c as z}from"./hydratedFeatures.js";function w(t,e){if("point"===t.type)return R(t,e,!1);if(v(t))switch(t.type){case"extent":return R(t.center,e,!1);case"polygon":return R(t.centroid,e,!1);case"polyline":return R(M(t),e,!0);case"mesh":return R(g(t.vertexSpace,t.spatialReference)??t.extent.center,e,!1);case"multipoint":return}else switch(t.type){case"extent":return R(function(t){return j(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}(t),e,!0);case"polygon":return R(function(t){const e=t.rings[0];if(!e||0===e.length)return null;const n=x(t.rings,!!t.hasZ);return j(n[0],n[1],n[2],t.spatialReference)}(t),e,!0);case"polyline":return R(M(t),e,!0);case"multipoint":return}}function M(t){const e=t.paths[0];if(!e||0===e.length)return null;const n=y(e,d(e)/2);return j(n[0],n[1],n[2],t.spatialReference)}function R(t,e,n){const r=n?t:z(t);return e&&t?m(t,r,e)?r:null:r}function P(t){if(!t)return 0;switch(t.type){case"point":return t.z;case"extent":return t.zmax;case"polygon":return t.hasZ?t.rings.reduce(((t,e)=>e.reduce(((t,e)=>Math.max(t,e[2])),t)),-1/0):void 0;case"polyline":return t.hasZ?t.paths.reduce(((t,e)=>e.reduce(((t,e)=>Math.max(t,e[2])),t)),-1/0):void 0;case"mesh":return t.extent.zmax;case"multipoint":return}}function b(t,e,n,r=0){if(t){e||(e=h());const i=t;let s=.5*i.width*(n-1),a=.5*i.height*(n-1);return i.width<1e-7*i.height?s+=a/20:i.height<1e-7*i.width&&(a+=s/20),o(e,i.xmin-s-r,i.ymin-a-r,i.xmax+s+r,i.ymax+a+r),e}return null}function F(t,e,n=null){const r=l(u);return null!=t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),null!=e?r[3]=e:null!=t&&t.length>3&&(r[3]=t[3]),n&&(r[0]*=n,r[1]*=n,r[2]*=n,r[3]*=n),r}function U(t,e,n,r,i,s){for(let e=0;e<3;++e)s[e]=null!=t?.[e]?t[e]:null!=n?.[e]?n[e]:i[e];return s[3]=null!=e?e:null!=r?r:i[3],s}function A(t=s,e,n,r=1){const i=new Array(3);if(null==e||null==n)i[0]=1,i[1]=1,i[2]=1;else{let r,s=0;for(let a=2;a>=0;a--){const o=t[a],l=null!=o,u=0===a&&!r&&!l,m=n[a];let c;"symbol-value"===o||u?c=0!==m?e[a]/m:1:l&&"proportional"!==o&&isFinite(o)&&(c=0!==m?o/m:1),null!=c&&(i[a]=c,r=c,s=Math.max(s,Math.abs(c)))}for(let t=2;t>=0;t--)null==i[t]?i[t]=r:0===i[t]&&(i[t]=.001*s)}for(let t=2;t>=0;t--)i[t]/=r;return a(i)}function B(t){return D(null!=t.isPrimitive?[t.width,t.depth,t.height]:t)?null:"Symbol sizes may not be negative values"}function D(t){const e=t=>null==t||t>=0;return Array.isArray(t)?t.every(e):e(t)}function I(t,s,a,o=i()){return t&&e(o,o,-t/180*Math.PI),s&&n(o,o,s/180*Math.PI),a&&r(o,o,a/180*Math.PI),o}function S(e,n,r){if(null!=r.minDemResolution)return r.minDemResolution;const i=t(n),s=c(e)*i,a=f(e)*i,o=p(e)*(n.isGeographic?1:i);return 0===s&&0===a&&0===o?r.minDemResolutionForPoints:.01*Math.max(s,a,o)}export{P as a,A as b,w as c,S as d,b as e,I as f,D as i,F as m,U as o,B as v};
