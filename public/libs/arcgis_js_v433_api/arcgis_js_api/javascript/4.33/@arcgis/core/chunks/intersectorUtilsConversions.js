/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{o as r}from"./mat4.js";import{c as t}from"./vec3f64.js";import{z as e}from"./aaBoundingBox.js";import{b as n}from"./sphere.js";import{i,I as a}from"./IntersectorResult.js";import{G as s,a as c,i as u}from"./Intersector.js";import{i as l}from"./HUDIntersectorResult.js";class o extends s{constructor(r,t,e,n){super(t,e),this.point=r,this.createGraphic=n}}function g(r){return i(r)&&r.intersector===a.PCL&&!!r.target}class p extends c{constructor(r,t,e,n,i){super(r),this.layerViewUid=r,this.sublayerId=t,this.nodeIndex=e,this.componentIndex=n,this.triangleNr=i}}class f extends s{constructor(r,t,e){super(t,null),this.point=r,this.createVoxelGraphic=e}}class h extends s{constructor(r,t){super(r,null),this.createTiles3DGraphic=t}}function d(r){return i(r)&&r.intersector===a.I3S&&!!r.target}function y(r){return i(r)&&r.intersector===a.VOXEL&&!!r.target}function m(r){return i(r)&&r.intersector===a.TERRAIN&&!!r.target}class V extends s{constructor(r,t,e){super(r,t),this.triangleNr=e}}function I(r){return i(r)&&r.intersector===a.OVERLAY&&!!r.target}function w(r){return i(r)&&r.intersector===a.OBJECT&&!!r.target}function x(r,t){return w(r)||l(r)?U(r.target?.object,t):m(r)?t.map?.ground:g(r)||d(r)||I(r)||y(r)?U(r.target,t):null}function b(r,t){const e=j(r,t);return"graphic"===e?.type?e.graphic:null}function j(r,t,e={}){if(null==r)return null;if(w(r)||l(r))return L(r.target?.object,t,e);if(g(r)){const t=r.target.createGraphic();return{type:"graphic",graphic:t,layer:t.layer}}if(y(r)){const t=r.target.createVoxelGraphic();return{type:"graphic",graphic:t,layer:t.layer}}if(function(r){return i(r)&&r.intersector===a.TILES3D&&!!r.target}(r)){const t=r.target.createTiles3DGraphic();return{type:"graphic",graphic:t,layer:t.layer}}return I(r)||u(r)?L(r.target,t,e):d(r)?function(r,t,e){const n=U(r,t);if(null==n)return null;const i=t.allLayerViews.find((r=>r.layer===n));if(!i||i.suspended||!("getGraphicFromIntersectorTarget"in i))return null;const a=e.defer;return T(i.getGraphicFromIntersectorTarget(r,{defer:a?async r=>a((async()=>T(await r()))):void 0}))}(r.target,t,e):null}function L(r,t,e){if(null==r?.graphicUid)return null;const n=U(r,t);if(null==n)return null;if(n===t.graphics)return null==t.graphicsView||"number"!=typeof r.graphicUid?null:t.graphicsView.getHit(r.graphicUid,e);const i=t.allLayerViews.find((r=>r.layer===n));return!i||i.suspended||null==r.graphicUid?null:"getHit"in i?i.getHit(r.graphicUid,e):null}function T(r){return null!=r?{type:"graphic",graphic:r,layer:r.layer}:null}function U(r,t){return null==r?.layerViewUid?null:null!=t.graphicsView&&r.layerViewUid===t.graphicsView.uid?t.graphics:t.allLayerViews.find((t=>t.uid===r.layerViewUid))?.layer}function G(t,i){if(w(t)||l(t))return n(t.target.object.boundingVolumeWorldSpace.bounds);if(u(t)){r(A,t.transformation);const e=Math.max(A[0],A[1],A[2]);return t.target.baseBoundingSphere.radius*e}if(d(t)){const r=function(r,t){const e=U(r,t);if(null==e)return null;const n=t.allLayerViews.find((r=>r.layer===e));return n&&!n.suspended&&"getAABBFromIntersectorTarget"in n?n.getAABBFromIntersectorTarget(r):null}(t.target,i);return r?.5*e(r):null}return null}function B(r){return!w(r)&&!l(r)&&(u(r)?r.target.numLodLevels>1:!!d(r))}const A=t();export{p as I,V as O,o as P,h as T,f as V,j as a,x as b,G as g,B as h,m as i,b as t};
