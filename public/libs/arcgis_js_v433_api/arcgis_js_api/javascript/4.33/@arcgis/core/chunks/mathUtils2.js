/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{g as t}from"./mathUtils.js";import{s as n,f as s,n as a,i as o,j as r,d as c,k as i,l as f,m as u}from"./vec3.js";import{c as e}from"./vec3f64.js";function h(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],s=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],a=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,s,a))}function M(t,s){const a=Math.sqrt(s[0]*s[0]+s[4]*s[4]+s[8]*s[8]),o=Math.sqrt(s[1]*s[1]+s[5]*s[5]+s[9]*s[9]),r=Math.sqrt(s[2]*s[2]+s[6]*s[6]+s[10]*s[10]);return n(t,a,o,r),t}function m(t,s,o){o=o||t;const r=c(t,s);n(o,t[0]-r*s[0],t[1]-r*s[1],t[2]-r*s[2]),a(o,o)}function l(t,o,r){Math.abs(t[0])>Math.abs(t[1])?n(o,0,1,0):n(o,1,0,0),s(r,t,o),s(o,r,t),a(r,r),a(o,o)}function g(t,n,s,a,o,r){const c=t+(n-t)*o;return c+(s+(a-s)*o-c)*r}function p(t,n,s,a=e()){const i=f(t),h=f(n),M=c(t,n)/(i*h);if(M<.9999999999999999){const c=Math.acos(M),f=((1-s)*i+s*h)/Math.sin(c),u=f/i*Math.sin((1-s)*c),e=f/h*Math.sin(s*c);return r(w,t,u),r(y,n,e),o(a,w,y)}return u(a,t,n,s)}function j(t,n,s,h=e(),M=e()){const m=f(t),l=f(n),g=c(t,n)/(m*l);if(g<.9999999999999999){const a=Math.acos(g),c=Math.sin(a),i=Math.sin(s*a),f=Math.sin((1-s)*a),u=(1-s)*m+s*l;{const s=u/c,a=s/l*i;r(w,t,s/m*f),r(y,n,a),o(h,w,y)}{const e=1/m*(-Math.cos((1-s)*a)*a*u+f*(-m+l));r(w,t,e);const h=1/l*(Math.cos(s*a)*a*u+i*(-m+l));r(y,n,h),o(M,w,y),r(M,M,1/c)}return M}return u(h,t,n,s),i(M,n,t),a(M,M),M}function q(n,o,r){n=a(w,n),o=a(y,o);const i=t(c(n,o));if(r){const t=s(U,n,o);if(c(t,r)<0)return-i}return i}function b(t){const n=t.length;return s=>{if(s<=t[0][0])return t[0][1];if(s>=t[n-1][0])return t[n-1][1];let a=1;for(;s>t[a][0];)a++;const o=t[a-1][0],r=t[a][0],c=(r-s)/(r-o);return c*t[a-1][1]+(1-c)*t[a][1]}}function d(t,n,o,r){i(x,n,t),i(k,o,t),s(r,x,k),a(r,r),r[3]=-c(t,r)}function v(t,s){if(n(s,0,0,0),t.length>0){for(let n=0;n<t.length;++n)o(s,s,t[n]);r(s,s,1/t.length)}}const x=e(),k=e(),U=e(),w=e(),y=e();export{q as a,p as b,M as c,v as d,m as e,b as f,g,h as m,d as p,j as s,l as t};
