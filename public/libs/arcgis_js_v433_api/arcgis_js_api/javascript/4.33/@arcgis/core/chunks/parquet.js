/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import e from"../request.js";import{g as t}from"./assets.js";let n,r=null;async function _(){return r||(r=async function(){const e=await Promise.resolve().then((()=>ie));return await e.default({module_or_path:t("esri/libs/parquet/pkg/bundle_bg.wasm")}),e}()),r}const i=new Array(128).fill(void 0);function o(e){return i[e]}i.push(void 0,null,!0,!1);let a=i.length;function s(e){a===i.length&&i.push(i.length+1);const t=a;return a=i[t],i[t]=e,t}function d(e,t){try{return e.apply(this,t)}catch(e){n.__wbindgen_exn_store(s(e))}}const c="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&c.decode();let g=null;function u(){return null!==g&&0!==g.byteLength||(g=new Uint8Array(n.memory.buffer)),g}function l(e,t){return e>>>=0,c.decode(u().subarray(e,e+t))}let w=0;const b="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},p="function"==typeof b.encodeInto?function(e,t){return b.encodeInto(e,t)}:function(e,t){const n=b.encode(e);return t.set(n),{read:e.length,written:n.length}};function f(e,t,n){if(void 0===n){const n=b.encode(e),r=t(n.length,1)>>>0;return u().subarray(r,r+n.length).set(n),w=n.length,r}let r=e.length,_=t(r,1)>>>0;const i=u();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;i[_+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),_=n(_,r,r=o+3*e.length,1)>>>0;const t=u().subarray(_+o,_+r);o+=p(e,t).written,_=n(_,r,o,1)>>>0}return w=o,_}let y=null;function h(){return(null===y||!0===y.buffer.detached||void 0===y.buffer.detached&&y.buffer!==n.memory.buffer)&&(y=new DataView(n.memory.buffer)),y}function m(e){return null==e}function k(e){const t=o(e);return function(e){e<132||(i[e]=a,a=e)}(e),t}const I="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>{n.__wbindgen_export_4.get(e.dtor)(e.a,e.b)}));function F(e,t){return e>>>=0,u().subarray(e/1,e/1+t)}let v=null,x=null;function T(e,t){e>>>=0;const n=h(),r=[];for(let _=e;_<e+4*t;_+=4)r.push(k(n.getUint32(_,!0)));return r}let M=null;function R(e,t){const r=t(2*e.length,2)>>>0;return(null!==M&&0!==M.byteLength||(M=new Uint16Array(n.memory.buffer)),M).set(e,r/2),w=e.length,r}function q(e,t){const n=t(1*e.length,1)>>>0;return u().set(e,n/1),w=e.length,n}function z(e,t){if(!(e instanceof t))throw new Error(`expected instance of ${t.name}`)}function O(e,t,r){n._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h94c9328f486d7193(e,t,s(r))}const j=Object.freeze({Point:0,0:"Point",Polygon:1,1:"Polygon",Polyline:2,2:"Polyline",Multipoint:3,3:"Multipoint"}),C=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeBigInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],A="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_columndescriptor_free(e>>>0,1)));class W{static __wrap(e){e>>>=0;const t=Object.create(W.prototype);return t.__wbg_ptr=e,A.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,A.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_columndescriptor_free(e,0)}name(){let e,t;try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_name(i,this.__wbg_ptr);var r=h().getInt32(i+0,!0),_=h().getInt32(i+4,!0);return e=r,t=_,l(r,_)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,t,1)}}physicalType(){let e,t;try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_physicalType(i,this.__wbg_ptr);var r=h().getInt32(i+0,!0),_=h().getInt32(i+4,!0);return e=r,t=_,l(r,_)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,t,1)}}logicalType(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_logicalType(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getInt32(r+4,!0);let _;return 0!==e&&(_=l(e,t).slice(),n.__wbindgen_free(e,1*t,1)),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}encodings(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_encodings(_,this.__wbg_ptr);var e=h().getInt32(_+0,!0),t=h().getInt32(_+4,!0),r=T(e,t).slice();return n.__wbindgen_free(e,4*t,4),r}finally{n.__wbindgen_add_to_stack_pointer(16)}}pageEncodings(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_pageEncodings(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getInt32(r+4,!0);let _;return 0!==e&&(_=T(e,t).slice(),n.__wbindgen_free(e,4*t,4)),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}numValues(){return n.columndescriptor_numValues(this.__wbg_ptr)}compression(){let e,t;try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_compression(i,this.__wbg_ptr);var r=h().getInt32(i+0,!0),_=h().getInt32(i+4,!0);return e=r,t=_,l(r,_)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,t,1)}}compressedSize(){return n.columndescriptor_compressedSize(this.__wbg_ptr)}uncompressedSize(){return n.columndescriptor_uncompressedSize(this.__wbg_ptr)}nullCount(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_nullCount(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getBigInt64(r+8,!0);return 0===e?void 0:t}finally{n.__wbindgen_add_to_stack_pointer(16)}}distinctCount(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_distinctCount(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getBigInt64(r+8,!0);return 0===e?void 0:t}finally{n.__wbindgen_add_to_stack_pointer(16)}}minValue(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_minValue(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getInt32(r+4,!0);let _;return 0!==e&&(_=F(e,t).slice(),n.__wbindgen_free(e,1*t,1)),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}maxValue(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.columndescriptor_maxValue(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getInt32(r+4,!0);let _;return 0!==e&&(_=F(e,t).slice(),n.__wbindgen_free(e,1*t,1)),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}}const P="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_fieldmetadata_free(e>>>0,1)));class S{static __wrap(e){e>>>=0;const t=Object.create(S.prototype);return t.__wbg_ptr=e,P.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,P.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_fieldmetadata_free(e,0)}get name(){let e,t;try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.fieldmetadata_name(i,this.__wbg_ptr);var r=h().getInt32(i+0,!0),_=h().getInt32(i+4,!0);return e=r,t=_,l(r,_)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,t,1)}}get index(){return n.fieldmetadata_index(this.__wbg_ptr)}get type(){const e=n.fieldmetadata_esri_type(this.__wbg_ptr);return C[e]}get physicalType(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.fieldmetadata_physical_type(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getInt32(r+4,!0);let _;return 0!==e&&(_=l(e,t).slice(),n.__wbindgen_free(e,1*t,1)),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}get logicalType(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.fieldmetadata_logical_type(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getInt32(r+4,!0);let _;return 0!==e&&(_=l(e,t).slice(),n.__wbindgen_free(e,1*t,1)),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}}const G="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_filemetadata_free(e>>>0,1)));class L{static __wrap(e){e>>>=0;const t=Object.create(L.prototype);return t.__wbg_ptr=e,G.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,G.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_filemetadata_free(e,0)}version(){return n.filemetadata_version(this.__wbg_ptr)}numRows(){return n.filemetadata_numRows(this.__wbg_ptr)>>>0}numFields(){return n.filemetadata_numFields(this.__wbg_ptr)>>>0}numColumns(){return n.filemetadata_numColumns(this.__wbg_ptr)>>>0}createdBy(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.filemetadata_createdBy(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getInt32(r+4,!0);let _;return 0!==e&&(_=l(e,t).slice(),n.__wbindgen_free(e,1*t,1)),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}keyValueMetadata(e){try{const _=n.__wbindgen_add_to_stack_pointer(-16),i=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),o=w;n.filemetadata_keyValueMetadata(_,this.__wbg_ptr,i,o);var t=h().getInt32(_+0,!0),r=h().getInt32(_+4,!0);let a;return 0!==t&&(a=l(t,r).slice(),n.__wbindgen_free(t,1*r,1)),a}finally{n.__wbindgen_add_to_stack_pointer(16)}}keys(){try{const r=n.__wbindgen_add_to_stack_pointer(-16);n.filemetadata_keys(r,this.__wbg_ptr);var e=h().getInt32(r+0,!0),t=h().getInt32(r+4,!0);let _;return 0!==e&&(_=T(e,t).slice(),n.__wbindgen_free(e,4*t,4)),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}getFieldIndex(e){const t=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),r=w,_=n.filemetadata_getFieldIndex(this.__wbg_ptr,t,r);return 16777215===_?void 0:_}getFieldByIndex(e){const t=n.filemetadata_getFieldByIndex(this.__wbg_ptr,e);return 0===t?void 0:S.__wrap(t)}getFields(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.filemetadata_getFields(_,this.__wbg_ptr);var e=h().getInt32(_+0,!0),t=h().getInt32(_+4,!0),r=T(e,t).slice();return n.__wbindgen_free(e,4*t,4),r}finally{n.__wbindgen_add_to_stack_pointer(16)}}}const E="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_geometryinfodescriptor_free(e>>>0,1)));class B{static __wrap(e){e>>>=0;const t=Object.create(B.prototype);return t.__wbg_ptr=e,E.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,E.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_geometryinfodescriptor_free(e,0)}get geometryType(){const e=n.__wbg_get_geometryinfodescriptor_geometryType(this.__wbg_ptr);return 4===e?void 0:e}set geometryType(e){n.__wbg_set_geometryinfodescriptor_geometryType(this.__wbg_ptr,m(e)?4:e)}get wkbIndex(){const e=n.__wbg_get_geometryinfodescriptor_wkbIndex(this.__wbg_ptr);return 16777215===e?void 0:e}set wkbIndex(e){n.__wbg_set_geometryinfodescriptor_wkbIndex(this.__wbg_ptr,m(e)?16777215:e)}get lngIndex(){const e=n.__wbg_get_geometryinfodescriptor_lngIndex(this.__wbg_ptr);return 16777215===e?void 0:e}set lngIndex(e){n.__wbg_set_geometryinfodescriptor_lngIndex(this.__wbg_ptr,m(e)?16777215:e)}get latIndex(){const e=n.__wbg_get_geometryinfodescriptor_latIndex(this.__wbg_ptr);return 16777215===e?void 0:e}set latIndex(e){n.__wbg_set_geometryinfodescriptor_latIndex(this.__wbg_ptr,m(e)?16777215:e)}get xIndex(){const e=n.__wbg_get_geometryinfodescriptor_xIndex(this.__wbg_ptr);return 16777215===e?void 0:e}set xIndex(e){n.__wbg_set_geometryinfodescriptor_xIndex(this.__wbg_ptr,m(e)?16777215:e)}get inWkid(){const e=n.__wbg_get_geometryinfodescriptor_inWkid(this.__wbg_ptr);return 4294967297===e?void 0:e}set inWkid(e){n.__wbg_set_geometryinfodescriptor_inWkid(this.__wbg_ptr,m(e)?4294967297:e>>>0)}get outWkid(){const e=n.__wbg_get_geometryinfodescriptor_outWkid(this.__wbg_ptr);return 4294967297===e?void 0:e}set outWkid(e){n.__wbg_set_geometryinfodescriptor_outWkid(this.__wbg_ptr,m(e)?4294967297:e>>>0)}static new(){const e=n.geometryinfodescriptor_new();return B.__wrap(e)}setMultiscaleInfo(e){z(e,U);var t=e.__destroy_into_raw();n.geometryinfodescriptor_setMultiscaleInfo(this.__wbg_ptr,t)}}const D="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_multiscaleinfo_free(e>>>0,1)));class U{static __wrap(e){e>>>=0;const t=Object.create(U.prototype);return t.__wbg_ptr=e,D.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,D.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_multiscaleinfo_free(e,0)}static new(){const e=n.multiscaleinfo_new();return U.__wrap(e)}push(e,t,r,_,i){n.multiscaleinfo_push(this.__wbg_ptr,e,t,r,_,i)}}const V="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_pageencodingdescriptor_free(e>>>0,1)));class X{static __wrap(e){e>>>=0;const t=Object.create(X.prototype);return t.__wbg_ptr=e,V.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,V.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_pageencodingdescriptor_free(e,0)}pageType(){let e,t;try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.pageencodingdescriptor_pageType(i,this.__wbg_ptr);var r=h().getInt32(i+0,!0),_=h().getInt32(i+4,!0);return e=r,t=_,l(r,_)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,t,1)}}encoding(){let e,t;try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.pageencodingdescriptor_encoding(i,this.__wbg_ptr);var r=h().getInt32(i+0,!0),_=h().getInt32(i+4,!0);return e=r,t=_,l(r,_)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,t,1)}}count(){return n.pageencodingdescriptor_count(this.__wbg_ptr)}}const N="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_parquetchunk_free(e>>>0,1)));class Y{static __wrap(e){e>>>=0;const t=Object.create(Y.prototype);return t.__wbg_ptr=e,N.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,N.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_parquetchunk_free(e,0)}size(){return n.parquetchunk_size(this.__wbg_ptr)>>>0}hasField(e){return 0!==n.parquetchunk_hasField(this.__wbg_ptr,e)}readX(e){return n.parquetchunk_readX(this.__wbg_ptr,e)}readY(e){return n.parquetchunk_readY(this.__wbg_ptr,e)}readCoords(e){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.parquetchunk_readCoords(o,this.__wbg_ptr,e);var t=h().getInt32(o+0,!0),r=h().getInt32(o+4,!0);let a;return 0!==t&&(a=(_=t,i=r,_>>>=0,(null!==v&&0!==v.byteLength||(v=new Float64Array(n.memory.buffer)),v).subarray(_/8,_/8+i)).slice(),n.__wbindgen_free(t,8*r,8)),a}finally{n.__wbindgen_add_to_stack_pointer(16)}var _,i}readLengths(e){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.parquetchunk_readLengths(o,this.__wbg_ptr,e);var t=h().getInt32(o+0,!0),r=h().getInt32(o+4,!0);let a;return 0!==t&&(a=(_=t,i=r,_>>>=0,(null!==x&&0!==x.byteLength||(x=new Uint32Array(n.memory.buffer)),x).subarray(_/4,_/4+i)).slice(),n.__wbindgen_free(t,4*r,4)),a}finally{n.__wbindgen_add_to_stack_pointer(16)}var _,i}readGeometryTransformed(e,t,r,_,i){const o=n.parquetchunk_readGeometryTransformed(this.__wbg_ptr,e,t,r,_,i);return 0===o?void 0:H.__wrap(o)}boundsXMin(e){return n.parquetchunk_boundsXMin(this.__wbg_ptr,e)}boundsYMin(e){return n.parquetchunk_boundsYMin(this.__wbg_ptr,e)}boundsXMax(e){return n.parquetchunk_boundsXMax(this.__wbg_ptr,e)}boundsYMax(e){return n.parquetchunk_boundsYMax(this.__wbg_ptr,e)}readAttribute(e,t){return k(n.parquetchunk_readAttribute(this.__wbg_ptr,e,t))}}const $="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_parquetfile_free(e>>>0,1)));let J=class e{static __wrap(t){t>>>=0;const n=Object.create(e.prototype);return n.__wbg_ptr=t,$.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,$.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_parquetfile_free(e,0)}metadata(){const e=n.parquetfile_metadata(this.__wbg_ptr);return L.__wrap(e)}rowGroups(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.parquetfile_rowGroups(_,this.__wbg_ptr);var e=h().getInt32(_+0,!0),t=h().getInt32(_+4,!0),r=T(e,t).slice();return n.__wbindgen_free(e,4*t,4),r}finally{n.__wbindgen_add_to_stack_pointer(16)}}readChunksWithCallback(e,t){const r=R(e,n.__wbindgen_malloc),_=w;return k(n.parquetfile_readChunksWithCallback(this.__wbg_ptr,r,_,s(t)))}readFirstChunk(e){const t=R(e,n.__wbindgen_malloc),r=w;return k(n.parquetfile_readFirstChunk(this.__wbg_ptr,t,r))}readAllChunks(e){const t=R(e,n.__wbindgen_malloc),r=w;return k(n.parquetfile_readAllChunks(this.__wbg_ptr,t,r))}updateChunks(e){const t=R(e,n.__wbindgen_malloc),r=w;return k(n.parquetfile_updateChunks(this.__wbg_ptr,t,r))}};const Q="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_quantizedgeometry_free(e>>>0,1)));class H{static __wrap(e){e>>>=0;const t=Object.create(H.prototype);return t.__wbg_ptr=e,Q.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Q.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_quantizedgeometry_free(e,0)}readCoordsUnsafe(){return k(n.quantizedgeometry_readCoordsUnsafe(this.__wbg_ptr))}readLengthsUnsafe(){return k(n.quantizedgeometry_readLengthsUnsafe(this.__wbg_ptr))}}const K="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_rangeproviderjs_free(e>>>0,1)));class Z{static __wrap(e){e>>>=0;const t=Object.create(Z.prototype);return t.__wbg_ptr=e,K.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,K.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_rangeproviderjs_free(e,0)}static new(e,t){const r=n.rangeproviderjs_new(s(e),s(t));return Z.__wrap(r)}static withFetch(){const e=n.rangeproviderjs_withFetch();return Z.__wrap(e)}}const ee="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>n.__wbg_rowgroup_free(e>>>0,1)));class te{static __wrap(e){e>>>=0;const t=Object.create(te.prototype);return t.__wbg_ptr=e,ee.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ee.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_rowgroup_free(e,0)}columns(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.rowgroup_columns(_,this.__wbg_ptr);var e=h().getInt32(_+0,!0),t=h().getInt32(_+4,!0),r=T(e,t).slice();return n.__wbindgen_free(e,4*t,4),r}finally{n.__wbindgen_add_to_stack_pointer(16)}}}function ne(){const e={wbg:{}};return e.wbg.__wbg_buffer_609cc3eee51ed158=function(e){return s(o(e).buffer)},e.wbg.__wbg_call_672a4d21634d4a24=function(){return d((function(e,t){return s(o(e).call(o(t)))}),arguments)},e.wbg.__wbg_call_7cccdd69e0791ae2=function(){return d((function(e,t,n){return s(o(e).call(o(t),o(n)))}),arguments)},e.wbg.__wbg_call_b8adc8b1d0a0d8eb=function(){return d((function(e,t,n,r,_){return s(o(e).call(o(t),o(n),o(r),o(_)))}),arguments)},e.wbg.__wbg_columndescriptor_new=function(e){return s(W.__wrap(e))},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,t){let r,_;try{r=e,_=t,console.error(l(e,t))}finally{n.__wbindgen_free(r,_,1)}},e.wbg.__wbg_fieldmetadata_new=function(e){return s(S.__wrap(e))},e.wbg.__wbg_filemetadata_new=function(e){return s(L.__wrap(e))},e.wbg.__wbg_length_a446193dc22c12f8=function(e){return o(e).length},e.wbg.__wbg_new_23a2665fac83c611=function(e,t){try{var r={a:e,b:t};const _=new Promise(((e,t)=>{const _=r.a;r.a=0;try{return function(e,t,r,_){n.wasm_bindgen__convert__closures__invoke2_mut__ha20fd0c25f0fd1fd(e,t,s(r),s(_))}(_,r.b,e,t)}finally{r.a=_}}));return s(_)}finally{r.a=r.b=0}},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return s(new Error)},e.wbg.__wbg_new_a12002a7f91c75be=function(e){return s(new Uint8Array(o(e)))},e.wbg.__wbg_newnoargs_105ed471475aaf50=function(e,t){return s(new Function(l(e,t)))},e.wbg.__wbg_newwithbyteoffsetandlength_f1dead44d1fc7212=function(e,t,n){return s(new Uint32Array(o(e),t>>>0,n>>>0))},e.wbg.__wbg_newwithbyteoffsetandlength_f254047f7e80e7ff=function(e,t,n){return s(new Int16Array(o(e),t>>>0,n>>>0))},e.wbg.__wbg_pageencodingdescriptor_new=function(e){return s(X.__wrap(e))},e.wbg.__wbg_parquetchunk_new=function(e){return s(Y.__wrap(e))},e.wbg.__wbg_parquetfile_new=function(e){return s(J.__wrap(e))},e.wbg.__wbg_queueMicrotask_98e746b9f850fe3d=function(e){queueMicrotask(o(e))},e.wbg.__wbg_queueMicrotask_c847cc8372bec908=function(e){return s(o(e).queueMicrotask)},e.wbg.__wbg_resolve_4851785c9c5f573d=function(e){return s(Promise.resolve(o(e)))},e.wbg.__wbg_rowgroup_new=function(e){return s(te.__wrap(e))},e.wbg.__wbg_set_65595bdd868b3009=function(e,t,n){o(e).set(o(t),n>>>0)},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,t){const r=f(o(t).stack,n.__wbindgen_malloc,n.__wbindgen_realloc),_=w;h().setInt32(e+4,_,!0),h().setInt32(e+0,r,!0)},e.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const e="undefined"==typeof global?null:global;return m(e)?0:s(e)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const e="undefined"==typeof globalThis?null:globalThis;return m(e)?0:s(e)},e.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const e="undefined"==typeof self?null:self;return m(e)?0:s(e)},e.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const e="undefined"==typeof window?null:window;return m(e)?0:s(e)},e.wbg.__wbg_then_44b73946d2fb3e7d=function(e,t){return s(o(e).then(o(t)))},e.wbg.__wbg_then_48b406749878a531=function(e,t,n){return s(o(e).then(o(t),o(n)))},e.wbg.__wbg_valueOf_fdbb54fcdfe33477=function(e){return o(e).valueOf()},e.wbg.__wbindgen_array_new=function(){return s([])},e.wbg.__wbindgen_array_push=function(e,t){o(e).push(k(t))},e.wbg.__wbindgen_cb_drop=function(e){const t=k(e).original;return 1==t.cnt--&&(t.a=0,!0)},e.wbg.__wbindgen_closure_wrapper1479=function(e,t,r){const _=function(e,t,r,_){const i={a:e,b:t,cnt:1,dtor:79},o=(...e)=>{i.cnt++;const t=i.a;i.a=0;try{return _(t,i.b,...e)}finally{0===--i.cnt?(n.__wbindgen_export_4.get(i.dtor)(t,i.b),I.unregister(i)):i.a=t}};return o.original=i,I.register(o,i,i),o}(e,t,0,O);return s(_)},e.wbg.__wbindgen_is_function=function(e){return"function"==typeof o(e)},e.wbg.__wbindgen_is_undefined=function(e){return void 0===o(e)},e.wbg.__wbindgen_memory=function(){return s(n.memory)},e.wbg.__wbindgen_number_new=function(e){return s(e)},e.wbg.__wbindgen_object_clone_ref=function(e){return s(o(e))},e.wbg.__wbindgen_object_drop_ref=function(e){k(e)},e.wbg.__wbindgen_string_new=function(e,t){return s(l(e,t))},e.wbg.__wbindgen_throw=function(e,t){throw new Error(l(e,t))},e.wbg.__wbindgen_uint8_array_new=function(e,t){var r=F(e,t).slice();return n.__wbindgen_free(e,1*t,1),s(r)},e}function re(e,t){return n=e.exports,_e.__wbindgen_wasm_module=t,y=null,v=null,M=null,x=null,g=null,n.__wbindgen_start(),n}async function _e(e){if(void 0!==n)return n;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module_or_path:e}=e):console.warn("using deprecated parameters for the initialization function; pass a single object instead"));const t=ne();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:_}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return re(r,_)}const ie=Object.freeze(Object.defineProperty({__proto__:null,ColumnDescriptor:W,FieldMetadata:S,FileMetadata:L,GeometryInfoDescriptor:B,GeometryType:j,MultiScaleInfo:U,PageEncodingDescriptor:X,ParquetChunk:Y,ParquetFile:J,QuantizedGeometry:H,RangeProviderJs:Z,RowGroup:te,default:_e,enableTracing:function(){n.enableTracing()},initSync:function(e){if(void 0!==n)return n;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module:e}=e):console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const t=ne();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),re(new WebAssembly.Instance(e,t),e)},readFile:function(e,t,r,_,i){const o=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),a=w;z(_,L);var d=_.__destroy_into_raw();let c=0;return m(i)||(z(i,B),c=i.__destroy_into_raw()),k(n.readFile(o,a,s(t),s(r),d,c))},readFileFromBinary:function(e,t){let r=0;m(e)||(z(e,B),r=e.__destroy_into_raw());const _=q(t,n.__wbindgen_malloc),i=w;return k(n.readFileFromBinary(r,_,i))},readMetadata:function(e,t,r){const _=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),i=w;return k(n.readMetadata(_,i,s(t),s(r)))},readMetadataFromFile:function(e){const t=q(e,n.__wbindgen_malloc),r=w;return k(n.readMetadataFromFile(t,r))}},Symbol.toStringTag,{value:"Module"})),oe=t=>async function(n,r,_){const i=t(),{data:o}=await e(n,{responseType:"array-buffer",query:i,headers:{range:`bytes=${r}-${_}`},useRequestQueue:!0});return o},ae=t=>async function(n){const r=t(),{data:_}=await e(n,{responseType:"native",method:"head",query:r,useRequestQueue:!0}),i=_.headers.get("Content-Length");if(null==i)throw new Error("Unable to parse content length");return parseInt(i,10)};class se{static async create(e,t){const n=await _(),r=await n.readMetadata(e,oe(t),ae(t));return se.fromFileMetadata(r)}static fromFileMetadata(e){const t=[];for(let n=0;n<e.numFields();n++){const r=e.getFieldByIndex(n);t.push({name:r.name,type:r.type,alias:r.name,index:r.index}),r.free()}return new se(e,t)}constructor(e,t){this._inner=e,this.fields=t}destroy(){this._inner.free()}[Symbol.dispose](){this.destroy()}get size(){return this._inner.numRows()}getFieldIndex(e){return this._inner.getFieldIndex(e)}tryReadGeoMetadata(){const e=this._inner.keyValueMetadata("geo");return null==e?null:JSON.parse(e)}tryReadEsriMetadata(){const e=this._inner.keyValueMetadata("esri");return null==e?null:JSON.parse(e)}}function de(e,t,n){const r=B.new();if(r.geometryType=function(e){switch(e){case"esriGeometryPoint":return j.Point;case"esriGeometryPolygon":return j.Polygon;case"esriGeometryPolyline":return j.Polyline;case"esriGeometryMultipoint":return j.Multipoint;default:throw new Error(`InternalError: Found unexpected GeometryType: ${e}`)}}(e.geometryType),"location"===e.encoding.type)r.latIndex=t.getFieldIndex(e.encoding.latitudeFieldName),r.lngIndex=t.getFieldIndex(e.encoding.longitudeFieldName);else if(r.wkbIndex=t.getFieldIndex(e.encoding.primaryFieldName),e.encoding.multiscale){const n=U.new();for(const r of e.encoding.multiscale.levels){const[e,_]=r.transform.translate,[i,o]=r.transform.scale,a=t.getFieldIndex(r.column);n.push(a,e,_,i,o)}r.setMultiscaleInfo(n)}return r.inWkid=e.spatialReference.wkid,n&&(r.outWkid=n.wkid),r}class ce{static async create(e,t){const n=await _(),r=oe(t.getCustomParameters),i=ae(t.getCustomParameters),o=await n.readMetadata(e,r,i),a=de(t.geometryInfo,o,t.outSpatialReference),s=await n.readFile(e,r,i,o,a);return new ce(s,se.fromFileMetadata(s.metadata()))}static async fromFile(e,t,n){const r=await _(),i=await r.readMetadataFromFile(e),o=t?de(t,i,n):void 0,a=await r.readFileFromBinary(o,e);return new ce(a,se.fromFileMetadata(a.metadata()))}constructor(e,t){this.inner=e,this.metadata=t}destroy(){this.inner.free(),this.metadata.destroy()}[Symbol.dispose](){this.destroy()}}export{se as P,ce as a};
