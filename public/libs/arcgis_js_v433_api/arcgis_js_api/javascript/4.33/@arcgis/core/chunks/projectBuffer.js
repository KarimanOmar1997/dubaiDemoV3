/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{c as n,r as C,e as l,h as e}from"./mathUtils.js";import{e as E,g as t,C as a,b as S,i as r,a3 as u,W as R,$ as s,S as P,z as _,a4 as A,a5 as c,k as M,m as o,j as O}from"./unitUtils.js";import{e as i}from"./geodesicConstants.js";var N;!function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",n[n.WGS84=2]="WGS84",n[n.WEB_MERCATOR=3]="WEB_MERCATOR",n[n.WGS84_ECEF=4]="WGS84_ECEF",n[n.CGCS2000=5]="CGCS2000",n[n.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",n[n.GCSMARS2000=7]="GCSMARS2000",n[n.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",n[n.GCSMOON2000=9]="GCSMOON2000",n[n.LON_LAT=10]="LON_LAT",n[n.PLATE_CARREE=11]="PLATE_CARREE"}(N||(N={}));const L={[N.WGS84]:{[N.CGCS2000]:I,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:I,[N.SPHERICAL_ECEF]:b,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:d,[N.PLATE_CARREE]:U,[N.WGS84]:I,[N.WGS84_ECEF]:z},[N.CGCS2000]:{[N.CGCS2000]:I,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:I,[N.SPHERICAL_ECEF]:b,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:d,[N.PLATE_CARREE]:U,[N.WGS84]:I,[N.WGS84_ECEF]:z},[N.GCSMARS2000]:{[N.CGCS2000]:null,[N.GCSMARS2000]:I,[N.GCSMOON2000]:null,[N.LON_LAT]:I,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:g,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.GCSMOON2000]:{[N.CGCS2000]:null,[N.GCSMARS2000]:null,[N.GCSMOON2000]:I,[N.LON_LAT]:I,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:m,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.WEB_MERCATOR]:{[N.CGCS2000]:T,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:T,[N.SPHERICAL_ECEF]:h,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:I,[N.PLATE_CARREE]:w,[N.WGS84]:T,[N.WGS84_ECEF]:H},[N.WGS84_ECEF]:{[N.CGCS2000]:$,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:$,[N.SPHERICAL_ECEF]:D,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:J,[N.PLATE_CARREE]:function(n,C,l,e){$(n,C,l,e),U(l,e,l,e)},[N.WGS84]:$,[N.WGS84_ECEF]:I},[N.SPHERICAL_ECEF]:{[N.CGCS2000]:y,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:y,[N.SPHERICAL_ECEF]:I,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:x,[N.PLATE_CARREE]:function(n,C,l,e){y(n,C,l,e),U(l,e,l,e)},[N.WGS84]:y,[N.WGS84_ECEF]:v},[N.SPHERICAL_MARS_PCPF]:{[N.CGCS2000]:null,[N.GCSMARS2000]:k,[N.GCSMOON2000]:null,[N.LON_LAT]:k,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:I,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.SPHERICAL_MOON_PCPF]:{[N.CGCS2000]:null,[N.GCSMARS2000]:null,[N.GCSMOON2000]:q,[N.LON_LAT]:q,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:I,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.UNKNOWN]:{[N.CGCS2000]:null,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:null,[N.SPHERICAL_ECEF]:null,[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:I,[N.WEB_MERCATOR]:null,[N.PLATE_CARREE]:null,[N.WGS84]:null,[N.WGS84_ECEF]:null},[N.LON_LAT]:{[N.CGCS2000]:I,[N.GCSMARS2000]:I,[N.GCSMOON2000]:I,[N.LON_LAT]:I,[N.SPHERICAL_ECEF]:b,[N.SPHERICAL_MARS_PCPF]:g,[N.SPHERICAL_MOON_PCPF]:m,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:d,[N.PLATE_CARREE]:U,[N.WGS84]:I,[N.WGS84_ECEF]:z},[N.PLATE_CARREE]:{[N.CGCS2000]:K,[N.GCSMARS2000]:null,[N.GCSMOON2000]:null,[N.LON_LAT]:K,[N.SPHERICAL_ECEF]:function(n,C,l,e){K(n,C,l,e),b(l,e,l,e)},[N.SPHERICAL_MARS_PCPF]:null,[N.SPHERICAL_MOON_PCPF]:null,[N.UNKNOWN]:null,[N.WEB_MERCATOR]:function(n,C,l,e){K(n,C,l,e),d(l,e,l,e)},[N.PLATE_CARREE]:I,[N.WGS84]:K,[N.WGS84_ECEF]:function(n,C,l,e){K(n,C,l,e),z(l,e,l,e)}}};function G(n,C){return F(n,C)?.projector}function F(n,C){if(null==n||null==C)return null;if(Q.source.spatialReference===n&&Q.dest.spatialReference===C)return Q;const l=f(n,Q.source),e=f(C,Q.dest);return l===N.UNKNOWN&&e===N.UNKNOWN?E(n,C)?Q.projector=I:Q.projector=null:Q.projector=L[l][e],Q}function W(n,C){switch(G(n,C)){case I:return"copy3";case b:return"wgs84ToSphericalECEF";case d:return"wgs84ToWebMercator";case U:return"wgs84ToPlateCarree";case z:return"wgs84ToWGS84ECEF";case T:return"webMercatorToWGS84";case h:return"webMercatorToSphericalECEF";case H:return"webMercatorToWGS84ECEF";case w:return"webMercatorToPlateCarree";case $:return"wgs84ECEFToWGS84";case D:return"wgs84ECEFToSphericalECEF";case J:return"wgs84ECEFToWebMercator";case y:return"sphericalECEFToWGS84";case x:return"sphericalECEFToWebMercator";case k:return"sphericalMarsPCPFToMars2000";case q:return"sphericalMoonPCPFToMoon2000";case v:return"sphericalECEFToWGS84ECEF";case g:return"mars2000ToSphericalPCPF";case m:return"moon2000ToSphericalPCPF";default:return null}}function f(n,C){return n?C.spatialReference===n?C.spatialReferenceId:(C.spatialReference=n,"metersPerUnit"in C&&(C.metersPerUnit=t(n,1)),a(n)?C.spatialReferenceId=N.SPHERICAL_ECEF:S(n)?C.spatialReferenceId=N.WGS84:r(n)?C.spatialReferenceId=N.WEB_MERCATOR:u(n)?C.spatialReferenceId=N.PLATE_CARREE:n.wkt===R.wkt?C.spatialReferenceId=N.WGS84_ECEF:n.wkid===s.CGCS2000?C.spatialReferenceId=N.CGCS2000:n.wkt===P.wkt?C.spatialReferenceId=N.SPHERICAL_MARS_PCPF:n.wkt===_.wkt?C.spatialReferenceId=N.SPHERICAL_MOON_PCPF:A(n)?C.spatialReferenceId=N.GCSMARS2000:c(n)?C.spatialReferenceId=N.GCSMOON2000:C.spatialReferenceId=N.UNKNOWN):N.UNKNOWN}function I(n,C,l,e){n!==l&&(l[e++]=n[C++],l[e++]=n[C++],l[e]=n[C])}function T(n,C,l,e){l[e]=X*(n[C]/Z),l[e+1]=X*(Y-2*Math.atan(Math.exp(-n[C+1]/Z))),l[e+2]=n[C+2]}function h(n,C,l,e){const E=n[C]/Z,t=Y-2*Math.atan(Math.exp(-n[C+1]/Z)),a=Z+n[C+2],S=Math.cos(t)*a;l[e]=Math.cos(E)*S,l[e+1]=Math.sin(E)*S,l[e+2]=Math.sin(t)*a}function H(n,C,l,e){T(n,C,l,e),z(l,e,l,e)}function p(C,l,e,E,t){const a=.4999999*Math.PI,S=n(V*C[l+1],-a,a),r=Math.sin(S);e[E++]=V*C[l]*t.radius,e[E++]=t.halfSemiMajorAxis*Math.log((1+r)/(1-r)),e[E]=C[l+2]}function d(n,C,l,e){p(n,C,l,e,O)}function U(n,C,l,e){l[e]=n[C]*nn,l[e+1]=n[C+1]*nn,l[e+2]=n[C+2]}function K(n,C,l,e){l[e]=n[C]*Cn,l[e+1]=n[C+1]*Cn,l[e+2]=n[C+2]}function w(n,C,l,e){T(n,C,l,e),U(l,e,l,e)}function B(n,C,l,e,E){const t=E+n[C+2],a=V*n[C+1],S=V*n[C],r=Math.cos(a)*t;l[e]=Math.cos(S)*r,l[e+1]=Math.sin(S)*r,l[e+2]=Math.sin(a)*t}function m(n,C,l,e){B(n,C,l,e,M.radius)}function g(n,C,l,e){B(n,C,l,e,o.radius)}function b(n,C,l,e){B(n,C,l,e,O.radius)}function j(n,C,l,E,t){const a=n[C],S=n[C+1],r=n[C+2],u=Math.sqrt(a*a+S*S+r*r),R=e(r/(0===u?1:u)),s=Math.atan2(S,a);l[E++]=X*s,l[E++]=X*R,l[E]=u-t}function q(n,C,l,e){j(n,C,l,e,M.radius)}function k(n,C,l,e){j(n,C,l,e,o.radius)}function y(n,C,l,e){j(n,C,l,e,O.radius)}function x(n,C,l,e){y(n,C,l,e),d(l,e,l,e)}function v(n,C,l,e){y(n,C,l,e),z(l,e,l,e)}function z(n,C,l,e){!function(n,C,l,e,E){const t=V*n[C],a=V*n[C+1],S=n[C+2],r=Math.sin(a),u=Math.cos(a),R=E.radius/Math.sqrt(1-E.eccentricitySquared*r*r);l[e++]=(R+S)*u*Math.cos(t),l[e++]=(R+S)*u*Math.sin(t),l[e++]=(R*(1-E.eccentricitySquared)+S)*r}(n,C,l,e,O)}function $(n,C,l,e){const E=i,t=n[C],a=n[C+1],S=n[C+2];let r,u,R,s,P,_,A,c,M,o,N,L,G,F,W,f,I,T,h,H,p;r=Math.abs(S),u=t*t+a*a,R=Math.sqrt(u),s=u+S*S,P=Math.sqrt(s),H=Math.atan2(a,t),_=S*S/s,A=u/s,F=E.a2/P,W=E.a3-E.a4/P,A>.3?(c=r/P*(1+A*(E.a1+F+_*W)/P),h=Math.asin(c),o=c*c,M=Math.sqrt(1-o)):(M=R/P*(1-_*(E.a5-F-A*W)/P),h=Math.acos(M),o=1-M*M,c=Math.sqrt(o)),N=1-O.eccentricitySquared*o,L=O.radius/Math.sqrt(N),G=E.a6*L,F=R-L*M,W=r-G*c,I=M*F+c*W,f=M*W-c*F,T=f/(G/N+I),h+=T,p=I+f*T/2,S<0&&(h=-h),l[e++]=X*H,l[e++]=X*h,l[e]=p}function D(n,C,l,e){$(n,C,l,e),b(l,e,l,e)}function J(n,C,l,e){$(n,C,l,e),d(l,e,l,e)}const Q={source:{spatialReference:null,spatialReferenceId:N.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:N.UNKNOWN,metersPerUnit:1},projector:I},V=l(1),X=C(1),Y=.5*Math.PI,Z=O.radius,nn=Z*Math.PI/180,Cn=180/(Z*Math.PI);function ln(n,C,l,e,E,t,a=Math.floor(n.length/3)){const S=G(C,E);if(null==S)return!1;if(S===I){if(n===e&&l===t)return!0;const C=l+3*a;for(let E=l,a=t;E<C;E++,a++)e[a]=n[E];return!0}const r=l+3*a;for(let C=l,E=t;C<r;C+=3,E+=3)S(n,C,e,E);return!0}const en=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:ln},Symbol.toStringTag,{value:"Module"}));export{N as P,F as a,L as b,I as c,W as d,en as e,G as g,Cn as i,p as l,ln as p,j as s,d as w};
