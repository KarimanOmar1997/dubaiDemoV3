/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{J as t}from"./jsonMap.js";import{B as e,g as o}from"./unitUtils.js";import{geographicToWebMercator as i}from"../geometry/support/webMercatorUtils.js";import{_ as r}from"./tslib.es6.js";import n from"../core/Clonable.js";import s from"../core/JSONSupport.js";import{property as a}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import"./Logger.js";import{subclass as p}from"../core/accessorSupport/decorators/subclass.js";import l from"../core/Accessor.js";let c=class extends l{set horizontalWKID(t){t?e({wkid:+t})?this._set("horizontalWKID",+t):this._set("horizontalWKID",t):this._set("horizontalWKID",null)}set verticalWKID(t){t?this._set("verticalWKID",isFinite(t)&&e({wkid:+t})?+t:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:t,focalLength:e,principalOffsetPoint:o,radialDistortionCoefficients:i,tangentialDistortionCoefficients:r}=this;return t?.length>1&&!Number.isNaN(e)&&o?.length>1&&i?.length>1&&r?.length>1}};r([a({json:{write:!0}})],c.prototype,"affineTransformations",void 0),r([a({json:{write:!0}})],c.prototype,"focalLength",void 0),r([a({json:{write:!0}})],c.prototype,"principalOffsetPoint",void 0),r([a({json:{write:!0}})],c.prototype,"radialDistortionCoefficients",void 0),r([a({json:{write:!0}})],c.prototype,"tangentialDistortionCoefficients",void 0),r([a({json:{write:!0}})],c.prototype,"horizontalWKID",null),r([a({json:{write:!0}})],c.prototype,"verticalWKID",null),r([a({json:{write:!0}})],c.prototype,"x",void 0),r([a({json:{write:!0}})],c.prototype,"y",void 0),r([a({json:{write:!0}})],c.prototype,"z",void 0),r([a({json:{write:!0}})],c.prototype,"type",void 0),c=r([p("esri.layers.orientedImagery.core.CameraOrientation")],c);const u=c;let f=class extends(n.ClonableMixin(s.JSONSupportMixin(u))){constructor(){super(...arguments),this.type=1}toString(){const{type:t,horizontalWKID:e,verticalWKID:o,x:i,y:r,z:n,heading:s,pitch:a,roll:p,affineTransformations:l,focalLength:c,principalOffsetPoint:u,radialDistortionCoefficients:f,tangentialDistortionCoefficients:y}=this,d=[t,e,o,i,r,n,s,a,p];return this.isAdvanced&&(l?.forEach((t=>d.push(t))),d.push(c),u?.forEach((t=>d.push(t))),f?.forEach((t=>d.push(t))),y?.forEach((t=>d.push(t)))),d.map((t=>Number.isNaN(t)?"":t)).join("|")}};r([a({json:{write:!0}})],f.prototype,"type",void 0),r([a({type:[Number],json:{write:!0}})],f.prototype,"affineTransformations",void 0),r([a({type:Number,json:{write:!0}})],f.prototype,"focalLength",void 0),r([a({type:[Number],json:{write:!0}})],f.prototype,"principalOffsetPoint",void 0),r([a({type:[Number],json:{write:!0}})],f.prototype,"radialDistortionCoefficients",void 0),r([a({type:[Number],json:{write:!0}})],f.prototype,"tangentialDistortionCoefficients",void 0),r([a({type:Number,json:{write:!0}})],f.prototype,"heading",void 0),r([a({type:Number,json:{write:!0}})],f.prototype,"pitch",void 0),r([a({type:Number,json:{write:!0}})],f.prototype,"roll",void 0),r([a({type:Number,json:{write:!0}})],f.prototype,"x",void 0),r([a({type:Number,json:{write:!0}})],f.prototype,"y",void 0),r([a({type:Number,json:{write:!0}})],f.prototype,"z",void 0),f=r([p("esri.layers.orientedImagery.core.CameraOrientationHPR")],f);const y=f;let d=class extends(n.ClonableMixin(s.JSONSupportMixin(u))){constructor(){super(...arguments),this.type=4}toString(){const{type:t,latitude:e,longitude:o,ellipsoidRadius:i,squaredEccentricity:r,properties:n}=this,s=`${n}`.split("|");return s.splice(1,1),`${t}|${e}|${o}|${i}|${r}|${s.join("|")}`}};r([a({json:{write:!0}})],d.prototype,"type",void 0),r([a({json:{write:!0},type:Number})],d.prototype,"latitude",void 0),r([a({json:{write:!0},type:Number})],d.prototype,"longitude",void 0),r([a({json:{write:!0},type:Number})],d.prototype,"ellipsoidRadius",void 0),r([a({json:{write:!0},type:Number})],d.prototype,"squaredEccentricity",void 0),r([a({json:{write:!0}})],d.prototype,"properties",void 0),d=r([p("esri.layers.orientedImagery.core.CameraOrientationLTP")],d);const h=d;let m=class extends(n.ClonableMixin(s.JSONSupportMixin(u))){constructor(){super(...arguments),this.type=2}toString(){const{type:t,horizontalWKID:e,verticalWKID:o,x:i,y:r,z:n,omega:s,phi:a,kappa:p,affineTransformations:l,focalLength:c,principalOffsetPoint:u,radialDistortionCoefficients:f,tangentialDistortionCoefficients:y}=this,d=[t,e,o,i,r,n,s,a,p];return this.isAdvanced&&(l?.forEach((t=>d.push(t))),d.push(c),u?.forEach((t=>d.push(t))),f?.forEach((t=>d.push(t))),y?.forEach((t=>d.push(t)))),d.map((t=>isNaN(t)?"":t)).join("|")}};r([a({json:{write:!0}})],m.prototype,"type",void 0),r([a({type:[Number],json:{write:!0}})],m.prototype,"affineTransformations",void 0),r([a({type:Number,json:{write:!0}})],m.prototype,"focalLength",void 0),r([a({type:[Number],json:{write:!0}})],m.prototype,"principalOffsetPoint",void 0),r([a({type:[Number],json:{write:!0}})],m.prototype,"radialDistortionCoefficients",void 0),r([a({type:[Number],json:{write:!0}})],m.prototype,"tangentialDistortionCoefficients",void 0),r([a({type:Number,json:{write:!0}})],m.prototype,"omega",void 0),r([a({type:Number,json:{write:!0}})],m.prototype,"phi",void 0),r([a({type:Number,json:{write:!0}})],m.prototype,"kappa",void 0),r([a({type:Number,json:{write:!0}})],m.prototype,"x",void 0),r([a({type:Number,json:{write:!0}})],m.prototype,"y",void 0),r([a({type:Number,json:{write:!0}})],m.prototype,"z",void 0),m=r([p("esri.layers.orientedImagery.core.CameraOrientationOPK")],m);const v=m;let g=class extends(n.ClonableMixin(s.JSONSupportMixin(u))){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:t,focalLength:e,principalOffsetPoint:o,radialDistortionCoefficients:i,tangentialDistortionCoefficients:r}=this;return t?.length>1||!Number.isNaN(e)||o?.length>1||i?.length>1||r?.length>1}toString(){const{type:t,horizontalWKID:e,verticalWKID:o,x:i,y:r,z:n,yaw:s,pitch:a,roll:p,affineTransformations:l,focalLength:c,principalOffsetPoint:u,radialDistortionCoefficients:f,tangentialDistortionCoefficients:y}=this,d=[t,e,o,i,r,n,s,a,p];return this.isAdvanced&&(l?.forEach((t=>d.push(t))),d.push(c),u?.forEach((t=>d.push(t))),u?.forEach((t=>d.push(t))),f?.forEach((t=>d.push(t))),y?.forEach((t=>d.push(t)))),d.map((t=>Number.isNaN(t)?"":t)).join("|")}};r([a({json:{write:!0}})],g.prototype,"type",void 0),r([a({type:[Number],json:{write:!0}})],g.prototype,"affineTransformations",void 0),r([a({type:Number,json:{write:!0}})],g.prototype,"focalLength",void 0),r([a({type:[Number],json:{write:!0}})],g.prototype,"principalOffsetPoint",void 0),r([a({type:[Number],json:{write:!0}})],g.prototype,"radialDistortionCoefficients",void 0),r([a({type:[Number],json:{write:!0}})],g.prototype,"tangentialDistortionCoefficients",void 0),r([a({type:Number,json:{write:!0}})],g.prototype,"yaw",void 0),r([a({type:Number,json:{write:!0}})],g.prototype,"pitch",void 0),r([a({type:Number,json:{write:!0}})],g.prototype,"roll",void 0),r([a({type:Number,json:{write:!0}})],g.prototype,"x",void 0),r([a({type:Number,json:{write:!0}})],g.prototype,"y",void 0),r([a({type:Number,json:{write:!0}})],g.prototype,"z",void 0),g=r([p("esri.layers.orientedImagery.core.CameraOrientationYPR")],g);const j=g;var w;!function(t){t[t.HPR=1]="HPR",t[t.OPK=2]="OPK",t[t.YPR=3]="YPR",t[t.LTP=4]="LTP"}(w||(w={}));const N=new Map;N.set(`${w.OPK}`,{desc:"Using Omega Phi Kappa",constructor:v}),N.set(`${w.HPR}`,{desc:"Using Heading, Pitch and Roll",constructor:y}),N.set(`${w.YPR}`,{desc:"Using Yaw, Pitch and Roll",constructor:j}),N.set(`${w.LTP}`,{desc:"Using Local Tangent Plane",constructor:h});let b=class extends(n.ClonableMixin(s)){constructor(){super(...arguments),this.url=null}};r([a({type:Number,json:{write:!0}})],b.prototype,"lod",void 0),r([a({type:String,json:{write:!0}})],b.prototype,"rasterFunction",void 0),r([a({type:String,json:{write:!0}})],b.prototype,"url",void 0),b=r([p("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],b);let D=class extends(n.ClonableMixin(s)){constructor(){super(...arguments),this.constantElevation=null}};r([a({type:Number,json:{write:!0}})],D.prototype,"constantElevation",void 0),D=r([p("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],D);const C=t=>null!=t&&"number"==typeof t.constantElevation,P=t=>null!=t&&t.url?.length>0;function I(t,e,o){return e&&(t=`${e}${t}`),o&&(t+=`${o}`),t}function x(t,e,o){return t?C(t)?new D(t):function(t,e,o){let{url:i}=t;return i?(i=I(i,e,o),new b({...t,url:i})):null}(t,e,o):t}const K=new t({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),O=new t({Feet:"feet",Meter:"meter"}),z=new t({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique",Terrestrial360Video:"terrestrial-360-video",TerrestrialFrameVideo:"terrestrial-frame-video",Aerial360Video:"aerial-360-video",AerialFrameVideo:"aerial-frame-video","":null}),E=new Map;E.set(`${w.HPR}`,(function(t){const[e,o,i,r,n,s,a,p,l,c,u,f,y,d,h,m,v,g,j,w,N,b]=t.slice(1);return{horizontalWKID:e,verticalWKID:o,x:i,y:r,z:n,heading:s,pitch:a,roll:p,...S([l,c,u,f,y,d],[m,v],[g,j,w],[N,b],h)}})),E.set(`${w.YPR}`,(function(t){const[e,o,i,r,n,s,a,p,l,c,u,f,y,d,h,m,v,g,j,w,N,b]=t.slice(1);return{horizontalWKID:e,verticalWKID:o,x:i,y:r,z:n,yaw:s,pitch:a,roll:p,...S([l,c,u,f,y,d],[m,v],[g,j,w],[N,b],h)}})),E.set(`${w.OPK}`,(function(t){const[e,o,i,r,n,s,a,p,l,c,u,f,y,d,h,m,v,g,j,w,N,b]=t.slice(1);return{horizontalWKID:e,verticalWKID:o,x:i,y:r,z:n,omega:s,phi:a,kappa:p,...S([l,c,u,f,y,d],[m,v],[g,j,w],[N,b],h)}})),E.set(`${w.LTP}`,(function(t){const[e,o,i,r,n,...s]=t.slice(1),a=E.get(n),p=N.get(n)?.constructor;return a&&p?{latitude:e,longitude:o,ellipsoidRadius:i,squaredEccentricity:r,properties:new p(a([n,"",...s]))}:null}));const W=t=>{const e=t.map((t=>parseFloat(t))).filter((t=>!isNaN(t)));if(e.length===t.length)return e};function S(t,e,o,i,r){const n=W(t),s=W(e),a=W(o),p=W(i);return{affineTransformations:6===n?.length?n:void 0,focalLength:6===n?.length?parseFloat(r):void 0,principalOffsetPoint:2!==s?.length?[0,0]:s,radialDistortionCoefficients:3!==a?.length?[0,0,0]:a,tangentialDistortionCoefficients:2!==p?.length?[0,0]:p}}function $(t){if(!t)return null;const e=`${t}`.split("|");if(0===e.length)return null;const o=N.get(e[0]);if(!o)return null;const i=E.get(e[0]);return i?new(0,o.constructor)(i(e)):null}function T(t){return Array.isArray(t)&&t?.length>5&&!t.some(isNaN)}function L(t){for(t=t.slice(0,8);t.length<8;)t.push(0);return t}function M(t){return t.spatialReference.isGeographic?i(t):t.clone()}function R(t){return t.isGeographic?1:o(t)}export{D as C,P as a,R as b,C as c,$ as d,N as e,I as f,x as g,w as h,T as i,u as j,M as k,z as o,L as p,K as t,O as v};
