/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
import{i as n,a as t}from"../chunks/events.js";import{h as r,m as o}from"../chunks/handleUtils.js";import{r as s}from"../chunks/maybe.js";import{isAborted as i,createAbortError as e,onAbort as c}from"./promiseUtils.js";import{w as u}from"../chunks/watch.js";export{a as autorun}from"../chunks/watch.js";import"./Error.js";import"./lang.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/ObjectPool.js";import"./scheduling.js";import"../chunks/nextTick.js";import"../chunks/PooledArray.js";import"../chunks/SetUtils.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/Lifecycle.js";import"../chunks/tracking.js";import"../chunks/SimpleTrackingTarget.js";function m(n,t,r={}){return f(n,t,r,g)}function l(n,t,r={}){return f(n,t,r,y)}function f(n,t,r={},o){let i=null;const e=r.once?(n,r)=>{o(n)&&(s(i),t(n,r))}:(n,r)=>{o(n)&&t(n,r)};if(i=u(n,e,r.sync,r.equals),r.initial){const t=n();e(t,t)}return i}function p(r,i,e,c={}){let u=null,l=null,a=null;function f(){u&&l&&(l.remove(),c.onListenerRemove?.(u),u=null,l=null)}function p(n){c.once&&c.once&&s(a),e(n)}const j=m(r,((r,o)=>{f(),n(r)&&(u=r,l=t(r,i,p),c.onListenerAdd?.(r))}),{sync:c.sync,initial:!0});return a=o((()=>{j.remove(),f()})),a}function j(n,t){return k(n,null,t)}function h(n,t){return k(n,y,t)}function k(n,t,o){if(i(o))return Promise.reject(e());const u=n();if(t?.(u))return Promise.resolve(u);let m=null;function l(){m=s(m)}return new Promise(((s,i)=>{m=r([c(o,(()=>{l(),i(e())})),f(n,(n=>{l(),s(n)}),{sync:!1,once:!0},t??g)])}))}function g(n){return!0}function y(n){return!!n}function v(n,t,r={}){let o=!1;const s=m(n,((n,r)=>{o||t(n,r)}),r);return{remove(){s.remove()},pause(){o=!0},resume(){o=!1}}}const d={sync:!0},P={initial:!0},w={sync:!0,initial:!0};export{P as initial,p as on,j as once,v as pausable,d as sync,w as syncAndInitial,m as watch,l as when,h as whenOnce};
