// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["./chunks/tslib.es6","./Basemap","./Ground","./core/Accessor","./core/CollectionFlattener","./core/Evented","./core/maybe","./core/accessorSupport/decorators/property","./core/accessorSupport/decorators/cast","./core/has","./core/RandomLCG","./core/accessorSupport/decorators/subclass","./effects/FocusAreas","./layers/support/editableLayers","./support/basemapEnsureType","./support/collectionUtils","./support/groundUtils","./support/LayersMixin","./support/TablesMixin"],(function(e,r,s,t,a,o,i,l,p,n,c,d,y,u,b,h,_,m,g){"use strict";let L=class extends(g.TablesMixin(m.LayersMixin(o.EventedMixin(t)))){constructor(e){super(e),this.allLayers=new a({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.focusAreas=new y,this.allTables=h.createFlattenedTablesCollection(this),this.basemap=null,this.editableLayers=new a({getCollections:()=>[this.allLayers],itemFilterFunction:u.isEditableLayer}),this.ground=new s,this._basemapCache=b.createCache()}destroy(){b.destroyCache(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=i.destroyMaybe(this.basemap),i.destroyMaybe(this.ground),this._set("ground",null)}castBasemap(e){return b.basemapEnsureType(e,this._basemapCache)}castGround(e){return _.ensureType(e)??this._get("ground")}findLayerById(e){return this.allLayers.find((r=>r.id===e))}findTableById(e){return this.allTables.find((r=>r.id===e))}};return e.__decorate([l.property({readOnly:!0,dependsOn:[]})],L.prototype,"allLayers",void 0),e.__decorate([l.property({type:y,nonNullable:!0,json:{write:{overridePolicy:e=>({enabled:e.areas.length>0,ignoreOrigin:!0})}}})],L.prototype,"focusAreas",void 0),e.__decorate([l.property({readOnly:!0})],L.prototype,"allTables",void 0),e.__decorate([l.property({type:r,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],L.prototype,"basemap",void 0),e.__decorate([p.cast("basemap")],L.prototype,"castBasemap",null),e.__decorate([l.property({readOnly:!0})],L.prototype,"editableLayers",void 0),e.__decorate([l.property({type:s,nonNullable:!0})],L.prototype,"ground",void 0),e.__decorate([p.cast("ground")],L.prototype,"castGround",null),e.__decorate([l.property()],L.prototype,"undoRedo",void 0),L=e.__decorate([d.subclass("esri.Map")],L),L}));