// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../ArcadeDate","../../../core/sql/DateOnly","../../../core/sql/TimeOnly","../../../layers/support/Field","../../../chunks/datetime"],(function(e,t,i,r,n,o){"use strict";var l,s;function y(e){return e instanceof Date}function a(e){return e instanceof t.ArcadeDate}function p(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"knowledge-graph-sublayer":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}e.FeatureServiceDatabaseType=void 0,(l=e.FeatureServiceDatabaseType||(e.FeatureServiceDatabaseType={}))[l.Standardised=0]="Standardised",l[l.StandardisedNoInterval=1]="StandardisedNoInterval",l[l.SqlServer=2]="SqlServer",l[l.Oracle=3]="Oracle",l[l.Postgres=4]="Postgres",l[l.PGDB=5]="PGDB",l[l.FILEGDB=6]="FILEGDB",l[l.NotEvaluated=7]="NotEvaluated",e.IdState=void 0,(s=e.IdState||(e.IdState={}))[s.InFeatureSet=0]="InFeatureSet",s[s.NotInFeatureSet=1]="NotInFeatureSet",s[s.Unknown=2]="Unknown",e.callback=function(e,t){return function(){try{e.apply(null,arguments)}catch(e){t.reject(e)}}},e.cloneAttributes=function(e){const t={};for(const i in e)t[i]=e[i];return t},e.cloneField=function(e){return n.fromJSON(e.toJSON())},e.defaultMaxRecords=1e3,e.equalityTest=function(e,t){return e===t||!(!y(e)&&!a(e)||!y(t)&&!a(t))&&e.getTime()===t.getTime()},e.errback=function(e){return function(t){e.reject(t)}},e.esriFieldToJson=function(e){return e.toJSON?e.toJSON():e},e.extractServiceUrl=function(e){return void 0===e?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]},e.isArcadeDate=a,e.isArcadeDateOnly=function(e){return e instanceof i.DateOnly},e.isArcadeTime=function(e){return e instanceof r.TimeOnly},e.isArray=function(e){return Array.isArray(e)},e.isBoolean=function(e){return"boolean"==typeof e},e.isDate=y,e.isLuxonDate=function(e){return e instanceof o.DateTime},e.isNumber=function(e){return"number"==typeof e},e.isString=function(e){return"string"==typeof e||e instanceof String},e.isSupportedLayer=function(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return p(e)}},e.isSupportedSourceLayer=p,e.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"},e.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},e.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},e.sameGeomType=function(e,t){return e===t||"point"===e&&"esriGeometryPoint"===t||"polyline"===e&&"esriGeometryPolyline"===t||"polygon"===e&&"esriGeometryPolygon"===t||"extent"===e&&"esriGeometryEnvelope"===t||"multipoint"===e&&"esriGeometryMultipoint"===t||"point"===t&&"esriGeometryPoint"===e||"polyline"===t&&"esriGeometryPolyline"===e||"polygon"===t&&"esriGeometryPolygon"===e||"extent"===t&&"esriGeometryEnvelope"===e||"multipoint"===t&&"esriGeometryMultipoint"===e},e.stableStringify=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});const i="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&(n=t.cmp,function(e){return function(t,i){const r={key:t,value:e[t]},o={key:i,value:e[i]};return n(r,o)}});var n;const o=[];return function e(t){if(t?.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===t)return;if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);let n,l;if(Array.isArray(t)){for(l="[",n=0;n<t.length;n++)n&&(l+=","),l+=e(t[n])||"null";return l+"]"}if(null===t)return"null";if(o.includes(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const s=o.push(t)-1,y=Object.keys(t).sort(r?.(t));for(l="",n=0;n<y.length;n++){const i=y[n],r=e(t[i]);r&&(l&&(l+=","),l+=JSON.stringify(i)+":"+r)}return o.splice(s,1),"{"+l+"}"}(e)},e.toEsriGeometryType=function(e){switch(e){case"point":default:return"esriGeometryPoint";case"polygon":return"esriGeometryPolygon";case"multipoint":return"esriGeometryMultipoint";case"polyline":return"esriGeometryPolyline"}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));