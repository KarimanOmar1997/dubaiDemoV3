// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../Dictionary","../enum","../executionError","../../chunks/languageUtils","../functions/centroid","../functions/measures","../../core/unitUtils","../../geometry/Geometry","../../geometry/Point","../../geometry/Polyline","../../support/guards"],(function(e,n,r,t,o,i,a,l,u,c,s,d){"use strict";const f=new r.StringEnum(["geodesic","great-elliptic","loxodrome","normal-section","shape-preserving"]),m=new r.StringEnum(["geometric","labelPoint"]),g=new r.StringEnum(["round","bevel","miter","square"]);e.commonRelationsCheck=function(e,n,r){if(o.pcCheck(e,2,2,n,r),e[0]instanceof u&&e[1]instanceof u);else if(e[0]instanceof u&&null===e[1]);else if(e[1]instanceof u&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new t.ArcadeExecutionError(n,t.ExecutionErrorCodes.InvalidParameter,r)},e.distanceToCoordinateFunc=(e,r,i)=>{if(i=o.autoCastFeatureToGeometry(i),o.pcCheck(i,2,2,e,r),null===i[0])return null;let l=i[0];if((d.isArray(i[0])||o.isImmutableArray(i[0]))&&(l=o.autoCastArrayOfPointsToPolyline(i[0],e.spatialReference)),null===l)return null;if(!(l instanceof u))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r);if(!(l instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r);if(!d.isNumber(i[1]))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r);const c=a.distanceToCoordinate(l,i[1]);return c?n.convertObjectToArcadeDictionary(c,o.defaultTimeZone(e),!1,!0):null},e.measureToCoordinateFunc=(e,r,i)=>{if(i=o.autoCastFeatureToGeometry(i),o.pcCheck(i,2,2,e,r),null===i[0])return null;let l=i[0];if((d.isArray(i[0])||o.isImmutableArray(i[0]))&&(l=o.autoCastArrayOfPointsToPolyline(i[0],e.spatialReference)),null===l)return null;if(!(l instanceof u))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r);if(!(l instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r);if(!d.isNumber(i[1]))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r);const c=a.measureToCoordinate(l,i[1]);return c?n.convertObjectToArcadeDictionary(c,o.defaultTimeZone(e),!1,!0):null},e.planarLength3D=function(e){if("polygon"!==e.type&&"polyline"!==e.type&&"extent"!==e.type)return 0;let n=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(n=i.getMetersPerVerticalUnitForSR(e.spatialReference)/l.getMetersPerUnitForSR(e.spatialReference));let r=0;if("polyline"===e.type)for(const t of e.paths)for(let e=1;e<t.length;e++)r+=i.segmentLength3d(t[e],t[e-1],n);else if("polygon"===e.type)for(const t of e.rings){for(let e=1;e<t.length;e++)r+=i.segmentLength3d(t[e],t[e-1],n);(t[0][0]!==t[t.length-1][0]||t[0][1]!==t[t.length-1][1]||void 0!==t[0][2]&&t[0][2]!==t[t.length-1][2])&&(r+=i.segmentLength3d(t[0],t[t.length-1],n))}else"extent"===e.type&&(r+=2*i.segmentLength3d([e.xmin,e.ymin,0],[e.xmax,e.ymin,0],n),r+=2*i.segmentLength3d([e.xmin,e.ymin,0],[e.xmin,e.ymax,0],n),r*=2,r+=4*Math.abs(o.defaultUndefined(e.zmax,0)*n-o.defaultUndefined(e.zmin,0)*n));return r},e.pointToCoordinateFunc=(e,r,i)=>{if(i=o.autoCastFeatureToGeometry(i),o.pcCheck(i,2,2,e,r),null===i[0])return null;let l=i[0];if((d.isArray(i[0])||o.isImmutableArray(i[0]))&&(l=o.autoCastArrayOfPointsToPolyline(i[0],e.spatialReference)),null===l)return null;if(!(l instanceof u))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r);if(!(l instanceof s))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r);const f=i[1];if(null===f)return null;if(!(f instanceof c))throw new t.ArcadeExecutionError(e,t.ExecutionErrorCodes.InvalidParameter,r);const m=a.pointToCoordinate(l,f);return m?n.convertObjectToArcadeDictionary(m,o.defaultTimeZone(e),!1,!0):null},e.toCentroidAlgorithm=function(e){return null==e?"geometric":m.get(o.toString(e))},e.toCurveType=function(e){return null==e?"geodesic":f.get(o.toString(e))},e.toOffsetJoinType=function(e){return null==e?"round":g.lookup(o.toString(e))??"round"},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));