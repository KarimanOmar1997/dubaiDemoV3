// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl","../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl","../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl","../views/3d/webgl-engine/core/shaderModules/Float2BindUniform","../views/3d/webgl-engine/core/shaderModules/FloatPassUniform","../views/3d/webgl-engine/core/shaderModules/glsl","../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform","../views/3d/webgl-engine/shaders/CompositingTechniqueConfiguration","../views/webgl/NoParameters","../views/webgl/ShaderBuilder"],(function(e,r,a,n,i,o,s,t,l,d,g){"use strict";class c extends d.NoParameters{constructor(){super(...arguments),this.opacity=1}}function u(e){const d=new g.ShaderBuilder;d.include(r.ScreenSpacePass),d.fragment.uniforms.add(new t.Texture2DPassUniform("tex",(e=>e.texture))),e.hasOpacityFactor&&d.fragment.uniforms.add(new o.FloatPassUniform("opacity",(e=>e.opacity)));const c=e.blitMode===l.BlitMode.Depth;return c&&(d.fragment.uniforms.add(new i.Float2BindUniform("nearFar",(e=>e.camera.nearFar))),d.fragment.include(a.ReadDepth),d.fragment.include(n.RgbaFloatEncoding)),d.fragment.main.add(s.glsl`
    ${c?s.glsl`
          float normalizedLinearDepth = (-linearDepthFromTexture(tex, uv) - nearFar[0]) / (nearFar[1] - nearFar[0]);
          fragColor = float2rgba(normalizedLinearDepth);`:s.glsl`
          fragColor = texture(tex, uv) ${e.hasOpacityFactor?"* opacity":""};`}`),d}const m=Object.freeze(Object.defineProperty({__proto__:null,CompositingPassParameters:c,build:u},Symbol.toStringTag,{value:"Module"}));e.Compositing=m,e.CompositingPassParameters=c,e.build=u}));