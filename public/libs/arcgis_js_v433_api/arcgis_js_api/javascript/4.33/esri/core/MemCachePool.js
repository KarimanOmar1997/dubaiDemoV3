// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","./Logger","./MemCache"],(function(e,c,t){"use strict";class h extends Array{constructor(e){super(),this.item=e,this.cachedMemory=e.cachedMemory,this.push(e)}}e.MemCachePool=class{constructor(e,h){this._cache=e(h,((e,h,o)=>{switch(h){case t.RemoveMode.ALL:return e.forEach((e=>e.dispose())),0;case t.RemoveMode.SOME:{const t=e.shift();return t?(o-=Math.round(t.cachedMemory),t.dispose()):o>0&&(c.getLogger("esri/core/MemCachePool").warn("Encountered empty MemCachePool with non-zero memory."),o=0),o}}}))}hitrate(){return this._cache.hitRate}destroy(){this._cache.destroy()}clear(){this._cache.clear()}getSize(e){return this._cache.getSize(e)}pop(e){const c=this._cache.peek(e);if(!c)return;const t=c.pop();return c.length>0?t&&(c.cachedMemory=this._cache.getSize(e)-Math.round(t.cachedMemory),this._cache.updateSize(e,c)):this._cache.pop(e),t}put(e,c,o=t.NoPriority){const r=this._cache.peek(e);if(r)r.push(c),r.cachedMemory=this._cache.getSize(e)+Math.round(c.cachedMemory),this._cache.updateSize(e,r);else{const t=new h(c);this._cache.put(e,t,o)}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));