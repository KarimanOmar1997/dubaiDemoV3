// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["../lang","./PropertyOrigin"],(function(i,t){"use strict";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(t.originIdNum),this._values=new Map,this.multipleOriginsSupported=!0}clone(s){const e=new r,n=this._originStores[t.OriginId.DEFAULTS];n&&n.forEach(((r,s)=>{e.set(s,i.clone(r),t.OriginId.DEFAULTS)}));for(let r=t.OriginId.SERVICE;r<t.originIdNum;r++){const t=this._originStores[r];t&&t.forEach(((t,n)=>{s&&s.has(n)||e.set(n,i.clone(t),r)}))}return e}get(i,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(i):void 0}keys(i){const t=null==i?this._values:this._originStores[i];return t?[...t.keys()]:[]}set(i,r,s=t.OriginId.USER){let e=this._originStores[s];if(e||(e=new Map,this._originStores[s]=e),e.set(i,r),!this._values.has(i)||this._propertyOriginMap.get(i)<=s){const t=this._values.get(i);return this._values.set(i,r),this._propertyOriginMap.set(i,s),t!==r}return!1}delete(i,r=t.OriginId.USER){const s=this._originStores[r];if(!s)return;const e=s.get(i);if(s.delete(i),this._values.has(i)&&this._propertyOriginMap.get(i)===r){this._values.delete(i);for(let t=r-1;t>=0;t--){const r=this._originStores[t];if(r&&r.has(i)){this._values.set(i,r.get(i)),this._propertyOriginMap.set(i,t);break}}}return e}has(i,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(i)}revert(i,t){for(;t>0&&!this.has(i,t);)--t;const r=this._originStores[t],s=r?.get(i),e=this._values.get(i);return this._values.set(i,s),this._propertyOriginMap.set(i,t),e!==s}originOf(i){return this._propertyOriginMap.get(i)||t.OriginId.DEFAULTS}isAtOrigin(i,t){return this.has(i,t)&&this.originOf(i)===t}isBelowOrigin(i,t){return!this.has(i)||this.originOf(i)<t}forEach(i){this._values.forEach(i)}}return r}));