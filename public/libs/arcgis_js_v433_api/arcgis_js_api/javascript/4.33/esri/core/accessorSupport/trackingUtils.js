// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../handleUtils","./tracking","./tracking/SimpleTrackingTarget"],(function(n,e,r,t){"use strict";let u=!1;const l=[];function c(n){l.includes(n)||l.unshift(n)}function i(){for(;l.length;)l.pop()()}n.autorun=function(n,l){let a=!1,o=!1;const f=!!l?.sync;let d=new t.SimpleTrackingTarget((()=>{a||o||(o=!0,f?k():queueMicrotask(k))}));function k(){o=!1,d&&!a&&(u?c(k):(d.clear(),u=!0,a=!0,r.runTracked(d,n),a=!1,u=!1,i()))}return a=!0,r.runTracked(d,n),a=!1,e.makeHandle((function(){d&&(d.destroy(),d=null)}))},n.reaction=function(n,l){let a=new t.SimpleTrackingTarget((function e(){if(!a||f)return;if(u)return void c(e);const t=o;a.clear(),u=!0,f=!0,o=r.runTracked(a,n),f=!1,u=!1,l(o,t),i()})),o=null,f=!1;return f=!0,o=r.runTracked(a,n),f=!1,e.makeHandle((function(){a&&(a.destroy(),a=null,o=null)}))},n.reactionDeferred=function(n,u){let l=new t.SimpleTrackingTarget((function(){u(c,i)})),c=null;function i(){return l?(l.clear(),c=r.runTracked(l,n),c):null}return i(),e.makeHandle((function(){l&&(l.destroy(),l=null),c=null}))},Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));