// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","./errorSupport","./sqlDateParsingUtils","./SqlTimestampOffset","./UnknownTimeZone","../../support/guards","../../chunks/datetime"],(function(r,e,t,i,n,s,o){"use strict";function a(r){return!!t.isDateTime(r)||!!t.isTimestampOffset(r)}function l(r){return!!(t.isDateTime(r)||t.isDateOnly(r)||t.isTimestampOffset(r)||t.isTimeOnly(r))}function u(r){if(t.isDateTime(r))return r.toMillis();if(t.isDateOnly(r))return r.toNumber();if(t.isTimestampOffset(r))return r.toMilliseconds();throw new e.SqlError(e.SqlErrorCodes.InvalidDataType)}function f(r,e,t){switch(t){case"<>":return r!==e;case"=":return r===e;case">":return r>e;case"<":return r<e;case">=":return r>=e;case"<=":return r<=e}}function m(r,e,t){i.SqlTimeStampOffset.isTimestampOffset(r)&&(r=r.toDateTime()),i.SqlTimeStampOffset.isTimestampOffset(e)&&(e=e.toDateTime());const n=c(r),s=c(e);switch(t){case"<>":return n!==s;case"=":return n===s;case">":return n>s;case"<":return n<s;case">=":return n>=s;case"<=":return n<=s}}function c(r){return 321408e5*r.year+26784e5*r.month+864e5*r.day+36e5*r.hour+6e4*r.minute+1e3*r.second+r.millisecond}r.dateValueInMilliseconds=u,r.isDateOrTimeValue=l,r.isDateTimeComparableValue=a,r.sqlCompare=function(r,c,S){if(null==r||null==c)return null;if(s.isNumber(r)){if(s.isNumber(c))return f(r,c,S);if(s.isString(c))return function(r,e,t){const i=parseFloat(e);if(!isNaN(i))return f(r,i,t);const n=r.toString();switch(t){case"<>":return n!==e;case"=":return n===e;case">":return n>e;case"<":return n<e;case">=":return n>=e;case"<=":return n<=e}}(r,c,S);if(l(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(t.isDateOnly(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator)}else if(s.isString(r)){if(s.isNumber(c))return function(r,e,t){const i=parseFloat(r);if(!isNaN(i))return f(i,e,t);const n=e.toString();switch(t){case"<>":return r!==n;case"=":return r===n;case">":return r>n;case"<":return r<n;case">=":return r>=n;case"<=":return r<=n}}(r,c,S);if(s.isString(c))return function(r,e,t){switch(t){case"<>":return r!==e;case"=":return r===e;case">":return r>e;case"<":return r<e;case">=":return r>=e;case"<=":return r<=e}}(r,c,S);if(t.isDateTime(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(t.isDateOnly(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(t.isTimeOnly(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(t.isTimestampOffset(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator)}else if(t.isDateTime(r)){if(a(c)){if(n.isUnknownTimeZone(r.zone)){if(o.DateTime.isDateTime(c)&&!n.isUnknownTimeZone(c.zone))return m(r,c,S);if(i.SqlTimeStampOffset.isTimestampOffset(c))return m(r,c,S)}else if(o.DateTime.isDateTime(c)&&n.isUnknownTimeZone(c.zone)){if(!n.isUnknownTimeZone(r.zone))return m(r,c,S);if(i.SqlTimeStampOffset.isTimestampOffset(r))return m(r,c,S)}return f(u(r),u(c),S)}if(s.isString(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(t.isDateOnly(c))return function(r,e,t){const i=e.toDateTimeLuxon(r.zone);return f((r=r.startOf("day")).toMillis(),i.toMillis(),t)}(r,c,S);if(t.isTimeOnly(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(s.isNumber(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator)}else if(t.isDateOnly(r)){if(t.isTimestampOffset(c))return function(r,e,t){const i=r.toDateTimeLuxon(e.toDateTime().zone);return e=e.startOfDay(),f(i.toMillis(),e.toMilliseconds(),t)}(r,c,S);if(t.isDateTime(c))return function(r,e,t){const i=r.toDateTimeLuxon(e.zone);return e=e.startOf("day"),f(i.toMillis(),e.toMillis(),t)}(r,c,S);if(s.isString(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(t.isDateOnly(c))return f(r.toNumber(),c.toNumber(),S);if(t.isTimeOnly(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(s.isNumber(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator)}else if(t.isTimeOnly(r)){if(t.isTimeOnly(c))return f(r.toNumber(),c.toNumber(),S);if(s.isString(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(s.isNumber(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(t.isDateOnly(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(a(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator)}else if(t.isTimestampOffset(r)){if(a(c))return o.DateTime.isDateTime(c)&&n.isUnknownTimeZone(c.zone)?m(r,c,S):f(u(r),u(c),S);if(s.isString(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(t.isDateOnly(c))return function(r,e,t){const i=e.toDateTimeLuxon(r.toDateTime().zone);return f((r=r.startOfDay()).toMilliseconds(),i.toMillis(),t)}(r,c,S);if(t.isTimeOnly(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator);if(s.isNumber(c))throw new e.SqlError(e.SqlErrorCodes.InvalidOperator)}switch(S){case"<>":return r!==c;case"=":return r===c;case">":return r>c;case"<":return r<c;case">=":return r>=c;case"<=":return r<=c}},Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})}));