// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../core/mathUtils","../../core/libs/gl-matrix-2/factories/vec3f64","./projectors","../support/Ellipsoid"],(function(e,t,r,o,n){"use strict";function c(e,t,r,o){const n=o+t;if(n<o/2||r>n)return Number.MAX_VALUE;const c=Math.abs(s*e)+Math.asin(r/n);return c>=Math.PI/2?Number.MAX_VALUE:r/Math.cos(c)}const i=r.create(),s=t.deg2rad(1);e.projectBoundingSphere=function(e,t,r,s){if(null==t||null==s)return!1;const a=o.getProjectorClassification(t,s);if(null==a?.projector)return!1;if(a.projector===o.copy3)return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],!0;const{source:l,dest:u,projector:p}=a;if(u.spatialReferenceId===o.ProjectionID.WEB_MERCATOR){const t=o.projectionTable[l.spatialReferenceId][o.ProjectionID.WGS84];return null!=t&&(t(e,0,i,0),o.wgs84ToWebMercator(i,0,r,0),r[3]=c(i[1],e[2],e[3],n.earth.radius),!0)}if(l.spatialReferenceId!==o.ProjectionID.WGS84&&l.spatialReferenceId!==o.ProjectionID.CGCS2000||u.spatialReferenceId!==o.ProjectionID.PLATE_CARREE){p(e,0,r,0);const t=l.metersPerUnit??1,o=u.metersPerUnit??1;r[3]=e[3]*t/o}else{const t=o.projectionTable[l.spatialReferenceId][o.ProjectionID.SPHERICAL_ECEF],i=o.projectionTable[o.ProjectionID.SPHERICAL_ECEF][o.ProjectionID.PLATE_CARREE];let s=e[3];null!=t&&null!=i&&(s=c(e[1],e[2],e[3],n.earth.radius)),p(e,0,r,0),r[3]=s}return!0},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));