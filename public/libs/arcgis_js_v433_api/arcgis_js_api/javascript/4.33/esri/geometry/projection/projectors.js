// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../core/mathUtils","../../core/unitUtils","../ellipsoidUtils","../support/Ellipsoid","../support/geodesicConstants","../support/spatialReferenceUtils","../support/SupportedGCSWkids"],(function(o,e,n,t,r,P,c,i){"use strict";var C;o.ProjectionID=void 0,(C=o.ProjectionID||(o.ProjectionID={}))[C.UNKNOWN=0]="UNKNOWN",C[C.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",C[C.WGS84=2]="WGS84",C[C.WEB_MERCATOR=3]="WEB_MERCATOR",C[C.WGS84_ECEF=4]="WGS84_ECEF",C[C.CGCS2000=5]="CGCS2000",C[C.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",C[C.GCSMARS2000=7]="GCSMARS2000",C[C.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",C[C.GCSMOON2000=9]="GCSMOON2000",C[C.LON_LAT=10]="LON_LAT",C[C.PLATE_CARREE=11]="PLATE_CARREE";const I={[o.ProjectionID.WGS84]:{[o.ProjectionID.CGCS2000]:S,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:S,[o.ProjectionID.SPHERICAL_ECEF]:G,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:s,[o.ProjectionID.PLATE_CARREE]:A,[o.ProjectionID.WGS84]:S,[o.ProjectionID.WGS84_ECEF]:d},[o.ProjectionID.CGCS2000]:{[o.ProjectionID.CGCS2000]:S,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:S,[o.ProjectionID.SPHERICAL_ECEF]:G,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:s,[o.ProjectionID.PLATE_CARREE]:A,[o.ProjectionID.WGS84]:S,[o.ProjectionID.WGS84_ECEF]:d},[o.ProjectionID.GCSMARS2000]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:S,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:S,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:L,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.GCSMOON2000]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:S,[o.ProjectionID.LON_LAT]:S,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:N,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.WEB_MERCATOR]:{[o.ProjectionID.CGCS2000]:j,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:j,[o.ProjectionID.SPHERICAL_ECEF]:D,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:S,[o.ProjectionID.PLATE_CARREE]:M,[o.ProjectionID.WGS84]:j,[o.ProjectionID.WGS84_ECEF]:u},[o.ProjectionID.WGS84_ECEF]:{[o.ProjectionID.CGCS2000]:H,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:H,[o.ProjectionID.SPHERICAL_ECEF]:U,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:K,[o.ProjectionID.PLATE_CARREE]:function(o,e,n,t){H(o,e,n,t),A(n,t,n,t)},[o.ProjectionID.WGS84]:H,[o.ProjectionID.WGS84_ECEF]:S},[o.ProjectionID.SPHERICAL_ECEF]:{[o.ProjectionID.CGCS2000]:p,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:p,[o.ProjectionID.SPHERICAL_ECEF]:S,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:f,[o.ProjectionID.PLATE_CARREE]:function(o,e,n,t){p(o,e,n,t),A(n,t,n,t)},[o.ProjectionID.WGS84]:p,[o.ProjectionID.WGS84_ECEF]:h},[o.ProjectionID.SPHERICAL_MARS_PCPF]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:T,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:T,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:S,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.SPHERICAL_MOON_PCPF]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:W,[o.ProjectionID.LON_LAT]:W,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:S,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.UNKNOWN]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:null,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:S,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.LON_LAT]:{[o.ProjectionID.CGCS2000]:S,[o.ProjectionID.GCSMARS2000]:S,[o.ProjectionID.GCSMOON2000]:S,[o.ProjectionID.LON_LAT]:S,[o.ProjectionID.SPHERICAL_ECEF]:G,[o.ProjectionID.SPHERICAL_MARS_PCPF]:L,[o.ProjectionID.SPHERICAL_MOON_PCPF]:N,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:s,[o.ProjectionID.PLATE_CARREE]:A,[o.ProjectionID.WGS84]:S,[o.ProjectionID.WGS84_ECEF]:d},[o.ProjectionID.PLATE_CARREE]:{[o.ProjectionID.CGCS2000]:_,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:_,[o.ProjectionID.SPHERICAL_ECEF]:function(o,e,n,t){_(o,e,n,t),G(n,t,n,t)},[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:function(o,e,n,t){_(o,e,n,t),s(n,t,n,t)},[o.ProjectionID.PLATE_CARREE]:S,[o.ProjectionID.WGS84]:_,[o.ProjectionID.WGS84_ECEF]:function(o,e,n,t){_(o,e,n,t),d(n,t,n,t)}}};function l(o,e){return E(o,e)?.projector}function E(e,n){if(null==e||null==n)return null;if(w.source.spatialReference===e&&w.dest.spatialReference===n)return w;const t=a(e,w.source),r=a(n,w.dest);return t===o.ProjectionID.UNKNOWN&&r===o.ProjectionID.UNKNOWN?c.equals(e,n)?w.projector=S:w.projector=null:w.projector=I[t][r],w}function a(e,r){return e?r.spatialReference===e?r.spatialReferenceId:(r.spatialReference=e,"metersPerUnit"in r&&(r.metersPerUnit=n.getMetersPerUnitForSR(e,1)),t.isSphericalECEF(e)?r.spatialReferenceId=o.ProjectionID.SPHERICAL_ECEF:c.isWGS84(e)?r.spatialReferenceId=o.ProjectionID.WGS84:c.isWebMercator(e)?r.spatialReferenceId=o.ProjectionID.WEB_MERCATOR:c.isPlateCarree(e)?r.spatialReferenceId=o.ProjectionID.PLATE_CARREE:e.wkt===t.WGS84ECEFSpatialReferenceLike.wkt?r.spatialReferenceId=o.ProjectionID.WGS84_ECEF:e.wkid===i.SupportedGCSWkids.CGCS2000?r.spatialReferenceId=o.ProjectionID.CGCS2000:e.wkt===t.SphericalPCPFMarsLike.wkt?r.spatialReferenceId=o.ProjectionID.SPHERICAL_MARS_PCPF:e.wkt===t.SphericalPCPFMoonLike.wkt?r.spatialReferenceId=o.ProjectionID.SPHERICAL_MOON_PCPF:c.isMars(e)?r.spatialReferenceId=o.ProjectionID.GCSMARS2000:c.isMoon(e)?r.spatialReferenceId=o.ProjectionID.GCSMOON2000:r.spatialReferenceId=o.ProjectionID.UNKNOWN):o.ProjectionID.UNKNOWN}function S(o,e,n,t){o!==n&&(n[t++]=o[e++],n[t++]=o[e++],n[t]=o[e])}function j(o,e,n,t){n[t]=m*(o[e]/b),n[t+1]=m*(B-2*Math.atan(Math.exp(-o[e+1]/b))),n[t+2]=o[e+2]}function D(o,e,n,t){const r=o[e]/b,P=B-2*Math.atan(Math.exp(-o[e+1]/b)),c=b+o[e+2],i=Math.cos(P)*c;n[t]=Math.cos(r)*i,n[t+1]=Math.sin(r)*i,n[t+2]=Math.sin(P)*c}function u(o,e,n,t){j(o,e,n,t),d(n,t,n,t)}function R(o,n,t,r,P){const c=.4999999*Math.PI,i=e.clamp(g*o[n+1],-c,c),C=Math.sin(i);t[r++]=g*o[n]*P.radius,t[r++]=P.halfSemiMajorAxis*Math.log((1+C)/(1-C)),t[r]=o[n+2]}function s(o,e,n,t){R(o,e,n,t,r.earth)}function A(o,e,n,t){n[t]=o[e]*k,n[t+1]=o[e+1]*k,n[t+2]=o[e+2]}function _(o,e,n,t){n[t]=o[e]*q,n[t+1]=o[e+1]*q,n[t+2]=o[e+2]}function M(o,e,n,t){j(o,e,n,t),A(n,t,n,t)}function O(o,e,n,t,r){const P=r+o[e+2],c=g*o[e+1],i=g*o[e],C=Math.cos(c)*P;n[t]=Math.cos(i)*C,n[t+1]=Math.sin(i)*C,n[t+2]=Math.sin(c)*P}function N(o,e,n,t){O(o,e,n,t,r.moon.radius)}function L(o,e,n,t){O(o,e,n,t,r.mars.radius)}function G(o,e,n,t){O(o,e,n,t,r.earth.radius)}function F(o,n,t,r,P){const c=o[n],i=o[n+1],C=o[n+2],I=Math.sqrt(c*c+i*i+C*C),l=e.asinClamped(C/(0===I?1:I)),E=Math.atan2(i,c);t[r++]=m*E,t[r++]=m*l,t[r]=I-P}function W(o,e,n,t){F(o,e,n,t,r.moon.radius)}function T(o,e,n,t){F(o,e,n,t,r.mars.radius)}function p(o,e,n,t){F(o,e,n,t,r.earth.radius)}function f(o,e,n,t){p(o,e,n,t),s(n,t,n,t)}function h(o,e,n,t){p(o,e,n,t),d(n,t,n,t)}function d(o,e,n,t){!function(o,e,n,t,r){const P=g*o[e],c=g*o[e+1],i=o[e+2],C=Math.sin(c),I=Math.cos(c),l=r.radius/Math.sqrt(1-r.eccentricitySquared*C*C);n[t++]=(l+i)*I*Math.cos(P),n[t++]=(l+i)*I*Math.sin(P),n[t++]=(l*(1-r.eccentricitySquared)+i)*C}(o,e,n,t,r.earth)}function H(o,e,n,t){const c=P.earthEllipsoidConstants,i=o[e],C=o[e+1],I=o[e+2];let l,E,a,S,j,D,u,R,s,A,_,M,O,N,L,G,F,W,T,p,f;l=Math.abs(I),E=i*i+C*C,a=Math.sqrt(E),S=E+I*I,j=Math.sqrt(S),p=Math.atan2(C,i),D=I*I/S,u=E/S,N=c.a2/j,L=c.a3-c.a4/j,u>.3?(R=l/j*(1+u*(c.a1+N+D*L)/j),T=Math.asin(R),A=R*R,s=Math.sqrt(1-A)):(s=a/j*(1-D*(c.a5-N-u*L)/j),T=Math.acos(s),A=1-s*s,R=Math.sqrt(A)),_=1-r.earth.eccentricitySquared*A,M=r.earth.radius/Math.sqrt(_),O=c.a6*M,N=a-M*s,L=l-O*R,F=s*N+R*L,G=s*L-R*N,W=G/(O/_+F),T+=W,f=F+G*W/2,I<0&&(T=-T),n[t++]=m*p,n[t++]=m*T,n[t]=f}function U(o,e,n,t){H(o,e,n,t),G(n,t,n,t)}function K(o,e,n,t){H(o,e,n,t),s(n,t,n,t)}const w={source:{spatialReference:null,spatialReferenceId:o.ProjectionID.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:o.ProjectionID.UNKNOWN,metersPerUnit:1},projector:S},g=e.deg2rad(1),m=e.rad2deg(1),B=.5*Math.PI,b=r.earth.radius,k=b*Math.PI/180,q=180/(b*Math.PI);o.copy3=S,o.getProjector=l,o.getProjectorClassification=E,o.getProjectorName=function(o,e){switch(l(o,e)){case S:return"copy3";case G:return"wgs84ToSphericalECEF";case s:return"wgs84ToWebMercator";case A:return"wgs84ToPlateCarree";case d:return"wgs84ToWGS84ECEF";case j:return"webMercatorToWGS84";case D:return"webMercatorToSphericalECEF";case u:return"webMercatorToWGS84ECEF";case M:return"webMercatorToPlateCarree";case H:return"wgs84ECEFToWGS84";case U:return"wgs84ECEFToSphericalECEF";case K:return"wgs84ECEFToWebMercator";case p:return"sphericalECEFToWGS84";case f:return"sphericalECEFToWebMercator";case T:return"sphericalMarsPCPFToMars2000";case W:return"sphericalMoonPCPFToMoon2000";case h:return"sphericalECEFToWGS84ECEF";case L:return"mars2000ToSphericalPCPF";case N:return"moon2000ToSphericalPCPF";default:return null}},o.invPlateCarreeScale=q,o.lonLatToWebMercatorComparable=R,o.projectionTable=I,o.sphericalPCPFtoLonLatElevation=F,o.wgs84ToWebMercator=s,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})}));