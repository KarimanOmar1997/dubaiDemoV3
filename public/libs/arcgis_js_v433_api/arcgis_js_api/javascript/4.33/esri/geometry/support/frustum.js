// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../core/ObjectStack","../../core/libs/gl-matrix-2/math/mat4","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64","./clipRay","./plane","./vectorStacks"],(function(e,n,t,T,o,_,i,r,O,R){"use strict";function P(){return[o.create(),o.create(),o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]}function I(n,t){O.fromPoints(t[e.PointIndex.FAR_BOTTOM_LEFT],t[e.PointIndex.NEAR_BOTTOM_LEFT],t[e.PointIndex.NEAR_TOP_LEFT],n[e.PlaneIndex.LEFT]),O.fromPoints(t[e.PointIndex.NEAR_BOTTOM_RIGHT],t[e.PointIndex.FAR_BOTTOM_RIGHT],t[e.PointIndex.FAR_TOP_RIGHT],n[e.PlaneIndex.RIGHT]),O.fromPoints(t[e.PointIndex.FAR_BOTTOM_LEFT],t[e.PointIndex.FAR_BOTTOM_RIGHT],t[e.PointIndex.NEAR_BOTTOM_RIGHT],n[e.PlaneIndex.BOTTOM]),O.fromPoints(t[e.PointIndex.NEAR_TOP_LEFT],t[e.PointIndex.NEAR_TOP_RIGHT],t[e.PointIndex.FAR_TOP_RIGHT],n[e.PlaneIndex.TOP]),O.fromPoints(t[e.PointIndex.NEAR_BOTTOM_LEFT],t[e.PointIndex.NEAR_BOTTOM_RIGHT],t[e.PointIndex.NEAR_TOP_RIGHT],n[e.PlaneIndex.NEAR]),O.fromPoints(t[e.PointIndex.FAR_BOTTOM_RIGHT],t[e.PointIndex.FAR_BOTTOM_LEFT],t[e.PointIndex.FAR_TOP_LEFT],n[e.PlaneIndex.FAR])}function c(e,n){for(let t=0;t<E;t++)if(!O.clip(e[t],n))return!1;return!0}var a,A;e.PlaneIndex=void 0,(a=e.PlaneIndex||(e.PlaneIndex={}))[a.LEFT=0]="LEFT",a[a.RIGHT=1]="RIGHT",a[a.BOTTOM=2]="BOTTOM",a[a.TOP=3]="TOP",a[a.NEAR=4]="NEAR",a[a.FAR=5]="FAR",e.PointIndex=void 0,(A=e.PointIndex||(e.PointIndex={}))[A.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",A[A.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",A[A.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",A[A.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",A[A.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",A[A.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",A[A.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",A[A.FAR_TOP_LEFT=7]="FAR_TOP_LEFT";const d={bottom:[e.PointIndex.FAR_BOTTOM_RIGHT,e.PointIndex.NEAR_BOTTOM_RIGHT,e.PointIndex.NEAR_BOTTOM_LEFT,e.PointIndex.FAR_BOTTOM_LEFT],near:[e.PointIndex.NEAR_BOTTOM_LEFT,e.PointIndex.NEAR_BOTTOM_RIGHT,e.PointIndex.NEAR_TOP_RIGHT,e.PointIndex.NEAR_TOP_LEFT],far:[e.PointIndex.FAR_BOTTOM_RIGHT,e.PointIndex.FAR_BOTTOM_LEFT,e.PointIndex.FAR_TOP_LEFT,e.PointIndex.FAR_TOP_RIGHT],right:[e.PointIndex.NEAR_BOTTOM_RIGHT,e.PointIndex.FAR_BOTTOM_RIGHT,e.PointIndex.FAR_TOP_RIGHT,e.PointIndex.NEAR_TOP_RIGHT],left:[e.PointIndex.FAR_BOTTOM_LEFT,e.PointIndex.NEAR_BOTTOM_LEFT,e.PointIndex.NEAR_TOP_LEFT,e.PointIndex.FAR_TOP_LEFT],top:[e.PointIndex.FAR_TOP_LEFT,e.PointIndex.NEAR_TOP_LEFT,e.PointIndex.NEAR_TOP_RIGHT,e.PointIndex.FAR_TOP_RIGHT]},E=6,F=[i.fromValues(-1,-1,-1,1),i.fromValues(1,-1,-1,1),i.fromValues(1,1,-1,1),i.fromValues(-1,1,-1,1),i.fromValues(-1,-1,1,1),i.fromValues(1,-1,1,1),i.fromValues(1,1,1,1),i.fromValues(-1,1,1,1)],x=new n.ObjectStack(r.create),s=P();e.computePlanes=I,e.copy=function(e,n){for(let t=0;t<E;t++)O.copy(e[t],n[t]);return e},e.create=function(e){return e?[O.create(e[0]),O.create(e[1]),O.create(e[2]),O.create(e[3]),O.create(e[4]),O.create(e[5])]:[O.create(),O.create(),O.create(),O.create(),O.create(),O.create()]},e.createPoints=P,e.fromMatrix=function(e,n,o,i=s){const r=t.multiply(R.sm4d.get(),n,e);t.invert(r,r);for(let e=0;e<8;++e){const n=_.transformMat4(R.sv4d.get(),F[e],r);T.set(i[e],n[0]/n[3],n[1]/n[3],n[2]/n[3])}I(o,i)},e.intersectClipRay=function(e,n){for(let t=0;t<E;t++){const T=e[t];if(!O.clipInfinite(T,n))return!1}return!0},e.intersectsLineSegment=function(e,n,t){return c(e,r.fromLineSegmentAndDirection(n,t,x.get()))},e.intersectsPoint=function(e,n){for(let t=0;t<E;t++)if(O.signedDistance(e[t],n)>0)return!1;return!0},e.intersectsRay=function(e,n){return c(e,r.fromRay(n,x.get()))},e.intersectsSphere=function(e,n){for(let t=0;t<E;t++){const T=e[t];if(T[0]*n[0]+T[1]*n[1]+T[2]*n[2]+T[3]>=n[3])return!1}return!0},e.numPlanes=E,e.numPoints=8,e.planePointIndices=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));