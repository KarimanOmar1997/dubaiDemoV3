// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../core/ObjectStack","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","./lineSegment","./vectorStacks"],(function(t,e,c,r,n,s){"use strict";function o(t){return t?{p0:r.clone(t.p0),p1:r.clone(t.p1),p2:r.clone(t.p2)}:{p0:r.create(),p1:r.create(),p2:r.create()}}function a(t,e,r,n=o()){return c.copy(n.p0,t),c.copy(n.p1,e),c.copy(n.p2,r),n}const u=new e.ObjectStack(n.create),i=new e.ObjectStack((()=>o())),p=r.create(),d=r.create();t.areaPoints2d=function(t,e,c){const r=e[0]-t[0],n=e[1]-t[1],s=c[0]-t[0],o=c[1]-t[1];return.5*Math.abs(r*o-n*s)},t.areaPoints3d=function(t,e,r){return c.subtract(p,e,t),c.subtract(d,r,t),.5*c.length(c.cross(p,p,d))},t.copy=function(t,e=o()){return a(t.p0,t.p1,t.p2,e)},t.create=o,t.distance2=function(t,e){const r=t.p0,o=t.p1,a=t.p2,i=c.subtract(s.sv3d.get(),o,r),p=c.subtract(s.sv3d.get(),a,o),d=c.subtract(s.sv3d.get(),r,a),f=c.subtract(s.sv3d.get(),e,r),g=c.subtract(s.sv3d.get(),e,o),b=c.subtract(s.sv3d.get(),e,a),l=c.cross(i,i,d),v=c.dot(c.cross(s.sv3d.get(),i,l),f),m=c.dot(c.cross(s.sv3d.get(),p,l),g),y=c.dot(c.cross(s.sv3d.get(),d,l),b);if(v>0&&m>0&&y>0){const t=c.dot(l,f);return t*t/c.dot(l,l)}const S=n.distance2(n.fromValues(r,i,u.get()),e),k=n.distance2(n.fromValues(o,p,u.get()),e),h=n.distance2(n.fromValues(a,d,u.get()),e);return Math.min(S,k,h)},t.fromValues=a,t.intersectRay=function(t,e,r){const{direction:n,origin:s}=e,{p0:o,p1:a,p2:u}=t,i=a[0]-o[0],p=a[1]-o[1],d=a[2]-o[2],f=u[0]-o[0],g=u[1]-o[1],b=u[2]-o[2],l=n[1]*b-g*n[2],v=n[2]*f-b*n[0],m=n[0]*g-f*n[1],y=i*l+p*v+d*m;if(y>-1e-5&&y<1e-5)return!1;const S=1/y,k=s[0]-o[0],h=s[1]-o[1],j=s[2]-o[2],O=S*(k*l+h*v+j*m);if(O<0||O>1)return!1;const V=h*d-p*j,w=j*i-d*k,M=k*p-i*h,P=S*(n[0]*V+n[1]*w+n[2]*M);if(P<0||O+P>1)return!1;if(r){const t=S*(f*V+g*w+b*M);c.scale(r,n,t),c.add(r,s,r)}return!0},t.wrap=function(t,e,c){const r=i.get();return r.p0=t,r.p1=e,r.p2=c,r},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));