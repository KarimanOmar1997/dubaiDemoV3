// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../core/handleUtils","../core/has"],(function(e,n,t){"use strict";let a,o;const l=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,r=globalThis.document?.documentElement;function c(){const e=r?.getAttribute("lang"),n=globalThis.navigator?.language;return l??e??n??"en"}function i(){return void 0===o&&(o=c()),o}const s=/^(?<language>[a-z]{2,3})(?:-[a-z]{3})?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function u(e=i()){return s.exec(e)?.groups}const g=[],f=new Map,h=[];function d(){const e=a??c();o!==e&&([...h].forEach((n=>n(e))),o=e,[...g].forEach((n=>n(e))))}globalThis.addEventListener?.("languagechange",d),r&&new MutationObserver((()=>{d()})).observe(r,{attributeFilter:["lang"]}),e.assertNoLocaleChangeListeners=function(){const e=Array.from(f.values())[0];f.clear();const n=g.length;if(0!==n)throw new Error(`Unexpected ${n} locale change listeners still active.${e?` For example:\n${e}`:" Set enableListenerTracing in esri/intl/locale.ts to include a stack trace."}`)},e.beforeLocaleChange=function(e){return h.push(e),n.makeHandle((()=>h.splice(h.indexOf(e),1)))},e.getDefaultLocale=c,e.getLocale=i,e.getLocaleParts=u,e.onLocaleChange=function(e){return g.push(e),n.makeHandle((()=>{g.splice(g.indexOf(e),1)}))},e.prefersRTL=function(e=i()){const n=u(e)?.language;return"he"===n||"ar"===n},e.setLocale=function(e){a=e||void 0,d()},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));