// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/jsonMap","../../../core/unitUtils","../../../geometry/support/webMercatorUtils","./cameraOrientationRegistry","./ElevationSourceDefinitions","../enums/CameraOrientationType"],(function(e,t,n,r,i,o,a){"use strict";function s(e,t,n){return t&&(e=`${t}${e}`),n&&(e+=`${n}`),e}function l(e,t,n){let{url:r}=e;return r?(r=s(r,t,n),new o.ElevationSource({...e,url:r})):null}const c=new t.JSONMap({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),u=new t.JSONMap({Feet:"feet",Meter:"meter"}),p=new t.JSONMap({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique",Terrestrial360Video:"terrestrial-360-video",TerrestrialFrameVideo:"terrestrial-frame-video",Aerial360Video:"aerial-360-video",AerialFrameVideo:"aerial-frame-video","":null}),f=new Map;f.set(`${a.CameraOrientationType.HPR}`,(function(e){const[t,n,r,i,o,a,s,l,c,u,p,f,g,h,y,m,v,M,O,T,S,w]=e.slice(1);return{horizontalWKID:t,verticalWKID:n,x:r,y:i,z:o,heading:a,pitch:s,roll:l,...d([c,u,p,f,g,h],[m,v],[M,O,T],[S,w],y)}})),f.set(`${a.CameraOrientationType.YPR}`,(function(e){const[t,n,r,i,o,a,s,l,c,u,p,f,g,h,y,m,v,M,O,T,S,w]=e.slice(1);return{horizontalWKID:t,verticalWKID:n,x:r,y:i,z:o,yaw:a,pitch:s,roll:l,...d([c,u,p,f,g,h],[m,v],[M,O,T],[S,w],y)}})),f.set(`${a.CameraOrientationType.OPK}`,(function(e){const[t,n,r,i,o,a,s,l,c,u,p,f,g,h,y,m,v,M,O,T,S,w]=e.slice(1);return{horizontalWKID:t,verticalWKID:n,x:r,y:i,z:o,omega:a,phi:s,kappa:l,...d([c,u,p,f,g,h],[m,v],[M,O,T],[S,w],y)}})),f.set(`${a.CameraOrientationType.LTP}`,(function(e){const[t,n,r,o,a,...s]=e.slice(1),l=f.get(a),c=i.get(a)?.constructor;return l&&c?{latitude:t,longitude:n,ellipsoidRadius:r,squaredEccentricity:o,properties:new c(l([a,"",...s]))}:null}));const g=e=>{const t=e.map((e=>parseFloat(e))).filter((e=>!isNaN(e)));if(t.length===e.length)return t};function d(e,t,n,r,i){const o=g(e),a=g(t),s=g(n),l=g(r);return{affineTransformations:6===o?.length?o:void 0,focalLength:6===o?.length?parseFloat(i):void 0,principalOffsetPoint:2!==a?.length?[0,0]:a,radialDistortionCoefficients:3!==s?.length?[0,0,0]:s,tangentialDistortionCoefficients:2!==l?.length?[0,0]:l}}e.appendPrefixAndSuffix=s,e.convertGeographicToWebMercator=function(e){return e.spatialReference.isGeographic?r.geographicToWebMercator(e):e.clone()},e.createCameraOrientation=function(e){if(!e)return null;const t=`${e}`.split("|");if(0===t.length)return null;const n=i.get(t[0]);if(!n)return null;const r=f.get(t[0]);return r?new(0,n.constructor)(r(t)):null},e.getEffectiveElevationSource=function(e,t,n){return e?o.isConstantElevation(e)?new o.ConstantElevation(e):l(e,t,n):e},e.getMetersPerUnitOfSR=function(e){return e.isGeographic?1:n.getMetersPerUnitForSR(e)},e.isOrientationAccuracy=function(e){return Array.isArray(e)&&e?.length>5&&!e.some(isNaN)},e.orientedImageryTypeMap=p,e.padAccuracyArray=function(e){for(e=e.slice(0,8);e.length<8;)e.push(0);return e},e.processElevationSource=l,e.timeIntervalUnitTypeMap=c,e.transformersRegistry=f,e.verticalMeasurementTypeMap=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));