// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../request","../../core/JSONSupport","../../core/lang","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/persistable","./PolygonCollection","../../chunks/persistableUrlUtils"],(function(e,r,s,t,o,i,a,c,n,l,p,u,d){"use strict";var g;let m=g=class extends s{constructor(e){super(e),this.spatialRelationship="disjoint",this.geometries=new u,this._geometriesSource=null}initialize(){this.addHandles(o.on((()=>this.geometries),"after-changes",(()=>this.geometries=this.geometries),o.sync))}readGeometries(e,r,s){Array.isArray(e)?this.geometries=u.fromJSON(e,s):this._geometriesSource={url:d.fromJSON(e,s),context:s}}async loadGeometries(e,s){if(null==this._geometriesSource)return;const{url:t,context:o}=this._geometriesSource,i=await r(t,{responseType:"json",signal:s?.signal}),a=e.toJSON(),c=i.data.map((e=>({...e,spatialReference:a})));this.geometries=u.fromJSON(c,o),this._geometriesSource=null}clone(){const e=new g({geometries:t.clone(this.geometries),spatialRelationship:this.spatialRelationship});return e._geometriesSource=this._geometriesSource,e}};return e.__decorate([i.property({type:["disjoint","contains"],nonNullable:!0,json:{write:{isRequired:!0}}})],m.prototype,"spatialRelationship",void 0),e.__decorate([i.property({type:u,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),p.persistable({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],m.prototype,"geometries",void 0),e.__decorate([n.reader(["web-scene","portal-item"],"geometries")],m.prototype,"readGeometries",null),m=g=e.__decorate([l.subclass("esri.layers.support.SceneFilter")],m),m}));