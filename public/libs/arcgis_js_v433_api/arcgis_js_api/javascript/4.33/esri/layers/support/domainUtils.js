// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../core/SetUtils","../../support/dateUtils"],(function(e,n,i){"use strict";var t;e.DomainValidationError=void 0,(t=e.DomainValidationError||(e.DomainValidationError={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const r=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function l(e){return null!=e&&("date-only"===e.type||"esriFieldTypeDateOnly"===e.type)}function a(e){return null!=e&&("timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type)}function o(e){return null!=e&&("time-only"===e.type||"esriFieldTypeTimeOnly"===e.type)}const u=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]),s=n.union(r,u);function m(e,n){const i=n??e?.domain;if(!i||"range"!==i.type)return;const t="range"in i?i.range[0]:i.minValue,u="range"in i?i.range[1]:i.maxValue,s=function(e){return null!=e&&r.has(e.type)}(e);return l(e)||o(e)||a(e)?{...d(e,u,t),isInteger:s}:{min:null!=t&&"number"==typeof t?t:null,max:null!=u&&"number"==typeof u?u:null,rawMin:t,rawMax:u,isInteger:s}}function d(e,n,t){return l(e)?{min:i.dateOnlyToDateTime(t)?.toMillis(),max:i.dateOnlyToDateTime(n)?.toMillis(),rawMin:t,rawMax:n}:o(e)?{min:i.timeOnlyToDateTime(t)?.toMillis(),max:i.timeOnlyToDateTime(n)?.toMillis(),rawMin:t,rawMax:n}:a(e)?{min:i.timestampOffsetToDateTime(t)?.toMillis(),max:i.timestampOffsetToDateTime(n)?.toMillis(),rawMin:t,rawMax:n}:{max:null,min:null}}e.dateTimeFieldValuesToNumericRange=d,e.getDomainRange=m,e.isDomainValidForField=function(e,n){switch(n.type){case"range":{const{min:i,max:t}=m(e,n);return l(e)||o(e)||a(e)?!!i&&!!t:"number"==typeof i&&Number.isFinite(i)&&"number"==typeof t&&Number.isFinite(t)}case"codedValue":case"coded-value":{const i=typeof n.codedValues[0].code;if("string"===i&&function(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}(e)||"number"===i&&function(e){return null!=e&&s.has(e.type)}(e))return!0}}return!1},e.validateDomainValue=function(n,i,t){const r=t??n?.domain;if(!r)return null;switch(r.type){case"range":{const{min:t,max:l}=m(n,r);if(null!=t&&+i<t||null!=l&&+i>l)return e.DomainValidationError.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==r.codedValues||r.codedValues.every((e=>null==e||e.code!==i)))return e.DomainValidationError.INVALID_CODED_VALUE}return null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));