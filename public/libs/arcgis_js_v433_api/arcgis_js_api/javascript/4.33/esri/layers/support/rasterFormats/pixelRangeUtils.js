// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports"],(function(t){"use strict";const e={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function n(t){return e[t]??[-34028234663852886e22,34028234663852886e22]}const s={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function u(t){return(t?.startsWith("s")||t?.startsWith("u"))??!1}t.clipBandToPixelTypeRange=function(t,e,s,o){let[i,l]=n(s);const r=u(s);return r&&(i-=1e-5,l+=1e-5),r?s.startsWith("u")?function(t,e,n,s){const[u,o]=s;for(let s=0;s<e.length;s++)if(e[s]){const i=t[s];i<u||i>o?e[s]=0:n[s]=i+.5|0}}(t,e,o,[i,l]):function(t,e,n,s){const[u,o]=s;for(let s=0;s<e.length;s++)if(e[s]){const i=t[s];i<u||i>o?e[s]=0:n[s]=i+(i>0?.5:-.5)|0}}(t,e,o,[i,l]):function(t,e,n,s){const[u,o]=s;for(let s=0;s<e.length;s++)if(e[s]){const i=t[s];i<u||i>o?e[s]=0:n[s]=i}}(t,e,o,[i,l])},t.convertNoDataToMask=function(t,e,s){if(t.depthCount&&t.depthCount>1)return;const{pixels:u,statistics:o,pixelType:i}=t,l=u[0].length,r=t.bandMasks??[],a=t.mask??new Uint8Array(l).fill(255),c="f32"===i||"f64"===i,f=n(i);let g=!1;for(let t=0;t<u.length;t++){const n="number"==typeof e?e:e[t];if(null==n)continue;const l=o?.[t]?.minValue??f[0],h=o?.[t]?.maxValue??f[1];if(l>n+Number.EPSILON||h<n-Number.EPSILON)continue;const p=r[t]||a.slice(),b=u[t],d=s?.customFloatTolerance;if(c&&0!==d){let t=d;t||(t=Math.abs(n)>=9999999e31?2e-7*Math.abs(n):"f32"===i?2**-23:Number.EPSILON);for(let e=0;e<b.length;e++)p[e]&&Math.abs(b[e]-n)<t&&(b[e]=0,p[e]=0,a[e]=0,g=!0)}else for(let t=0;t<b.length;t++)p[t]&&b[t]===n&&(b[t]=0,p[t]=0,a[t]=0,g=!0);r[t]=p}if(g){const e=t.bandMasks||t.pixels.length>1?r:null;s?.matchAllNoData?t.mask=e&&e.length>1?function(t){if(t.length<2)return t[0];const e=t[0].length,n=new Uint8Array(e).fill(0);for(let s=0;s<t.length;s++){const u=t[s];for(let t=0;t<e;t++)u[t]&&(n[t]=255)}return n}(e):a:(t.bandMasks=e,t.mask=a)}g&&"updateStatistics"in t&&t.updateStatistics()},t.fixNaN=function(t,e){for(let n=0;n<e.length;n++)e[n]&&isNaN(t[n])&&(e[n]=0,t[n]=0)},t.getBytesPerPixel=function(t){return e=t.pixelType,s[e]*t.bandCount;var e},t.getIntegerPixelType=function(t,e){return null==t||null==e?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"},t.getPixelValueRange=n,t.isIntegerPixelType=u,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));