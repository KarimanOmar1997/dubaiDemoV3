// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Logger","../../../geometry/SpatialReference","../DataModel","../EntityType","../FieldIndex","../GraphObjectType","../GraphProperty","../RelationshipType","../SearchIndex","../SourceTypeValueBehavior","./WasmDataModelWrapperInterfaces"],(function(e,t,i,r,n,a,s,o,p,l,d,u){"use strict";let y=!1;function f(e){return e.deleteLater(),new n(_(e))}function c(e){return e.deleteLater(),new a({name:e.name,unique:e.unique,ascending:e.ascending,description:e.description,fieldNames:v(e.fields)})}function _(e){return{name:e.name,alias:e.alias,role:u.NamedObjectTypes[e.role.value],strict:e.strict,properties:b(e.properties),fieldIndexes:w(e.field_indexes)}}function m(e){return e.deleteLater(),new o({alias:e.alias,name:e.name,fieldType:u.EsriFieldTypes[e.field_type.value]?u.EsriFieldTypes[e.field_type.value]:void 0,geometryType:u.EsriGeometryTypes[e.geometry_type.value]?u.EsriGeometryTypes[e.geometry_type.value]:null,hasM:e.has_m,hasZ:e.has_z,nullable:e.nullable,editable:e.editable,required:e.required,defaultVisibility:e.default_visibility,systemMaintained:e.system_maintained,role:u.EsriGraphPropertyRole[e.role.value],defaultValue:e.default_value})}function g(e){e.deleteLater();const t=_(e),i=[];for(let t=0;t<e.end_points.size();t++){const r=e.end_points.get(t);i.push({originEntityType:r.origin_entity_type,destinationEntityType:r.dest_entity_type})}return e.end_points.delete(),new p(Object.assign({endPoints:i},t))}function h(e){return new d({behavior:e.behavior,value:e.value})}function T(e){const t=[];for(let i=0;i<e.size();i++)t.push(f(e.get(i)));return e.delete(),t}function v(e){const t=[];for(let i=0;i<e.size();i++)t.push(e.get(i));return e.delete(),t}function b(e){const t=[];for(let i=0;i<e.size();i++){const r=m(e.get(i));"esriFieldTypeBigInteger"===r.fieldType&&(y=!0),t.push(r)}return e.delete(),t}function w(e){const t=[];for(let i=0;i<e.size();i++)t.push(c(e.get(i)));return e.delete(),t}function I(e){const t=[];for(let i=0;i<e.size();i++)t.push(g(e.get(i)));return e.delete(),t}function z(e){const t=[];for(let i=0;i<e.size();i++){const r=e.get(i);r.deleteLater(),t.push(h(r))}return e.delete(),t}function E(e){const t=[];for(let i=0;i<e.size();i++){const r=new l,n=e.get(i);r.name=n.name,r.supportedCategory=u.EsriNamedTypeCategory[n.supported_category.value];const a=n.analyzers.size();for(let e=0;e<a;e++)r.analyzers.push({name:n.analyzers.get(e).name});n.analyzers.delete();for(let e=0;e<n.search_properties.keys().size();e++){const t=n.search_properties.keys().get(e),i=n.search_properties.get(t),a=[];for(let e=0;e<i.property_names.size();e++)a.push(i.property_names.get(e));r.searchProperties.set(t,{propertyNames:a})}t.push(r)}return e.delete(),t}e.wasmToDataModel=function(e){e.deleteLater(),y=!1;const n=new r({timestamp:e.timestamp,spatialReference:new i(e.spatial_reference),strict:e.strict,objectIdField:e.objectid_property,globalIdField:e.globalid_property,arcgisManaged:e.arcgis_managed,identifierInfo:{identifierMappingInfo:{identifierInfoType:u.EsriIdentifierInfoType[e.identifier_info?.identifier_mapping_info?.identifier_info_type?.value],databaseNativeIdentifier:e.identifier_info?.identifier_mapping_info?.database_native_identifier,uniformPropertyIdentifier:{identifierPropertyName:e.identifier_info?.identifier_mapping_info?.uniform_property_identifier?.identifier_property_name}},identifierGenerationInfo:{uuidMethodHint:u.EsriUuidMethodHintTypes[e.identifier_info?.identifier_generation_info?.uuid_method_hint?.value]}},searchIndexes:E(e.search_indexes),entityTypes:T(e.entity_types),relationshipTypes:I(e.relationship_types),metaEntityTypes:T(e.meta_entity_types),provenanceSourceTypeValues:z(e.provenance_source_type_values.value_behavior_array)});return y&&t.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").warnOnce("A big integer field was detected in the retrieved data model.  The `big-integer` field type is not fully supported in web clients.  Please see https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-support-Field.html#type"),n},e.wasmToEntityType=f,e.wasmToFieldIndex=c,e.wasmToGraphObjectType=function(e){return e.deleteLater(),new s(_(e))},e.wasmToGraphProperty=m,e.wasmToRelationshipType=g,e.wasmToSourceTypeValueBehavior=h,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));