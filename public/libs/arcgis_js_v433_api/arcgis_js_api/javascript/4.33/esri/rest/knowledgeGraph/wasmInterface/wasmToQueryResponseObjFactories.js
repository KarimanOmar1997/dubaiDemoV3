// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Logger","../../../geometry/SpatialReference","../Entity","../GraphObject","../GraphQueryResultHeader","../ObjectValue","../Path","../Relationship","./KnowledgeWasmInterface","./WasmQueryWrapperInterfaces","./wasmToGeometryFactories"],(function(e,t,n,r,s,o,a,u,i,c,p,y){"use strict";const d=()=>t.getLogger("esri.rest.knowledgeGraph.WasmToQueryResponseObjConstructors"),l={decodedWasmObjToQueryResponseObj:(e,t,n)=>{if(null==e)return null;if("object"!=typeof e)return e;if("getDate"in e)return e;if("geometry_type"in e)switch(e.geometry_type.value){case null:return null;case c.WasmGeometryTypeCodes.ESRI_GEOMETRY_POINT:return y.wasmToPointGeometry(e,n);case c.WasmGeometryTypeCodes.ESRI_GEOMETRY_MULTIPOINT:return y.wasmToMultipointGeometry(e,n);case c.WasmGeometryTypeCodes.ESRI_GEOMETRY_POLYLINE:return y.wasmToPolylineGeometry(e,n);case c.WasmGeometryTypeCodes.ESRI_GEOMETRY_POLYGON:return y.wasmToPolygonGeometry(e,n);case c.WasmGeometryTypeCodes.ESRI_GEOMETRY_ENVELOPE:case c.WasmGeometryTypeCodes.ESRI_GEOMETRY_MULTI_PATCH:return d().warnOnce("Envelope and Multipatch are not supported on knowledge entities, but one of those geometry types was detected. Result interpreted as null"),null;case c.WasmGeometryTypeCodes.ESRI_GEOMETRY_NULL:case c.WasmGeometryTypeCodes.ESRI_GEOMETRY_ANY:default:return d().warnOnce("Unknown or blank geometry type returned - Result interpreted as null"),null}else{if(!("object_value_type"in e))return d().warnOnce("A decoded value came back of a type that is not supported. Result interpreted as null"),null;switch(e.object_value_type.value){case p.WasmGraphQueryResponseTypeCodes.OBJECT:return g(e,t,n);case p.WasmGraphQueryResponseTypeCodes.ENTITY:return T(e,t,n);case p.WasmGraphQueryResponseTypeCodes.RELATIONSHIP:return E(e,t,n);case p.WasmGraphQueryResponseTypeCodes.PATH:return O(e,t,n);case p.WasmGraphQueryResponseTypeCodes.ARRAY:return m(e,t,n);default:return d().warnOnce("Unknown graph object type detected!  Result interpreted as null"),null}}}};function m(e,t,n){const r=[],s=e.count();for(let o=0;o<s;o++){const s=e.get_value_at(o);r.push(_(s,t,n))}return r}function _(e,t,n){return l.decodedWasmObjToQueryResponseObj(e,t,n)}function T(e,t,n){const s=e.type_name,o=R(e,t,n),a=e.get_id();return new r(Object.assign({typeName:s,id:a},o))}function R(e,t,n){const r={},s=e.key_count();for(let o=0;o<s;o++)r[e.get_key_at(o)]=_(e.get_value_at(o),t,n);return{properties:r}}function g(e,t,n){return new a(R(e,t,n))}function O(e,t,n){const r=e.entity_count(),s=e.relationship_count(),o=[];for(let a=0;a<r;a++)o.push(T(e.get_entity_at(a),t,n)),a<s&&o.push(E(e.get_relationship_at(a),t,n));return new u({path:o})}function E(e,t,n){const r=e.type_name,s=R(e,t,n);return new i(Object.assign({typeName:r,id:e.get_id(),originId:e.get_origin_entity_id(),destinationId:e.get_destination_entity_id()},s))}e.decodeWasmObjectTest=l,e.decodedWasmObjToQueryResponseObj=_,e.wasmArrayToArray=m,e.wasmToEntity=T,e.wasmToGraphObject=function(e,t,n){return new s(R(e,t,n))},e.wasmToGraphQueryResponseHeader=function(e){const t=[];for(let n=0;n<e.get_header_keys().size();n++)t.push(e.get_header_keys().get(n));const r=new n(e.get_out_sr());return new o({headerKeys:t,outSpatialReference:r,exceededTransferLimit:e.exceeded_transfer_limit()})},e.wasmToObjectValue=g,e.wasmToPath=O,e.wasmToRelationship=E,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));