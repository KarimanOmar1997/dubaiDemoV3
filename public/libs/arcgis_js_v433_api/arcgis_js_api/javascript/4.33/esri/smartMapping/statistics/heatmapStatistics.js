// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["../../core/Error","../../layers/support/fieldUtils","../../renderers/support/heatmapUtils","./support/utils","../support/utils","../support/adapters/support/layerUtils"],(function(e,a,r,t,i,s){"use strict";const y=a.numericTypes;return async function(a){const{layerAdapter:l,...n}=await async function(a){if(!a?.layer||!a.view)throw new e("heatmap-statistics:missing-parameters","'layer' and 'view' parameters are required");const l=[s.LayerType.CSVLayer,s.LayerType.FeatureLayer,s.LayerType.GeoJSONLayer,s.LayerType.KnowledgeGraphSublayer,s.LayerType.OGCFeatureLayer,s.LayerType.OrientedImageryLayer,s.LayerType.ParquetLayer,s.LayerType.StreamLayer,s.LayerType.WFSLayer],{layer:n,...p}=a,u=s.createLayerAdapter(n,l);if(!u)throw new e("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+s.getLayerTypeLabels(l).join(", "));const d={layerAdapter:u,...p};d.radius=null==d.radius?null==d.blurRadius?18:r.gaussianBlurRadiusPxToKernelDensityRadiusPt(d.blurRadius):d.radius;const o=null!=d.signal?{signal:d.signal}:null;await u.load(o);const c=d.field,L=c?u.getField(c):null,m=await i.getFieldsList({field:c}),f=t.verifyBasicFieldValidity(u,m,"heatmap-statistics:invalid-parameters");if(f)throw f;if(L){const e=t.verifyFieldType(u,L,"heatmap-statistics:invalid-parameters",y);if(e)throw e}return d}(a);return l.heatmapStatistics(n)}}));