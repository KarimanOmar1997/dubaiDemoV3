// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
require({cache:{"esri/smartMapping/statistics/support/utils":function(){define(["exports","../../../core/Error","../../../core/screenUtils","../../../core/timeUtils","../../../geometry/Point","../../../geometry/SpatialReference","../../../geometry/support/quantizationUtils","../../../geometry/support/spatialReferenceUtils","../../../layers/support/fieldUtils","../../../renderers/support/heatmapUtils","../../support/utils","../../../statistics/utils","../../../support/loadArcade"],(function(e,t,r,s,n,i,a,o,l,c,u,d,h){"use strict";let f=null;const p=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;function m(e){const t=p.exec(e);if(!t)return null;const{hh:r,mm:n,ss:i,ms:a}=t.groups;return Number(r)*s.millisecondsPerTimeUnit.hours+Number(n)*s.millisecondsPerTimeUnit.minutes+Number(i)*s.millisecondsPerTimeUnit.seconds+Number(a||0)}function y(e,t){let r=null!=e?e:"";return null!=t&&t&&(r=r?"("+r+") AND ("+t+")":t),r}e.calculateHeatmapStats=function(e,t=18,s,n,i){const a=new Float64Array(n*i);t=Math.round(r.pt2px(t));let o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;const u=c.createValueFunction(s);for(const{geometry:r,attributes:s}of e){const{x:e,y:d}=r,h=Math.max(0,e-t),f=Math.max(0,d-t),p=Math.min(i,d+t),m=Math.min(n,e+t),y=+u(s);for(let r=f;r<p;r++)for(let s=h;s<m;s++){const i=r*n+s,u=c.evaluateDensityKernel(s-e,r-d,t)*y,h=a[i]+=u;o=Math.min(o,h),l=Math.max(l,h)}}return{min:o,max:l}},e.getDataValues=async function(e,t,r=!0){if(!t)return[];const{field:s,field2:n,field3:a,fieldDelimiter:o,fieldInfos:c,timeZone:p}=e,y=s&&c?.find((e=>e.name.toLowerCase()===s.toLowerCase())),g=!!y&&l.isTimeOnlyField(y),b=!!y&&u.isAnyDateField(y),v=e.valueExpression,M=e.normalizationType,S=e.normalizationField,_=e.normalizationTotal,T=[],x=e.viewInfoParams;let I=null,A=null;if(v){if(!f){const{arcadeUtils:e}=await h.loadArcade();f=e}f.hasGeometryOperations(v)&&await f.enableGeometryOperations(),I=f.createFunction(v),A=x?f.getViewInfo({viewingMode:x.viewingMode,scale:x.scale,spatialReference:new i(x.spatialReference)}):null}const w=e.fieldInfos,L=t[0]&&"declaredClass"in t[0]&&"esri.Graphic"===t[0].declaredClass||!w?null:{fields:w};return t.forEach((e=>{const t=e.attributes;let i;if(v){const t=L?{...e,layer:L}:e,r=f.createExecContext(t,A,p);i=f.executeFunction(I,r)}else t&&(i=t[s],n?(i=`${d.processNullValue(i)}${o}${d.processNullValue(t[n])}`,a&&(i=`${i}${o}${d.processNullValue(t[a])}`)):"string"==typeof i&&r&&(b?i=i?new Date(i).getTime():null:g&&(i=i?m(i):null)));if(M&&"number"==typeof i&&isFinite(i)){const e=t&&parseFloat(t[S]);i=d.getNormalizedValue(i,M,e,_)}T.push(i)})),T},e.getRangeExpr=function(e,t,r){const s=null!=t?e+" >= "+t:"",n=null!=r?e+" <= "+r:"";let i="";return i=s&&n?y(s,n):s||n,i?"("+i+")":""},e.getSQLFilterForNormalization=function(e){const t=e.field,r=e.normalizationType,s=e.normalizationField;let n;return"field"===r?n="(NOT "+s+" = 0)":"log"!==r&&"natural-log"!==r&&"square-root"!==r||(n=`(${t} > 0)`),n},e.getSumOfAttributesExpr=function(e,t,r){const s=[],n=[],i=[],a=[],o=[];e.forEach(((e,t)=>{const l=e.field?"field":"expression",c=e.field||e.valueExpression;e.field?(o.push(c),n.push(`var ${l}${t} = Number($feature["${c}"]);`)):(s.push(`function getValueForExpr${t}() {\n  ${c} \n}`),n.push(`var ${l}${t} = Number(getValueForExpr${t}());`)),r||i.push(`${l}${t} = IIf(${l}${t} < 0, 0, ${l}${t});`),a.push(`${l}${t}`)}));const l=s.length?null:o.reduce(((e,t)=>`${e} + ${t}`));let c=null;return t||r?t?r||l&&(c=`(( ${l} ) >= 0)`):l&&(c=`(( ${l} ) <> 0)`):l&&(c=`(( ${l} ) > 0)`),{valueExpression:[s.length?s.join("\n"):"",n.join("\n"),i.join("\n"),`var total = ${a.join(" + ")};`,"return total;"].filter(Boolean).join("\n\n"),sqlExpression:l,sqlWhere:c}},e.mergeWhereClauses=y,e.quantizeFeatures=function(e,t,r,s){const i=o.isWrappable(r)?o.getInfo(r):null,l=i?Math.round((i.valid[1]-i.valid[0])/t.scale[0]):null;return e.map((e=>{const r=new n(e.geometry);return a.quantizePoint(t,r,r),e.geometry=i?function(e,t,r){return e.x<0?e.x+=t:e.x>r&&(e.x-=t),e}(r,l??0,s[0]):r,e}))},e.timeOnlyToMilliseconds=m,e.verifyBasicFieldValidity=function(e,r,s){const n=function(e){const t=e.layer;return e.fields.filter((e=>!t.getField(e)))}({layer:e,fields:r});if(n.length)return new t(s,"Unknown fields: "+n.join(", ")+". You can only use fields defined in the layer schema");const i=function(e){const t=e.layer;return e.fields.filter((e=>{const r=t.getFieldUsageInfo(e);return!r||!r.supportsStatistics}))}({layer:e,fields:r});return i.length?new t(s,"Unsupported fields: "+i.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0},e.verifyFieldType=function(e,r,s,n){let i;return r?r.name!==e.objectIdField&&n.includes(r.type)||(i=new t(s,"'field' should be one of these types: "+n.join(","))):i=new t(s,"'field' is not defined in the layer schema"),i},e.verifyFilterValidity=function(e,r){if(e&&"intersects"!==e.spatialRelationship)return new t(r,"Only 'intersects' spatialRelationship is supported for featureFilter")},e.verifyNumericField=function(e,r,s){let n;return r?r.name!==e.objectIdField&&l.isNumericField(r)||(n=new t(s,"'field' should be one of these numeric types: "+l.numericTypes.join(","))):n=new t(s,"'field' is not defined in the layer schema"),n},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/core/screenUtils":function(){define(["exports"],(function(e){"use strict";const t=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function r(e){return e?72*e/96:0}function s(e=0,t=0){return{x:e,y:t}}e.castRenderScreenPointArray=function(e){return e},e.castRenderScreenPointArray3=function(e){return e},e.castScreenPointArray=function(e){return e},e.cloneScreenPoint=function(e){return e?s(e.x,e.y):null},e.createRenderScreenPoint=function(e=0,t=0){return{x:e,y:t}},e.createRenderScreenPointArray=function(e=0,t=0){return[e,t]},e.createRenderScreenPointArray3=function(e=0,t=0,r=0){return[e,t,r]},e.createScreenPoint=s,e.createScreenPointArray=function(e=0,t=0){return[e,t]},e.pt2px=function(e){return e?e/72*96:0},e.px2pt=r,e.screenPointArrayToObject=function(e,t){return t?(t.x=e[0],t.y=e[1],t):{x:e[0],y:e[1]}},e.screenPointObjectToArray=function(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]},e.toPt=function(e){if("string"==typeof e){const s=e.match(t);if(s){const t=Number(s[1]),n=s[3]&&s[3].toLowerCase(),i="-"===e.charAt(0),a="px"===n?r(t):t;return i?-a:a}return console.warn("screenUtils.toPt: input not recognized!"),null}return e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],(function(e,t){"use strict";function r(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:r,translate:s}=e,n=r[0]??1,i=r[1]??1;return{originPosition:"lowerLeft",scale:[n,"lowerLeft"===t?i:-i,r[2]??1,r[3]??1],translate:[s[0]??0,s[1]??0,s[2]??0,s[3]??0]}}function s({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function n({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function i({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function a({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function o(e,t){return e&&t?d:e&&!t?c:!e&&t?u:l}const l=(e,t)=>{const r=[];if(!t.length)return null;const i=t[0];let a=s(e,i[0]),o=n(e,i[1]);r.push([a,o]);for(let i=1;i<t.length;i++){const[l,c]=t[i],u=s(e,l),d=n(e,c);u===a&&d===o||r.push([u-a,d-o]),a=u,o=d}return r},c=(e,t)=>{const r=[];if(!t.length)return null;const a=t[0];let o=s(e,a[0]),l=n(e,a[1]),c=i(e,a[2]);r.push([o,l,c]);for(let a=1;a<t.length;a++){const[u,d,h]=t[a],f=s(e,u),p=n(e,d),m=i(e,h);f===o&&p===l&&m===c||r.push([f-o,p-l,m]),o=f,l=p,c=m}return r},u=(e,t)=>{const r=[];if(!t.length)return null;const i=t[0];let o=s(e,i[0]),l=n(e,i[1]),c=a(e,i[2]);r.push([o,l,c]);for(let i=1;i<t.length;i++){const[u,d,h]=t[i],f=s(e,u),p=n(e,d),m=a(e,h);f===o&&p===l&&m===c||r.push([f-o,p-l,m]),o=f,l=p,c=m}return r},d=(e,t)=>{const r=[];if(!t.length)return null;const o=t[0];let l=s(e,o[0]),c=n(e,o[1]),u=i(e,o[2]),d=a(e,o[3]);r.push([l,c,u,d]);for(let o=1;o<t.length;o++){const[h,f,p,m]=t[o],y=s(e,h),g=n(e,f),b=i(e,p),v=a(e,m);y===l&&g===c&&b===u&&v===d||r.push([y-l,g-c,b,v]),l=y,c=g,u=b,d=v}return r};function h({scale:e,translate:t},r){return r*e[0]+t[0]}function f({scale:e,translate:t},r){return r*e[1]+t[1]}function p({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function m({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function y(e,t){return e&&t?M:e&&!t?b:!e&&t?v:g}const g=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const s=t[0];let n=h(e,s[0]),i=f(e,s[1]);r[0]=[n,i];const{scale:a,originPosition:o}=e,l=a[0],c="lowerLeft"===o?a[1]:-a[1];for(let e=1;e<t.length;e++){const[s,a]=t[e];n+=l*s,i+=c*a,r[e]=[n,i]}return r},b=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const s=t[0];let n=h(e,s[0]),i=f(e,s[1]);r[0]=[n,i,p(e,s[2])];const{scale:a,originPosition:o}=e,l=a[0],c="lowerLeft"===o?a[1]:-a[1];for(let s=1;s<t.length;s++){const[a,o,u]=t[s];n+=l*a,i+=c*o,r[s]=[n,i,p(e,u)]}return r},v=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const s=t[0];let n=h(e,s[0]),i=f(e,s[1]);r[0]=[n,i,m(e,s[2])];const{scale:a,originPosition:o}=e,l=a[0],c="lowerLeft"===o?a[1]:-a[1];for(let s=1;s<t.length;s++){const[a,o,u]=t[s];n+=l*a,i+=c*o,r[s]=[n,i,m(e,u)]}return r},M=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const s=t[0];let n=h(e,s[0]),i=f(e,s[1]);r[0]=[n,i,p(e,s[2]),m(e,s[3])];const{scale:a,originPosition:o}=e,l=a[0],c="lowerLeft"===o?a[1]:-a[1];for(let s=1;s<t.length;s++){const[a,o,u,d]=t[s];n+=l*a,i+=c*o,r[s]=[n,i,p(e,u),m(e,d)]}return r};function S(e,t,r){const s=new Array(r.length);for(let n=0;n<r.length;n++)s[n]=t(e,r[n]);return s}function _(e,t,r){let[s,n]=r[0],i=Math.min(s,t[0]),a=Math.min(n,t[1]),o=Math.max(s,t[2]),l=Math.max(n,t[3]);for(let e=1;e<r.length;e++){const[t,c]=r[e];s+=t,n+=c,t<0&&(i=Math.min(i,s)),t>0&&(o=Math.max(o,s)),c<0?a=Math.min(a,n):c>0&&(l=Math.max(l,n))}return e[0]=i,e[1]=a,e[2]=o,e[3]=l,e}function T(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(let r=0;r<t.length;r++)_(e,e,t[r]);return e}function x(e,t,o){const l=r(e);return t.xmin=s(l,o.xmin),t.ymin=n(l,o.ymin),t.xmax=s(l,o.xmax),t.ymax=n(l,o.ymax),o.hasZ&&(t.zmin=i(l,o.zmin),t.zmax=i(l,o.zmax)),o.hasM&&(t.mmin=a(l,o.mmin),t.mmax=a(l,o.mmax)),t.hasZ=o.hasZ??!1,t.hasM=o.hasM??!1,t}function I(e,t,s){const n=r(e);return t.points=o(s.hasZ,s.hasM)(n,s.points)??[],t.hasZ=s.hasZ??!1,t.hasM=s.hasM??!1,t}function A(e,t,o){const l=r(e);return t.x=s(l,o.x),t.y=n(l,o.y),null!=o.z&&(t.z=i(l,o.z)),null!=o.m&&(t.m=a(l,o.m)),t}function w(e,t,s){const n=function(e,t,r,s){const n=[],i=o(r,s);for(let r=0;r<t.length;r++){const s=i(e,t[r]);s&&s.length>=3&&n.push(s)}return n.length?n:null}(r(e),s.rings,s.hasZ,s.hasM);return n?(t.rings=n,t.hasZ=s.hasZ??!1,t.hasM=s.hasM??!1,t):null}function L(e,t,s){const n=function(e,t,r,s){const n=[],i=o(r,s);for(let r=0;r<t.length;r++){const s=i(e,t[r]);s&&s.length>=2&&n.push(s)}return n.length?n:null}(r(e),s.paths,s.hasZ,s.hasM);return n?(t.paths=n,t.hasZ=s.hasZ??!1,t.hasM=s.hasM??!1,t):null}e.getQuantizedBoundsCoordsArray=_,e.getQuantizedBoundsCoordsArrayArray=T,e.getQuantizedBoundsPaths=function(e){return T([0,0,0,0],e)},e.getQuantizedBoundsPoints=function(e){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return _(t,t,e)},e.getQuantizedBoundsRings=function(e){return T([0,0,0,0],e)},e.normalizeTransform=r,e.quantizeBounds=function(e,t,i){const a=r(e);return t[0]=s(a,i[0]),t[3]=n(a,i[1]),t[2]=s(a,i[2]),t[1]=n(a,i[3]),t},e.quantizeCoordsArrayXY=l,e.quantizeCoordsArrayXYM=u,e.quantizeCoordsArrayXYZ=c,e.quantizeCoordsArrayXYZM=d,e.quantizeExtent=x,e.quantizeGeometry=function(e,r){return e&&r?t.isPoint(r)?A(e,{},r):t.isPolyline(r)?L(e,{},r):t.isPolygon(r)?w(e,{},r):t.isMultipoint(r)?I(e,{},r):t.isExtent(r)?x(e,{},r):null:null},e.quantizeM=a,e.quantizeMultipoint=I,e.quantizePoint=A,e.quantizePolygon=w,e.quantizePolyline=L,e.quantizeX=s,e.quantizeY=n,e.quantizeZ=i,e.toQuantizationTransform=function(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null},e.unquantizeBounds=function(e,t,s){const n=r(e);return s?(t[0]=h(n,s[0]),t[1]=f(n,s[3]),t[2]=h(n,s[2]),t[3]=f(n,s[1]),t):[h(n,t[0]),f(n,t[3]),h(n,t[2]),f(n,t[1])]},e.unquantizeCoordsArrayArray=S,e.unquantizeCoordsArrayXY=g,e.unquantizeCoordsArrayXYM=v,e.unquantizeCoordsArrayXYZ=b,e.unquantizeCoordsArrayXYZM=M,e.unquantizeExtent=function(e,t,s,n=s.hasZ??!1,i=s.hasM??!1){const a=r(e);return t.xmin=h(a,s.xmin),t.xmax=h(a,s.xmax),t.ymin=f(a,s.ymin),t.ymax=f(a,s.ymax),n&&(t.zmin=p(a,s.zmin),t.zmax=p(a,s.zmax)),i&&(t.mmin=m(a,s.mmin),t.mmax=m(a,s.mmax)),t.hasZ=n,t.hasM=i,t},e.unquantizeM=m,e.unquantizeMultipoint=function(e,t,s,n=s?.hasZ??!1,i=s?.hasM??!1){if(null!=s){const a=r(e);t.points=y(n,i)(a,s.points),t.hasZ=n,t.hasM=i}return t},e.unquantizePoint=function(e,t,s,n=null!=s?.z,i=null!=s?.m){if(null==s)return t;const a=r(e);return t.x=h(a,s.x),t.y=f(a,s.y),n&&(t.z=p(a,s.z)),i&&(t.m=m(a,s.m)),t},e.unquantizePolygon=function(e,t,s,n=s?.hasZ??!1,i=s?.hasM??!1){if(null!=s){const a=r(e);t.rings=S(a,y(n,i),s.rings),t.hasZ=n,t.hasM=i}return t},e.unquantizePolyline=function(e,t,s,n=s?.hasZ??!1,i=s?.hasM??!1){if(null!=s){const a=r(e);t.paths=S(a,y(n,i),s.paths),t.hasZ=n,t.hasM=i}return t},e.unquantizeX=h,e.unquantizeY=f,e.unquantizeZ=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],(function(e,t,r,s,n){"use strict";function i(e,r,n,i){let{color:a,ratio:o}=r,{color:l,ratio:c}=n;if(c===o){const e=1e-6;1===c?o-=e:c+=e}const u=t.clamp((i-o)/(c-o),0,1);s.lerp(e,a.toArray(),l.toArray(),u)}e.createValueFunction=function(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1},e.evaluateDensityKernel=function(e,t,r){const s=Math.sqrt(e**2+t**2)/r;return s>1?0:3/(Math.PI*r**2)*(1-s**2)**2},e.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(e){return r.px2pt(2.4*e)},e.generateGradient=function(e){const t=new Uint8ClampedArray(2048);if((e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)})))).length<1)return t;let r=e[0],s=e[0],a=1;const o=n.create();for(let n=0;n<512;n++){const l=(n+.5)/512;for(;l>s.ratio&&a<e.length;)r=s,s=e[a++];i(o,r,s,l),t.set(o,4*n)}return t},e.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(e){return r.pt2px(e)/2.4},e.magicKernelDensityRadiusInflationFactor=2.4,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/smartMapping/support/utils":function(){define(["exports","../../intl/date","../../layers/support/fieldUtils","../../support/basemapUtils","../../support/loadArcade","../../time/constants","../../time/timeZoneUtils"],(function(e,t,r,s,n,i,a){"use strict";const o={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","streets-3d","osm-3d","gray-3d"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","streets-dark-3d","dark-gray-3d"]},l={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},c=new Set(["integer","small-integer"]);let u=null;function d(e){return String(e).padStart(2,"0")}function h(e,t,r){let s;return"date"===t||"number"===t?("number"===t&&(e=new Date(e)),s=`TIMESTAMP'${r?e.getFullYear():e.getUTCFullYear()}-${d((r?e.getMonth():e.getUTCMonth())+1)}-${d(r?e.getDate():e.getUTCDate())} ${d(r?e.getHours():e.getUTCHours())}:${d(r?e.getMinutes():e.getUTCMinutes())}:${d(r?e.getSeconds():e.getUTCSeconds())}'`):s=e,s}function f(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const s=e.getField(t);if("<now>"===t.toLowerCase())return;if(r.isDateField(s))return"field"}}e.castIntegerFieldToFloat=function(e){return`cast(${e} as float)`},e.dateTypes=["date","date-only","timestamp-offset"],e.defaultBasemapGroups=o,e.defaultStatisticTypes={exclude:["median"]},e.fieldDelimiter=",",e.formatAnyDate=function(e,r){const{format:s,timeZoneOptions:n,fieldType:o}=r??{};let l,c;if(n&&({timeZone:l,timeZoneName:c}=a.getTimeZoneFormattingOptions(n.layerTimeZone,n.datesInUnknownTimezone,n.viewTimeZone,t.convertDateFormatToIntlOptions(s||"short-date-short-time"),o)),"string"==typeof e&&isNaN(Date.parse("time-only"===o?`1970-01-01T${e}Z`:e)))return e;switch(o){case"date-only":{const r=t.convertDateFormatToIntlOptions(s||"short-date");return"string"==typeof e?t.formatDateOnly(e,{...r}):t.formatDate(e,{...r,timeZone:i.utc})}case"time-only":{const r=t.convertDateFormatToIntlOptions(s||"short-time");return"string"==typeof e?t.formatTimeOnly(e,r):t.formatDate(e,{...r,timeZone:i.utc})}case"timestamp-offset":{if(!l&&"string"==typeof e&&new Date(e).toISOString()!==e)return e;const r=s||n?t.convertDateFormatToIntlOptions(s||"short-date-short-time"):void 0,i=r?{...r,timeZone:l,timeZoneName:c}:void 0;return"string"==typeof e?t.formatTimestamp(e,i):t.formatDate(e,i)}default:{const r=s||n?t.convertDateFormatToIntlOptions(s||"short-date-short-time"):void 0;return t.formatDate("string"==typeof e?new Date(e):e,r?{...r,timeZone:l,timeZoneName:c}:void 0)}}},e.getBasemapGroup=function(e,t=o){for(const r in t)if(t[r].includes(e))return r},e.getBasemapId=function(e,t,r=!0){let n=null;return e&&("string"==typeof e?t.includes(e)&&(n=e):n=s.getWellKnownBasemapId(e)),r?n||"gray":n},e.getDateDiffSQL=function(e,t,r,s){const{hasQueryEngine:n}=e,i=`(${h(r,f(e,r),n)} - ${h(t,f(e,t),n)})`;let a=l[s],o="/";return a<1&&(a=1/a,o="*"),{sqlExpression:1===a?i:`(${i} ${o} ${a})`,sqlWhere:null}},e.getDateType=f,e.getFieldsList=async function(e){const{field:t,field2:r,field3:s,normalizationField:i,valueExpression:a}=e;let o=[];if(a){if(!u){const{arcadeUtils:e}=await n.loadArcade();u=e}o=u.extractFieldNames(a)}return t&&o.push(t),r&&o.push(r),s&&o.push(s),i&&o.push(i),o},e.getNormalizationType=function(e){let t=e.normalizationType;return t||(e.normalizationField?t="field":null!=e.normalizationTotal&&(t="percent-of-total")),t??void 0},e.isAnyDateField=function(e){return r.isDateField(e)||r.isDateOnlyField(e)||r.isTimestampOffsetField(e)},e.isIntegerField=function(e,t){const r=t&&e.getField(t);return!!r&&c.has(r.type)},e.unitValueInDays=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/support/basemapUtils":function(){define(["exports","../core/Collection","../core/maybe","../core/urlUtils","../layers/effects/utils","./basemapDefinitions"],(function(e,t,r,s,n,i){"use strict";let a;function o(e){if(a)return a(e);let t=null;const r=d(e),s=!r?.baseLayers.length;for(const e in i.esriBasemapDefinitions){const n=g(r,m(i.esriBasemapDefinitions[e]),{mustMatchReferences:s});if("equal"===n){t=e;break}"base-layers-equal"===n&&(t=e)}return t}function l(e){if(u(e.url))return!0;if("vector-tile"===e.type)for(const t in e.sourceNameToSource){const r=e.sourceNameToSource[t];if(u(r?.sourceUrl))return!0}return!1}const c=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function u(e){if(!e)return!1;const t=new s.Url(s.makeAbsolute(e));return!!t.authority&&c.test(t.authority)}function d(e){return e?!e.loaded&&e.resourceInfo?m(e.resourceInfo.data):{baseLayers:h(e.baseLayers),referenceLayers:h(e.referenceLayers)}:null}function h(e){return(t.isCollection(e)?e.toArray():e).map(f)}function f(e){return{type:e.type,effect:"effect"in e?e.effect:void 0,url:M("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible,sublayers:"map-image"!==e.type&&"wms"!==e.type||null==e.sublayers?void 0:e.sublayers?.map((e=>({id:e.id,visible:e.visible}))),activeLayerId:"wmts"===e.type?e.activeLayer?.id:void 0}}function p(e){return e.isReference||"ArcGISSceneServiceLayer"===e.layerType}function m(e){return e?{baseLayers:y((e.baseMapLayers??[]).filter((e=>!p(e)))),referenceLayers:y((e.baseMapLayers??[]).filter((e=>p(e))))}:null}function y(e){return e.map((e=>function(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:M(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:null==e.visibility||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}(e)))}function g(e,t,r){return null!=e!=(null!=t)?"not-equal":e&&t?b(e.baseLayers,t.baseLayers)?b(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function b(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!v(e[r],t[r]))return!1;return!0}function v(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(!n.effectEquals(e.effect,t.effect))return!1;if(null!=e.activeLayerId||null!=t.activeLayerId)return e.activeLayerId===t.activeLayerId;if(null!=e.sublayers||null!=t.sublayers){if(null==e.sublayers||null==t.sublayers||e.sublayers.length!==t.sublayers.length)return!1;for(let r=0;r<e.sublayers.length;r++){const s=e.sublayers.at(r),n=t.sublayers.at(r);if(s?.id!==n?.id||s?.visible!==n?.visible)return!1}}return!0}function M(e){return e?s.normalize(e).replace(/^\s*https?:/i,"").toLowerCase():""}function S(e){return"portalItem"in e?e.portalItem?.thumbnailUrl:void 0}e.contentEquals=function(e,t){return e===t||null!=e?.portalItem?.id&&e.portalItem.id===t?.portalItem?.id||"equal"===g(d(e),d(t),{mustMatchReferences:!0})},e.findSpatialReference=function(e,t){if(null==t||null==e)return{spatialReference:null,updating:!1};if("not-loaded"===t.loadStatus)return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(0===t.baseLayers.length)return{spatialReference:null,updating:!1};const r=t.baseLayers.at(0);switch(r.loadStatus){case"not-loaded":r.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const s=(("supportedSpatialReferences"in r?r.supportedSpatialReferences:null)||["tileInfo"in r?r.tileInfo?.spatialReference:r.spatialReference]).filter(Boolean),n=e.spatialReference;return n?{spatialReference:s.find((e=>n.equals(e)))??s[0]??null,updating:!1}:{spatialReference:s[0],updating:!1}},e.getBasemapThumbnailUrl=function(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const s=o(e);return s?i.esriBasemapDefinitions[s].thumbnailUrl:r.mappedFind(e.baseLayers,S)},e.getWellKnownBasemapId=o,e.hasDeveloperBasemapLayer=function(e){return!!e?.baseLayers.concat(e.referenceLayers).some(l)},e.isBasemap3D=function(e){return"Web Scene"===e.portalItem?.type||e.referenceLayers.some((e=>"scene"===e.type))},e.isBasemapInBeta=function(e){return!!e?.portalItem?.tags?.some((e=>"beta"===e.toLowerCase()))},e.isBasemapLayerView=function(e,t){const r=e.allLayerViews.find((e=>e.uid===t));return r?.layer.parent===e.map?.basemap},e.isDeveloperBasemapLayer=l,e.layerDefinitionEquals=v,e.layerToDefinition=f,e.overrideGetWellKnownBasemapId=function(e){a=e},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/core/Collection":function(){define(["../chunks/tslib.es6","./ArrayPool","./Evented","./handleUtils","./lang","./ObjectPool","./ObservableChangesType","./scheduling","./accessorSupport/ensureType","./accessorSupport/tracking","./accessorSupport/decorators/property","./accessorSupport/decorators/shared","./accessorSupport/decorators/subclass","./accessorSupport/tracking/SimpleObservable","./support/jsonUtils"],(function(e,t,r,s,n,i,a,o,l,c,u,d,h,f,p){"use strict";var m;class y{constructor(e,t,r,s,n){this.target=e,this.added=t,this.removed=r,this.start=s,this.deleteCount=n}}const g=new i(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}));function b(e){e&&"object"==typeof e&&"destroy"in e&&"function"==typeof e.destroy&&e.destroy()}function v(e){return e?e instanceof L?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function M(e){if(e?.length)return e[0]}function S(e,t,r,s){const n=Math.min(e.length-r,t.length-s);let i=0;for(;i<n&&e[r+i]===t[s+i];)i++;return i}function _(e,t,r,s){t&&t.forEach(((t,n,i)=>{e.push(t),_(e,r.call(s,t,n,i),r,s)}))}const T=new Set,x=new Set,I=new Set,A=new Map;let w=0,L=class extends r.EventedAccessor{static{m=this}static{this.ofType=t=>{if(!t)return m;if(A.has(t))return A.get(t);let r=null;if("function"==typeof t)r=t.prototype.declaredClass;else if(t.base)r=t.base.prototype.declaredClass;else for(const e in t.typeMap){const s=t.typeMap[e].prototype.declaredClass;r?r+=` | ${s}`:r=s}let s=class extends m{};return e.__decorate([d.shared({Type:t,ensureType:"function"==typeof t?l.ensureType(t):l.ensureOneOfType(t)})],s.prototype,"itemType",void 0),s=e.__decorate([h.subclass(`esri.core.Collection<${r}>`)],s),A.set(t,s),s}}static isCollection(e){return null!=e&&e instanceof m}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new f.SimpleObservable,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:w++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof m?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return c.trackAccess(this._observable),this._items}set items(e){this._emitBeforeChanges(a.ObservableChangesType.ADD)||(this._splice(0,this.length,v(e)),this._emitAfterChanges(a.ObservableChangesType.ADD))}hasEventListener(e){return!this.destroyed&&("change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return s.makeHandle();if("change"===e){const e=this._chgListeners,r={removed:!1,callback:t};return e.push(r),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),s.makeHandle((()=>{r.removed=!0,e.splice(e.indexOf(r),1)}))}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,s=this.on(e,(e=>{r()?.call(null,e),s.remove()}));return s}add(e,t){if(c.trackAccess(this._observable),this._emitBeforeChanges(a.ObservableChangesType.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(a.ObservableChangesType.ADD),this}addMany(e,t=this._items.length){if(c.trackAccess(this._observable),!e?.length)return this;if(this._emitBeforeChanges(a.ObservableChangesType.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,v(e)),this._emitAfterChanges(a.ObservableChangesType.ADD),this}at(e){if(c.trackAccess(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(c.trackAccess(this._observable),!this.length||this._emitBeforeChanges(a.ObservableChangesType.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(a.ObservableChangesType.REMOVE),e}_removeAllRaw(){return 0===this.length?[]:this._splice(0,this.length)||[]}clone(){return c.trackAccess(this._observable),this._createNewInstance({items:this._items.map(n.clone)})}concat(...e){c.trackAccess(this._observable);const t=e.map(v);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(c.trackAccess(this._observable),!this.length||this._emitBeforeChanges(a.ObservableChangesType.REMOVE))return;const r=this._splice(0,this.length),s=r.length;for(let n=0;n<s;n++)e.call(t,r[n],n,r);this._emitAfterChanges(a.ObservableChangesType.REMOVE)}destroyAll(){this.drain(b)}destroyMany(e){const t=this.removeMany(e);return t.forEach(b),t}every(e,t){return c.trackAccess(this._observable),this._items.every(e,t)}filter(e,t){c.trackAccess(this._observable);const r=2===arguments.length?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:r})}find(e,t){return c.trackAccess(this._observable),this._items.find(e,t)}findIndex(e,t){return c.trackAccess(this._observable),this._items.findIndex(e,t)}flatten(e,t){c.trackAccess(this._observable);const r=[];return _(r,this,e,t),new m(r)}forEach(e,t){return c.trackAccess(this._observable),this._items.forEach(e,t)}getItemAt(e){return c.trackAccess(this._observable),this._items[e]}getNextIndex(e){c.trackAccess(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return c.trackAccess(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return c.trackAccess(this._observable),this._items.indexOf(e,t)}join(e=","){return c.trackAccess(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return c.trackAccess(this._observable),this._items.lastIndexOf(e,t)}map(e,t){c.trackAccess(this._observable);const r=this._items.map(e,t);return new m({items:r})}reorder(e,t=this.length-1){c.trackAccess(this._observable);const r=this.indexOf(e);if(-1!==r){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(a.ObservableChangesType.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(a.ObservableChangesType.MOVE)}return e}}pop(){if(c.trackAccess(this._observable),!this.length||this._emitBeforeChanges(a.ObservableChangesType.REMOVE))return;const e=M(this._splice(this.length-1,1));return this._emitAfterChanges(a.ObservableChangesType.REMOVE),e}push(...e){return c.trackAccess(this._observable),this._emitBeforeChanges(a.ObservableChangesType.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(a.ObservableChangesType.ADD)),this.length}reduce(e,t){c.trackAccess(this._observable);const r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){c.trackAccess(this._observable);const r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return c.trackAccess(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(c.trackAccess(this._observable),e<0||e>=this.length||this._emitBeforeChanges(a.ObservableChangesType.REMOVE))return;const t=M(this._splice(e,1));return this._emitAfterChanges(a.ObservableChangesType.REMOVE),t}removeMany(e){if(c.trackAccess(this._observable),!e?.length||this._emitBeforeChanges(a.ObservableChangesType.REMOVE))return[];const t=e instanceof m?e.toArray():e,r=this._items,s=[],n=t.length;for(let e=0;e<n;e++){const n=t[e],i=r.indexOf(n);if(i>-1){const n=1+S(t,r,e+1,i+1),a=this._splice(i,n);a&&a.length>0&&s.push.apply(s,a),e+=n-1}}return this._emitAfterChanges(a.ObservableChangesType.REMOVE),s}reverse(){if(c.trackAccess(this._observable),this._emitBeforeChanges(a.ObservableChangesType.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(a.ObservableChangesType.MOVE),this}shift(){if(c.trackAccess(this._observable),!this.length||this._emitBeforeChanges(a.ObservableChangesType.REMOVE))return;const e=M(this._splice(0,1));return this._emitAfterChanges(a.ObservableChangesType.REMOVE),e}slice(e=0,t=this.length){return c.trackAccess(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return c.trackAccess(this._observable),this._items.some(e,t)}sort(e){if(c.trackAccess(this._observable),!this.length||this._emitBeforeChanges(a.ObservableChangesType.MOVE)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(a.ObservableChangesType.MOVE),this}_requiresSort(e=(e,t)=>e===t?0:e<t?-1:1){const t=this.length-1;for(let r=0;r<t;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,t,...r){c.trackAccess(this._observable),1===arguments.length&&(t=this.length),t??=0;const s=(t?a.ObservableChangesType.REMOVE:0)|(r.length?a.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(s))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(s),n}toArray(){return c.trackAccess(this._observable),this._items.slice()}toJSON(e){return c.trackAccess(this._observable),this.toArray().map((t=>p.isSerializable(t)?t.toJSON(e):t))}toLocaleString(){return c.trackAccess(this._observable),this._items.toLocaleString()}toString(){return c.trackAccess(this._observable),this._items.toString()}unshift(...e){return c.trackAccess(this._observable),!e.length||this._emitBeforeChanges(a.ObservableChangesType.ADD)||(this._splice(0,0,e),this._emitAfterChanges(a.ObservableChangesType.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const s=this._items,n=this.itemType;let i,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=o.schedule((()=>this._dispatchChange()))),e<0&&(e+=this.length),t){if(a=s.splice(e,t),this.hasEventListener("before-remove")){const t=g.acquire();t.target=this,t.cancellable=!0;for(let r=0,n=a.length;r<n;r++)i=a[r],t.reset(i),this.emit("before-remove",t),t.defaultPrevented&&(a.splice(r,1),s.splice(e,0,i),e+=1,r-=1,n-=1);g.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=g.acquire();e.target=this,e.cancellable=!1;const t=a.length;for(let r=0;r<t;r++)e.reset(a[r]),this.emit("after-remove",e);g.release(e)}}if(r?.length){if(n){const e=[];for(const t of r){const r=n.ensureType(t);null==r&&null!=t||e.push(r)}r=e}const t=this.hasEventListener("before-add"),i=this.hasEventListener("after-add"),a=e===this.length;if(t||i){const n=g.acquire();n.target=this,n.cancellable=!0;const o=g.acquire();o.target=this,o.cancellable=!1;for(const l of r)t?(n.reset(l),this.emit("before-add",n),n.defaultPrevented||(a?s.push(l):s.splice(e++,0,l),this._set("length",s.length),i&&(o.reset(l),this.emit("after-add",o)))):(a?s.push(l):s.splice(e++,0,l),this._set("length",s.length),o.reset(l),this.emit("after-add",o));g.release(o),g.release(n)}else{if(a)for(const e of r)s.push(e);else s.splice(e,0,...r);this._set("length",s.length)}}if((r?.length||a?.length)&&this._notifyChangeEvent(r,a),this.hasEventListener("after-splice")){const s=new y(this,r,a,e,t);this.emit("after-splice",s)}return a}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=g.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,g.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=g.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),g.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const r of e){const e=r.changes;T.clear(),x.clear(),I.clear();for(const{added:t,removed:r}of e){if(t)if(0===I.size&&0===x.size)for(const e of t)T.add(e);else for(const e of t)x.has(e)?(I.add(e),x.delete(e)):I.has(e)||T.add(e);if(r)if(0===I.size&&0===T.size)for(const e of r)x.add(e);else for(const e of r)T.has(e)?T.delete(e):(I.delete(e),x.add(e))}const s=t.acquire();T.forEach((e=>{s.push(e)}));const n=t.acquire();x.forEach((e=>{n.push(e)}));const i=this._items,a=r.items,o=t.acquire();if(I.forEach((e=>{a.indexOf(e)!==i.indexOf(e)&&o.push(e)})),r.listeners&&(s.length||n.length||o.length)){const e={target:this,added:s,removed:n,moved:o},t=r.listeners.length;for(let s=0;s<t;s++){const t=r.listeners[s];t.removed||t.callback.call(this,e)}}t.release(s),t.release(n),t.release(o)}T.clear(),x.clear(),I.clear()}};return e.__decorate([u.property()],L.prototype,"_updating",void 0),e.__decorate([u.property()],L.prototype,"length",void 0),e.__decorate([u.property()],L.prototype,"items",null),e.__decorate([u.property({readOnly:!0})],L.prototype,"updating",null),L=m=e.__decorate([h.subclass("esri.core.Collection")],L),L}))},"esri/core/Evented":function(){define(["../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],(function(e,t,r,s){"use strict";class n{constructor(){this._emitter=new n.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}}return function(i){class a{constructor(e=null){this._target=e,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(e,t){let r=this._listenersMap?.get(e);if(!r)return!1;const s=this._target||this;let n=!1;for(const e of r.slice()){const r="deref"in e?e.deref():e;r?r?.call(s,t):n=!0}return n&&(r=r.filter((e=>!("deref"in e)||null!=e.deref())),this._listenersMap.set(e,r)),r.length>0}on(e,t){if(Array.isArray(e)){const s=e.map((e=>this.on(e,t)));return r.handlesGroup(s)}if(e.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const s=this._listenersMap.get(e)||[];return s.push(t),this._listenersMap.set(e,s),r.makeHandle((()=>{const r=this._listenersMap?.get(e),s=r?.indexOf(t)??-1;s>=0&&r.splice(s,1)}))}once(e,t){const r=this.on(e,(e=>{r.remove();const s="deref"in t?t.deref():t;s?.call(null,e)}));return r}hasEventListener(e){const t=this._listenersMap?.get(e);return null!=t&&t.length>0}}i.EventEmitter=a,i.EventedMixin=t=>{let r=class extends t{constructor(){super(...arguments),this._emitter=new a}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};return r=e.__decorate([s.subclass("esri.core.Evented")],r),r};let o=class extends t{constructor(){super(...arguments),this._emitter=new n.EventEmitter(this)}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};o=e.__decorate([s.subclass("esri.core.Evented.EventedAccessor")],o),i.EventedAccessor=o}(n||(n={})),n}))},"esri/core/ObservableChangesType":function(){define(["exports"],(function(e){"use strict";var t;e.ObservableChangesType=void 0,(t=e.ObservableChangesType||(e.ObservableChangesType={}))[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE",Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],(function(e){"use strict";e.shared=function(e){return(t,r)=>{t[r]=e}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/layers/effects/utils":function(){define(["exports","./effects"],(function(e,t){"use strict";e.canInterpolateEffects=function(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((e,t)=>e.type===r[t].type))},e.effectEquals=function(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)},e.isEffectFunctions=function(e){const t=e[0];return!!t&&"type"in t},e.normalizeEffects=function(e,r){const s=e.length>r.length?e:r,n=e.length>r.length?r:e;for(let e=n.length;e<s.length;e++)n.push(t.createEffectWithInitialValues(s[e]))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/layers/effects/effects":function(){define(["exports","../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],(function(e,t,r,s,n){"use strict";class i{constructor(e,t,r){this.strength=e,this.radius=t,this.threshold=r,this.type="bloom"}interpolate(e,t,r){this.strength=d(e.strength,t.strength,r),this.radius=d(e.radius,t.radius,r),this.threshold=d(e.threshold,t.threshold,r)}clone(){return new i(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:h(this.radius),strength:this.strength,threshold:this.threshold}}}class a{constructor(e){this.radius=e,this.type="blur"}interpolate(e,t,r){this.radius=Math.round(d(e.radius,t.radius,r))}clone(){return new a(this.radius)}toJSON(){return{type:"blur",radius:h(this.radius)}}}class o{constructor(e,t){this.type=e,this.amount=t,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.amount=d(e.amount,t.amount,r),this._updateMatrix()}clone(){return new o(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||s.create();switch(this.type){case"brightness":this._colorMatrix=n.brightness(e,this.amount);break;case"contrast":this._colorMatrix=n.contrast(e,this.amount);break;case"grayscale":this._colorMatrix=n.grayscale(e,this.amount);break;case"invert":this._colorMatrix=n.invert(e,this.amount);break;case"saturate":this._colorMatrix=n.saturate(e,this.amount);break;case"sepia":this._colorMatrix=n.sepia(e,this.amount)}}}class l{constructor(e,t,r,s){this.offsetX=e,this.offsetY=t,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(e,t,r){this.offsetX=d(e.offsetX,t.offsetX,r),this.offsetY=d(e.offsetY,t.offsetY,r),this.blurRadius=d(e.blurRadius,t.blurRadius,r),this.color[0]=Math.round(d(e.color[0],t.color[0],r)),this.color[1]=Math.round(d(e.color[1],t.color[1],r)),this.color[2]=Math.round(d(e.color[2],t.color[2],r)),this.color[3]=d(e.color[3],t.color[3],r)}clone(){return new l(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:h(this.offsetX),yoffset:h(this.offsetY),blurRadius:h(this.blurRadius),color:e}}}class c{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.angle=d(e.angle,t.angle,r),this._updateMatrix()}clone(){return new c(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||s.create();this._colorMatrix=n.rotateHue(e,this.angle)}}class u{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,t,r){this.amount=d(e.amount,t.amount,r)}clone(){return new u(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function d(e,t,r){return e+(t-e)*r}function h(e){return Math.round(1e3*r.px2pt(e))/1e3}e.BloomEffect=i,e.BlurEffect=a,e.ColorMatrixEffect=o,e.DropShadowEffect=l,e.HueRotateEffect=c,e.OpacityEffect=u,e.createEffectWithInitialValues=function(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new o(e.type,0);case"saturate":case"brightness":case"contrast":return new o(e.type,1);case"opacity":return new u(1);case"hue-rotate":return new c(0);case"blur":return new a(0);case"drop-shadow":return new l(0,0,0,[...t.getNamedColor("transparent")]);case"bloom":return new i(0,0,1)}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],(function(e){"use strict";function t(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function r(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function s(e,t,r,s,n,i,a,o,l,c,u,d,h,f,p,m){const y=new Float32Array(16);return y[0]=e,y[1]=t,y[2]=r,y[3]=s,y[4]=n,y[5]=i,y[6]=a,y[7]=o,y[8]=l,y[9]=c,y[10]=u,y[11]=d,y[12]=h,y[13]=f,y[14]=p,y[15]=m,y}const n=t(),i=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:n,clone:r,create:t,fromValues:s},Symbol.toStringTag,{value:"Module"}));e.IDENTITY=n,e.clone=r,e.create=t,e.fromValues=s,e.mat4f32=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],(function(e,t){"use strict";e.brightness=(e,r)=>{const s=t.set(e,r,0,0,0,0,r,0,0,0,0,r,0,0,0,0,1);return t.transpose(s,s)},e.contrast=(e,r)=>{const s=t.set(e,r,0,0,.5-.5*r,0,r,0,.5-.5*r,0,0,r,.5-.5*r,0,0,0,1);return t.transpose(s,s)},e.grayscale=(e,r)=>{const s=1-r,n=t.set(e,.2126+.7874*s,.7152-.7152*s,.0722-.0722*s,0,.2126-.2126*s,.7152+.2848*s,.0722-.0722*s,0,.2126-.2126*s,.7152-.7152*s,.0722+.9278*s,0,0,0,0,1);return t.transpose(n,n)},e.invert=(e,r)=>{const s=1-2*r,n=r,i=t.set(e,s,0,0,n,0,s,0,n,0,0,s,n,0,0,0,1);return t.transpose(i,i)},e.rotateHue=(e,r)=>{const s=Math.sin(r*Math.PI/180),n=Math.cos(r*Math.PI/180),i=t.set(e,.213+.787*n-.213*s,.715-.715*n-.715*s,.072-.072*n+.928*s,0,.213-.213*n+.143*s,.715+.285*n+.14*s,.072-.072*n-.283*s,0,.213-.213*n-.787*s,.715-.715*n+.715*s,.072+.928*n+.072*s,0,0,0,0,1);return t.transpose(i,i)},e.saturate=(e,r)=>{const s=r,n=t.set(e,.213+.787*s,.715-.715*s,.072-.072*s,0,.213-.213*s,.715+.285*s,.072-.072*s,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,1);return t.transpose(n,n)},e.sepia=(e,r)=>{const s=1-r,n=t.set(e,.393+.607*s,.769-.769*s,.189-.189*s,0,.349-.349*s,.686+.314*s,.168-.168*s,0,.272-.272*s,.534-.534*s,.131+.869*s,0,0,0,0,1);return t.transpose(n,n)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],(function(e,t,r){"use strict";function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function n(e,t,r,s,n,i,a,o,l,c,u,d,h,f,p,m,y){return e[0]=t,e[1]=r,e[2]=s,e[3]=n,e[4]=i,e[5]=a,e[6]=o,e[7]=l,e[8]=c,e[9]=u,e[10]=d,e[11]=h,e[12]=f,e[13]=p,e[14]=m,e[15]=y,e}function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,t){if(e===t){const r=t[1],s=t[2],n=t[3],i=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=i,e[11]=t[14],e[12]=n,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function o(e,t){return l(e,t)||i(e),e}function l(e,t){const r=t[0],s=t[1],n=t[2],i=t[3],a=t[4],o=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],y=t[14],g=t[15],b=r*o-s*a,v=r*l-n*a,M=r*c-i*a,S=s*l-n*o,_=s*c-i*o,T=n*c-i*l,x=u*m-d*p,I=u*y-h*p,A=u*g-f*p,w=d*y-h*m,L=d*g-f*m,O=h*g-f*y;let V=b*O-v*L+M*w+S*A-_*I+T*x;return V?(V=1/V,e[0]=(o*O-l*L+c*w)*V,e[1]=(n*L-s*O-i*w)*V,e[2]=(m*T-y*_+g*S)*V,e[3]=(h*_-d*T-f*S)*V,e[4]=(l*A-a*O-c*I)*V,e[5]=(r*O-n*A+i*I)*V,e[6]=(y*M-p*T-g*v)*V,e[7]=(u*T-h*M+f*v)*V,e[8]=(a*L-o*A+c*x)*V,e[9]=(s*A-r*L-i*x)*V,e[10]=(p*_-m*M+g*b)*V,e[11]=(d*M-u*_-f*b)*V,e[12]=(o*I-a*w-l*x)*V,e[13]=(r*w-s*I+n*x)*V,e[14]=(m*v-p*S-y*b)*V,e[15]=(u*S-d*v+h*b)*V,e):null}function c(e,t){const r=t[0],s=t[1],n=t[2],i=t[3],a=t[4],o=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],y=t[14],g=t[15];return e[0]=o*(h*g-f*y)-d*(l*g-c*y)+m*(l*f-c*h),e[1]=-(s*(h*g-f*y)-d*(n*g-i*y)+m*(n*f-i*h)),e[2]=s*(l*g-c*y)-o*(n*g-i*y)+m*(n*c-i*l),e[3]=-(s*(l*f-c*h)-o*(n*f-i*h)+d*(n*c-i*l)),e[4]=-(a*(h*g-f*y)-u*(l*g-c*y)+p*(l*f-c*h)),e[5]=r*(h*g-f*y)-u*(n*g-i*y)+p*(n*f-i*h),e[6]=-(r*(l*g-c*y)-a*(n*g-i*y)+p*(n*c-i*l)),e[7]=r*(l*f-c*h)-a*(n*f-i*h)+u*(n*c-i*l),e[8]=a*(d*g-f*m)-u*(o*g-c*m)+p*(o*f-c*d),e[9]=-(r*(d*g-f*m)-u*(s*g-i*m)+p*(s*f-i*d)),e[10]=r*(o*g-c*m)-a*(s*g-i*m)+p*(s*c-i*o),e[11]=-(r*(o*f-c*d)-a*(s*f-i*d)+u*(s*c-i*o)),e[12]=-(a*(d*y-h*m)-u*(o*y-l*m)+p*(o*h-l*d)),e[13]=r*(d*y-h*m)-u*(s*y-n*m)+p*(s*h-n*d),e[14]=-(r*(o*y-l*m)-a*(s*y-n*m)+p*(s*l-n*o)),e[15]=r*(o*h-l*d)-a*(s*h-n*d)+u*(s*l-n*o),e}function u(e){const t=e[0],r=e[1],s=e[2],n=e[3],i=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],y=e[15];return(t*a-r*i)*(d*y-h*m)-(t*o-s*i)*(u*y-h*p)+(t*l-n*i)*(u*m-d*p)+(r*o-s*a)*(c*y-h*f)-(r*l-n*a)*(c*m-d*f)+(s*l-n*o)*(c*p-u*f)}function d(e,t,r){const s=t[0],n=t[1],i=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],y=t[13],g=t[14],b=t[15];let v=r[0],M=r[1],S=r[2],_=r[3];return e[0]=v*s+M*o+S*d+_*m,e[1]=v*n+M*l+S*h+_*y,e[2]=v*i+M*c+S*f+_*g,e[3]=v*a+M*u+S*p+_*b,v=r[4],M=r[5],S=r[6],_=r[7],e[4]=v*s+M*o+S*d+_*m,e[5]=v*n+M*l+S*h+_*y,e[6]=v*i+M*c+S*f+_*g,e[7]=v*a+M*u+S*p+_*b,v=r[8],M=r[9],S=r[10],_=r[11],e[8]=v*s+M*o+S*d+_*m,e[9]=v*n+M*l+S*h+_*y,e[10]=v*i+M*c+S*f+_*g,e[11]=v*a+M*u+S*p+_*b,v=r[12],M=r[13],S=r[14],_=r[15],e[12]=v*s+M*o+S*d+_*m,e[13]=v*n+M*l+S*h+_*y,e[14]=v*i+M*c+S*f+_*g,e[15]=v*a+M*u+S*p+_*b,e}function h(e,t,r){const s=r[0],n=r[1],i=r[2];if(t===e)e[12]=t[0]*s+t[4]*n+t[8]*i+t[12],e[13]=t[1]*s+t[5]*n+t[9]*i+t[13],e[14]=t[2]*s+t[6]*n+t[10]*i+t[14],e[15]=t[3]*s+t[7]*n+t[11]*i+t[15];else{const r=t[0],a=t[1],o=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7],f=t[8],p=t[9],m=t[10],y=t[11];e[0]=r,e[1]=a,e[2]=o,e[3]=l,e[4]=c,e[5]=u,e[6]=d,e[7]=h,e[8]=f,e[9]=p,e[10]=m,e[11]=y,e[12]=r*s+c*n+f*i+t[12],e[13]=a*s+u*n+p*i+t[13],e[14]=o*s+d*n+m*i+t[14],e[15]=l*s+h*n+y*i+t[15]}return e}function f(e,t,r){const s=r[0],n=r[1],i=r[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,n,i){let a=i[0],o=i[1],l=i[2],c=Math.sqrt(a*a+o*o+l*l);if(c<=r.getEpsilon())return void s(e,t);c=1/c,a*=c,o*=c,l*=c;const u=Math.sin(n),d=Math.cos(n),h=1-d,f=t[0],p=t[1],m=t[2],y=t[3],g=t[4],b=t[5],v=t[6],M=t[7],S=t[8],_=t[9],T=t[10],x=t[11],I=a*a*h+d,A=o*a*h+l*u,w=l*a*h-o*u,L=a*o*h-l*u,O=o*o*h+d,V=l*o*h+a*u,D=a*l*h+o*u,E=o*l*h-a*u,C=l*l*h+d;e[0]=f*I+g*A+S*w,e[1]=p*I+b*A+_*w,e[2]=m*I+v*A+T*w,e[3]=y*I+M*A+x*w,e[4]=f*L+g*O+S*V,e[5]=p*L+b*O+_*V,e[6]=m*L+v*O+T*V,e[7]=y*L+M*O+x*V,e[8]=f*D+g*E+S*C,e[9]=p*D+b*E+_*C,e[10]=m*D+v*E+T*C,e[11]=y*D+M*E+x*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function m(e,t,r){const s=Math.sin(r),n=Math.cos(r),i=t[4],a=t[5],o=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*n+c*s,e[5]=a*n+u*s,e[6]=o*n+d*s,e[7]=l*n+h*s,e[8]=c*n-i*s,e[9]=u*n-a*s,e[10]=d*n-o*s,e[11]=h*n-l*s,e}function y(e,t,r){const s=Math.sin(r),n=Math.cos(r),i=t[0],a=t[1],o=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*n-c*s,e[1]=a*n-u*s,e[2]=o*n-d*s,e[3]=l*n-h*s,e[8]=i*s+c*n,e[9]=a*s+u*n,e[10]=o*s+d*n,e[11]=l*s+h*n,e}function g(e,t,r){const s=Math.sin(r),n=Math.cos(r),i=t[0],a=t[1],o=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*n+c*s,e[1]=a*n+u*s,e[2]=o*n+d*s,e[3]=l*n+h*s,e[4]=c*n-i*s,e[5]=u*n-a*s,e[6]=d*n-o*s,e[7]=h*n-l*s,e}function b(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function v(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t,s){if(0===t)return i(e);let n=s[0],a=s[1],o=s[2],l=Math.sqrt(n*n+a*a+o*o);if(l<=r.getEpsilon())return null;l=1/l,n*=l,a*=l,o*=l;const c=Math.sin(t),u=Math.cos(t),d=1-u;return e[0]=n*n*d+u,e[1]=a*n*d+o*c,e[2]=o*n*d-a*c,e[3]=0,e[4]=n*a*d-o*c,e[5]=a*a*d+u,e[6]=o*a*d+n*c,e[7]=0,e[8]=n*o*d+a*c,e[9]=a*o*d-n*c,e[10]=o*o*d+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T(e,t){const r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function x(e,t,r){const s=t[0],n=t[1],i=t[2],a=t[3],o=s+s,l=n+n,c=i+i,u=s*o,d=s*l,h=s*c,f=n*l,p=n*c,m=i*c,y=a*o,g=a*l,b=a*c;return e[0]=1-(f+m),e[1]=d+b,e[2]=h-g,e[3]=0,e[4]=d-b,e[5]=1-(u+m),e[6]=p+y,e[7]=0,e[8]=h+g,e[9]=p-y,e[10]=1-(u+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function I(e,t){const r=A,s=-t[0],n=-t[1],i=-t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],d=s*s+n*n+i*i+a*a;return d>0?(r[0]=2*(o*a+u*s+l*i-c*n)/d,r[1]=2*(l*a+u*n+c*s-o*i)/d,r[2]=2*(c*a+u*i+o*n-l*s)/d):(r[0]=2*(o*a+u*s+l*i-c*n),r[1]=2*(l*a+u*n+c*s-o*i),r[2]=2*(c*a+u*i+o*n-l*s)),x(e,t,r),e}const A=t.create();function w(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function L(e,t){const r=t[0],s=t[1],n=t[2],i=t[4],a=t[5],o=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(r*r+s*s+n*n),e[1]=Math.sqrt(i*i+a*a+o*o),e[2]=Math.sqrt(l*l+c*c+u*u),e}function O(e,t){const r=t[0]+t[5]+t[10];let s=0;return r>0?(s=2*Math.sqrt(r+1),e[3]=.25*s,e[0]=(t[6]-t[9])/s,e[1]=(t[8]-t[2])/s,e[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/s,e[0]=.25*s,e[1]=(t[1]+t[4])/s,e[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/s,e[0]=(t[1]+t[4])/s,e[1]=.25*s,e[2]=(t[6]+t[9])/s):(s=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/s,e[0]=(t[8]+t[2])/s,e[1]=(t[6]+t[9])/s,e[2]=.25*s),e}function V(e,t,r,s){const n=t[0],i=t[1],a=t[2],o=t[3],l=n+n,c=i+i,u=a+a,d=n*l,h=n*c,f=n*u,p=i*c,m=i*u,y=a*u,g=o*l,b=o*c,v=o*u,M=s[0],S=s[1],_=s[2];return e[0]=(1-(p+y))*M,e[1]=(h+v)*M,e[2]=(f-b)*M,e[3]=0,e[4]=(h-v)*S,e[5]=(1-(d+y))*S,e[6]=(m+g)*S,e[7]=0,e[8]=(f+b)*_,e[9]=(m-g)*_,e[10]=(1-(d+p))*_,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function D(e,t,r,s,n){const i=t[0],a=t[1],o=t[2],l=t[3],c=i+i,u=a+a,d=o+o,h=i*c,f=i*u,p=i*d,m=a*u,y=a*d,g=o*d,b=l*c,v=l*u,M=l*d,S=s[0],_=s[1],T=s[2],x=n[0],I=n[1],A=n[2],w=(1-(m+g))*S,L=(f+M)*S,O=(p-v)*S,V=(f-M)*_,D=(1-(h+g))*_,E=(y+b)*_,C=(p+v)*T,z=(y-b)*T,k=(1-(h+m))*T;return e[0]=w,e[1]=L,e[2]=O,e[3]=0,e[4]=V,e[5]=D,e[6]=E,e[7]=0,e[8]=C,e[9]=z,e[10]=k,e[11]=0,e[12]=r[0]+x-(w*x+V*I+C*A),e[13]=r[1]+I-(L*x+D*I+z*A),e[14]=r[2]+A-(O*x+E*I+k*A),e[15]=1,e}function E(e,t){const r=t[0],s=t[1],n=t[2],i=t[3],a=r+r,o=s+s,l=n+n,c=r*a,u=s*a,d=s*o,h=n*a,f=n*o,p=n*l,m=i*a,y=i*o,g=i*l;return e[0]=1-d-p,e[1]=u+g,e[2]=h-y,e[3]=0,e[4]=u-g,e[5]=1-c-p,e[6]=f+m,e[7]=0,e[8]=h+y,e[9]=f-m,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function C(e,t,r,s,n,i,a){const o=1/(r-t),l=1/(n-s),c=1/(i-a);return e[0]=2*i*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(n+s)*l,e[10]=(a+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*c,e[15]=0,e}function z(e,t,r,s,n){const i=1/Math.tan(t/2);let a;return e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(a=1/(s-n),e[10]=(n+s)*a,e[14]=2*n*s*a):(e[10]=-1,e[14]=-2*s),e}function k(e,t,r,s){const n=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+o),c=2/(n+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-o)*l*.5,e[9]=(n-i)*c*.5,e[10]=s/(r-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*r/(r-s),e[15]=0,e}function F(e,t,r,s,n,i,a){const o=1/(t-r),l=1/(s-n),c=1/(i-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*o,e[13]=(n+s)*l,e[14]=(a+i)*c,e[15]=1,e}function N(e,t,s,n){const a=t[0],o=t[1],l=t[2];let c=a-s[0],u=o-s[1],d=l-s[2];const h=r.getEpsilon();if(Math.abs(c)<h&&Math.abs(u)<h&&Math.abs(d)<h)return void i(e);let f=1/Math.sqrt(c*c+u*u+d*d);c*=f,u*=f,d*=f;const p=n[0],m=n[1],y=n[2];let g=m*d-y*u,b=y*c-p*d,v=p*u-m*c;f=Math.sqrt(g*g+b*b+v*v),f?(f=1/f,g*=f,b*=f,v*=f):(g=0,b=0,v=0);let M=u*v-d*b,S=d*g-c*v,_=c*b-u*g;f=Math.sqrt(M*M+S*S+_*_),f?(f=1/f,M*=f,S*=f,_*=f):(M=0,S=0,_=0),e[0]=g,e[1]=M,e[2]=c,e[3]=0,e[4]=b,e[5]=S,e[6]=u,e[7]=0,e[8]=v,e[9]=_,e[10]=d,e[11]=0,e[12]=-(g*a+b*o+v*l),e[13]=-(M*a+S*o+_*l),e[14]=-(c*a+u*o+d*l),e[15]=1}function U(e,t,r,s){const n=t[0],i=t[1],a=t[2],o=s[0],l=s[1],c=s[2];let u=n-r[0],d=i-r[1],h=a-r[2],f=u*u+d*d+h*h;f>0&&(f=1/Math.sqrt(f),u*=f,d*=f,h*=f);let p=l*h-c*d,m=c*u-o*h,y=o*d-l*u;return f=p*p+m*m+y*y,f>0&&(f=1/Math.sqrt(f),p*=f,m*=f,y*=f),e[0]=p,e[1]=m,e[2]=y,e[3]=0,e[4]=d*y-h*m,e[5]=h*p-u*y,e[6]=u*m-d*p,e[7]=0,e[8]=u,e[9]=d,e[10]=h,e[11]=0,e[12]=n,e[13]=i,e[14]=a,e[15]=1,e}function P(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function R(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function q(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function B(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function j(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function G(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e[3]=t[3]+r[3]*s,e[4]=t[4]+r[4]*s,e[5]=t[5]+r[5]*s,e[6]=t[6]+r[6]*s,e[7]=t[7]+r[7]*s,e[8]=t[8]+r[8]*s,e[9]=t[9]+r[9]*s,e[10]=t[10]+r[10]*s,e[11]=t[11]+r[11]*s,e[12]=t[12]+r[12]*s,e[13]=t[13]+r[13]*s,e[14]=t[14]+r[14]*s,e[15]=t[15]+r[15]*s,e}function $(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Z(e,t){if(e===t)return!0;const s=e[0],n=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],m=e[12],y=e[13],g=e[14],b=e[15],v=t[0],M=t[1],S=t[2],_=t[3],T=t[4],x=t[5],I=t[6],A=t[7],w=t[8],L=t[9],O=t[10],V=t[11],D=t[12],E=t[13],C=t[14],z=t[15],k=r.getEpsilon();return Math.abs(s-v)<=k*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(n-M)<=k*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(i-S)<=k*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(a-_)<=k*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(o-T)<=k*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(l-x)<=k*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(c-I)<=k*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(u-A)<=k*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(d-w)<=k*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(h-L)<=k*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(f-O)<=k*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(p-V)<=k*Math.max(1,Math.abs(p),Math.abs(V))&&Math.abs(m-D)<=k*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(y-E)<=k*Math.max(1,Math.abs(y),Math.abs(E))&&Math.abs(g-C)<=k*Math.max(1,Math.abs(g),Math.abs(C))&&Math.abs(b-z)<=k*Math.max(1,Math.abs(b),Math.abs(z))}function Y(e){const t=r.getEpsilon(),s=e[0],n=e[1],i=e[2],a=e[4],o=e[5],l=e[6],c=e[8],u=e[9],d=e[10];return Math.abs(1-(s*s+a*a+c*c))<=t&&Math.abs(1-(n*n+o*o+u*u))<=t&&Math.abs(1-(i*i+l*l+d*d))<=t}function W(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[8]&&0===e[9]&&1===e[10]}const X=d,H=B,Q=Object.freeze(Object.defineProperty({__proto__:null,add:q,adjoint:c,copy:s,determinant:u,equals:Z,exactEquals:$,frob:R,fromQuat:E,fromQuat2:I,fromRotation:M,fromRotationTranslation:x,fromRotationTranslationScale:V,fromRotationTranslationScaleOrigin:D,fromScaling:v,fromTranslation:b,fromXRotation:S,fromYRotation:_,fromZRotation:T,frustum:C,getRotation:O,getScale:L,getTranslation:w,hasIdentityRotation:W,identity:i,invert:l,invertOrIdentity:o,isOrthoNormal:Y,lookAt:N,mul:X,multiply:d,multiplyScalar:j,multiplyScalarAndAdd:G,ortho:F,perspective:z,perspectiveFromFieldOfView:k,rotate:p,rotateX:m,rotateY:y,rotateZ:g,scale:f,set:n,str:P,sub:H,subtract:B,targetTo:U,translate:h,transpose:a},Symbol.toStringTag,{value:"Module"}));e.add=q,e.adjoint=c,e.copy=s,e.determinant=u,e.equals=Z,e.exactEquals=$,e.frob=R,e.fromQuat=E,e.fromQuat2=I,e.fromRotation=M,e.fromRotationTranslation=x,e.fromRotationTranslationScale=V,e.fromRotationTranslationScaleOrigin=D,e.fromScaling=v,e.fromTranslation=b,e.fromXRotation=S,e.fromYRotation=_,e.fromZRotation=T,e.frustum=C,e.getRotation=O,e.getScale=L,e.getTranslation=w,e.hasIdentityRotation=W,e.identity=i,e.invert=l,e.invertOrIdentity=o,e.isOrthoNormal=Y,e.lookAt=N,e.mat4=Q,e.mul=X,e.multiply=d,e.multiplyScalar=j,e.multiplyScalarAndAdd=G,e.ortho=F,e.perspective=z,e.perspectiveFromFieldOfView=k,e.rotate=p,e.rotateX=m,e.rotateY=y,e.rotateZ=g,e.scale=f,e.set=n,e.str=P,e.sub=H,e.subtract=B,e.targetTo=U,e.translate=h,e.transpose=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],(function(e,t,r){"use strict";const s={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return t.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};e.esriBasemapDefinitions=s,e.getBasemapTitle=async function(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,s=await r.fetchMessageBundle("esri/t9n/basemaps");return s[e]||s[t]},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/intl/messages":function(){define(["exports","../core/Error","../core/handleUtils","../core/promiseUtils","./locale"],(function(e,t,r,s,n){"use strict";const i={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function a(e){if(function(e){return e in i}(e)){const t=i[e];return!0===t?e:t}return null}const o=[],l=new Map;function c(e){for(const t of l.keys())u(e.pattern,t)&&l.delete(t)}function u(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}n.beforeLocaleChange((()=>{l.clear()}));const d=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=s.createResolver())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}},h={cache:l,loaders:o};e.fetchMessageBundle=async function(e){const r=n.getLocale();l.has(e)||l.set(e,async function(e,r){const s=[];for(const t of o)if(u(t.pattern,e))try{return await t.fetchMessageBundle(e,r)}catch(e){s.push(e)}if(s.length)throw new t("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:s});throw new t("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,r));const s=l.get(e);return s&&await d.add(s),s},e.messageBundlesLocaleMap=i,e.normalizeMessageBundleLocale=function(e){const t=n.getLocaleParts(e);return t?a(e)??a(t.language):null},e.registerMessageBundleLoader=function(e){return o.includes(e)||(c(e),o.unshift(e)),r.makeHandle((()=>{const t=o.indexOf(e);t>-1&&(o.splice(t,1),c(e))}))},e.test=h,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],(function(e,t,r){"use strict";const s=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,n=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),i=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),a=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function o(e){return null==e||"string"==typeof e&&!e?"<Null>":e}function l(e){const t=null!=e.normalizationField||null!=e.normalizationType,r=null!=e.minValue||null!=e.maxValue,s=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!r&&!s}function c(e){const{values:t,useSampleStdDev:r,supportsNullCount:s,outStatisticTypes:n}=e;let i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=null,l=null,c=null,d=null,h=0;const f=null==e.minValue?-1/0:e.minValue,p=null==e.maxValue?1/0:e.maxValue;for(const e of t)Number.isFinite(e)?e>=f&&e<=p&&(o=null===o?e:o+e,i=Math.min(i,e),a=Math.max(a,e),h++):"string"==typeof e&&h++;if(h&&null!=o){l=o/h;let e=0;for(const r of t)Number.isFinite(r)&&r>=f&&r<=p&&(e+=(r-l)**2);d=r?h>1?e/(h-1):0:h>0?e/h:0,c=Math.sqrt(d)}else i=null,a=null;const m={avg:l,count:h,max:a,min:i,stddev:c,sum:o,variance:d};return s&&(m.nullcount=t.length-h),!e.percentileParams||n?.include?.length&&!n.include.includes("median")||n?.exclude?.length&&n.exclude.includes("median")||(m.median=u(t,e.percentileParams)),m}function u(e,t){const{fieldType:r,value:s,orderBy:n,isDiscrete:i}=t,a=d(r,"desc"===n);if(0===(e=[...e].filter((e=>null!=e)).sort(((e,t)=>a(e,t)))).length)return null;if(s<=0)return e[0];if(s>=1)return e[e.length-1];const o=(e.length-1)*s,l=Math.floor(o),c=l+1,u=o%1,h=e[l],f=e[c];return c>=e.length||i||"string"==typeof h||"string"==typeof f?h:h*(1-u)+f*u}function d(e,t){if(e){if(n.has(e))return _(t);if(i.has(e))return v(t,!1);if("esriFieldTypeTimestampOffset"===e)return function(e){return e?y:m}(t);const r=v(t,!0);if("esriFieldTypeString"===e)return r;if("esriFieldTypeGUID"===e||"esriFieldTypeGlobalID"===e)return(e,t)=>r(T(e),T(t))}const r=t?1:-1,s=_(t),a=v(t,!0),o=p(t);return(e,t)=>"number"==typeof e&&"number"==typeof t?s(e,t):"string"==typeof e&&"string"==typeof t?a(e,t):o(e,t)??r}const h=(e,t)=>null==e?null==t?0:1:null==t?-1:null,f=(e,t)=>null==e?null==t?0:-1:null==t?1:null;function p(e){return e?h:f}const m=(e,t)=>f(e,t)??(e===t?0:new Date(e).getTime()-new Date(t).getTime()),y=(e,t)=>h(e,t)??(e===t?0:new Date(t).getTime()-new Date(e).getTime()),g=(e,t)=>f(e,t)??(e===t?0:e<t?-1:1),b=(e,t)=>h(e,t)??(e===t?0:e<t?1:-1);function v(e,t){if(!t)return e?b:g;const r=p(e);return e?(e,t)=>{const s=r(e,t);return null!=s?s:(e=e.toUpperCase())>(t=t.toUpperCase())?-1:e<t?1:0}:(e,t)=>{const s=r(e,t);return null!=s?s:(e=e.toUpperCase())<(t=t.toUpperCase())?-1:e>t?1:0}}const M=(e,t)=>h(e,t)??t-e,S=(e,t)=>f(e,t)??e-t;function _(e){return e?M:S}function T(e){return e.slice(24,36)+e.slice(19,23)+e.slice(16,18)+e.slice(14,16)+e.slice(11,13)+e.slice(9,11)+e.slice(6,8)+e.slice(4,6)+e.slice(2,4)+e.slice(0,2)}function x(e){return"coded-value"!==e?.type?[]:e.codedValues.map((e=>e.code))}function I(e,t,s){const n=A({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,definedInterval:t.definedInterval,breakCount:t.numClasses||5});return e=function(e,t,r){const s=t??-1/0,n=r??1/0;return e.filter((e=>Number.isFinite(e)&&e>=s&&e<=n))}(e,t.minValue,t.maxValue),r.createGenerateRendererClassBreaks({definition:n,values:e,normalizationTotal:t.normalizationTotal},s)}function A(e){const{breakCount:r,field:s,normalizationField:n,normalizationType:i}=e,a=e.classificationMethod||"equal-interval",o="standard-deviation"===a?e.standardDeviationInterval||1:void 0,l="defined-interval"===a?e.definedInterval:void 0;return new t({breakCount:r,classificationField:s,classificationMethod:a,normalizationField:"field"===i?n:void 0,normalizationType:i,standardDeviationInterval:o,definedInterval:l})}function w(e,t,r=!1){const{field:s,classificationMethod:n,standardDeviationInterval:i,definedInterval:a,normalizationType:o,normalizationField:u,normalizationTotal:d,minValue:h,maxValue:f}=t,p=t.numBins||10;let m=null,y=null,g=null;if(n&&"equal-interval"!==n||o){const{classBreaks:t}=I(e,{field:s,normalizationType:o,normalizationField:u,normalizationTotal:d,classificationMethod:n,standardDeviationInterval:i,definedInterval:a,minValue:h,maxValue:f,numClasses:p},null!=h&&null!=f?[h,f]:void 0);m=t[0]?.minValue,y=t[t.length-1]?.maxValue,g=t.map((e=>[e.minValue,e.maxValue]))}else{if(null!=h&&null!=f)m=h,y=f;else{const t=c({values:e,minValue:h,maxValue:f,useSampleStdDev:!o,supportsNullCount:l({normalizationType:o,normalizationField:u,minValue:h,maxValue:f})});m=t.min??null,y=t.max??null}g=O(m??0,y??0,p)}if(r&&g.length){const e=g.at(-1)[1];g.push([e,e])}return{min:m,max:y,intervals:g}}function L(e,t){let r=-1;for(let s=e.length-1;s>=0;s--)if(t>=e[s][0]){r=s;break}return r}function O(e,t,r){const s=(t-e)/r,n=[];let i,a=e;for(let e=1;e<=r;e++)i=a+s,i=Number(i.toFixed(16)),n.push([a,e===r?t:i]),a=i;return n}e.binIndex=L,e.calculateClassBreaks=I,e.calculateHistogram=function(e,t){const r=w(e,t);if(null==r.min&&null==r.max)return{bins:[],minValue:r.min,maxValue:r.max,normalizationTotal:t.normalizationTotal};const s=r.intervals,n=r.min??0,i=r.max??0,a=s.map(((e,t)=>({minValue:s[t][0],maxValue:s[t][1],count:0})));for(const t of e)if(null!=t&&t>=n&&t<=i){const e=L(s,t);e>-1&&a[e].count++}return{bins:a,minValue:n,maxValue:i,normalizationTotal:t.normalizationTotal}},e.calculatePercentile=u,e.calculateStatistics=c,e.calculateStringStatistics=function(e){const{outStatisticTypes:t}=e,r=e.returnDistinct?[...new Set(e.values)]:e.values,s=r.filter((e=>null!=e)).sort(),n=s.length,i={count:n,min:s[0],max:s[n-1]};return e.supportsNullCount&&(i.nullcount=r.length-n),!e.percentileParams||t?.include?.length&&!t.include.includes("median")||t?.exclude?.length&&t.exclude.includes("median")||(i.median=u(r,e.percentileParams)),i},e.calculateUniqueValuesCount=function(e){const t={};for(let r of e)(null==r||"string"==typeof r&&""===r.trim())&&(r=null),null==t[r]?t[r]={count:1,data:r}:t[r].count++;return{count:t}},e.createClassBreaksDefinition=A,e.createUVResult=function(e,t,r,s){const n=e.count,i=[];if(r&&t){const e=[],r=x(t[0]);for(const n of r)if(t[1]){const r=x(t[1]);for(const i of r)if(t[2]){const r=x(t[2]);for(const t of r)e.push(`${o(n)}${s}${o(i)}${s}${o(t)}`)}else e.push(`${o(n)}${s}${o(i)}`)}else e.push(n);for(const t of e)n.hasOwnProperty(t)||(n[t]={data:t,count:0})}for(const e in n){const t=n[e];i.push({value:t.data,count:t.count,label:t.label})}return{uniqueValueInfos:i}},e.getAttributeComparator=d,e.getBinParams=w,e.getEqualIntervalBins=O,e.getNormalizedValue=function(e,t,r,s){let n=null;switch(t){case"log":0!==e&&(n=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(s)&&0!==s&&(n=e/s*100);break;case"field":Number.isFinite(r)&&0!==r&&(n=e/r);break;case"natural-log":e>0&&(n=Math.log(e));break;case"square-root":e>0&&(n=e**.5)}return n},e.isNullCountSupported=l,e.processNullValue=o,e.processSummaryStatisticsResult=function(e,t,r){let s;for(s in e)t?.include?.length&&!t.include.includes(s)||t?.exclude?.length&&t.exclude.includes(s)?delete e[s]:a.includes(s)&&(Number.isFinite(e[s])||(e[s]=null));return r?(["avg","stddev","variance"].forEach((t=>{null!=e[t]&&(e[t]=Math.ceil(e[t]??0))})),e):e},e.resolveCBResult=function(e,t){let r=e.classBreaks;const n=r.length,i=r[0]?.minValue,a=r[n-1]?.maxValue,o="standard-deviation"===t,l=s;return r=r.map((e=>{const t=e.label,r={minValue:e.minValue,maxValue:e.maxValue,label:t};if(o&&t){const e=t.match(l),s=e?.map((e=>+e.trim()))??[];2===s.length?(r.minStdDev=s[0],r.maxStdDev=s[1],s[0]<0&&s[1]>0&&(r.hasAvg=!0)):1===s.length&&(t.includes("<")?(r.minStdDev=null,r.maxStdDev=s[0]):t.includes(">")&&(r.minStdDev=s[0],r.maxStdDev=null))}return r})),{minValue:i,maxValue:a,classBreakInfos:r,normalizationTotal:e.normalizationTotal}},e.statisticTypes=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"esri/rest/support/ClassBreaksDefinition":function(){define(["exports","../../chunks/tslib.es6","../../core/jsonMap","../../core/JSONSupport","../../core/accessorSupport/decorators/property","../../core/has","../../core/Logger","../../core/RandomLCG","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/subclass"],(function(e,t,r,s,n,i,a,o,l,c){"use strict";const u=new r.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),d=new r.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});return e.default=class extends s{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}set definedInterval(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}},t.__decorate([l.enumeration({classBreaksDef:"class-breaks-definition"})],e.default.prototype,"type",void 0),t.__decorate([n.property({json:{write:!0}})],e.default.prototype,"breakCount",void 0),t.__decorate([n.property({json:{write:!0}})],e.default.prototype,"classificationField",void 0),t.__decorate([n.property({type:String,json:{read:u.read,write:u.write}})],e.default.prototype,"classificationMethod",void 0),t.__decorate([n.property({json:{write:!0}})],e.default.prototype,"normalizationField",void 0),t.__decorate([n.property({json:{read:d.read,write:d.write}})],e.default.prototype,"normalizationType",void 0),t.__decorate([n.property({value:null,json:{write:!0}})],e.default.prototype,"standardDeviationInterval",null),t.__decorate([n.property({value:null,json:{write:!0}})],e.default.prototype,"definedInterval",null),e.default=t.__decorate([c.subclass("esri.rest.support.ClassBreaksDefinition")],e.default),e.default}))},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],(function(e,t){"use strict";function r(e,t){return Number(e.toFixed(t))}function s(e,t,r){let s=null;return s=e===t?r&&"percent-of-total"===r?e+"%":e.toString():r&&"percent-of-total"===r?e+"% - "+t+"%":e+" - "+t,s}function n(e){const t=[],r=[];let s=Number.MIN_VALUE,n=1,i=-1;for(let a=0;a<e.length;a++){const o=e[a];o===s?(n++,r[i]=n):null!==o&&(t.push(o),s=o,n=1,r.push(n),i++)}return{uniqueValues:t,valueFrequency:r}}function i(e,t,r,s){let n=[],i=[],o=[],l=0;const c=[],u=[];for(let n=0;n<s;n++){const s=a(n,e,t,r);c.push(s.sbMean),u.push(s.sbSdcm),l+=u[n]}let d,h=l,f=!0;for(;f||l<h;){f=!1,n=[];for(let t=0;t<s;t++)n.push(e[t]);for(let r=0;r<s;r++)for(let n=e[r]+1;n<=e[r+1];n++)if(d=t[n],r>0&&n!==e[r+1]&&Math.abs(d-c[r])>Math.abs(d-c[r-1]))e[r]=n;else if(r<s-1&&e[r]!==n-1&&Math.abs(d-c[r])>Math.abs(d-c[r+1])){e[r+1]=n-1;break}h=l,l=0,i=[],o=[];for(let n=0;n<s;n++){i.push(c[n]),o.push(u[n]);const s=a(n,e,t,r);c[n]=s.sbMean,u[n]=s.sbSdcm,l+=u[n]}}if(l>h){for(let t=0;t<s;t++)e[t]=n[t],c[t]=i[t],u[t]=o[t];l=h}return{mean:c,sdcm:u}}function a(e,r,s,n){let i=0,a=0;for(let t=r[e]+1;t<=r[e+1];t++){const e=n[t];i+=s[t]*e,a+=e}a<=0&&t.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");const o=i/a;let l=0;for(let t=r[e]+1;t<=r[e+1];t++)l+=n[t]*(s[t]-o)**2;return{sbMean:o,sbSdcm:l}}e.createGenerateRendererClassBreaks=function(e,t){const{normalizationTotal:o}=e;return{classBreaks:function(e,t){const o=e.definition,{classificationMethod:l,normalizationType:c,definedInterval:u}=o,d=o.breakCount??1,h=[];let f=e.values;if(0===f.length)return[];f=f.sort(((e,t)=>e-t));const[p,m]=t??[f.at(0),f.at(-1)];if("equal-interval"===l)if(f.length>=d){const e=(m-p)/d;let t=p;for(let n=1;n<d;n++){const i=r(p+n*e,6);h.push({minValue:t,maxValue:i,label:s(t,i,c)}),t=i}h.push({minValue:t,maxValue:m,label:s(t,m,c)})}else f.forEach((e=>{h.push({minValue:e,maxValue:e,label:s(e,e,c)})}));else if("natural-breaks"===l){const t=n(f),o=e.valueFrequency||t.valueFrequency,l=function(e,t,r){const s=e.length,n=[];r>s&&(r=s);for(let e=0;e<r;e++)n.push(Math.round(e*s/r-1));n.push(s-1);let o=i(n,e,t,r);return function(e,t,r,s,n,i){let o=0,l=0,c=0,u=0,d=!0;for(let h=0;h<2&&d;h++){0===h&&(d=!1);for(let h=0;h<i-1;h++)for(;r[h+1]+1!==r[h+2];){r[h+1]=r[h+1]+1;const i=a(h,r,s,n);c=i.sbMean,o=i.sbSdcm;const f=a(h+1,r,s,n);if(u=f.sbMean,l=f.sbSdcm,!(o+l<t[h]+t[h+1])){r[h+1]=r[h+1]-1;break}t[h]=o,t[h+1]=l,e[h]=c,e[h+1]=u,d=!0}for(let h=i-1;h>0;h--)for(;r[h]!==r[h-1]+1;){r[h]=r[h]-1;const i=a(h-1,r,s,n);c=i.sbMean,o=i.sbSdcm;const f=a(h,r,s,n);if(u=f.sbMean,l=f.sbSdcm,!(o+l<t[h-1]+t[h])){r[h]=r[h]+1;break}t[h-1]=o,t[h]=l,e[h-1]=c,e[h]=u,d=!0}}return d}(o.mean,o.sdcm,n,e,t,r)&&(o=i(n,e,t,r)),n}(t.uniqueValues,o,d);let u=p;for(let e=1;e<d;e++)if(t.uniqueValues.length>e){const n=r(t.uniqueValues[l[e]],6);h.push({minValue:u,maxValue:n,label:s(u,n,c)}),u=n}h.push({minValue:u,maxValue:m,label:s(u,m,c)})}else if("quantile"===l)if(f.length>=d&&p!==m){let e=p,t=Math.ceil(f.length/d),r=0;for(let n=1;n<d;n++){let i=t+r-1;i>f.length&&(i=f.length-1),i<0&&(i=0),h.push({minValue:e,maxValue:f[i],label:s(e,f[i],c)}),e=f[i],r+=t,t=Math.ceil((f.length-r)/(d-n))}h.push({minValue:e,maxValue:m,label:s(e,m,c)})}else{let e=-1;for(let t=0;t<f.length;t++){const r=f[t];r!==e&&(e=r,h.push({minValue:e,maxValue:r,label:s(e,r,c)}),e=r)}}else if("standard-deviation"===l){const e=function(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t/=e.length,t}(f),t=function(e,t){let r=0;for(let s=0;s<e.length;s++){const n=e[s];r+=(n-t)*(n-t)}return r/=e.length,Math.sqrt(r)}(f,e);if(0===t)h.push({minValue:f[0],maxValue:f[0],label:s(f[0],f[0],c)});else{const n=function(e,t,r,s,n){let i=Math.max(s-e,t-s)/n/r;return i=i>=1?1:i>=.5?.5:.25,i}(p,m,d,e,t),i=n*t;let a=0,o=p;for(let t=d;t>=1;t--){const n=r(e-(t-.5)*i,6);h.push({minValue:o,maxValue:n,label:s(o,n,c)}),o=n,a++}let l=r(e+.5*i,6);h.push({minValue:o,maxValue:l,label:s(o,l,c)}),o=l,a++;for(let t=1;t<=d;t++)l=a===2*d?m:r(e+(t+.5)*i,6),h.push({minValue:o,maxValue:l,label:s(o,l,c)}),o=l,a++}}else if("defined-interval"===l){if(!u)return h;const[e,n]=t??[f.at(0),f.at(-1)],i=Math.ceil((n-e)/u);let a=e;for(let t=1;t<i;t++){const n=r(e+t*u,6);h.push({minValue:a,maxValue:n,label:s(a,n,c)}),a=n}h.push({minValue:a,maxValue:n,label:s(a,n,c)})}return h}(e,t),normalizationTotal:o}},e.createGenerateRendererUniqueValues=function(e){const t=n(e),r=[],s=t.uniqueValues.length;for(let e=0;e<s;e++){const s=t.uniqueValues[e],n=t.valueFrequency[e],i=s.toString();r.push({value:s,count:n,label:i})}return{uniqueValues:r}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}))},"*noref":1}}),define(["exports","./utils","../../../statistics/utils"],(function(e,t,r){"use strict";e.classBreaks=async function(e){const{attribute:s,features:n}=e,{field:i,normalizationType:a,normalizationField:o,normalizationTotal:l,classificationMethod:c}=s,u=await t.getDataValues({field:i,valueExpression:s.valueExpression,normalizationType:a,normalizationField:o,normalizationTotal:l,viewInfoParams:s.viewInfoParams,timeZone:s.timeZone,fieldInfos:s.fieldInfos},n),d=r.calculateClassBreaks(u,{field:i,normalizationType:a,normalizationField:o,normalizationTotal:l,classificationMethod:c,standardDeviationInterval:s.standardDeviationInterval,numClasses:s.numClasses,minValue:s.minValue,maxValue:s.maxValue});return r.resolveCBResult(d,c)},e.heatmapStatistics=async function(e){const{attribute:r,features:s}=e,{field:n,radius:i,transform:a,spatialReference:o}=r,l=r.size??[0,0],c=t.quantizeFeatures(s??[],a,o,l);return t.calculateHeatmapStats(c,i??void 0,n,l[0],l[1])},e.histogram=async function(e){const{attribute:s,features:n}=e,{field:i,normalizationType:a,normalizationField:o,normalizationTotal:l,classificationMethod:c}=s,u=await t.getDataValues({field:i,valueExpression:s.valueExpression,normalizationType:a,normalizationField:o,normalizationTotal:l,viewInfoParams:s.viewInfoParams,timeZone:s.timeZone,fieldInfos:s.fieldInfos},n);return r.calculateHistogram(u,{field:i,normalizationType:a,normalizationField:o,normalizationTotal:l,classificationMethod:c,standardDeviationInterval:s.standardDeviationInterval,numBins:s.numBins,minValue:s.minValue,maxValue:s.maxValue})},e.summaryStatistics=async function(e){const{attribute:s,features:n}=e,{normalizationType:i,normalizationField:a,minValue:o,maxValue:l,fieldType:c,outStatisticTypes:u}=s,d=await t.getDataValues({field:s.field,valueExpression:s.valueExpression,normalizationType:i,normalizationField:a,normalizationTotal:s.normalizationTotal,viewInfoParams:s.viewInfoParams,timeZone:s.timeZone,fieldInfos:s.fieldInfos},n),h=r.isNullCountSupported({normalizationType:i,normalizationField:a,minValue:o,maxValue:l}),f={value:.5,fieldType:c},p="esriFieldTypeString"===c?r.calculateStringStatistics({values:d,supportsNullCount:h,percentileParams:f,outStatisticTypes:u}):r.calculateStatistics({values:d,minValue:o,maxValue:l,useSampleStdDev:!i,supportsNullCount:h,percentileParams:f,outStatisticTypes:u});return r.processSummaryStatisticsResult(p,u,"esriFieldTypeDate"===c)},e.uniqueValues=async function(e){const{attribute:s,features:n}=e,i=await t.getDataValues({field:s.field,field2:s.field2,field3:s.field3,fieldDelimiter:s.fieldDelimiter,valueExpression:s.valueExpression,viewInfoParams:s.viewInfoParams,timeZone:s.timeZone,fieldInfos:s.fieldInfos},n,!1),a=r.calculateUniqueValuesCount(i);return r.createUVResult(a,s.domains,s.returnAllCodedValues,s.fieldDelimiter)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));