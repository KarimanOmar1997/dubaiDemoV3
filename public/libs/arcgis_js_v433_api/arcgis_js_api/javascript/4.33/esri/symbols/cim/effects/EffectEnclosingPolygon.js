// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../geometry/GeometryCursor","../../../geometry/SpatialReference","../../../geometry/support/boundsUtils","../enums"],(function(e,t,n,r,o){"use strict";class s{static{this.instance=null}static local(){return null===s.instance&&(s.instance=new s),s.instance}execute(e,t,n,r,o){return new i(e,t,n,o)}}class i{constructor(e,t,n,r){this._inputGeometries=e,this._medhod=t.method,this._geometryEngine=r}next(){let e=this._inputGeometries.next();const t=this._medhod;for(;null!=e;){if(e.totalSize>0)switch(t){case o.GeometricEffectEnclosingPolygonMethod.RectangularBox:return u(e);case o.GeometricEffectEnclosingPolygonMethod.ConvexHull:return this._constructConvexHull(e);default:return l(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const r=this._geometryEngine;if(null==r)return null;const o=r.convexHull(n.WebMercator,e.asJSON());return o?t.GeometryCursor.fromJSONCIM(o):null}case"esriGeometryEnvelope":return e;default:return null}}}function u(e){const n=r.getCursorBoundsXY(e),o={xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3]};return t.GeometryCursor.fromJSONCIM(o)}function l(e){switch(e.geometryType){case"esriGeometryPolyline":{const n=[];for(;e.nextPath();)c(e,n);return t.GeometryCursor.fromJSONCIM({rings:n})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return e;default:return null}}function c(e,t){if(e.seekPathStart(),!e.nextPoint())return;const n=e.x,r=e.y,o=[[n,r]];for(t.push(o);e.nextPoint();)o.push([e.x,e.y]);o.push([n,r])}e.EffectEnclosingPolygon=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));