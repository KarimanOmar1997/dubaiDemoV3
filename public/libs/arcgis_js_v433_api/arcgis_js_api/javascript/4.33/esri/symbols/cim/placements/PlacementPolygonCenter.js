// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../geometry/support/boundsUtils","../../../geometry/support/centroid","../../../geometry/support/labelPoint","../CIMPlacements","../enums"],(function(e,t,n,o,s,r){"use strict";class l{static{this.instance=null}static local(){return null===l.instance&&(l.instance=new l),l.instance}execute(e,t,n,o,s){return new i(e,t,n)}}class i{constructor(e,t,n){this._geometryCursor=e,this._offsetX=void 0!==t.offsetX?t.offsetX*n:0,this._offsetY=void 0!==t.offsetY?t.offsetY*n:0,this._method=void 0!==t.method?t.method:r.PlacementPolygonCenterMethod.OnPolygon,this._placementPerPart=void 0!==t.placePerPart&&t.placePerPart,this._internalPlacement=new s.Placement}next(){const e=this._geometryCursor;if(!e)return null;if(!this._placementPerPart)return this._geometryCursor=null,this._polygonCenter(e);for(;e.nextPath();)if(!(e.getCurrentRingArea()<0))return this._polygonCenter(e.getCurrentPath());return this._geometryCursor=null,null}_polygonCenter(e){let s=!1;switch(this._method){case r.PlacementPolygonCenterMethod.CenterOfMass:{const t=n.weightedAreaCentroid(e);t&&(this._internalPlacement.setTranslate(t[0]+this._offsetX,t[1]+this._offsetY),s=!0)}break;case r.PlacementPolygonCenterMethod.BoundingBoxCenter:{const n=t.getCursorBoundsXY(e);n&&(this._internalPlacement.setTranslate((n[2]+n[0])/2+this._offsetX,(n[3]+n[1])/2+this._offsetY),s=!0)}break;case r.PlacementPolygonCenterMethod.OnPolygon:default:{const t=o.getLabelPoint(e);null!==t&&(this._internalPlacement.setTranslate(t[0]+this._offsetX,t[1]+this._offsetY),s=!0)}}return s?this._internalPlacement:null}}e.PlacementPolygonCenter=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));