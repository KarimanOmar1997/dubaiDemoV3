// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["../../../../core/has","./enums","./WGLContainer","./brushes/WGLBrushStencil","./brushes/WGLBrushTileDebugInfo"],(function(e,r,s,t,n){"use strict";const a=(e,r)=>e.key.level-r.key.level!==0?e.key.level-r.key.level:e.key.row-r.key.row!==0?e.key.row-r.key.row:e.key.col-r.key.col;return class extends s{constructor(e){super(),this.tileInfoView=e,this.sortFunction=a}renderChildren(e){this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this.tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this.tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(s){const a=super.prepareRenderPasses(s);return a.push(s.registerRenderPass({name:"stencil",brushes:[t],drawPhase:r.WGLDrawPhase.DEBUG|r.WGLDrawPhase.MAP|r.WGLDrawPhase.HIGHLIGHT|r.WGLDrawPhase.LABEL,target:()=>this.getStencilTarget()})),e("esri-tiles-debug")&&a.push(s.registerRenderPass({name:"tileInfo",brushes:[n],drawPhase:r.WGLDrawPhase.DEBUG,target:()=>this.children})),a}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const e of this.children)e.stencilRef=r++}}}));