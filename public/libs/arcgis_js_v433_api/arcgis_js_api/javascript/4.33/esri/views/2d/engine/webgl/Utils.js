// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/Error","../../../../core/Logger","../../../webgl/enums","../../../webgl/getDataTypeBytes","../../../webgl/VertexElementDescriptor"],(function(e,t,r,n,a,s){"use strict";const i=()=>r.getLogger("esri.views.2d.engine.webgl.Utils");function o(e){const t=new Map;for(const r in e){const n=e[r];let i=0;t.set(r,n.map((e=>{const t=new s.VertexElementDescriptor(e.name,e.count,e.type,i,0,e.normalized||!1);return i+=e.count*a.getDataTypeBytes(e.type),t}))),t.get(r).forEach((e=>e.stride=i))}return t}const c=new Map;e.charCodes=function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t},e.createAttributeLayout=o,e.createProgramDescriptor=(e,t)=>{if(!c.has(e)){const r=o(t),n=(e=>{const t={};return e.forEach(((e,r)=>t[r]=e?.length?e[0].stride:0)),t})(r),a=(e=>{const t=new Map;for(const r in e)for(const n of e[r])t.set(n.name,n.location);return t})(t),s={strides:n,bufferLayouts:r,attributes:a};c.set(e,s)}return c.get(e)},e.getCIMMarkerPlacementHash=function(e){if(null==e)return"";const{type:t}=e;switch(t){case"CIMMarkerPlacementAlongLineRandomSize":return`${t}-${e.seed}-${e.randomization}`;case"CIMMarkerPlacementAlongLineVariableSize":return`${t}-${e.maxRandomOffset}-${e.numberOfSizes}-${e.seed}-${e.variationMethod}`;case"CIMMarkerPlacementAtExtremities":return`${t}-${e.extremityPlacement}-${e.offsetAlongLine}`;case"CIMMarkerPlacementAtRatioPositions":return`${t}-${e.beginPosition}-${e.endPosition}-${e.flipFirst}-${JSON.stringify(e.positionArray)}`;case"CIMMarkerPlacementAtMeasuredUnits":return`${t}-${e.interval}-${e.skipMarkerRate}-${e.placeAtExtremities}`;case"CIMMarkerPlacementInsidePolygon":return`${t}-${e.stepX}-${e.stepY}-${e.randomness}-${e.gridType}-${e.seed}-${e.shiftOddRows}`;case"CIMMarkerPlacementOnLine":return`${t}-${e.relativeTo}-${e.startPointOffset}`;case"CIMMarkerPlacementOnVertices":return`${t}-${e.placeOnControlPoints}-${e.placeOnEndPoints}-${e.placeOnRegularVertices}`;case"CIMMarkerPlacementPolygonCenter":return`${t}-${e.method}`;default:return`${t}`}},e.getPixelArrayCtor=function(e){switch(e){case n.PixelType.UNSIGNED_BYTE:return Uint8Array;case n.PixelType.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case n.PixelType.FLOAT:return Float32Array;default:return void i().error(new t("webgl-utils",`Unable to handle type ${e}`))}},e.getPixelBytes=function(e){switch(e){case n.PixelType.UNSIGNED_BYTE:return 1;case n.PixelType.UNSIGNED_SHORT_4_4_4_4:return 2;case n.PixelType.FLOAT:return 4;default:return void i().error(new t("webgl-utils",`Unable to handle type ${e}`))}},e.isSVGImage=e=>e.includes("data:image/svg+xml"),e.isValidSVG=e=>!!e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4)),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));