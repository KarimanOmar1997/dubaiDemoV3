// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","./FeatureTechnique","./TechniqueType","./mesh/MeshWriter","./shaders/TestShader","../../../../../webgl/enums"],(function(e,t,r,i,s,a){"use strict";const o={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:a.CompareFunction.EQUAL,mask:255,op:{fail:a.StencilOperation.KEEP,zFail:a.StencilOperation.KEEP,zPass:a.StencilOperation.REPLACE}}}};class n extends t.FeatureTechnique{constructor(){super(...arguments),this.type=r.TechniqueType.Test,this.shaders={geometry:new s.TestShader}}render(e,t){const{painter:r}=e,i=t.instance.getInput();r.setShader({shader:this.shaders.geometry,uniforms:{dataDrivenColor:i.uniforms.dataDrivenColor,view:{zoomLevel:1}},defines:{returnRed:!1},optionalAttributes:{},useComputeBuffer:!1}),r.setPipelineState(o),r.submitDraw(e,t)}}const c={createComputedParams:e=>e,optionalAttributes:{},attributes:{pos:{type:a.DataType.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:a.DataType.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:a.DataType.UNSIGNED_BYTE,count:1},size:{type:a.DataType.UNSIGNED_BYTE,count:1,packPrecisionFactor:10,pack:e=>.2},offset:{type:a.DataType.INT,count:2,packPrecisionFactor:10,packAlternating:{count:4,pack:()=>[[-1,1],[1,1],[-1,-1],[1,-1]]}},color:{type:a.DataType.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:e})=>e}}};class p extends i.MeshWriter{constructor(){super(...arguments),this.vertexSpec=c}_write(e,t){e.recordStart(this.instanceId,this.attributeLayout);const r=e.vertexCount(),i=t.readXForDisplay(),s=t.readYForDisplay();this._writeVertex(e,655360,i,s),e.indexWrite(r+0),e.indexWrite(r+1),e.indexWrite(r+2),e.indexWrite(r+1),e.indexWrite(r+3),e.indexWrite(r+2),e.recordEnd()}}e.TestMeshWriter=p,e.TestTechnique=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));