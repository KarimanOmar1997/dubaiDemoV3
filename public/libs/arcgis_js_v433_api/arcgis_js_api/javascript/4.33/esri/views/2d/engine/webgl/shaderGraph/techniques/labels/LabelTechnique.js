// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../enums","../FeatureTechnique","../featureTechniqueUtils","../TechniqueType","../text/TextShader","../../../../../../webgl/enums"],(function(e,t,s,a,r,i,n){"use strict";class o extends s.FeatureTechnique{constructor(){super(...arguments),this.type=r.TechniqueType.Label,this.shaders={geometry:new i.TextShader},this.drawPhase=t.WGLDrawPhase.LABEL|t.WGLDrawPhase.LABEL_ALPHA|t.WGLDrawPhase.HITTEST,this.symbologyPlane=t.FeatureSymbologyDrawOrder.TEXT}render(e,t){const{context:s,painter:r}=e,o=a.getSelectionDefines(e),u={...a.getFeaturePipelineState(e),stencil:{write:!1,test:{ref:()=>255,compare:n.CompareFunction.GREATER,mask:255,op:{fail:n.StencilOperation.KEEP,zFail:n.StencilOperation.KEEP,zPass:n.StencilOperation.KEEP}}}},l=t.instance.getInput(),c={shader:this.shaders.geometry,uniforms:{...a.resolveDynamicUniforms(e,t.target,l.uniforms),...a.getFeatureUniforms(e,t.target),mosaicInfo:r.textureManager.getMosaicInfo(s,t.textureKey)},defines:{...o,textRenderPassType:i.TextRenderPassType.Color,isBackgroundPass:!0,isLabel:!0},optionalAttributes:l.optionalAttributes,useComputeBuffer:a.isHittest(e)};r.setPipelineState(u),r.setShader(c),r.submitDraw(e,t),r.setShader({...c,defines:{...o,textRenderPassType:i.TextRenderPassType.Halo,isBackgroundPass:!1,isLabel:!0}}),r.submitDraw(e,t),r.setShader({...c,defines:{...o,textRenderPassType:i.TextRenderPassType.Color,isBackgroundPass:!1,isLabel:!0}}),r.submitDraw(e,t)}}e.LabelTechnique=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));