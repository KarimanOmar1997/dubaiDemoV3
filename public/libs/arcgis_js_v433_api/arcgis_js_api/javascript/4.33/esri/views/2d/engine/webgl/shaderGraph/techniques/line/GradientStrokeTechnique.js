// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../enums","../FeatureTechnique","../featureTechniqueUtils","../TechniqueType","./utils","../shaders/GradientStrokeShader","../../../../../../webgl/enums"],(function(e,t,i,r,n,s,a,o){"use strict";class c extends i.FeatureTechnique{constructor(){super(...arguments),this.type=n.TechniqueType.GradientStroke,this.shaders={geometry:new a.GradientStrokeShader},this.symbologyPlane=t.FeatureSymbologyDrawOrder.LINE}_getShaderOptions(e,t,i){const{context:n,painter:a,pixelRatio:o}=e,c=t.instance.getInput();return{shader:this.shaders.geometry,uniforms:{...r.resolveDynamicUniforms(e,t.target,c.uniforms),...r.getFeatureUniforms(e,t.target),antialiasingControls:s.getAntialiasingControls(o),mosaicInfo:a.textureManager.getMosaicInfo(n,t.textureKey),technique:{isColorPass:i}},defines:{...r.getSelectionDefines(e)},optionalAttributes:c.optionalAttributes,useComputeBuffer:r.isHittest(e)}}render(e,t){const{painter:i}=e;if(r.isHittest(e)||r.isHighlight(e)){const n=r.getFeaturePipelineState(e);return i.setPipelineState(n),i.setShader(this._getShaderOptions(e,t,1)),void i.submitDraw(e,t)}e.context.setClearDepth(1),e.context.clear(o.FramebufferBit.DEPTH);const n={color:!1,depth:{write:{zNear:0,zFar:1},test:o.CompareFunction.LESS},stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:o.CompareFunction.EQUAL,mask:255,op:{fail:o.StencilOperation.KEEP,zFail:o.StencilOperation.KEEP,zPass:o.StencilOperation.KEEP}}}};i.setShader(this._getShaderOptions(e,t,0)),i.setPipelineState(n),i.submitDraw(e,t);const s={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:{write:!1,test:o.CompareFunction.LEQUAL},stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:o.CompareFunction.EQUAL,mask:255,op:{fail:o.StencilOperation.KEEP,zFail:o.StencilOperation.KEEP,zPass:o.StencilOperation.KEEP}}}};i.setShader(this._getShaderOptions(e,t,1)),i.setPipelineState(s),i.submitDraw(e,t)}}e.GradientStrokeTechnique=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));