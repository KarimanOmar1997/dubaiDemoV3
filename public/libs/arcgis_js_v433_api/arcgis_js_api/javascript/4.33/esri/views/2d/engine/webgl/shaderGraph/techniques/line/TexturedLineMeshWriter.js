// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../../../core/screenUtils","../../../../../../../geometry/GeometryCursor","../../../../../../../symbols/cim/enums","../../../definitions","../fill/meshWriterUtils","./LineMeshWriter","../shaders/constants","../../../../../../webgl/enums"],(function(e,t,s,i,r,a,n,c,o){"use strict";const p={createComputedParams:e=>e,optionalAttributes:n.LineVertexSpec.optionalAttributes,attributes:{...n.LineVertexSpec.attributes,bitset:{type:o.DataType.UNSIGNED_BYTE,count:1,pack:({shouldSampleAlphaOnly:e,shouldScaleDash:t,isSDF:s})=>a.packBitset([[c.bitsetGenericConsiderAlphaOnly,e],[c.bitsetLineScaleDash,t],[c.bitsetLineIsSdf,s]])},tlbr:{type:o.DataType.UNSIGNED_SHORT,count:4,pack:({sprite:e})=>{const{rect:t,width:s,height:i}=e,a=t.x+r.spritePadding,n=t.y+r.spritePadding;return[a,n,a+s,n+i]}},accumulatedDistance:{type:o.DataType.UNSIGNED_SHORT,count:1,packTessellation:({distance:e})=>e},segmentDirection:{type:o.DataType.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:e,directionY:t})=>[e,t]},offsetAlongLine:{type:o.DataType.HALF_FLOAT,count:1,pack:({offsetAlongLine:e})=>t.pt2px(e)},capType:{type:o.DataType.UNSIGNED_BYTE,count:1,pack:({capType:e})=>{switch(e){case i.LineCapStyle.Butt:case"butt":return 0;case i.LineCapStyle.Square:case"square":return 1;case i.LineCapStyle.Round:case"round":return 2;default:return 0}}}}};class u extends n.LineMeshWriter{constructor(e,t,s,i){super(e,t,s,i),this.vertexSpec=p,this._tessellationOptions.textured=!0}_write(e,t,i){const r=i??s.GeometryCursor.fromFeatureSetReaderCIM(t);if(!r)return;const{sprite:a}=this.evaluatedMeshParams;this._writeGeometry(e,t,r,a?.textureBinding)}}e.TexturedLineMeshWriter=u,e.texturedLineVertexSpec=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));