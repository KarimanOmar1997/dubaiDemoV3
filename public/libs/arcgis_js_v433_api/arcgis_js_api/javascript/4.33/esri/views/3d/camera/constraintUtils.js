// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","./constraintUtils/altitude","./constraintUtils/common","./constraintUtils/ConstraintOptions","./constraintUtils/ConstraintTypes","./constraintUtils/distance","./constraintUtils/InteractionType","./constraintUtils/surfaceCollision","./constraintUtils/tilt","../../animation/easing"],(function(t,n,i,e,o,r,s,a,c,p){"use strict";const l=[{type:o.ConstraintTypes.TILT,error:function(t,n,i){return c.getTiltConstraintError(t,n,i)*n.distance},apply:c.applyTiltConstraint},{type:o.ConstraintTypes.ALTITUDE,error:n.getAltitudeConstraintError,apply:n.applyAltitudeConstraint},{type:o.ConstraintTypes.DISTANCE,error:r.getDistanceConstraintError,apply:r.applyDistanceConstraint}],y=new e.ConstraintOptions;t.applyAll=function(t,n,e=y,r=n){r!==n&&r.copyFrom(n),r.computeUp(t.state.viewingMode);let c=!1;for(let n=0;n<5;n++){let n=0;for(const o of l)if(i.hasConstraintType(e.selection,o.type)){const i=Math.abs(o.error(t,r,e));o.apply(t,r,e)&&(c=!0,n+=i)}if(0===n)break}const p=i.hasConstraintType(e.selection,o.ConstraintTypes.COLLISION),C=function(t,n){switch(t){case s.InteractionType.PAN:return a.Mode.EYE_AND_CENTER;case s.InteractionType.ASCEND:return n.state.isGlobal?a.Mode.EYE_AND_CENTER_SCALE:a.Mode.EYE_AND_CENTER;default:return a.Mode.EYE}}(e.interactionType,t);return p&&a.applySurfaceCollisionConstraint(t,r,C)&&(c=!0),c&&r.computeUp(t.state.viewingMode),c},t.pixelDistanceToInteractionFactor=function(t){const n=Math.min(1,t/150);return p.inOutCubic(n)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));