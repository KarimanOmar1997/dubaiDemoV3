// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../intersectionUtils"],(function(e,t,o,n){"use strict";var r;e.Mode=void 0,(r=e.Mode||(e.Mode={}))[r.EYE=0]="EYE",r[r.EYE_AND_CENTER=1]="EYE_AND_CENTER",r[r.EYE_AND_CENTER_SCALE=2]="EYE_AND_CENTER_SCALE";const E=o.create(),i=o.create();e.applySurfaceCollisionConstraint=function(o,r,c=e.Mode.EYE){const s=o.state.constraints;if(!s.collision.enabled)return!1;const l=n.surfaceElevationBelowRenderLocation(o,r.eye),a=o.renderCoordsHelper.getAltitude(r.eye),d=l+s.collision.elevationMargin;if(a>=d)return!1;const _=t.length(r.eye);if(t.subtract(E,r.center,r.eye),r.eye=o.renderCoordsHelper.setAltitude(i,d,r.eye),c===e.Mode.EYE_AND_CENTER)r.center=t.add(E,r.eye,E);else if(c===e.Mode.EYE_AND_CENTER_SCALE){const e=(_-a+d)/_;r.center=t.scale(E,r.center,e)}return!0},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));