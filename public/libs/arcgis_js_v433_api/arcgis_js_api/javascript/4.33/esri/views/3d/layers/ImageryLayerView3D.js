// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["../../../chunks/tslib.es6","../../../core/handleUtils","../../../core/has","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/Logger","../../../core/RandomLCG","../../../core/accessorSupport/decorators/subclass","./DynamicLayerView3D","./FlowSubView3D","./ImagerySubView3D","./support/ImageHighlightHelper3D","../../layers/ImageryLayerView"],(function(e,t,i,r,s,a,h,l,n,d,o,p,g){"use strict";let u=class extends(g(n)){constructor(){super(...arguments),this.type="imagery-3d"}get highlightOptions(){return null}get pixelData(){return null}initialize(){const e=()=>this._updatingHandles.addPromise(this.refreshDebounced());this._updatingHandles.add((()=>this.layer?.exportImageServiceParameters?.version),e),this._updatingHandles.add((()=>this.layer?.renderer),e),this._updatingHandles.add((()=>this.timeExtent),e),this._highlightHelper=new p.ImageHighlightHelper3D({view:this.view,layer:this.layer,updatingHandles:this._updatingHandles}),this.addHandles([t.destroyHandle(this._highlightHelper),r.watch((()=>this.suspended),(e=>this._highlightHelper.suspended=e),r.syncAndInitial)])}_initSubView(){this.addHandles([r.watch((()=>this.layer.renderer),(e=>this._recreateSubView(e)),r.initial)])}_recreateSubView(e){const t="flow"===e?.type,r="flow"===this.subView?.type,s=this.subView;s&&t===r||(this.subView=t&&i("enable-feature:3d-flow")?new d({layerView:this}):new o({layerView:this}),s?.destroy())}getFetchOptions(){return{timeExtent:this.timeExtent}}highlight(e,t){return this._highlightHelper.highlight(e,t)}isUpdating(){return super.isUpdating()||this._highlightHelper.updating}};return e.__decorate([s.property()],u.prototype,"highlightOptions",null),e.__decorate([s.property()],u.prototype,"pixelData",null),u=e.__decorate([l.subclass("esri.views.3d.layers.ImageryLayerView3D")],u),u}));