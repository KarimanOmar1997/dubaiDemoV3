// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["require","exports","./ComponentTechniqueConfiguration","../../../../../../chunks/ComponentShader.glsl","../../../core/shaderLibrary/ShaderOutput","../../../core/shaderTechnique/ReloadableShaderModule","../../../core/shaderTechnique/ShaderTechnique","../../../lib/basicInterfaces","../../../lib/OITPass","../../../lib/OrderIndependentTransparency","../../../lib/StencilUtils","../../../lib/VertexAttribute","../../../../../webgl/renderState"],(function(e,t,r,n,l,i,s,a,o,u,d,c,h){"use strict";class O extends s.ShaderTechnique{constructor(t,r){super(t,r,new i.ReloadableShaderModule(n.ComponentShader,(()=>new Promise(((t,r)=>e(["./shader/ComponentShader.glsl"],t,r))))),p)}initializePipeline(e){const{integratedMeshMode:t,output:n,blendingEnabled:i,cullFace:c,hasOccludees:O,hasPolygonOffset:p,oitPass:b,renderOccluded:f}=e,g=t!==r.IntegratedMeshMode.None,T=b===o.OITPass.NONE,S=b===o.OITPass.FrontFace;return h.makePipelineState({blending:f?h.premultipliedAlpha:l.isColorOrColorEmission(n)&&i?u.blending(b):null,culling:h.cullingParams(c),depthTest:f?null:{func:u.oitDepthTest(b)},depthWrite:f||!T&&!S?null:h.defaultDepthWrite,drawBuffers:s.depthOnlyOutputBuffersOr(n,u.getDrawBuffers(b,n)),colorWrite:h.defaultColorWrite,stencilWrite:!f&&g||O?d.stencilWriteMaskOn:null,stencilTest:g?d.replaceBitWhenDepthTestPasses(a.StencilBits.IntegratedMeshMaskExcluded):O?d.stencilBaseAllZerosParams:null,polygonOffset:T||S?p?{factor:2,units:2}:null:u.OITPolygonOffset})}}const p=new Map([[c.VertexAttribute.POSITION,0],[c.VertexAttribute.NORMAL,1],[c.VertexAttribute.NORMALCOMPRESSED,1],[c.VertexAttribute.COLOR,2],[c.VertexAttribute.UV0,3],[c.VertexAttribute.UVREGION,4],[c.VertexAttribute.COMPONENTINDEX,5]]);t.ComponentTechnique=O,t.vertexAttributeLocations=p,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));