// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/MemCachePool","../../../../core/PooledArray"],(function(t,e,s){"use strict";t.FBOPool=class{constructor(t,i){this._last=new s,this._incarnation=0,this._cache=new e.MemCachePool(t,i)}destroy(){this._last?.forAll((t=>t.dispose())),this._last=null,this._cache.destroy()}set interactive(t){t&&!this._last?this._last=new s:t||(this._last?.forAll((t=>t.dispose())),this._last=null)}clean(){this._last?.filterInPlace((t=>!(t.incarnation<this._incarnation&&(this._cache.put(t.key,t),1))))}frame(){++this._incarnation}pop(t){if(this._last){const e=this._last.find((e=>e.key===t));if(e)return this._last.removeUnordered(e),e}return this._cache.pop(t)}put(t){t.incarnation=this._incarnation,this._last?this._last.push(t):this._cache.put(t.key,t)}get usedMemory(){return this._last?.reduce(((t,e)=>t+e.cachedMemory),0)??0}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));