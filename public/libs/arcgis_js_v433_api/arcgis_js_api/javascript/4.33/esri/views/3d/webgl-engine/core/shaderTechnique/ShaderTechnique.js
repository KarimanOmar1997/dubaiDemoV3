// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/Logger","../../../../../core/maybe","../shaderLibrary/ShaderOutput","../../lib/DefaultVertexAttributeLocations","../../lib/Program","../../../../webgl/enums","../../../../webgl/renderState"],(function(e,i,t,r,a,n,o,s){"use strict";e.ShaderTechnique=class{constructor(e,r,s,l=a.Default3D){this.locations=l,this.primitiveType=o.PrimitiveType.TRIANGLES,this.key=r.key,this._program=new n.Program(e.rctx,s.get().build(r),l),this._pipeline=this.initializePipeline(r),this.reload=async a=>{a&&await s.reload(),this.key.equals(r.key)||i.getLogger("esri.views.3d.webgl.ShaderTechnique").warn("Configuration was changed after construction, cannot reload shader.",s),t.disposeMaybe(this._program),this._program=new n.Program(e.rctx,s.get().build(r),l),this._pipeline=this.initializePipeline(r)}}destroy(){this._program=t.disposeMaybe(this._program),this._pipeline=null}get program(){return this._program}get compiled(){return this.program.compiled}ensureAttributeLocations(e){this.program.assertCompatibleVertexAttributeLocations(e)}getPipeline(e,i){return this._pipeline}initializePipeline(e){return s.makePipelineState({blending:s.premultipliedAlpha,colorWrite:s.defaultColorWrite})}},e.depthOnlyOutputBuffersOr=function(e,i){return r.isDepthOnlyOutput(e)?{buffers:[o.SpecialDrawBuffers.NONE]}:i??null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));