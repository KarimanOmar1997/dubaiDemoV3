// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/tslib.es6","../../../../../core/accessorSupport/decorators/property","../../../../../core/has","../../../../../core/Logger","../../../../../core/RandomLCG","../../../../../core/accessorSupport/decorators/subclass","../../../webgl","../../../webgl/RenderNode","./FocusAreaColorTechnique","./FocusAreaEffect","../../../../../chunks/FocusAreaColor.glsl","../../../../webgl/enums"],(function(e,r,o,s,t,c,a,n,u,i,d,l,p){"use strict";e.FocusAreaColorNode=class extends u{constructor(e){super({...e,view:e.focusAreasView.view}),this.consumes={required:[n.InternalRenderCategory.FOCUSAREA_COLOR,n.InternalRenderCategory.FOCUSAREA]},this.produces=n.InternalRenderCategory.FOCUSAREA_COLOR,this._passParameters=new l.FocusAreaColorPassParameters}precompile(){this.techniques.precompile(i.FocusAreaColorTechnique)}render(e){const r=this.techniques.get(i.FocusAreaColorTechnique),o=e.find((({name:e})=>e===this.produces));if(!r.compiled)return this.requestRender(),o;const s=this.focusAreasView.style,t=this.bindParameters,c=t.camera,a=c.fullViewport[2],u=c.fullViewport[3],d=e.find((({name:e})=>e===n.InternalRenderCategory.FOCUSAREA)),l=this.fboCache.acquire(a,u,this.produces),A=this.renderingContext;return A.bindFramebuffer(l.fbo),this._passParameters.color=o.getTexture(),this._passParameters.focusArea=d.getTexture(),this._passParameters.effect=h[s],A.bindTechnique(r,t,this._passParameters),A.screen.draw(),l.attachDepth(o.getAttachment(p.DepthStencilAttachment)),l}},r.__decorate([o.property()],e.FocusAreaColorNode.prototype,"consumes",void 0),r.__decorate([o.property()],e.FocusAreaColorNode.prototype,"produces",void 0),r.__decorate([o.property({constructOnly:!0})],e.FocusAreaColorNode.prototype,"focusAreasView",void 0),e.FocusAreaColorNode=r.__decorate([a.subclass("esri.views.3d.webgl-engine.effects.focusArea.FocusAreaColorNode")],e.FocusAreaColorNode);const h={bright:d.FocusAreaEffect.BRIGHT,dark:d.FocusAreaEffect.DARK};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));