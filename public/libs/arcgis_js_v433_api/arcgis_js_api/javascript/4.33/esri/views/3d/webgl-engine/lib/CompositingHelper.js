// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["../../../../chunks/Compositing.glsl","../shaders/CompositingTechnique","../shaders/CompositingTechniqueConfiguration","../../../../chunks/HUDCompositing.glsl","../shaders/HUDCompositingTechnique"],(function(i,t,e,s,o){"use strict";return class{constructor(n,h){this._rctx=n,this._techniques=h,this._configuration=new e.CompositingTechniqueConfiguration,this._passParameters=new i.CompositingPassParameters,this._hudParameters=new s.HUDCompositingPassParameters,this._configuration.blitMode=e.BlitMode.PremultipliedAlpha,this._techniques.precompile(t.CompositingTechnique,this._configuration),this._configuration.hasOpacityFactor=!0,this._techniques.precompile(t.CompositingTechnique,this._configuration),this._configuration.hasOpacityFactor=!1,this._configuration.blitMode=e.BlitMode.Alpha,this._techniques.precompile(t.CompositingTechnique,this._configuration),this._configuration.blitMode=e.BlitMode.Depth,this._techniques.precompile(t.CompositingTechnique,this._configuration),this._techniques.precompile(o.HUDCompositingTechnique)}compositeHUD(i,t){this._hudParameters.texture=t;const e=this._techniques.get(o.HUDCompositingTechnique);this._rctx.bindTechnique(e,i,this._hudParameters),this._rctx.screen.draw()}compositePreMultipliedAlpha(i,t,s=1){this._composite(i,t,e.BlitMode.PremultipliedAlpha,s)}composite(i,t){this._composite(i,t,e.BlitMode.Alpha,1)}blitDepthToLinearDepth(i,t){this._composite(i,t,e.BlitMode.Depth,1)}_composite(i,e,s,o){this._configuration.blitMode=s,this._configuration.hasOpacityFactor=1!==o,this._passParameters.texture=e,this._passParameters.opacity=o;const n=this._techniques.get(t.CompositingTechnique,this._configuration);this._rctx.bindTechnique(n,i,this._passParameters),this._rctx.screen.draw()}}}));