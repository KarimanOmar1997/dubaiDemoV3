// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/floatRGBA","./ProceduralTextureRepository","../../../webgl/enums","../../../webgl/Texture","../../../webgl/TextureDescriptor"],(function(e,t,r,o,n,u){"use strict";function i(e){return e.pattern.map((t=>Math.round(t*e.pixelRatio)))}function a(e){if(null==e)return 1;const t=i(e);return Math.floor(t.reduce(((e,t)=>e+t)))}function c(e){return i(e).reduce(((e,t)=>Math.max(e,t)))}e.computeLongestPattern=c,e.computeTextureSize=a,e.createStippleTextureRepository=function(e,l){return new r.ProceduralTextureRepository((r=>{const{encodedData:l,textureSize:p}=function(e){const r=i(e),o=1/e.pixelRatio,n=a(e),u=c(e),l=(Math.floor(.5*(u-1))+.5)*o,p=[];let s=1;for(const e of r){for(let t=0;t<e;t++){const r=s*(Math.min(t,e-1-t)+.5)*o/l*.5+.5;p.push(r)}s=-s}const f=Math.round(r[0]/2),x=[...p.slice(f),...p.slice(0,f)],d=new Uint8Array(4*n);let T=0;for(const e of x)t.packFloatRGBA(e,d,T),T+=4;return{encodedData:d,textureSize:n}}(r),s=new u.TextureDescriptor;return s.internalFormat=o.PixelFormat.RGBA,s.width=p,s.height=1,s.wrapMode=o.TextureWrapMode.REPEAT,new n.Texture(e,s,l)}),(e=>`${e.pattern.join(",")}-r${e.pixelRatio}`),l)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));