// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/libs/gl-matrix-2/factories/vec4f64","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/OITPass","../lib/OrderIndependentTransparency","../lib/StencilUtils","../materials/VisualVariablePassParameters","../../../../chunks/ColorMaterial.glsl","../../../webgl/renderState"],(function(e,r,t,l,i,a,s,n,o,c,u,d){"use strict";class p extends c.VisualVariablePassParameters{constructor(){super(...arguments),this.color=t.ZEROS}}class h extends a.ShaderTechnique{constructor(r,t){super(r,t,new i.ReloadableShaderModule(u.ColorMaterial,(()=>new Promise(((r,t)=>e(["./ColorMaterial.glsl"],r,t))))))}_createPipeline(e,r){const{oitPass:t,output:i,transparent:c,cullFace:u,draped:p,hasOccludees:h,polygonOffset:f}=e,g=t===s.OITPass.NONE;return d.makePipelineState({blending:l.isColorOrColorEmission(i)&&c?n.blending(t):null,culling:d.cullingParams(u),depthTest:p?null:{func:n.oitDepthTest(t)},depthWrite:n.depthWrite(e),drawBuffers:a.depthOnlyOutputBuffersOr(i,n.getDrawBuffers(t,i)),colorWrite:d.defaultColorWrite,stencilWrite:h?o.stencilWriteMaskOn:null,stencilTest:h?r?o.stencilToolMaskBaseParams:o.stencilBaseAllZerosParams:null,polygonOffset:g?f?P:null:n.oitPolygonOffset(e)})}initializePipeline(e){return this._occludeePipelineState=this._createPipeline(e,!0),this._createPipeline(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const P={factor:1,units:1};r.ColorMaterialPassParameters=p,r.ColorMaterialTechnique=h,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})}));