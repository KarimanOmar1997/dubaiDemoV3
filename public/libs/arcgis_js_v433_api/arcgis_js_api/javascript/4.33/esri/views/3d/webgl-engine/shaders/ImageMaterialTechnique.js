// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["require","exports","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/OITPass","../lib/OrderIndependentTransparency","../lib/StencilUtils","../lib/VertexAttribute","../../../../chunks/ImageMaterial.glsl","../../../webgl/renderState"],(function(e,t,i,r,l,a,n,s,o,u,c){"use strict";class d extends l.ShaderTechnique{constructor(t,i){super(t,i,new r.ReloadableShaderModule(u.ImageMaterial,(()=>new Promise(((t,i)=>e(["./ImageMaterial.glsl"],t,i))))),p)}_getPipelineState(e,t){const{oitPass:r,output:l,hasOccludees:o,cullFace:u}=e,d=r===a.OITPass.NONE;return c.makePipelineState({blending:i.isColorOrColorEmission(l)?d?c.premultipliedAlpha:n.oitBlending(r):null,culling:c.cullingParams(u),depthTest:{func:n.oitDepthTest(r)},depthWrite:n.depthWrite(e),drawBuffers:n.getDrawBuffers(r,l),colorWrite:c.defaultColorWrite,stencilWrite:o?s.stencilWriteMaskOn:null,stencilTest:o?t?s.stencilToolMaskBaseParams:s.stencilBaseAllZerosParams:null,polygonOffset:n.oitPolygonOffset(e)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const p=new Map([[o.VertexAttribute.POSITION,0],[o.VertexAttribute.UV0,2],[o.VertexAttribute.PERSPECTIVEDIVIDE,3]]);t.ImageMaterialTechnique=d,t.vertexAttributeLocations=p,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));