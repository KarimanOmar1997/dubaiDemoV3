// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["require","exports","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../effects/geometry/olidUtils","../lib/OITPass","../lib/OrderIndependentTransparency","../lib/StencilUtils","../lib/VertexAttribute","../../../../chunks/Pattern.glsl","../../../webgl/renderState"],(function(e,t,r,i,l,n,s,a,u,o,c,d){"use strict";class O extends l.ShaderTechnique{constructor(t,r){super(t,r,new i.ReloadableShaderModule(c.Pattern,(()=>new Promise(((t,r)=>e(["./Pattern.glsl"],t,r))))),n.olidEnabled()?b:P)}_setPipelineState(e,t){const{oitPass:i,output:n,cullFace:o,draped:c,hasOccludees:O,polygonOffset:P}=e,b=i===s.OITPass.NONE;return d.makePipelineState({blending:r.isColorOrColorEmission(n)?a.blending(i):null,culling:d.cullingParams(o),depthTest:c?null:{func:a.oitDepthTest(i)},depthWrite:a.depthWrite(e),drawBuffers:l.depthOnlyOutputBuffersOr(n,a.getDrawBuffers(i,n)),colorWrite:d.defaultColorWrite,stencilWrite:O?u.stencilWriteMaskOn:null,stencilTest:O?t?u.stencilToolMaskBaseParams:u.stencilBaseAllZerosParams:null,polygonOffset:b?P?p:null:a.oitPolygonOffset(e)})}initializePipeline(e){return this._occludeePipelineState=this._setPipelineState(e,!0),this._setPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const p={factor:1,units:1},P=new Map([[o.VertexAttribute.POSITION,0],[o.VertexAttribute.COLOR,3],[o.VertexAttribute.UVMAPSPACE,4],[o.VertexAttribute.COLORFEATUREATTRIBUTE,5],[o.VertexAttribute.BOUNDINGRECT,6]]),b=new Map([[o.VertexAttribute.POSITION,0],[o.VertexAttribute.COLOR,3],[o.VertexAttribute.UVMAPSPACE,4],[o.VertexAttribute.COLORFEATUREATTRIBUTE,5],[o.VertexAttribute.BOUNDINGRECT,6],[o.VertexAttribute.OLIDCOLOR,9]]);t.PatternTechnique=O,t.vertexAttributeLocations=P,t.vertexAttributeLocationsOID=b,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));