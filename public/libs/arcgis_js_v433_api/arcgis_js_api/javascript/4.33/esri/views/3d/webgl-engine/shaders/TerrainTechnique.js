// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["require","exports","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/basicInterfaces","../lib/StencilUtils","../lib/VertexAttribute","../../../../chunks/Terrain.glsl","../../../webgl/enums","../../../webgl/renderState"],(function(e,t,i,r,n,l,u,a,s,c){"use strict";class d extends r.ShaderTechnique{constructor(t,r){super(t,r,new i.ReloadableShaderModule(a.Terrain,(()=>new Promise(((t,i)=>e(["./Terrain.glsl"],t,i))))),h),this.type="TerrainTechnique",this.useStencil=!1}initializePipeline(e){return this._stencilPipelineState=this._createPipeline(e,!0),this._createPipeline(e,!1)}_createPipeline(e,t){const{renderOccluded:i,output:u}=e,a=e.backfaceCullingEnabled&&!i;return c.makePipelineState({blending:i?c.premultipliedAlpha:null,culling:a?c.backFaceCullingParams:null,depthTest:i?null:{func:s.CompareFunction.LESS},depthWrite:i?null:c.defaultDepthWrite,colorWrite:c.defaultColorWrite,stencilTest:t?l.renderWhenBitIsNotSet(n.StencilBits.IntegratedMeshMaskExcluded):null,drawBuffers:r.depthOnlyOutputBuffersOr(u)})}getPipeline(){return this.useStencil?this._stencilPipelineState:super.getPipeline()}}const h=new Map([[u.VertexAttribute.POSITION,0],[u.VertexAttribute.UV0,1],[u.VertexAttribute.NORMALCOMPRESSED,2]]);t.TerrainTechnique=d,t.vertexAttributeLocations=h,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));