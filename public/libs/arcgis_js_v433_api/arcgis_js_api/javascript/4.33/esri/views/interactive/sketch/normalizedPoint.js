// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/libs/gl-matrix-2/factories/vec3f64","../../../layers/graphics/dehydratedPoint","../../../support/elevationInfoUtils"],(function(e,t,n,o){"use strict";var r;function i(e=0,n=0,o=0){return t.fromValues(e,n,o)}function l(e,t,n,r=i()){return r[0]=e.x,r[1]=e.y,r[2]=e.z??0,null==t||("2d"===t.type?r[2]=0:r[2]=o.getConvertedElevation(t,e,n,o.absoluteHeightElevationInfo)??0),r}!function(e){e[e.NONE=0]="NONE",e[e.TARGET=1]="TARGET"}(r||(r={}));const a=n.makeDehydratedPoint(0,0,0,null);e.asVec2=function(e){return e},e.clone=function(e){const[t,n,o]=e;return e.length>3?[t,n,o,e[3]]:[t,n,o]},e.create=function(e,t,n){return i(e,t,n)},e.createWritable=i,e.fromAnyMapPoint=function(e,t,{coordinateHelper:n,elevationInfo:o},r){return e?l(n.vectorToDehydratedPoint(e,a),t,o,r):null},e.fromPoint=l,e.fromValues=function(e,n,o){return t.fromValues(e,n,o)},e.fromVec3=function(e){return e},e.isTarget=function(e){return Boolean(((e.length>3?e[3]:void 0)??r.NONE)&r.TARGET)},e.markAsTarget=function(e){return e[3]=((e.length>3?e[3]:void 0)??r.NONE)|r.TARGET,e},e.toDehydratedPoint=function(e,t,o){return o?(n.setDehydratedPoint(o,e[0],e[1],e[2],t),o):n.makeDehydratedPoint(e[0],e[1],e[2],t)},e.toElevationAlignedDehydratedPoint=function(e,t,{z:r,m:i},l,a){const{spatialReference:u,elevationInfo:c}=l;let f;if(null==r&&null==i)f=void 0;else if(null==t||"2d"===t.type)f=r??void 0;else{const n=o.absoluteHeightElevationInfo;f=o.getConvertedElevationFromVector(t,e,u,n,c)??0}const[d,s]=e;return a?n.setDehydratedPoint(a,d,s,f,u):a=n.makeDehydratedPoint(d,s,f,u),null!=i&&(a.m=i,a.hasM=!0),a},e.withSelfSnappingZ=function(e,t,n,l,a=i()){const[u,c]=e;return a[0]=u,a[1]=c,e.length>3&&(a[3]=e[3]??r.NONE),"3d"!==n?.type?(a[2]=t.value,a):(a[2]=o.getConvertedElevationFromXYZ(n,u,c,t.value,l,t.elevationInfo,o.absoluteHeightElevationInfo)??0,a)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));