// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
require({cache:{"esri/chunks/vec32":function(){define(["exports","../core/libs/gl-matrix-2/factories/vec3f64","../core/libs/gl-matrix-2/math/common"],(function(t,e,r){"use strict";function n(t){const e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function s(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function o(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function c(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function u(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function l(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function d(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function h(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function p(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function m(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function y(t,e=0,r=1){return t[0]=Math.min(Math.max(t[0],e),r),t[1]=Math.min(Math.max(t[1],e),r),t[2]=Math.min(Math.max(t[2],e),r),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function T(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function b(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function M(t,e){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function E(t,e){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function S(t){const e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function A(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function _(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function B(t,e){const r=e[0],n=e[1],i=e[2];let s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function I(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function V(t,e,r){const n=e[0],i=e[1],s=e[2],o=r[0],a=r[1],c=r[2];return t[0]=i*c-s*a,t[1]=s*o-n*c,t[2]=n*a-i*o,t}function x(t,e,r){const n=e[0],i=e[1],s=e[2],o=r[0],a=r[1],c=r[2],u=i*c-s*a,f=s*o-n*c,l=n*a-i*o,d=Math.sqrt(u*u+f*f+l*l);return t[0]=u/d,t[1]=f/d,t[2]=l/d,t}function O(t,e,r,n){const i=e[0],s=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=o+n*(r[2]-o),t}function w(t,e,r,n,i,s){const o=s*s,a=o*(2*s-3)+1,c=o*(s-2)+s,u=o*(s-1),f=o*(3-2*s);return t[0]=e[0]*a+r[0]*c+n[0]*u+i[0]*f,t[1]=e[1]*a+r[1]*c+n[1]*u+i[1]*f,t[2]=e[2]*a+r[2]*c+n[2]*u+i[2]*f,t}function v(t,e,r,n,i,s){const o=1-s,a=o*o,c=s*s,u=a*o,f=3*s*a,l=3*c*o,d=c*s;return t[0]=e[0]*u+r[0]*f+n[0]*l+i[0]*d,t[1]=e[1]*u+r[1]*f+n[1]*l+i[1]*d,t[2]=e[2]*u+r[2]*f+n[2]*l+i[2]*d,t}function N(t,e=1){const n=r.RANDOM,i=2*n()*Math.PI,s=2*n()-1,o=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(i)*o,t[1]=Math.sin(i)*o,t[2]=s*e,t}function P(t,e,r){const n=e[0],i=e[1],s=e[2];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12],t[1]=r[1]*n+r[5]*i+r[9]*s+r[13],t[2]=r[2]*n+r[6]*i+r[10]*s+r[14],t}function R(t,e,r){const n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t}function F(t,e,r){const n=r[0],i=r[1],s=r[2],o=r[3],a=e[0],c=e[1],u=e[2],f=i*u-s*c,l=s*a-n*u,d=n*c-i*a,h=i*d-s*l,p=s*f-n*d,m=n*l-i*f,y=2*o;return t[0]=a+f*y+2*h,t[1]=c+l*y+2*p,t[2]=u+d*y+2*m,t}function L(t,e,r,n){const i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function C(t,e,r,n){const i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function j(t,e,r,n){const i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function D(t,e){B(U,t),B(q,e);const r=I(U,q);return r>1?0:r<-1?Math.PI:Math.acos(r)}const U=e.create(),q=e.create();function z(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function k(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function G(t,e){if(t===e)return!0;const n=t[0],i=t[1],s=t[2],o=e[0],a=e[1],c=e[2],u=r.getEpsilon();return Math.abs(n-o)<=u*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=u*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-c)<=u*Math.max(1,Math.abs(s),Math.abs(c))}function H(t,e,r){const n=r[0]-e[0],i=r[1]-e[1],s=r[2]-e[2];let o=n*n+i*i+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=n*o,t[1]=i*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const Y=a,X=c,W=u,Z=M,K=E,Q=n,J=S,$=Object.freeze(Object.defineProperty({__proto__:null,abs:d,add:o,angle:D,bezier:v,ceil:f,clamp:y,copy:i,cross:V,crossAndNormalize:x,direction:H,dist:Z,distance:M,div:W,divide:u,dot:I,equals:G,exactEquals:k,floor:l,hermite:w,inverse:_,len:Q,length:n,lerp:O,max:m,min:p,mul:X,multiply:c,negate:A,normalize:B,random:N,rotateX:L,rotateY:C,rotateZ:j,round:g,scale:T,scaleAndAdd:b,set:s,sign:h,sqrDist:K,sqrLen:J,squaredDistance:E,squaredLength:S,str:z,sub:Y,subtract:a,transformMat3:R,transformMat4:P,transformQuat:F},Symbol.toStringTag,{value:"Module"}));t.abs=d,t.add=o,t.angle=D,t.bezier=v,t.ceil=f,t.clamp=y,t.copy=i,t.cross=V,t.crossAndNormalize=x,t.direction=H,t.dist=Z,t.distance=M,t.div=W,t.divide=u,t.dot=I,t.equals=G,t.exactEquals=k,t.floor=l,t.hermite=w,t.inverse=_,t.len=Q,t.length=n,t.lerp=O,t.max=m,t.min=p,t.mul=X,t.multiply=c,t.negate=A,t.normalize=B,t.random=N,t.rotateX=L,t.rotateY=C,t.rotateZ=j,t.round=g,t.scale=T,t.scaleAndAdd=b,t.set=s,t.sign=h,t.sqrDist=K,t.sqrLen=J,t.squaredDistance=E,t.squaredLength=S,t.str=z,t.sub=Y,t.subtract=a,t.transformMat3=R,t.transformMat4=P,t.transformQuat=F,t.vec3=$}))},"esri/geometry/support/lineSegment":function(){define(["exports","../../core/mathUtils","../../core/ObjectStack","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","./vectorStacks"],(function(t,e,r,n,i,s){"use strict";function o(t){return t?{origin:i.clone(t.origin),vector:i.clone(t.vector)}:{origin:i.create(),vector:i.create()}}function a(t,e){const r=d.get();return r.origin=t,r.vector=e,r}function c(t,e,r=o()){return n.copy(r.origin,t),n.copy(r.vector,e),r}function u(t,r,i,o,a){const{vector:c,origin:u}=t,f=n.subtract(s.sv3d.get(),r,u),l=n.dot(c,f)/n.squaredLength(c);return n.scale(a,c,e.clamp(l,i,o)),n.add(a,a,t.origin)}function f(t,r,i,o){const a=1e-6,c=t.origin,u=n.add(s.sv3d.get(),c,t.vector),f=r.origin,l=n.add(s.sv3d.get(),f,r.vector),d=s.sv3d.get(),h=s.sv3d.get();if(d[0]=c[0]-f[0],d[1]=c[1]-f[1],d[2]=c[2]-f[2],h[0]=l[0]-f[0],h[1]=l[1]-f[1],h[2]=l[2]-f[2],Math.abs(h[0])<a&&Math.abs(h[1])<a&&Math.abs(h[2])<a)return!1;const p=s.sv3d.get();if(p[0]=u[0]-c[0],p[1]=u[1]-c[1],p[2]=u[2]-c[2],Math.abs(p[0])<a&&Math.abs(p[1])<a&&Math.abs(p[2])<a)return!1;const m=d[0]*h[0]+d[1]*h[1]+d[2]*h[2],y=h[0]*p[0]+h[1]*p[1]+h[2]*p[2],g=d[0]*p[0]+d[1]*p[1]+d[2]*p[2],T=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],b=(p[0]*p[0]+p[1]*p[1]+p[2]*p[2])*T-y*y;if(Math.abs(b)<a)return!1;let M=(m*y-g*T)/b,E=(m+y*M)/T;i&&(M=e.clamp(M,0,1),E=e.clamp(E,0,1));const S=s.sv3d.get(),A=s.sv3d.get();return S[0]=c[0]+M*p[0],S[1]=c[1]+M*p[1],S[2]=c[2]+M*p[2],A[0]=f[0]+E*h[0],A[1]=f[1]+E*h[1],A[2]=f[2]+E*h[2],o.tA=M,o.tB=E,o.pA=S,o.pB=A,o.distance2=n.squaredDistance(S,A),!0}const l={tA:0,tB:0,pA:i.create(),pB:i.create(),distance2:0},d=new r.ObjectStack((()=>o()));t.closestLineSegmentPoint=function(t,e,r){return!!f(t,e,!0,l)&&(n.copy(r,l.pA),!0)},t.closestRayDistance2=function(t,e){if(f(t,a(e.origin,e.direction),!1,l)){const{tA:e,pB:r,distance2:i}=l;if(e>=0&&e<=1)return i;if(e<0)return n.squaredDistance(t.origin,r);if(e>1)return n.squaredDistance(n.add(s.sv3d.get(),t.origin,t.vector),r)}return null},t.copy=function(t,e=o()){return c(t.origin,t.vector,e)},t.create=o,t.distance2=function(t,r){const i=n.subtract(s.sv3d.get(),r,t.origin),o=n.dot(t.vector,i),a=n.dot(t.vector,t.vector),c=e.clamp(o/a,0,1),u=n.subtract(s.sv3d.get(),n.scale(s.sv3d.get(),t.vector,c),i);return n.dot(u,u)},t.fromPoints=function(t,e,r=o()){return n.copy(r.origin,t),n.subtract(r.vector,e,t),r},t.fromValues=c,t.pointAt=function(t,e,r){return n.add(r,t.origin,n.scale(r,t.vector,e))},t.projectPoint=function(t,e,r){return u(t,e,0,1,r)},t.projectPointClamp=u,t.wrap=a,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],(function(t,e){"use strict";t.ObjectStack=class{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&e.nextTick((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,1024));t++)this._items.push(this._allocator())}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],(function(t,e){"use strict";const r=e.VectorStack.createVec2f64(),n=e.VectorStack.createVec3f64(),i=e.VectorStack.createVec4f64(),s=e.VectorStack.createMat3f64(),o=e.VectorStack.createMat4f64(),a=e.VectorStack.createQuatf64();t.sm3d=s,t.sm4d=o,t.sq4d=a,t.sv2d=r,t.sv3d=n,t.sv4d=i,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/core/VectorStack":function(){define(["exports","./has","./nextTick","./libs/gl-matrix-2/factories/mat3f64","./libs/gl-matrix-2/factories/mat4f64","./libs/gl-matrix-2/factories/quatf64","./libs/gl-matrix-2/factories/vec2f64","./libs/gl-matrix-2/factories/vec3f64","./libs/gl-matrix-2/factories/vec4f64"],(function(t,e,r,n,i,s,o,a,c){"use strict";class u{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&r.nextTick((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new u(o.create)}static createVec3f64(){return new u(a.create)}static createVec4f64(){return new u(c.create)}static createMat3f64(){return new u(n.create)}static createMat4f64(){return new u(i.create)}static createQuatf64(){return new u(s.create)}get test(){}}t.VectorStack=u,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["exports"],(function(t){"use strict";function e(){return[1,0,0,0,1,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function n(t,e,r,n,i,s,o,a,c){return[t,e,r,n,i,s,o,a,c]}const i=[1,0,0,0,1,0,0,0,1],s=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:r,create:e,fromValues:n},Symbol.toStringTag,{value:"Module"}));t.IDENTITY=i,t.clone=r,t.create=e,t.fromValues=n,t.mat3f64=s,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["exports"],(function(t){"use strict";function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function n(t,e,r,n,i,s,o,a,c,u,f,l,d,h,p,m){return[t,e,r,n,i,s,o,a,c,u,f,l,d,h,p,m]}const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:r,create:e,fromValues:n},Symbol.toStringTag,{value:"Module"}));t.IDENTITY=i,t.clone=r,t.create=e,t.fromValues=n,t.mat4f64=s,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["exports"],(function(t){"use strict";function e(){return[0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3]]}function n(t,e,r,n){return[t,e,r,n]}const i=[0,0,0,1],s=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:r,create:e,fromValues:n},Symbol.toStringTag,{value:"Module"}));t.IDENTITY=i,t.clone=r,t.create=e,t.fromValues=n,t.quatf64=s,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],(function(t){"use strict";function e(){return[0,0]}function r(t){return[t[0],t[1]]}function n(t,e){return[t,e]}function i(t,e){return[t,e]}function s(t,e=[0,0]){const r=Math.min(2,t.length);for(let n=0;n<r;++n)e[n]=t[n];return e}function o(){return[0,0]}function a(){return n(1,1)}function c(){return n(1,0)}function u(){return n(0,1)}const f=[0,0],l=a(),d=c(),h=u(),p=Object.freeze(Object.defineProperty({__proto__:null,ONES:l,UNIT_X:d,UNIT_Y:h,ZEROS:f,clone:r,create:e,freeze:i,fromArray:s,fromValues:n,ones:a,unitX:c,unitY:u,zeros:o},Symbol.toStringTag,{value:"Module"}));t.ONES=l,t.UNIT_X=d,t.UNIT_Y=h,t.ZEROS=f,t.clone=r,t.create=e,t.freeze=i,t.fromArray=s,t.fromValues=n,t.ones=a,t.unitX=c,t.unitY=u,t.vec2f64=p,t.zeros=o,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/chunks/sphere":function(){define(["exports","../core/has","../core/Logger","../core/mathUtils","../core/libs/gl-matrix-2/math/mat4","./vec32","../core/libs/gl-matrix-2/factories/vec3f64","./vec42","../core/libs/gl-matrix-2/factories/vec4f64","../core/libs/gl-matrix-2/math/common","../geometry/support/Axis","../geometry/support/ray","../geometry/support/sphereUtils","../geometry/support/vector","../geometry/support/vectorStacks"],(function(t,e,r,n,i,s,o,a,c,u,f,l,d,h,p){"use strict";const m=y();function y(){return c.create()}const g=a.equals,T=a.equals;function b(t,e){return a.copy(e,t)}function M(t,e){return c.fromValues(t[0],t[1],t[2],e)}function E(t){return t}function S(t){t[0]=t[1]=t[2]=t[3]=0}function A(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function _(t){return t[3]}function B(t){return t}function I(t,e,r,n){return c.fromValues(t,e,r,n)}function V(t,e,r){return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=t[3]+e,r}function x(t,e,r){return t!==r&&b(t,r),r}function O(t,e){return e}function w(t,e,r){if(null==e)return!1;if(!P(t,e,N))return!1;let{t0:n,t1:i}=N;if((n<0||i<n&&i>0)&&(n=i),n<0)return!1;if(r){const{origin:t,direction:i}=e;r[0]=t[0]+i[0]*n,r[1]=t[1]+i[1]*n,r[2]=t[2]+i[2]*n}return!0}function v(t,e,r){const n=l.fromPoints(e,r);if(!P(t,n,N))return[];const{origin:i,direction:a}=n,{t0:c,t1:f}=N,d=e=>{const r=o.create();return s.scaleAndAdd(r,i,a,e),U(t,r,r)};return Math.abs(c-f)<u.getEpsilon()?[d(c)]:[d(c),d(f)]}const N={t0:0,t1:0};function P(t,e,r){const{origin:n,direction:i}=e,s=R;s[0]=n[0]-t[0],s[1]=n[1]-t[1],s[2]=n[2]-t[2];const o=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===o)return!1;const a=2*(i[0]*s[0]+i[1]*s[1]+i[2]*s[2]),c=a*a-4*o*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-t[3]*t[3]);if(c<0)return!1;const u=Math.sqrt(c);return r.t0=(-a-u)/(2*o),r.t1=(-a+u)/(2*o),!0}const R=o.create();function F(t,e){return w(t,e,null)}function L(t,e,r){if(w(t,e,r))return r;const n=C(t,e,p.sv3d.get());return s.add(r,e.origin,s.scale(p.sv3d.get(),e.direction,s.distance(e.origin,n)/s.length(e.direction))),r}function C(t,e,r){const n=p.sv3d.get(),o=p.sm4d.get();s.cross(n,e.origin,e.direction);const a=_(t);s.cross(r,n,e.origin),s.scale(r,r,1/s.length(r)*a);const c=z(t,e.origin),u=h.angle(e.origin,r);return i.fromRotation(o,u+c,n),s.transformMat4(r,r,o),r}function j(t,e,r,n){const i=_(t),s=i*i,o=e+.5*Math.PI,a=r*r+s-2*Math.cos(o)*r*i,c=Math.sqrt(a),u=a-s;if(u<=0)return.5;const f=Math.sqrt(u),l=Math.acos(f/c)-Math.asin(i/(c/Math.sin(o)));return Math.min(1,(l+.5*n)/n)}function D(t,e,r){return w(t,e,r)?r:(l.closestPoint(e,t,r),U(t,r,r))}function U(t,e,r){const n=s.subtract(p.sv3d.get(),e,t),i=s.scale(p.sv3d.get(),n,t[3]/s.length(n));return s.add(r,i,t)}function q(t,e){const r=s.subtract(p.sv3d.get(),e,t),n=s.squaredLength(r),i=t[3]*t[3];return Math.sqrt(Math.abs(n-i))}function z(t,e){const r=s.subtract(p.sv3d.get(),e,t),i=s.length(r),o=_(t),a=o+Math.abs(o-i);return n.acosClamped(o/a)}const k=o.create();function G(t,e,r,n){const i=s.subtract(k,e,t);switch(r){case f.Axis.X:{const t=d.cartesianToSpherical(i,k)[2];return s.set(n,-Math.sin(t),Math.cos(t),0)}case f.Axis.Y:{const t=d.cartesianToSpherical(i,k),e=t[1],r=t[2],o=Math.sin(e);return s.set(n,-o*Math.cos(r),-o*Math.sin(r),Math.cos(e))}case f.Axis.Z:return s.normalize(n,i);default:return}}function H(t,e){const r=s.subtract(Z,e,t);return s.length(r)-t[3]}function Y(t,e,r,n){const i=H(t,e),o=G(t,e,f.Axis.Z,Z),a=s.scale(Z,o,r-i);return s.add(n,e,a)}function X(t,e){const r=s.squaredDistance(t,e),n=_(t);return r<=n*n}function W(t,e,r=c.create()){const n=s.distance(t,e),i=t[3],o=e[3];return n+o<i?(a.copy(r,t),r):n+i<o?(a.copy(r,e),r):(s.lerp(r,t,e,(n+o-i)/(2*n)),r[3]=(n+i+o)/2,r)}const Z=o.create(),K=y(),Q=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:m,altitudeAt:H,angleToSilhouette:z,axisAt:G,cameraFrustumCoverage:j,clear:S,closestPoint:D,closestPointOnSilhouette:C,containsPoint:X,copy:b,create:y,distanceToSilhouette:q,elevate:V,equals:T,exactEquals:g,fromCenterAndRadius:M,fromRadius:A,fromValues:I,getCenter:B,getExtent:O,getRadius:_,intersectLine:v,intersectRay:w,intersectRayClosestSilhouette:L,intersectsRay:F,projectPoint:U,setAltitudeAt:Y,setExtent:x,tmpSphere:K,union:W,wrap:E},Symbol.toStringTag,{value:"Module"}));t.NullSphere=m,t.altitudeAt=H,t.angleToSilhouette=z,t.axisAt=G,t.cameraFrustumCoverage=j,t.clear=S,t.closestPoint=D,t.closestPointOnSilhouette=C,t.containsPoint=X,t.copy=b,t.create=y,t.distanceToSilhouette=q,t.elevate=V,t.equals=T,t.exactEquals=g,t.fromCenterAndRadius=M,t.fromRadius=A,t.fromValues=I,t.getCenter=B,t.getExtent=O,t.getRadius=_,t.intersectLine=v,t.intersectRay=w,t.intersectRayClosestSilhouette=L,t.intersectsRay=F,t.projectPoint=U,t.setAltitudeAt=Y,t.setExtent=x,t.sphere=Q,t.tmpSphere=K,t.union=W,t.wrap=E}))},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],(function(t,e,r){"use strict";function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function i(t,e,r,n,i,s,o,a,c,u,f,l,d,h,p,m,y){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=c,t[8]=u,t[9]=f,t[10]=l,t[11]=d,t[12]=h,t[13]=p,t[14]=m,t[15]=y,t}function s(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t,e){if(t===e){const r=e[1],n=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function a(t,e){return c(t,e)||s(t),t}function c(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],y=e[14],g=e[15],T=r*a-n*o,b=r*c-i*o,M=r*u-s*o,E=n*c-i*a,S=n*u-s*a,A=i*u-s*c,_=f*m-l*p,B=f*y-d*p,I=f*g-h*p,V=l*y-d*m,x=l*g-h*m,O=d*g-h*y;let w=T*O-b*x+M*V+E*I-S*B+A*_;return w?(w=1/w,t[0]=(a*O-c*x+u*V)*w,t[1]=(i*x-n*O-s*V)*w,t[2]=(m*A-y*S+g*E)*w,t[3]=(d*S-l*A-h*E)*w,t[4]=(c*I-o*O-u*B)*w,t[5]=(r*O-i*I+s*B)*w,t[6]=(y*M-p*A-g*b)*w,t[7]=(f*A-d*M+h*b)*w,t[8]=(o*x-a*I+u*_)*w,t[9]=(n*I-r*x-s*_)*w,t[10]=(p*S-m*M+g*T)*w,t[11]=(l*M-f*S-h*T)*w,t[12]=(a*B-o*V-c*_)*w,t[13]=(r*V-n*B+i*_)*w,t[14]=(m*b-p*E-y*T)*w,t[15]=(f*E-l*b+d*T)*w,t):null}function u(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],y=e[14],g=e[15];return t[0]=a*(d*g-h*y)-l*(c*g-u*y)+m*(c*h-u*d),t[1]=-(n*(d*g-h*y)-l*(i*g-s*y)+m*(i*h-s*d)),t[2]=n*(c*g-u*y)-a*(i*g-s*y)+m*(i*u-s*c),t[3]=-(n*(c*h-u*d)-a*(i*h-s*d)+l*(i*u-s*c)),t[4]=-(o*(d*g-h*y)-f*(c*g-u*y)+p*(c*h-u*d)),t[5]=r*(d*g-h*y)-f*(i*g-s*y)+p*(i*h-s*d),t[6]=-(r*(c*g-u*y)-o*(i*g-s*y)+p*(i*u-s*c)),t[7]=r*(c*h-u*d)-o*(i*h-s*d)+f*(i*u-s*c),t[8]=o*(l*g-h*m)-f*(a*g-u*m)+p*(a*h-u*l),t[9]=-(r*(l*g-h*m)-f*(n*g-s*m)+p*(n*h-s*l)),t[10]=r*(a*g-u*m)-o*(n*g-s*m)+p*(n*u-s*a),t[11]=-(r*(a*h-u*l)-o*(n*h-s*l)+f*(n*u-s*a)),t[12]=-(o*(l*y-d*m)-f*(a*y-c*m)+p*(a*d-c*l)),t[13]=r*(l*y-d*m)-f*(n*y-i*m)+p*(n*d-i*l),t[14]=-(r*(a*y-c*m)-o*(n*y-i*m)+p*(n*c-i*a)),t[15]=r*(a*d-c*l)-o*(n*d-i*l)+f*(n*c-i*a),t}function f(t){const e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],a=t[6],c=t[7],u=t[8],f=t[9],l=t[10],d=t[11],h=t[12],p=t[13],m=t[14],y=t[15];return(e*o-r*s)*(l*y-d*m)-(e*a-n*s)*(f*y-d*p)+(e*c-i*s)*(f*m-l*p)+(r*a-n*o)*(u*y-d*h)-(r*c-i*o)*(u*m-l*h)+(n*c-i*a)*(u*p-f*h)}function l(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],u=e[6],f=e[7],l=e[8],d=e[9],h=e[10],p=e[11],m=e[12],y=e[13],g=e[14],T=e[15];let b=r[0],M=r[1],E=r[2],S=r[3];return t[0]=b*n+M*a+E*l+S*m,t[1]=b*i+M*c+E*d+S*y,t[2]=b*s+M*u+E*h+S*g,t[3]=b*o+M*f+E*p+S*T,b=r[4],M=r[5],E=r[6],S=r[7],t[4]=b*n+M*a+E*l+S*m,t[5]=b*i+M*c+E*d+S*y,t[6]=b*s+M*u+E*h+S*g,t[7]=b*o+M*f+E*p+S*T,b=r[8],M=r[9],E=r[10],S=r[11],t[8]=b*n+M*a+E*l+S*m,t[9]=b*i+M*c+E*d+S*y,t[10]=b*s+M*u+E*h+S*g,t[11]=b*o+M*f+E*p+S*T,b=r[12],M=r[13],E=r[14],S=r[15],t[12]=b*n+M*a+E*l+S*m,t[13]=b*i+M*c+E*d+S*y,t[14]=b*s+M*u+E*h+S*g,t[15]=b*o+M*f+E*p+S*T,t}function d(t,e,r){const n=r[0],i=r[1],s=r[2];if(e===t)t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15];else{const r=e[0],o=e[1],a=e[2],c=e[3],u=e[4],f=e[5],l=e[6],d=e[7],h=e[8],p=e[9],m=e[10],y=e[11];t[0]=r,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=f,t[6]=l,t[7]=d,t[8]=h,t[9]=p,t[10]=m,t[11]=y,t[12]=r*n+u*i+h*s+e[12],t[13]=o*n+f*i+p*s+e[13],t[14]=a*n+l*i+m*s+e[14],t[15]=c*n+d*i+y*s+e[15]}return t}function h(t,e,r){const n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p(t,e,i,s){let o=s[0],a=s[1],c=s[2],u=Math.sqrt(o*o+a*a+c*c);if(u<=r.getEpsilon())return void n(t,e);u=1/u,o*=u,a*=u,c*=u;const f=Math.sin(i),l=Math.cos(i),d=1-l,h=e[0],p=e[1],m=e[2],y=e[3],g=e[4],T=e[5],b=e[6],M=e[7],E=e[8],S=e[9],A=e[10],_=e[11],B=o*o*d+l,I=a*o*d+c*f,V=c*o*d-a*f,x=o*a*d-c*f,O=a*a*d+l,w=c*a*d+o*f,v=o*c*d+a*f,N=a*c*d-o*f,P=c*c*d+l;t[0]=h*B+g*I+E*V,t[1]=p*B+T*I+S*V,t[2]=m*B+b*I+A*V,t[3]=y*B+M*I+_*V,t[4]=h*x+g*O+E*w,t[5]=p*x+T*O+S*w,t[6]=m*x+b*O+A*w,t[7]=y*x+M*O+_*w,t[8]=h*v+g*N+E*P,t[9]=p*v+T*N+S*P,t[10]=m*v+b*N+A*P,t[11]=y*v+M*N+_*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function m(t,e,r){const n=Math.sin(r),i=Math.cos(r),s=e[4],o=e[5],a=e[6],c=e[7],u=e[8],f=e[9],l=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+u*n,t[5]=o*i+f*n,t[6]=a*i+l*n,t[7]=c*i+d*n,t[8]=u*i-s*n,t[9]=f*i-o*n,t[10]=l*i-a*n,t[11]=d*i-c*n,t}function y(t,e,r){const n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],c=e[3],u=e[8],f=e[9],l=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-u*n,t[1]=o*i-f*n,t[2]=a*i-l*n,t[3]=c*i-d*n,t[8]=s*n+u*i,t[9]=o*n+f*i,t[10]=a*n+l*i,t[11]=c*n+d*i,t}function g(t,e,r){const n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],a=e[2],c=e[3],u=e[4],f=e[5],l=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+u*n,t[1]=o*i+f*n,t[2]=a*i+l*n,t[3]=c*i+d*n,t[4]=u*i-s*n,t[5]=f*i-o*n,t[6]=l*i-a*n,t[7]=d*i-c*n,t}function T(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,e,n){if(0===e)return s(t);let i=n[0],o=n[1],a=n[2],c=Math.sqrt(i*i+o*o+a*a);if(c<=r.getEpsilon())return null;c=1/c,i*=c,o*=c,a*=c;const u=Math.sin(e),f=Math.cos(e),l=1-f;return t[0]=i*i*l+f,t[1]=o*i*l+a*u,t[2]=a*i*l-o*u,t[3]=0,t[4]=i*o*l-a*u,t[5]=o*o*l+f,t[6]=a*o*l+i*u,t[7]=0,t[8]=i*a*l+o*u,t[9]=o*a*l-i*u,t[10]=a*a*l+f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=n+n,c=i+i,u=s+s,f=n*a,l=n*c,d=n*u,h=i*c,p=i*u,m=s*u,y=o*a,g=o*c,T=o*u;return t[0]=1-(h+m),t[1]=l+T,t[2]=d-g,t[3]=0,t[4]=l-T,t[5]=1-(f+m),t[6]=p+y,t[7]=0,t[8]=d+g,t[9]=p-y,t[10]=1-(f+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function B(t,e){const r=I,n=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],c=e[5],u=e[6],f=e[7],l=n*n+i*i+s*s+o*o;return l>0?(r[0]=2*(a*o+f*n+c*s-u*i)/l,r[1]=2*(c*o+f*i+u*n-a*s)/l,r[2]=2*(u*o+f*s+a*i-c*n)/l):(r[0]=2*(a*o+f*n+c*s-u*i),r[1]=2*(c*o+f*i+u*n-a*s),r[2]=2*(u*o+f*s+a*i-c*n)),_(t,e,r),t}const I=e.create();function V(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function x(t,e){const r=e[0],n=e[1],i=e[2],s=e[4],o=e[5],a=e[6],c=e[8],u=e[9],f=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(c*c+u*u+f*f),t}function O(t,e){const r=e[0]+e[5]+e[10];let n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function w(t,e,r,n){const i=e[0],s=e[1],o=e[2],a=e[3],c=i+i,u=s+s,f=o+o,l=i*c,d=i*u,h=i*f,p=s*u,m=s*f,y=o*f,g=a*c,T=a*u,b=a*f,M=n[0],E=n[1],S=n[2];return t[0]=(1-(p+y))*M,t[1]=(d+b)*M,t[2]=(h-T)*M,t[3]=0,t[4]=(d-b)*E,t[5]=(1-(l+y))*E,t[6]=(m+g)*E,t[7]=0,t[8]=(h+T)*S,t[9]=(m-g)*S,t[10]=(1-(l+p))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function v(t,e,r,n,i){const s=e[0],o=e[1],a=e[2],c=e[3],u=s+s,f=o+o,l=a+a,d=s*u,h=s*f,p=s*l,m=o*f,y=o*l,g=a*l,T=c*u,b=c*f,M=c*l,E=n[0],S=n[1],A=n[2],_=i[0],B=i[1],I=i[2],V=(1-(m+g))*E,x=(h+M)*E,O=(p-b)*E,w=(h-M)*S,v=(1-(d+g))*S,N=(y+T)*S,P=(p+b)*A,R=(y-T)*A,F=(1-(d+m))*A;return t[0]=V,t[1]=x,t[2]=O,t[3]=0,t[4]=w,t[5]=v,t[6]=N,t[7]=0,t[8]=P,t[9]=R,t[10]=F,t[11]=0,t[12]=r[0]+_-(V*_+w*B+P*I),t[13]=r[1]+B-(x*_+v*B+R*I),t[14]=r[2]+I-(O*_+N*B+F*I),t[15]=1,t}function N(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=r+r,a=n+n,c=i+i,u=r*o,f=n*o,l=n*a,d=i*o,h=i*a,p=i*c,m=s*o,y=s*a,g=s*c;return t[0]=1-l-p,t[1]=f+g,t[2]=d-y,t[3]=0,t[4]=f-g,t[5]=1-u-p,t[6]=h+m,t[7]=0,t[8]=d+y,t[9]=h-m,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,e,r,n,i,s,o){const a=1/(r-e),c=1/(i-n),u=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*c,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+n)*c,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0,t}function R(t,e,r,n,i){const s=1/Math.tan(e/2);let o;return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}function F(t,e,r,n){const i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+a),u=2/(i+s);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*c*.5,t[9]=(i-s)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function L(t,e,r,n,i,s,o){const a=1/(e-r),c=1/(n-i),u=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*c,t[14]=(o+s)*u,t[15]=1,t}function C(t,e,n,i){const o=e[0],a=e[1],c=e[2];let u=o-n[0],f=a-n[1],l=c-n[2];const d=r.getEpsilon();if(Math.abs(u)<d&&Math.abs(f)<d&&Math.abs(l)<d)return void s(t);let h=1/Math.sqrt(u*u+f*f+l*l);u*=h,f*=h,l*=h;const p=i[0],m=i[1],y=i[2];let g=m*l-y*f,T=y*u-p*l,b=p*f-m*u;h=Math.sqrt(g*g+T*T+b*b),h?(h=1/h,g*=h,T*=h,b*=h):(g=0,T=0,b=0);let M=f*b-l*T,E=l*g-u*b,S=u*T-f*g;h=Math.sqrt(M*M+E*E+S*S),h?(h=1/h,M*=h,E*=h,S*=h):(M=0,E=0,S=0),t[0]=g,t[1]=M,t[2]=u,t[3]=0,t[4]=T,t[5]=E,t[6]=f,t[7]=0,t[8]=b,t[9]=S,t[10]=l,t[11]=0,t[12]=-(g*o+T*a+b*c),t[13]=-(M*o+E*a+S*c),t[14]=-(u*o+f*a+l*c),t[15]=1}function j(t,e,r,n){const i=e[0],s=e[1],o=e[2],a=n[0],c=n[1],u=n[2];let f=i-r[0],l=s-r[1],d=o-r[2],h=f*f+l*l+d*d;h>0&&(h=1/Math.sqrt(h),f*=h,l*=h,d*=h);let p=c*d-u*l,m=u*f-a*d,y=a*l-c*f;return h=p*p+m*m+y*y,h>0&&(h=1/Math.sqrt(h),p*=h,m*=h,y*=h),t[0]=p,t[1]=m,t[2]=y,t[3]=0,t[4]=l*y-d*m,t[5]=d*p-f*y,t[6]=f*m-l*p,t[7]=0,t[8]=f,t[9]=l,t[10]=d,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t}function D(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function U(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function q(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function z(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function k(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function G(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function H(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Y(t,e){if(t===e)return!0;const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],u=t[6],f=t[7],l=t[8],d=t[9],h=t[10],p=t[11],m=t[12],y=t[13],g=t[14],T=t[15],b=e[0],M=e[1],E=e[2],S=e[3],A=e[4],_=e[5],B=e[6],I=e[7],V=e[8],x=e[9],O=e[10],w=e[11],v=e[12],N=e[13],P=e[14],R=e[15],F=r.getEpsilon();return Math.abs(n-b)<=F*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-M)<=F*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(s-E)<=F*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(o-S)<=F*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(a-A)<=F*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(c-_)<=F*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(u-B)<=F*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(f-I)<=F*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(l-V)<=F*Math.max(1,Math.abs(l),Math.abs(V))&&Math.abs(d-x)<=F*Math.max(1,Math.abs(d),Math.abs(x))&&Math.abs(h-O)<=F*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(p-w)<=F*Math.max(1,Math.abs(p),Math.abs(w))&&Math.abs(m-v)<=F*Math.max(1,Math.abs(m),Math.abs(v))&&Math.abs(y-N)<=F*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(g-P)<=F*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(T-R)<=F*Math.max(1,Math.abs(T),Math.abs(R))}function X(t){const e=r.getEpsilon(),n=t[0],i=t[1],s=t[2],o=t[4],a=t[5],c=t[6],u=t[8],f=t[9],l=t[10];return Math.abs(1-(n*n+o*o+u*u))<=e&&Math.abs(1-(i*i+a*a+f*f))<=e&&Math.abs(1-(s*s+c*c+l*l))<=e}function W(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[8]&&0===t[9]&&1===t[10]}const Z=l,K=z,Q=Object.freeze(Object.defineProperty({__proto__:null,add:q,adjoint:u,copy:n,determinant:f,equals:Y,exactEquals:H,frob:U,fromQuat:N,fromQuat2:B,fromRotation:M,fromRotationTranslation:_,fromRotationTranslationScale:w,fromRotationTranslationScaleOrigin:v,fromScaling:b,fromTranslation:T,fromXRotation:E,fromYRotation:S,fromZRotation:A,frustum:P,getRotation:O,getScale:x,getTranslation:V,hasIdentityRotation:W,identity:s,invert:c,invertOrIdentity:a,isOrthoNormal:X,lookAt:C,mul:Z,multiply:l,multiplyScalar:k,multiplyScalarAndAdd:G,ortho:L,perspective:R,perspectiveFromFieldOfView:F,rotate:p,rotateX:m,rotateY:y,rotateZ:g,scale:h,set:i,str:D,sub:K,subtract:z,targetTo:j,translate:d,transpose:o},Symbol.toStringTag,{value:"Module"}));t.add=q,t.adjoint=u,t.copy=n,t.determinant=f,t.equals=Y,t.exactEquals=H,t.frob=U,t.fromQuat=N,t.fromQuat2=B,t.fromRotation=M,t.fromRotationTranslation=_,t.fromRotationTranslationScale=w,t.fromRotationTranslationScaleOrigin=v,t.fromScaling=b,t.fromTranslation=T,t.fromXRotation=E,t.fromYRotation=S,t.fromZRotation=A,t.frustum=P,t.getRotation=O,t.getScale=x,t.getTranslation=V,t.hasIdentityRotation=W,t.identity=s,t.invert=c,t.invertOrIdentity=a,t.isOrthoNormal=X,t.lookAt=C,t.mat4=Q,t.mul=Z,t.multiply=l,t.multiplyScalar=k,t.multiplyScalarAndAdd=G,t.ortho=L,t.perspective=R,t.perspectiveFromFieldOfView=F,t.rotate=p,t.rotateX=m,t.rotateY=y,t.rotateZ=g,t.scale=h,t.set=i,t.str=D,t.sub=K,t.subtract=z,t.targetTo=j,t.translate=d,t.transpose=o,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/ray":function(){define(["exports","../../core/arrayUtils","../../core/ObjectStack","../../core/libs/gl-matrix-2/math/mat3","../../core/libs/gl-matrix-2/factories/mat3f64","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","./vectorStacks"],(function(t,e,r,n,i,s,o,a){"use strict";function c(t){return t?u(o.clone(t.origin),o.clone(t.direction)):u(o.create(),o.create())}function u(t,e){return{origin:t,direction:e}}function f(t,e,r=c()){return s.copy(r.origin,t),s.copy(r.direction,e),r}const l=new r.ObjectStack((()=>c())),d=o.create(),h=o.create(),p=o.create(),m=i.create();t.closestPoint=function(t,e,r){const n=s.dot(t.direction,s.subtract(r,e,t.origin));return s.add(r,t.origin,s.scale(r,t.direction,n)),r},t.closestPoints=function(t,e,r,i){const o=t.origin,a=e.origin,c=t.direction,u=e.direction,f=s.dot(s.normalize(h,c),s.normalize(p,u));if(Math.abs(f)>=1)return null;const l=s.cross(h,c,u),y=s.sub(d,a,o),g=n.set(m,c[0],c[1],c[2],-u[0],-u[1],-u[2],l[0],l[1],l[2]),T=n.invert(m,g);if(null==T)return[r,i];const b=s.dot(s.set(h,T[0],T[3],T[6]),y),M=s.dot(s.set(p,T[1],T[4],T[7]),y);return s.add(r,o,s.scale(d,c,b)),s.add(i,a,s.scale(d,u,M)),[r,i]},t.copy=function(t,e=c()){return f(t.origin,t.direction,e)},t.create=c,t.distance2=function(t,e){const r=s.cross(a.sv3d.get(),s.normalize(a.sv3d.get(),t.direction),s.subtract(a.sv3d.get(),e,t.origin));return s.dot(r,r)},t.equals=function(t,r){return e.equals(t.origin,r.origin)&&e.equals(t.direction,r.direction)},t.fromPoints=function(t,e,r=c()){return s.copy(r.origin,t),s.subtract(r.direction,e,t),r},t.fromValues=f,t.wrap=function(t,e){const r=l.get();return r.origin=t,r.direction=e,r},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["exports","./common"],(function(t,e){"use strict";function r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function i(t,e,r,n,i,s,o,a,c,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=c,t[8]=u,t}function s(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o(t,e){if(t===e){const r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function a(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],f=e[8],l=f*o-a*u,d=-f*s+a*c,h=u*s-o*c;let p=r*l+n*d+i*h;return p?(p=1/p,t[0]=l*p,t[1]=(-f*n+i*u)*p,t[2]=(a*n-i*o)*p,t[3]=d*p,t[4]=(f*r-i*c)*p,t[5]=(-a*r+i*s)*p,t[6]=h*p,t[7]=(-u*r+n*c)*p,t[8]=(o*r-n*s)*p,t):null}function c(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],f=e[8];return t[0]=o*f-a*u,t[1]=i*u-n*f,t[2]=n*a-i*o,t[3]=a*c-s*f,t[4]=r*f-i*c,t[5]=i*s-r*a,t[6]=s*u-o*c,t[7]=n*c-r*u,t[8]=r*o-n*s,t}function u(t){const e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],a=t[6],c=t[7],u=t[8];return e*(u*s-o*c)+r*(-u*i+o*a)+n*(c*i-s*a)}function f(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],u=e[6],f=e[7],l=e[8],d=r[0],h=r[1],p=r[2],m=r[3],y=r[4],g=r[5],T=r[6],b=r[7],M=r[8];return t[0]=d*n+h*o+p*u,t[1]=d*i+h*a+p*f,t[2]=d*s+h*c+p*l,t[3]=m*n+y*o+g*u,t[4]=m*i+y*a+g*f,t[5]=m*s+y*c+g*l,t[6]=T*n+b*o+M*u,t[7]=T*i+b*a+M*f,t[8]=T*s+b*c+M*l,t}function l(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],u=e[6],f=e[7],l=e[8],d=r[0],h=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=c,t[6]=d*n+h*o+u,t[7]=d*i+h*a+f,t[8]=d*s+h*c+l,t}function d(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],u=e[6],f=e[7],l=e[8],d=Math.sin(r),h=Math.cos(r);return t[0]=h*n+d*o,t[1]=h*i+d*a,t[2]=h*s+d*c,t[3]=h*o-d*n,t[4]=h*a-d*i,t[5]=h*c-d*s,t[6]=u,t[7]=f,t[8]=l,t}function h(t,e,r){const n=r[0],i=r[1],s=r[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function p(t,e,r){const n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t}function m(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function y(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function T(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function b(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=r+r,a=n+n,c=i+i,u=r*o,f=n*o,l=n*a,d=i*o,h=i*a,p=i*c,m=s*o,y=s*a,g=s*c;return t[0]=1-l-p,t[3]=f-g,t[6]=d+y,t[1]=f+g,t[4]=1-u-p,t[7]=h-m,t[2]=d-y,t[5]=h+m,t[8]=1-u-l,t}function M(t,e){const r=e[0],n=e[1],i=e[2],s=e[4],o=e[5],a=e[6],c=e[8],u=e[9],f=e[10],l=f*o-a*u,d=-f*s+a*c,h=u*s-o*c,p=r*l+n*d+i*h;if(!p)return null;const m=1/p;return t[0]=l*m,t[1]=(-f*n+i*u)*m,t[2]=(a*n-i*o)*m,t[3]=d*m,t[4]=(f*r-i*c)*m,t[5]=(-a*r+i*s)*m,t[6]=h*m,t[7]=(-u*r+n*c)*m,t[8]=(o*r-n*s)*m,t}function E(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],u=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],y=e[14],g=e[15],T=r*a-n*o,b=r*c-i*o,M=r*u-s*o,E=n*c-i*a,S=n*u-s*a,A=i*u-s*c,_=f*m-l*p,B=f*y-d*p,I=f*g-h*p,V=l*y-d*m,x=l*g-h*m,O=d*g-h*y;let w=T*O-b*x+M*V+E*I-S*B+A*_;return w?(w=1/w,t[0]=(a*O-c*x+u*V)*w,t[1]=(c*I-o*O-u*B)*w,t[2]=(o*x-a*I+u*_)*w,t[3]=(i*x-n*O-s*V)*w,t[4]=(r*O-i*I+s*B)*w,t[5]=(n*I-r*x-s*_)*w,t[6]=(m*A-y*S+g*E)*w,t[7]=(y*M-p*A-g*b)*w,t[8]=(p*S-m*M+g*T)*w,t):null}function S(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function _(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function B(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function I(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function V(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function x(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function O(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function w(t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],u=t[6],f=t[7],l=t[8],d=r[0],h=r[1],p=r[2],m=r[3],y=r[4],g=r[5],T=r[6],b=r[7],M=r[8],E=e.getEpsilon();return Math.abs(n-d)<=E*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-h)<=E*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=E*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-m)<=E*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=E*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(c-g)<=E*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(u-T)<=E*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(f-b)<=E*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(l-M)<=E*Math.max(1,Math.abs(l),Math.abs(M))}function v(t){const r=e.getEpsilon(),n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],u=t[6],f=t[7],l=t[8];return Math.abs(1-(n*n+o*o+u*u))<=r&&Math.abs(1-(i*i+a*a+f*f))<=r&&Math.abs(1-(s*s+c*c+l*l))<=r}const N=f,P=I,R=Object.freeze(Object.defineProperty({__proto__:null,add:B,adjoint:c,copy:n,determinant:u,equals:w,exactEquals:O,frob:_,fromMat2d:T,fromMat4:r,fromQuat:b,fromRotation:y,fromScaling:g,fromTranslation:m,identity:s,invert:a,isOrthoNormal:v,mul:N,multiply:f,multiplyScalar:V,multiplyScalarAndAdd:x,normalFromMat4:E,normalFromMat4Legacy:M,projection:S,rotate:d,scale:h,scaleByVec2:p,set:i,str:A,sub:P,subtract:I,translate:l,transpose:o},Symbol.toStringTag,{value:"Module"}));t.add=B,t.adjoint=c,t.copy=n,t.determinant=u,t.equals=w,t.exactEquals=O,t.frob=_,t.fromMat2d=T,t.fromMat4=r,t.fromQuat=b,t.fromRotation=y,t.fromScaling=g,t.fromTranslation=m,t.identity=s,t.invert=a,t.isOrthoNormal=v,t.mat3=R,t.mul=N,t.multiply=f,t.multiplyScalar=V,t.multiplyScalarAndAdd=x,t.normalFromMat4=E,t.normalFromMat4Legacy=M,t.projection=S,t.rotate=d,t.scale=h,t.scaleByVec2=p,t.set=i,t.str=A,t.sub=P,t.subtract=I,t.translate=l,t.transpose=o,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/sphereUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec32"],(function(t,e,r){"use strict";t.cartesianToSpherical=function(t,n){const i=r.length(t),s=e.asinClamped(t[2]/i),o=Math.atan2(t[1]/i,t[0]/i);return r.set(n,i,s,o),n},t.sphericalToCartesian=function(t,e){const n=t[0],i=t[1],s=t[2],o=Math.cos(i);r.set(e,n*o*Math.cos(s),n*o*Math.sin(s),n*Math.sin(i))},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64"],(function(t,e,r,n){"use strict";const i=n.create(),s=n.create();t.angle=function(t,n){const i=r.dot(t,n)/(r.length(t)*r.length(n));return-e.acosClamped(i)},t.angleAroundAxis=function(t,n,o){r.normalize(i,t),r.normalize(s,n);const a=r.dot(i,s),c=e.acosClamped(a),u=r.cross(i,i,s);return r.dot(u,o)<0?2*Math.PI-c:c},t.projectPoint=function(t,e,n){const i=r.dot(t,e)/r.dot(t,t);return r.scale(n,t,i)},t.projectPointSignedLength=function(t,e){return r.dot(t,e)/r.length(t)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/webgl-engine/lib/Octree":function(){define(["../../../../core/ObjectPool","../../../../core/PooledArray","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/support/frustum","../../../../geometry/support/ray","../../../../chunks/sphere","./Util"],(function(t,e,r,n,i,s,o,a){"use strict";class c{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(t,e){this.objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new u,this._objectCount=0,e&&(void 0!==e.maximumObjectsPerNode&&(this._maximumObjectsPerNode=e.maximumObjectsPerNode),void 0!==e.maximumDepth&&(this._maximumDepth=e.maximumDepth))}destroy(){this._degenerateObjects.clear(),u.clearPool(),A[0]=null,x.prune(),R.prune()}add(t){const e=Array.from(t);this._grow(e);const r=u.acquire();for(const t of e)++this._objectCount,this._isDegenerate(t)?this._degenerateObjects.add(t):(r.init(this._root),this._add(t,r));u.release(r)}remove(t,e=null){this._objectCount-=t.length;const r=u.acquire();for(const n of t){const t=e??o.copy(this.objectToBoundingSphere(n),O);b(t[3])?(r.init(this._root),d(n,t,r)):this._degenerateObjects.delete(n)}u.release(r),this._shrink()}update(t,e){if(!b(e[3])&&this._isDegenerate(t))return;const r=function(t){return A[0]=t,A}(t);this.remove(r,e),this.add(r)}forEachAlongRay(t,e,r){const n=s.wrap(t,e);f(this._root,(t=>{if(!function(t,e){return m(o.getCenter(e.bounds),2*-e.halfSize,I),m(o.getCenter(e.bounds),2*e.halfSize,V),a.rayBoxTest(t.origin,t.direction,I,V)}(n,t))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObject(n,t)&&r(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObject(n,t)&&r(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,e,r,n){const i=s.wrap(t,e);f(this._root,(t=>{if(!function(t,e,r){return m(o.getCenter(e.bounds),2*-e.halfSize,I),m(o.getCenter(e.bounds),2*e.halfSize,V),r.applyToMinMax(I,V),a.rayBoxTest(t.origin,t.direction,I,V)}(i,t,n))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObjectWithOffset(i,t,n)&&r(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObjectWithOffset(i,t,n)&&r(t)})),!0}))}forEach(t){f(this._root,(e=>{const r=e.node;return r.terminals.forAll(t),null!==r.residents&&r.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,e,n,s=()=>!0,a=1/0){let c=1/0,u=1/0,f=null;const d=g(t,e),h=r=>{if(--a,!s(r))return;const l=this.objectToBoundingSphere(r);if(!i.intersectsSphere(n,l))return;const d=T(t,e,o.getCenter(l)),h=d-l[3],p=d+l[3];h<c&&(c=h,u=p,f=r)};return l(this._root,(s=>{if(a<=0||!i.intersectsSphere(n,s.bounds))return!1;if(r.scale(B,d,s.halfSize),r.add(B,B,o.getCenter(s.bounds)),T(t,e,B)>u)return!1;const c=s.node;return c.terminals.forAll((t=>h(t))),null!==c.residents&&c.residents.forAll((t=>h(t))),!0}),t,e),f}forEachInDepthRange(t,e,n,s,a,u,f){let d=-1/0,h=1/0;const p={setRange:t=>{n===c.DepthOrder.FRONT_TO_BACK?(d=Math.max(d,t.near),h=Math.min(h,t.far)):(d=Math.max(d,-t.far),h=Math.min(h,-t.near))}};p.setRange(s);const m=T(e,n,t),y=g(e,n),b=g(e,-n),M=t=>{if(!f(t))return;const r=this.objectToBoundingSphere(t),s=o.getCenter(r),c=T(e,n,s)-m,l=c-r[3],y=c+r[3];l>h||y<d||!i.intersectsSphere(u,r)||a(t,p)};l(this._root,(t=>{if(!i.intersectsSphere(u,t.bounds))return!1;if(r.scale(B,y,t.halfSize),r.add(B,B,o.getCenter(t.bounds)),T(e,n,B)-m>h)return!1;if(r.scale(B,b,t.halfSize),r.add(B,B,o.getCenter(t.bounds)),T(e,n,B)-m<d)return!1;const s=t.node;return s.terminals.forAll((t=>M(t))),null!==s.residents&&s.residents.forAll((t=>M(t))),!0}),e,n)}forEachNode(t){f(this._root,(e=>t(e.node,e.bounds,e.halfSize,e.depth)))}forEachNeighbor(t,e){const n=o.getRadius(e),i=o.getCenter(e),s=e=>{const s=this.objectToBoundingSphere(e),a=o.getRadius(s),c=n+a;return!(r.squaredDistance(o.getCenter(s),i)-c*c<=0)||t(e)};let a=!0;const c=t=>{a&&(a=s(t))};f(this._root,(t=>{const e=o.getRadius(t.bounds),s=n+e;if(r.squaredDistance(o.getCenter(t.bounds),i)-s*s>0)return!1;const u=t.node;return u.terminals.forAll(c),a&&null!==u.residents&&u.residents.forAll(c),a})),a&&this.forEachDegenerateObject(c)}_intersectsObject(t,e){const r=this.objectToBoundingSphere(e);return!(r[3]>0)||o.intersectsRay(r,t)}_intersectsObjectWithOffset(t,e,r){const n=this.objectToBoundingSphere(e);return!(n[3]>0)||o.intersectsRay(r.applyToBoundingSphere(n),t)}_add(t,e){e.advanceTo(this.objectToBoundingSphere(t))?e.node.terminals.push(t):(e.node.residents.push(t),e.node.residents.length>this._maximumObjectsPerNode&&e.depth<this._maximumDepth&&this._split(e))}_split(t){const e=t.node.residents;t.node.residents=null;for(let r=0;r<e.length;r++){const n=u.acquire().init(t);this._add(e.at(r),n),u.release(n)}}_grow(t){if(y(t,(t=>this.objectToBoundingSphere(t)),w),b(w[3])&&!this._fitsInsideTree(w))if(h(this._root.node))o.copy(w,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const t=this._rootBoundsForRootAsSubNode(w);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(w,t):this._growRootAsSubNode(t),u.release(t)}}_rebuildTree(t,e){r.copy(o.getCenter(v),o.getCenter(e.bounds)),v[3]=e.halfSize,y([t,v],(t=>t),N);const n=u.acquire().init(this._root);this._root.initFrom(null,N,N[3]),this._root.increaseHalfSize(1.25),f(n,(t=>(this.add(t.node.terminals.data),null!==t.node.residents&&this.add(t.node.residents.data),!0))),u.release(n)}_placingRootViolatesMaxDepth(t){const e=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let r=0;return f(this._root,(t=>(r=Math.max(r,t.depth),r+e<=this._maximumDepth))),r+e>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const e=t[3],r=t;let n=-1/0;const i=this._root.bounds,s=this._root.halfSize;for(let t=0;t<3;t++){const o=i[t]-s-(r[t]-e),a=r[t]+e-(i[t]+s),c=Math.max(0,Math.ceil(o/(2*s))),u=Math.max(0,Math.ceil(a/(2*s)))+1,f=2**Math.ceil(Math.log(c+u)*Math.LOG2E);n=Math.max(n,f),P[t].min=c,P[t].max=u}for(let t=0;t<3;t++){let e=P[t].min,r=P[t].max;const o=(n-(e+r))/2;e+=Math.ceil(o),r+=Math.floor(o);const a=i[t]-s-e*s*2;_[t]=a+(r+e)*s}const o=n*s;return _[3]=o*S,u.acquire().initFrom(null,_,o,0)}_growRootAsSubNode(t){const e=this._root.node;r.copy(o.getCenter(w),o.getCenter(this._root.bounds)),w[3]=this._root.halfSize,this._root.init(t),t.advanceTo(w,null,!0),t.node.children=e.children,t.node.residents=e.residents,t.node.terminals=e.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const e=this._root.node.children;let r=0,n=0;for(;n<e.length&&null==t;)r=n++,t=e[r];for(;n<e.length;)if(e[n++])return-1;return r}_isDegenerate(t){return!b(this.objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const e=this._root.bounds,r=this._root.halfSize;return t[3]<=r&&t[0]>=e[0]-r&&t[0]<=e[0]+r&&t[1]>=e[1]-r&&t[1]<=e[1]+r&&t[2]>=e[2]-r&&t[2]<=e[2]+r}toJSON(){const{maximumDepth:t,maximumObjectsPerNode:e,_objectCount:r}=this,n=this._nodeToJSON(this._root.node);return{maximumDepth:t,maximumObjectsPerNode:e,objectCount:r,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:n}}}_nodeToJSON(t){const e=t.children.map((t=>t?this._nodeToJSON(t):null)),r=t.residents?.map((t=>this.objectToBoundingSphere(t))),n=t.terminals?.map((t=>this.objectToBoundingSphere(t)));return{children:e,residents:r,terminals:n}}static fromJSON(t){const e=new c((t=>t),{maximumDepth:t.maximumDepth,maximumObjectsPerNode:t.maximumObjectsPerNode});return e._objectCount=t.objectCount,e._root.initFrom(t.root.node,t.root.bounds,t.root.halfSize,t.root.depth),e}}class u{constructor(){this.bounds=o.create(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,e,r,n=this.depth){return this.node=null!=t?t:u.createEmptyNode(),e&&o.copy(e,this.bounds),this.halfSize=r,this.depth=n,this}increaseHalfSize(t){this.halfSize*=t,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*S}advance(t){let e=this.node.children[t];e||(e=u.createEmptyNode(),this.node.children[t]=e),this.node=e,this.halfSize/=2,this.depth++;const r=M[t];return this.bounds[0]+=r[0]*this.halfSize,this.bounds[1]+=r[1]*this.halfSize,this.bounds[2]+=r[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(t,e,r=!1){for(;;){if(this.isTerminalFor(t))return e&&e(this,-1),!0;if(this.isLeaf()){if(!r)return e&&e(this,-1),!1;this.node.residents=null}const n=this._childIndex(t);e&&e(this,n),this.advance(n)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const e=this.bounds;return(e[0]<t[0]?1:0)+(e[1]<t[1]?2:0)+(e[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new e({shrink:!0}),residents:new e({shrink:!0})}}static{this._pool=new t(u)}static acquire(){return u._pool.acquire()}static release(t){u._pool.release(t)}static clearPool(){u._pool.prune()}}function f(t,e){let r=u.acquire().init(t);const n=[r];for(;0!==n.length;){if(r=n.pop(),e(r)&&!r.isLeaf())for(let t=0;t<r.node.children.length;t++)r.node.children[t]&&n.push(u.acquire().init(r).advance(t));u.release(r)}}function l(t,e,r,n=c.DepthOrder.FRONT_TO_BACK){let i=u.acquire().init(t);const s=[i];for(function(t,e,r){if(!R.length)for(let t=0;t<8;++t)R.push({index:0,distance:0});for(let r=0;r<8;++r){const n=M[r];R.data[r].index=r,R.data[r].distance=T(t,e,n)}R.sort(((t,e)=>t.distance-e.distance));for(let t=0;t<8;++t)r[t]=R.data[t].index}(r,n,F);0!==s.length;){if(i=s.pop(),e(i)&&!i.isLeaf())for(let t=7;t>=0;--t){const e=F[t];i.node.children[e]&&s.push(u.acquire().init(i).advance(e))}u.release(i)}}function d(t,r,n){x.clear();const i=n.advanceTo(r,((t,e)=>{x.push(t.node),x.push(e)}))?n.node.terminals:n.node.residents;if(i.removeUnordered(t),0===i.length)for(let t=x.length-2;t>=0&&(s=x.data[t],(o=x.data[t+1])>=0&&(s.children[o]=null),h(s)&&(null===s.residents&&(s.residents=new e({shrink:!0})),1));t-=2);var s,o}function h(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let e=0;e<t.children.length;e++)if(t.children[e])return!1;return!0}function p(t,e){t[0]=Math.max(t[0],e[0]+e[3]),t[1]=Math.max(t[1],e[1]+e[3]),t[2]=Math.max(t[2],e[2]+e[3])}function m(t,e,r){r[0]=t[0]+e,r[1]=t[1]+e,r[2]=t[2]+e}function y(t,e,n){I[0]=1/0,I[1]=1/0,I[2]=1/0,V[0]=-1/0,V[1]=-1/0,V[2]=-1/0;for(const r of t){const t=e(r);b(t[3])&&(s=t,(i=I)[0]=Math.min(i[0],s[0]-s[3]),i[1]=Math.min(i[1],s[1]-s[3]),i[2]=Math.min(i[2],s[2]-s[3]),p(V,t))}var i,s;r.lerp(o.getCenter(n),I,V,.5),n[3]=Math.max(V[0]-I[0],V[1]-I[1],V[2]-I[2])/2}function g(t,e){let r,n=1/0;for(let i=0;i<8;++i){const s=T(t,e,E[i]);s<n&&(n=s,r=E[i])}return r}function T(t,e,r){return e*(t[0]*r[0]+t[1]*r[1]+t[2]*r[2])}function b(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}!function(t){var e;(e=t.DepthOrder||(t.DepthOrder={}))[e.FRONT_TO_BACK=1]="FRONT_TO_BACK",e[e.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(c||(c={}));const M=[n.fromValues(-1,-1,-1),n.fromValues(1,-1,-1),n.fromValues(-1,1,-1),n.fromValues(1,1,-1),n.fromValues(-1,-1,1),n.fromValues(1,-1,1),n.fromValues(-1,1,1),n.fromValues(1,1,1)],E=[n.fromValues(-1,-1,-1),n.fromValues(-1,-1,1),n.fromValues(-1,1,-1),n.fromValues(-1,1,1),n.fromValues(1,-1,-1),n.fromValues(1,-1,1),n.fromValues(1,1,-1),n.fromValues(1,1,1)],S=Math.sqrt(3),A=[null],_=o.create(),B=n.create(),I=n.create(),V=n.create(),x=new e,O=o.create(),w=o.create(),v=o.create(),N=o.create(),P=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],R=new e,F=[0,0,0,0,0,0,0,0];return c}))},"esri/geometry/support/frustum":function(){define(["exports","../../core/ObjectStack","../../core/libs/gl-matrix-2/math/mat4","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64","./clipRay","./plane","./vectorStacks"],(function(t,e,r,n,i,s,o,a,c,u){"use strict";function f(){return[i.create(),i.create(),i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}function l(e,r){c.fromPoints(r[t.PointIndex.FAR_BOTTOM_LEFT],r[t.PointIndex.NEAR_BOTTOM_LEFT],r[t.PointIndex.NEAR_TOP_LEFT],e[t.PlaneIndex.LEFT]),c.fromPoints(r[t.PointIndex.NEAR_BOTTOM_RIGHT],r[t.PointIndex.FAR_BOTTOM_RIGHT],r[t.PointIndex.FAR_TOP_RIGHT],e[t.PlaneIndex.RIGHT]),c.fromPoints(r[t.PointIndex.FAR_BOTTOM_LEFT],r[t.PointIndex.FAR_BOTTOM_RIGHT],r[t.PointIndex.NEAR_BOTTOM_RIGHT],e[t.PlaneIndex.BOTTOM]),c.fromPoints(r[t.PointIndex.NEAR_TOP_LEFT],r[t.PointIndex.NEAR_TOP_RIGHT],r[t.PointIndex.FAR_TOP_RIGHT],e[t.PlaneIndex.TOP]),c.fromPoints(r[t.PointIndex.NEAR_BOTTOM_LEFT],r[t.PointIndex.NEAR_BOTTOM_RIGHT],r[t.PointIndex.NEAR_TOP_RIGHT],e[t.PlaneIndex.NEAR]),c.fromPoints(r[t.PointIndex.FAR_BOTTOM_RIGHT],r[t.PointIndex.FAR_BOTTOM_LEFT],r[t.PointIndex.FAR_TOP_LEFT],e[t.PlaneIndex.FAR])}function d(t,e){for(let r=0;r<y;r++)if(!c.clip(t[r],e))return!1;return!0}var h,p;t.PlaneIndex=void 0,(h=t.PlaneIndex||(t.PlaneIndex={}))[h.LEFT=0]="LEFT",h[h.RIGHT=1]="RIGHT",h[h.BOTTOM=2]="BOTTOM",h[h.TOP=3]="TOP",h[h.NEAR=4]="NEAR",h[h.FAR=5]="FAR",t.PointIndex=void 0,(p=t.PointIndex||(t.PointIndex={}))[p.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",p[p.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",p[p.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",p[p.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",p[p.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",p[p.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",p[p.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",p[p.FAR_TOP_LEFT=7]="FAR_TOP_LEFT";const m={bottom:[t.PointIndex.FAR_BOTTOM_RIGHT,t.PointIndex.NEAR_BOTTOM_RIGHT,t.PointIndex.NEAR_BOTTOM_LEFT,t.PointIndex.FAR_BOTTOM_LEFT],near:[t.PointIndex.NEAR_BOTTOM_LEFT,t.PointIndex.NEAR_BOTTOM_RIGHT,t.PointIndex.NEAR_TOP_RIGHT,t.PointIndex.NEAR_TOP_LEFT],far:[t.PointIndex.FAR_BOTTOM_RIGHT,t.PointIndex.FAR_BOTTOM_LEFT,t.PointIndex.FAR_TOP_LEFT,t.PointIndex.FAR_TOP_RIGHT],right:[t.PointIndex.NEAR_BOTTOM_RIGHT,t.PointIndex.FAR_BOTTOM_RIGHT,t.PointIndex.FAR_TOP_RIGHT,t.PointIndex.NEAR_TOP_RIGHT],left:[t.PointIndex.FAR_BOTTOM_LEFT,t.PointIndex.NEAR_BOTTOM_LEFT,t.PointIndex.NEAR_TOP_LEFT,t.PointIndex.FAR_TOP_LEFT],top:[t.PointIndex.FAR_TOP_LEFT,t.PointIndex.NEAR_TOP_LEFT,t.PointIndex.NEAR_TOP_RIGHT,t.PointIndex.FAR_TOP_RIGHT]},y=6,g=[o.fromValues(-1,-1,-1,1),o.fromValues(1,-1,-1,1),o.fromValues(1,1,-1,1),o.fromValues(-1,1,-1,1),o.fromValues(-1,-1,1,1),o.fromValues(1,-1,1,1),o.fromValues(1,1,1,1),o.fromValues(-1,1,1,1)],T=new e.ObjectStack(a.create),b=f();t.computePlanes=l,t.copy=function(t,e){for(let r=0;r<y;r++)c.copy(t[r],e[r]);return t},t.create=function(t){return t?[c.create(t[0]),c.create(t[1]),c.create(t[2]),c.create(t[3]),c.create(t[4]),c.create(t[5])]:[c.create(),c.create(),c.create(),c.create(),c.create(),c.create()]},t.createPoints=f,t.fromMatrix=function(t,e,i,o=b){const a=r.multiply(u.sm4d.get(),e,t);r.invert(a,a);for(let t=0;t<8;++t){const e=s.transformMat4(u.sv4d.get(),g[t],a);n.set(o[t],e[0]/e[3],e[1]/e[3],e[2]/e[3])}l(i,o)},t.intersectClipRay=function(t,e){for(let r=0;r<y;r++){const n=t[r];if(!c.clipInfinite(n,e))return!1}return!0},t.intersectsLineSegment=function(t,e,r){return d(t,a.fromLineSegmentAndDirection(e,r,T.get()))},t.intersectsPoint=function(t,e){for(let r=0;r<y;r++)if(c.signedDistance(t[r],e)>0)return!1;return!0},t.intersectsRay=function(t,e){return d(t,a.fromRay(e,T.get()))},t.intersectsSphere=function(t,e){for(let r=0;r<y;r++){const n=t[r];if(n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]>=e[3])return!1}return!0},t.numPlanes=y,t.numPoints=8,t.planePointIndices=m,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec32","./ray"],(function(t,e,r,n){"use strict";function i(t){return t?{ray:n.create(t.ray),c0:t.c0,c1:t.c1}:{ray:n.create(),c0:0,c1:Number.MAX_VALUE}}function s(t,e,r,s=i()){return n.copy(t,s.ray),s.c0=e,s.c1=r,s}function o(t,e,n){return r.add(n,t.ray.origin,r.scale(n,t.ray.direction,e))}const a=new e.ObjectStack((()=>i()));t.copy=function(t,e=i()){return s(t.ray,t.c0,t.c1,e)},t.create=i,t.fromLineSegmentAndDirection=function(t,e,s=i()){const o=r.length(t.vector);return n.fromValues(t.origin,e,s.ray),s.c0=0,s.c1=o,s},t.fromRay=function(t,e=i()){return n.copy(t,e.ray),e.c0=0,e.c1=Number.MAX_VALUE,e},t.fromValues=s,t.getAt=o,t.getEnd=function(t,e){return o(t,t.c1,e)},t.getStart=function(t,e){return o(t,t.c0,e)},t.wrap=function(t,e,r){const n=a.get();return n.ray=t,n.c0=e,n.c1=r,n},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/plane":function(){define(["exports","../../core/mathUtils","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","../../chunks/vec42","./vector","./vectorStacks","../../views/3d/support/mathUtils"],(function(t,e,r,n,i,s,o,a){"use strict";function c(t=V){return[t[0],t[1],t[2],t[3]]}const u=i.exactEquals,f=i.equals;function l(t,e){return d(e[0],e[1],e[2],e[3],t)}function d(t,e,r,n,i=c()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function h(t,e,r){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function p(t,e,r,n=c()){const i=r[0]-e[0],s=r[1]-e[1],o=r[2]-e[2],a=t[0]-e[0],u=t[1]-e[1],f=t[2]-e[2],l=s*f-o*u,d=o*a-i*f,h=i*u-s*a,p=l*l+d*d+h*h,m=Math.abs(p-1)>1e-5&&p>1e-12?1/Math.sqrt(p):1;return n[0]=l*m,n[1]=d*m,n[2]=h*m,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function m(t,e,n,i=0,s=Math.floor(n*(1/3)),o=Math.floor(n*(2/3))){if(n<3)return!1;e(g,i);let a=s,c=!1;for(;a<n-1&&!c;)e(T,a),a++,c=!r.exactEquals(g,T);if(!c)return!1;for(a=Math.max(a,o),c=!1;a<n&&!c;)e(b,a),a++,r.subtract(M,g,T),r.normalize(M,M),r.subtract(E,T,b),r.normalize(E,E),c=!r.exactEquals(g,b)&&!r.exactEquals(T,b)&&Math.abs(r.dot(M,E))<y;return c?(p(g,T,b,t),!0):(0!==i||1!==s||2!==o)&&m(t,e,n,0,1,2)}const y=.99619469809,g=n.create(),T=n.create(),b=n.create(),M=n.create(),E=n.create();function S(t,e,n){const i=r.scale(o.sv3d.get(),t,r.dot(t,e));return r.subtract(n,e,i),n}function A(t,e){return r.dot(t,e)+t[3]}var _;function B(e){return e===t.IntersectResult.INTERSECTS_INSIDE_OUT||e===t.IntersectResult.INTERSECTS_OUTSIDE_IN}function I(n,i,s,o,a){const c=r.dot(n,s),u=A(n,i);if(0===c)return u>=0?t.IntersectResult.INSIDE:t.IntersectResult.OUTSIDE;let f=-u/c;return o&t.IntersectFlags.CLAMP&&(f=e.clamp(f,0,1)),!(o&t.IntersectFlags.INFINITE_MIN)&&f<0||!(o&t.IntersectFlags.INFINITE_MAX)&&f>1?u>=0?t.IntersectResult.INSIDE:t.IntersectResult.OUTSIDE:(r.add(a,i,r.scale(a,s,f)),u>=0?t.IntersectResult.INTERSECTS_INSIDE_OUT:t.IntersectResult.INTERSECTS_OUTSIDE_IN)}t.IntersectResult=void 0,(_=t.IntersectResult||(t.IntersectResult={}))[_.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",_[_.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",_[_.INSIDE=2]="INSIDE",_[_.OUTSIDE=3]="OUTSIDE";const V=[0,0,1,0];var x;t.IntersectFlags=void 0,(x=t.IntersectFlags||(t.IntersectFlags={}))[x.NONE=0]="NONE",x[x.CLAMP=1]="CLAMP",x[x.INFINITE_MIN=4]="INFINITE_MIN",x[x.INFINITE_MAX=8]="INFINITE_MAX";const O=t.IntersectFlags.INFINITE_MIN|t.IntersectFlags.INFINITE_MAX,w=t.IntersectFlags.INFINITE_MAX;t.clip=function(t,e){const n=r.dot(t,e.ray.direction),i=-A(t,e.ray.origin);if(i<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return i>0;if((i<0||n<0)&&!(i<0&&n<0))return!0;const s=i/n;return n>0?s<e.c1&&(e.c1=s):s>e.c0&&(e.c0=s),e.c0<=e.c1},t.clipInfinite=function(t,e){const n=r.dot(t,e.ray.direction),i=-A(t,e.ray.origin);if(n>-1e-6&&n<1e-6)return i>0;const s=i/n;return n>0?s<e.c1&&(e.c1=s):s>e.c0&&(e.c0=s),e.c0<=e.c1},t.copy=l,t.create=c,t.distance=function(t,e){return Math.abs(A(t,e))},t.equals=f,t.exactEquals=u,t.fromArray=function(t,e,n=!0){const i=e.length/3;return m(t,((t,n)=>r.set(t,e[3*n+0],e[3*n+1],e[3*n+2])),n?i-1:i)},t.fromManyPoints=m,t.fromNormalAndOffset=function(t,e,n){return r.copy(n,t),n[3]=e,n},t.fromPoints=p,t.fromPositionAndNormal=h,t.fromValues=d,t.fromVectorsAndPoint=function(t,e,n,i){return r.cross(b,e,t),h(n,b,i)},t.getNormal=function(t){return t},t.intersectLine=function(t,e,n,i){return B(I(t,e,r.subtract(o.sv3d.get(),n,e),O,i))},t.intersectLineOrRay=I,t.intersectLineSegment=function(e,r,n){return B(I(e,r.origin,r.vector,t.IntersectFlags.NONE,n))},t.intersectLineSegmentClamp=function(e,r,n){return B(I(e,r.origin,r.vector,t.IntersectFlags.CLAMP,n))},t.intersectRay=function(t,e,r){return null!=e&&B(I(t,e.origin,e.direction,w,r))},t.isPointInside=function(t,e){return A(t,e)>=0},t.negate=function(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.projectPoint=function(t,e,n){const i=r.scale(o.sv3d.get(),t,-t[3]),s=S(t,r.subtract(o.sv3d.get(),e,i),o.sv3d.get());return r.add(n,s,i),n},t.projectPointLocal=function(t,e,n,i){const c=t,u=o.sv3d.get(),f=o.sv3d.get();a.tangentFrame(c,u,f);const l=r.subtract(o.sv3d.get(),n,e),d=s.projectPointSignedLength(u,l),h=s.projectPointSignedLength(f,l),p=s.projectPointSignedLength(c,l);return r.set(i,d,h,p)},t.projectVector=S,t.setOffsetFromPoint=function(t,e,n){return e!==t&&l(t,e),t[3]=-r.dot(t,n),t},t.signedDistance=A,t.up=V,t.wrap=function(t=V[0],e=V[1],r=V[2],n=V[3]){return d(t,e,r,n,o.sv4d.get())},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64"],(function(t,e,r,n){"use strict";const i=n.create(),s=n.create(),o=n.create(),a=n.create(),c=n.create();t.angle=function(t,n,i){t=r.normalize(a,t),n=r.normalize(c,n);const s=e.acosClamped(r.dot(t,n));if(i){const e=r.cross(o,t,n);if(r.dot(e,i)<0)return-s}return s},t.bilerp=function(t,e,r,n,i,s){const o=t+(e-t)*i;return o+(r+(n-r)*i-o)*s},t.cosCapped=function(t,e){return t>e?Math.cos(e):Math.cos(t)},t.fovx2fovy=function(t,e,r){return 2*Math.atan(r*Math.tan(.5*t)/e)},t.fovy2fovx=function(t,e,r){return 2*Math.atan(e*Math.tan(.5*t)/r)},t.makeOrthonormal=function(t,e,n){n=n||t;const i=r.dot(t,e);r.set(n,t[0]-i*e[0],t[1]-i*e[1],t[2]-i*e[2]),r.normalize(n,n)},t.makePiecewiseLinearFunction=function(t){const e=t.length;return r=>{if(r<=t[0][0])return t[0][1];if(r>=t[e-1][0])return t[e-1][1];let n=1;for(;r>t[n][0];)n++;const i=t[n-1][0],s=t[n][0],o=(s-r)/(s-i);return o*t[n-1][1]+(1-o)*t[n][1]}},t.maxScale=function(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],r=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],n=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,r,n))},t.midpoint3d=function(t,e){if(r.set(e,0,0,0),t.length>0){for(let n=0;n<t.length;++n)r.add(e,e,t[n]);r.scale(e,e,1/t.length)}},t.planeFromPoints=function(t,e,n,o){r.subtract(i,e,t),r.subtract(s,n,t),r.cross(o,i,s),r.normalize(o,o),o[3]=-r.dot(t,o)},t.scaleFromMatrix=function(t,e){const n=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),i=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),s=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return r.set(t,n,i,s),t},t.slerp=function(t,e,i,s=n.create()){const o=r.length(t),u=r.length(e),f=r.dot(t,e)/(o*u);if(f<.9999999999999999){const n=Math.acos(f),l=((1-i)*o+i*u)/Math.sin(n),d=l/o*Math.sin((1-i)*n),h=l/u*Math.sin(i*n);return r.scale(a,t,d),r.scale(c,e,h),r.add(s,a,c)}return r.lerp(s,t,e,i)},t.slerpTangent=function(t,e,i,s=n.create(),o=n.create()){const u=r.length(t),f=r.length(e),l=r.dot(t,e)/(u*f);if(l<.9999999999999999){const n=Math.acos(l),d=Math.sin(n),h=Math.sin(i*n),p=Math.sin((1-i)*n),m=(1-i)*u+i*f;{const n=m/d,i=n/u*p,o=n/f*h;r.scale(a,t,i),r.scale(c,e,o),r.add(s,a,c)}{const s=1/u*(-Math.cos((1-i)*n)*n*m+p*(-u+f));r.scale(a,t,s);const l=1/f*(Math.cos(i*n)*n*m+h*(-u+f));r.scale(c,e,l),r.add(o,a,c),r.scale(o,o,1/d)}return o}return r.lerp(s,t,e,i),r.subtract(o,e,t),r.normalize(o,o),o},t.tangentFrame=function(t,e,n){Math.abs(t[0])>Math.abs(t[1])?r.set(e,0,1,0):r.set(e,1,0,0),r.cross(n,t,e),r.cross(e,n,t),r.normalize(n,n),r.normalize(e,e)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../core/libs/gl-matrix-2/factories/vec2f64","../../../../chunks/vec42","../../../../core/libs/gl-matrix-2/factories/vec4f64"],(function(t,e,r,n){"use strict";const i=n.create();class s{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function o(t,e="Assertion"){if(!t){const t=new Error(e).stack;throw new s(`${e} at ${t}`)}}t.assert=o,t.isTranslationMatrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]},t.logWithBase=function(t,e){return Math.log(t)/Math.log(e)},t.project=function(t,e,n,s,a){i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1,r.transformMat4(i,i,e),a.length>2&&(a[2]=-i[2]),r.transformMat4(i,i,n),o(0!==i[3]),a[0]=i[0]/i[3],a[1]=i[1]/i[3],a[2]=i[2]/i[3],a[0]=(.5*a[0]+.5)*s[2]+s[0],a[1]=(.5*a[1]+.5)*s[3]+s[1]},t.rayBoxTest=function(t,e,r,n){let i,s=(r[0]-t[0])/e[0],o=(n[0]-t[0])/e[0];s>o&&(i=s,s=o,o=i);let a=(r[1]-t[1])/e[1],c=(n[1]-t[1])/e[1];if(a>c&&(i=a,a=c,c=i),s>c||a>o)return!1;a>s&&(s=a),c<o&&(o=c);let u=(r[2]-t[2])/e[2],f=(n[2]-t[2])/e[2];return u>f&&(i=u,u=f,f=i),!(s>f||u>o||(f<o&&(o=f),o<0))},t.rayRay2D=function(t,r,n,i,s,o=e.create()){const a=(i[s]-n[s])*(r[0]-t[0])-(i[0]-n[0])*(r[s]-t[s]),c=(i[0]-n[0])*(t[s]-n[s])-(i[s]-n[s])*(t[0]-n[0]);if(0===a)return!1;const u=c/a;return o[0]=t[0]+u*(r[0]-t[0]),o[1]=t[s]+u*(r[s]-t[s]),!0},t.setMatrixTranslation3=function(t,e,r,n){t[12]=e,t[13]=r,t[14]=n},t.verify=function(t,e){t||(e=e||"",console.warn("Verify failed: "+e+"\n"+new Error("verify").stack))},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeProcessing":function(){define(["exports","../../../../../geometry/support/meshUtils/deduplicate","../../../support/meshProcessing","../../../support/buffer/InterleavedLayout","../VertexAttribute","./bufferLayouts","./edgeBufferWriters","./edgePreprocessing"],(function(t,e,r,n,i,s,o,a){"use strict";function c(t,n,i,o){if(n){const e=r.computeNeighbors(i,o,t.count);return new u(i,o,e,t)}const a=e.deduplicate(t.buffer,t.stride/4,{originalIndices:i}),c=r.computeNeighbors(a.indices,o,a.uniqueCount);return{faces:a.indices,facesLength:a.indices.length,neighbors:c,vertices:s.EdgeInputBufferLayout.createView(a.buffer)}}class u{constructor(t,e,r,n){this.faces=t,this.facesLength=e,this.neighbors=r,this.vertices=n}}const f=new o.RegularEdgeBufferWriter,l=new o.SilhouetteEdgeBufferWriter,d=n.newLayout().vec3f(i.VertexAttribute.POSITION0).vec3f(i.VertexAttribute.POSITION1),h=n.newLayout().vec3f(i.VertexAttribute.POSITION0).vec3f(i.VertexAttribute.POSITION1).u16(i.VertexAttribute.COMPONENTINDEX);t.extract=function(t){const e=c(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return f.updateSettings(t.writerSettings),l.updateSettings(t.writerSettings),a.extractEdges(e,f,l)},t.extractComponentsEdgeLocationsLayout=h,t.extractEdgeInformation=c,t.extractEdgeLocationsLayout=d,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/meshUtils/deduplicate":function(){define(["exports","../../../core/mathUtils","../Indices"],(function(t,e,r){"use strict";function n(t,e,r,n){for(let i=0;i<n;i++)if(t[e+i]!==t[r+i])return!1;return!0}function i(t,e,r,n,i){for(let s=0;s<i;s++)r[n+s]=t[e+s]}function s(t,e,r){let n=0;for(let i=0;i<r;i++)n=t[e+i]+n|0,n=n+(n<<11)+(n>>>2)|0;return n>>>0}let o=null;t.deduplicate=function(t,a,c){const u=Array.isArray(t),f=u?t.length/a:t.byteLength/(4*a),l=u?t:new Uint32Array(t,0,f*a),d=c?.minReduction??0,h=c?.originalIndices||null,p=h?h.length:0,m=c?.componentOffsets||null;let y=0;if(m)for(let t=0;t<m.length-1;t++){const e=m[t+1]-m[t];e>y&&(y=e)}else y=f;const g=Math.floor(1.1*y)+1;(null==o||o.length<2*g)&&(o=new Uint32Array(e.nextHighestPowerOfTwo(2*g)));for(let t=0;t<2*g;t++)o[t]=0;let T=0;const b=!!m&&!!h,M=b?p:f;let E=r.newIndexArray(f);const S=new Uint32Array(p),A=1.96;let _=0!==d?Math.ceil(4*A*A/(d*d)*d*(1-d)):M,B=1,I=m?m[1]:M;for(let t=0;t<M;t++){if(t===_){const e=1-T/t;if(e+A*Math.sqrt(e*(1-e)/t)<d)return null;_*=2}if(t===I){for(let t=0;t<2*g;t++)o[t]=0;if(h)for(let t=m[B-1];t<m[B];t++)S[t]=E[h[t]];I=m[++B]}const e=b?h[t]:t,r=e*a,i=s(l,r,a);let c=i%g,u=T;for(;0!==o[2*c+1];){if(o[2*c]===i){const t=o[2*c+1]-1;if(n(l,r,t*a,a)){u=E[t];break}}c++,c>=g&&(c-=g)}u===T&&(o[2*c]=i,o[2*c+1]=e+1,T++),E[e]=u}if(0!==d&&1-T/f<d)return null;if(b){for(let t=m[B-1];t<S.length;t++)S[t]=E[h[t]];E=r.compactMeshIndices(S)}const V=u?new Array(T):new Uint32Array(T*a);T=0;for(let t=0;t<M;t++)E[t]===T&&(i(l,(b?h[t]:t)*a,V,T*a,a),T++);if(h&&!b){const t=new Uint32Array(p);for(let e=0;e<t.length;e++)t[e]=E[h[e]];E=r.compactMeshIndices(t)}return{buffer:Array.isArray(V)?V:V.buffer,indices:E,uniqueCount:T}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/Indices":function(){define(["exports","../../core/typedArrayUtil"],(function(t,e){"use strict";function r(t,r){if(Array.isArray(t)){if(t.length<e.nativeArrayMaxSize)return t}else if(t.length<e.nativeArrayMaxSize)return Array.from(t);let n=!0,i=!0;return t.some(((t,e)=>(n=n&&0===t,i=i&&t===e,!n&&!i))),n?u(t.length):i?o(t.length):e.isTypedArray(t)&&t.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?t:function(t,r){for(const n of t){if(n>=65536)return e.isTypedArray(t)?t:new Uint32Array(t);n>=256&&(r=!1)}return r?new Uint8Array(t):new Uint16Array(t)}(t,!r)}let n=a(131072);const i=[0],s=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function o(t){return 1===t?i:t<e.nativeArrayMaxSize?Array.from(new Uint16Array(s.buffer,0,t)):t<s.length?new Uint16Array(s.buffer,0,t):(t>n.length&&(n=a(Math.max(2*n.length,t))),new Uint32Array(n.buffer,0,t))}function a(t){const e=new Uint32Array(t);for(let t=0;t<e.length;t++)e[t]=t;return e}let c=new Uint8Array(65536);function u(t){if(1===t)return i;if(t<e.nativeArrayMaxSize)return new Array(t).fill(0);if(t>c.length){const e=Math.max(2*c.length,t);c=new Uint8Array(e)}return new Uint8Array(c.buffer,0,t)}t.compactIndices=r,t.compactMeshIndices=function(t){return r(t,!0)},t.getContinuousIndexArray=o,t.getZeroIndexArray=u,t.newIndexArray=function(t){return t<=e.nativeArrayMaxSize?new Array(t):t<=65536?new Uint16Array(t):new Uint32Array(t)},t.newIntArray=function(t){return t<=e.nativeArrayMaxSize?new Array(t):new Uint32Array(t)},t.pruneIndexArrays=function(){n=a(131072),c=new Uint8Array(65536)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/support/meshProcessing":function(){define(["exports"],(function(t){"use strict";t.computeNeighbors=function(t,e,r){const n=e/3,i=new Uint32Array(r+1),s=new Uint32Array(r+1),o=(t,e)=>{t<e?i[t+1]++:s[e+1]++};for(let e=0;e<n;e++){const r=t[3*e],n=t[3*e+1],i=t[3*e+2];o(r,n),o(n,i),o(i,r)}let a=0,c=0;for(let t=0;t<r;t++){const e=i[t+1],r=s[t+1];i[t+1]=a,s[t+1]=c,a+=e,c+=r}const u=new Uint32Array(6*n),f=i[r],l=(t,e,r)=>{if(t<e){const n=i[t+1]++;u[2*n]=e,u[2*n+1]=r}else{const n=s[e+1]++;u[2*f+2*n]=t,u[2*f+2*n+1]=r}};for(let e=0;e<n;e++){const r=t[3*e],n=t[3*e+1],i=t[3*e+2];l(r,n,e),l(n,i,e),l(i,r,e)}const d=(t,e)=>{const r=2*t,n=e-t;for(let t=1;t<n;t++){const e=u[r+2*t],n=u[r+2*t+1];let i=t-1;for(;i>=0&&u[r+2*i]>e;i--)u[r+2*i+2]=u[r+2*i],u[r+2*i+3]=u[r+2*i+1];u[r+2*i+2]=e,u[r+2*i+3]=n}};for(let t=0;t<r;t++)d(i[t],i[t+1]),d(f+s[t],f+s[t+1]);const h=new Int32Array(3*n),p=(e,r)=>e===t[3*r]?0:e===t[3*r+1]?1:e===t[3*r+2]?2:-1,m=(t,e)=>{const r=p(t,e);h[3*e+r]=-1},y=(t,e,r,n)=>{const i=p(t,e);h[3*e+i]=n;const s=p(r,n);h[3*n+s]=e};for(let t=0;t<r;t++){let e=i[t];const r=i[t+1];let n=s[t];const o=s[t+1];for(;e<r&&n<o;){const r=u[2*e],i=u[2*f+2*n];r===i?(y(t,u[2*e+1],i,u[2*f+2*n+1]),e++,n++):r<i?(m(t,u[2*e+1]),e++):(m(i,u[2*f+2*n+1]),n++)}for(;e<r;)m(t,u[2*e+1]),e++;for(;n<o;)m(u[2*f+2*n],u[2*f+2*n+1]),n++}return h},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports","../../../../geometry/support/float16","../../../../geometry/support/buffer/BufferView","../../../../geometry/support/buffer/types","../../webgl-engine/lib/Util"],(function(t,e,r,n,i){"use strict";class s{constructor(t,e){this.layout=t,this.buffer="number"==typeof e?new ArrayBuffer(e*t.stride):e;for(const e of t.fields.keys()){const r=t.fields.get(e);this[e]=new r.constructor(this.buffer,r.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(t,e){const r=this[t];return r&&r.elementCount===e.ElementCount&&r.elementType===e.ElementType?r:null}slice(t,e){return new s(this.layout,this.buffer.slice(t*this.stride,e*this.stride))}copyFrom(t,e=0,r=0,n=t.count){const i=this.stride;if(i%4==0){const s=new Uint32Array(t.buffer,e*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(t.buffer,e*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}return this}get cachedMemory(){return this.byteLength}dispose(){}}class o{constructor(t){this._stride=0,this._fields=new Map,t&&(this._stride=t.stride,t.fields.forEach((t=>{return this._fields.set(t[0],{...t[1],constructor:(e=t[1].constructor,u.get(e))});var e})))}freeze(){return this}vec2f16(t,n){return this._appendField(t,e.hasNativeFloat16Array?r.BufferViewVec2f16:r.BufferViewVec2f,n),this}vec2f(t,e){return this._appendField(t,r.BufferViewVec2f,e),this}vec2f64(t,e){return this._appendField(t,r.BufferViewVec2f64,e),this}vec3f16(t,n){return this._appendField(t,e.hasNativeFloat16Array?r.BufferViewVec3f16:r.BufferViewVec3f,n),this}vec3f(t,e){return this._appendField(t,r.BufferViewVec3f,e),this}vec3f64(t,e){return this._appendField(t,r.BufferViewVec3f64,e),this}vec4f16(t,n){return this._appendField(t,e.hasNativeFloat16Array?r.BufferViewVec4f16:r.BufferViewVec4f,n),this}vec4f(t,e){return this._appendField(t,r.BufferViewVec4f,e),this}vec4f64(t,e){return this._appendField(t,r.BufferViewVec4f64,e),this}mat3f(t,e){return this._appendField(t,r.BufferViewMat3f,e),this}mat3f64(t,e){return this._appendField(t,r.BufferViewMat3f64,e),this}mat4f(t,e){return this._appendField(t,r.BufferViewMat4f,e),this}mat4f64(t,e){return this._appendField(t,r.BufferViewMat4f64,e),this}vec4u8(t,e){return this._appendField(t,r.BufferViewVec4u8,e),this}f16(t,n){return this._appendField(t,e.hasNativeFloat16Array?r.BufferViewFloat16:r.BufferViewFloat,n),this}f32(t,e){return this._appendField(t,r.BufferViewFloat,e),this}f64(t,e){return this._appendField(t,r.BufferViewFloat64,e),this}u8(t,e){return this._appendField(t,r.BufferViewUint8,e),this}u16(t,e){return this._appendField(t,r.BufferViewUint16,e),this}i8(t,e){return this._appendField(t,r.BufferViewInt8,e),this}vec2i8(t,e){return this._appendField(t,r.BufferViewVec2i8,e),this}vec2i16(t,e){return this._appendField(t,r.BufferViewVec2i16,e),this}vec2u8(t,e){return this._appendField(t,r.BufferViewVec2u8,e),this}vec2u16(t,e){return this._appendField(t,r.BufferViewVec2u16,e),this}vec4u16(t,e){return this._appendField(t,r.BufferViewVec4u16,e),this}u32(t,e){return this._appendField(t,r.BufferViewUint32,e),this}_appendField(t,e,r){this._fields.has(t)&&i.assert(!1,`${t} already added to vertex buffer layout`);const s=e.ElementCount*n.elementTypeSize(e.ElementType),o=this._stride;this._fields.set(t,{constructor:e,size:s,offset:o,optional:r}),this._alignFields()}_alignFields(){let t=0,e=1;this._fields.forEach((r=>{const i=n.elementTypeSize(r.constructor.ElementType);t=Math.floor((t+i-1)/i)*i,r.offset=t,t+=r.size,e=Math.max(e,i)})),t=Math.floor((t+e-1)/e)*e,this._stride=t}createBuffer(t){return new s(this,t)}createView(t){return new s(this,t)}clone(){const t=new o;return t._stride=this._stride,t._fields=new Map,this._fields.forEach(((e,r)=>t._fields.set(r,e))),t.BufferType=this.BufferType,t}get stride(){return this._stride}get fields(){return this._fields}}const a=[r.BufferViewFloat,r.BufferViewVec2f,r.BufferViewVec3f,r.BufferViewVec4f,r.BufferViewMat3f,r.BufferViewMat4f,r.BufferViewFloat64,r.BufferViewVec2f64,r.BufferViewVec3f64,r.BufferViewVec4f64,r.BufferViewMat3f64,r.BufferViewMat4f64,r.BufferViewUint8,r.BufferViewVec2u8,r.BufferViewVec3u8,r.BufferViewVec4u8,r.BufferViewUint16,r.BufferViewVec2u16,r.BufferViewVec3u16,r.BufferViewVec4u16,r.BufferViewUint32,r.BufferViewVec2u32,r.BufferViewVec3u32,r.BufferViewVec4u32,r.BufferViewInt8,r.BufferViewVec2i8,r.BufferViewVec3i8,r.BufferViewVec4i8,r.BufferViewInt16,r.BufferViewVec2i16,r.BufferViewVec3i16,r.BufferViewVec4i16,r.BufferViewInt32,r.BufferViewVec2i32,r.BufferViewVec3i32,r.BufferViewVec4i32];function c(t){return`${t.ElementType}_${t.ElementCount}`}const u=new Map;a.forEach((t=>u.set(c(t),t))),t.InterleavedBuffer=s,t.InterleavedLayout=o,t.PackedLayout=class{constructor(t){this.fields=new Array,t.fields.forEach(((t,e)=>{const r={...t,constructor:c(t.constructor)};this.fields.push([e,r])})),this.stride=t.stride}},t.newLayout=function(){return new o},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/float16":function(){define(["exports"],(function(t){"use strict";let e=globalThis.Float16Array;t.hasNativeFloat16Array=!!e,t.disableNativeF16Array=function(){e=null,t.hasNativeFloat16Array=!1},t.getFloat16ArrayConstructor=function(){return e},t.makeFloat16Array=function(...t){return new(e??Float32Array)(...t)},t.resetNativeF16Array=function(){e=globalThis.Float16Array,t.hasNativeFloat16Array=!!e},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/buffer/BufferView":function(){define(["exports","../float16","./internals/Mat3","./internals/Mat4","./internals/Scalar","./internals/Vec2","./internals/Vec3","./internals/Vec4","../../../views/3d/webgl-engine/lib/Util"],(function(t,e,r,n,i,s,o,a,c){"use strict";class u extends i.BufferViewScalarImpl{constructor(t,r=0,n,i){c.assert(e.hasNativeFloat16Array),super(e.getFloat16ArrayConstructor(),t,r,n,i),this.elementType="f16"}static{this.ElementType="f16"}}class f extends i.BufferViewScalarImpl{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static{this.ElementType="f32"}}class l extends s.BufferViewVec2Impl{constructor(t,r=0,n,i){c.assert(e.hasNativeFloat16Array),super(e.getFloat16ArrayConstructor(),t,r,n,i),this.elementType="f16"}slice(t,e){return this.sliceBuffer(l,t,e)}static{this.ElementType="f16"}}class d extends s.BufferViewVec2Impl{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(d,t,e)}static{this.ElementType="f32"}}class h extends o.BufferViewVec3Impl{constructor(t,r=0,n,i){c.assert(e.hasNativeFloat16Array),super(e.getFloat16ArrayConstructor(),t,r,n,i),this.elementType="f16"}slice(t,e){return this.sliceBuffer(h,t,e)}static{this.ElementType="f16"}}class p extends o.BufferViewVec3Impl{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(p,t,e)}static fromTypedArray(t,e){return new p(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}static{this.ElementType="f32"}}class m extends a.BufferViewVec4Impl{constructor(t,r=0,n,i){c.assert(e.hasNativeFloat16Array),super(e.getFloat16ArrayConstructor(),t,r,n,i),this.elementType="f16"}slice(t,e){return this.sliceBuffer(m,t,e)}static{this.ElementType="f16"}}class y extends a.BufferViewVec4Impl{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(y,t,e)}static{this.ElementType="f32"}}class g extends r.BufferViewMat3Impl{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(g,t,e)}static{this.ElementType="f32"}}class T extends r.BufferViewMat3Impl{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(T,t,e)}static{this.ElementType="f64"}}class b extends n.BufferViewMat4Impl{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(b,t,e)}static{this.ElementType="f32"}}class M extends n.BufferViewMat4Impl{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(M,t,e)}static{this.ElementType="f64"}}class E extends i.BufferViewScalarImpl{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(E,t,e)}static{this.ElementType="f64"}}class S extends s.BufferViewVec2Impl{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(S,t,e)}static{this.ElementType="f64"}}class A extends o.BufferViewVec3Impl{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(A,t,e)}static fromTypedArray(t,e){return new A(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}static{this.ElementType="f64"}}class _ extends a.BufferViewVec4Impl{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(_,t,e)}static{this.ElementType="f64"}}class B extends i.BufferViewScalarImpl{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}slice(t,e){return this.sliceBuffer(B,t,e)}static{this.ElementType="u8"}}class I extends s.BufferViewVec2Impl{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}slice(t,e){return this.sliceBuffer(I,t,e)}static{this.ElementType="u8"}}class V extends o.BufferViewVec3Impl{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}slice(t,e){return this.sliceBuffer(V,t,e)}static fromTypedArray(t,e){return new V(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}static{this.ElementType="u8"}}class x extends a.BufferViewVec4Impl{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}slice(t,e){return this.sliceBuffer(x,t,e)}static{this.ElementType="u8"}}class O extends i.BufferViewScalarImpl{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}slice(t,e){return this.sliceBuffer(O,t,e)}static{this.ElementType="u16"}}class w extends s.BufferViewVec2Impl{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}slice(t,e){return this.sliceBuffer(w,t,e)}static{this.ElementType="u16"}}class v extends o.BufferViewVec3Impl{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}slice(t,e){return this.sliceBuffer(v,t,e)}static{this.ElementType="u16"}}class N extends a.BufferViewVec4Impl{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}slice(t,e){return this.sliceBuffer(N,t,e)}static{this.ElementType="u16"}}class P extends i.BufferViewScalarImpl{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}slice(t,e){return this.sliceBuffer(P,t,e)}static{this.ElementType="u32"}}class R extends s.BufferViewVec2Impl{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}slice(t,e){return this.sliceBuffer(R,t,e)}static{this.ElementType="u32"}}class F extends o.BufferViewVec3Impl{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}slice(t,e){return this.sliceBuffer(F,t,e)}static{this.ElementType="u32"}}class L extends a.BufferViewVec4Impl{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}slice(t,e){return this.sliceBuffer(L,t,e)}static{this.ElementType="u32"}}class C extends i.BufferViewScalarImpl{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}slice(t,e){return this.sliceBuffer(C,t,e)}static{this.ElementType="i8"}}class j extends s.BufferViewVec2Impl{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}slice(t,e){return this.sliceBuffer(j,t,e)}static{this.ElementType="i8"}}class D extends o.BufferViewVec3Impl{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}slice(t,e){return this.sliceBuffer(D,t,e)}static{this.ElementType="i8"}}class U extends a.BufferViewVec4Impl{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}slice(t,e){return this.sliceBuffer(U,t,e)}static{this.ElementType="i8"}}class q extends i.BufferViewScalarImpl{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}slice(t,e){return this.sliceBuffer(q,t,e)}static{this.ElementType="i16"}}class z extends s.BufferViewVec2Impl{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}slice(t,e){return this.sliceBuffer(z,t,e)}static{this.ElementType="i16"}}class k extends o.BufferViewVec3Impl{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}slice(t,e){return this.sliceBuffer(k,t,e)}static{this.ElementType="i16"}}class G extends a.BufferViewVec4Impl{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}slice(t,e){return this.sliceBuffer(G,t,e)}static{this.ElementType="i16"}}class H extends i.BufferViewScalarImpl{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}slice(t,e){return this.sliceBuffer(H,t,e)}static{this.ElementType="i32"}}class Y extends s.BufferViewVec2Impl{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}slice(t,e){return this.sliceBuffer(Y,t,e)}static{this.ElementType="i32"}}class X extends o.BufferViewVec3Impl{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}slice(t,e){return this.sliceBuffer(X,t,e)}static{this.ElementType="i32"}}class W extends a.BufferViewVec4Impl{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}slice(t,e){return this.sliceBuffer(W,t,e)}static{this.ElementType="i32"}}t.BufferViewFloat=f,t.BufferViewFloat16=u,t.BufferViewFloat64=E,t.BufferViewInt16=q,t.BufferViewInt32=H,t.BufferViewInt8=C,t.BufferViewMat3f=g,t.BufferViewMat3f64=T,t.BufferViewMat4f=b,t.BufferViewMat4f64=M,t.BufferViewUint16=O,t.BufferViewUint32=P,t.BufferViewUint8=B,t.BufferViewVec2f=d,t.BufferViewVec2f16=l,t.BufferViewVec2f64=S,t.BufferViewVec2i16=z,t.BufferViewVec2i32=Y,t.BufferViewVec2i8=j,t.BufferViewVec2u16=w,t.BufferViewVec2u32=R,t.BufferViewVec2u8=I,t.BufferViewVec3f=p,t.BufferViewVec3f16=h,t.BufferViewVec3f64=A,t.BufferViewVec3i16=k,t.BufferViewVec3i32=X,t.BufferViewVec3i8=D,t.BufferViewVec3u16=v,t.BufferViewVec3u32=F,t.BufferViewVec3u8=V,t.BufferViewVec4f=y,t.BufferViewVec4f16=m,t.BufferViewVec4f64=_,t.BufferViewVec4i16=G,t.BufferViewVec4i32=W,t.BufferViewVec4i8=U,t.BufferViewVec4u16=N,t.BufferViewVec4u32=L,t.BufferViewVec4u8=x,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports"],(function(t){"use strict";class e{static{this.ElementCount=9}constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=9;const s=this.TypedArrayConstructor;void 0===n&&(n=9*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<9;t++)e[t]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<9;t++)this.typedBuffer[r++]=e[t]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer;let s=t*this.typedBufferStride,o=r*e.typedBufferStride;for(let t=0;t<9;++t)n[s++]=i[o++]}get buffer(){return this.typedBuffer.buffer}}t.BufferViewMat3Impl=e,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports"],(function(t){"use strict";class e{static{this.ElementCount=16}constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=16;const s=this.TypedArrayConstructor;void 0===n&&(n=16*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<16;t++)e[t]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<16;t++)this.typedBuffer[r++]=e[t]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){this.copyFromTypedBuffer(t,e.typedBuffer,r*e.typedBufferStride)}copyFromTypedBuffer(t,e,r){const n=this.typedBuffer;let i=t*this.typedBufferStride;for(let t=0;t<16;++t)n[i++]=e[r++]}get buffer(){return this.typedBuffer.buffer}}t.BufferViewMat4Impl=e,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports"],(function(t){"use strict";class e{static{this.ElementCount=1}constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=1;const s=this.TypedArrayConstructor;void 0===n&&(n=s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.stride=n,this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}get(t){return this.typedBuffer[t*this.typedBufferStride]}set(t,e){this.typedBuffer[t*this.typedBufferStride]=e}get buffer(){return this.typedBuffer.buffer}}t.BufferViewScalarImpl=e,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports","../../../../core/libs/gl-matrix-2/math/vec2"],(function(t,e){"use strict";class r{static{this.ElementCount=2}constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.start=r,this.elementCount=2;const s=this.TypedArrayConstructor;void 0===n&&(n=2*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getVec(t,r){return t*=this.typedBufferStride,e.set(r,this.typedBuffer[t],this.typedBuffer[t+1])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t]=e[1]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t]=r}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer;let s=t*this.typedBufferStride,o=r*e.typedBufferStride;n[s++]=i[o++],n[s]=i[o]}get buffer(){return this.typedBuffer.buffer}}t.BufferViewVec2Impl=r,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["exports","./common"],(function(t,e){"use strict";function r(t,e){return t[0]=e[0],t[1]=e[1],t}function n(t,e,r){return t[0]=e,t[1]=r,t}function i(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function s(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function o(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function a(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function c(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function u(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function f(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function l(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function d(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function h(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function p(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function m(t,e){const r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function y(t,e){const r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function g(t){const e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function T(t){const e=t[0],r=t[1];return e*e+r*r}function b(t,e){return t[0]=-e[0],t[1]=-e[1],t}function M(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function E(t,e){const r=e[0],n=e[1];let i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function S(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,r){const n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function _(t,e,r,n){const i=e[0],s=e[1];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t}function B(t,r=1){const n=2*e.RANDOM()*Math.PI;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t}function I(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function V(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function x(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function O(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function w(t,e,r,n){const i=e[0]-r[0],s=e[1]-r[1],o=Math.sin(n),a=Math.cos(n);return t[0]=i*a-s*o+r[0],t[1]=i*o+s*a+r[1],t}function v(t,e){const r=t[0],n=t[1],i=e[0],s=e[1];let o=r*r+n*n;o>0&&(o=1/Math.sqrt(o));let a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));const c=(r*i+n*s)*o*a;return c>1?0:c<-1?Math.PI:Math.acos(c)}function N(t){return"vec2("+t[0]+", "+t[1]+")"}function P(t,e){return t[0]===e[0]&&t[1]===e[1]}function R(t,r){const n=t[0],i=t[1],s=r[0],o=r[1],a=e.getEpsilon();return Math.abs(n-s)<=a*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=a*Math.max(1,Math.abs(i),Math.abs(o))}function F(t,e,r,n,i){let s=e[0]-r[0],o=e[1]-r[1];const a=(n[0]*s+n[1]*o)*(i-1);return s=n[0]*a,o=n[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const L=g,C=s,j=o,D=a,U=m,q=y,z=T,k=Object.freeze(Object.defineProperty({__proto__:null,add:i,angle:v,ceil:c,copy:r,cross:A,dist:U,distance:m,div:D,divide:a,dot:S,equals:R,exactEquals:P,floor:u,inverse:M,len:L,length:g,lerp:_,max:l,min:f,mul:j,multiply:o,negate:b,normalize:E,projectAndScale:F,random:B,rotate:w,round:d,scale:h,scaleAndAdd:p,set:n,sqrDist:q,sqrLen:z,squaredDistance:y,squaredLength:T,str:N,sub:C,subtract:s,transformMat2:I,transformMat2d:V,transformMat3:x,transformMat4:O},Symbol.toStringTag,{value:"Module"}));t.add=i,t.angle=v,t.ceil=c,t.copy=r,t.cross=A,t.dist=U,t.distance=m,t.div=D,t.divide=a,t.dot=S,t.equals=R,t.exactEquals=P,t.floor=u,t.inverse=M,t.len=L,t.length=g,t.lerp=_,t.max=l,t.min=f,t.mul=j,t.multiply=o,t.negate=b,t.normalize=E,t.projectAndScale=F,t.random=B,t.rotate=w,t.round=d,t.scale=h,t.scaleAndAdd=p,t.set=n,t.sqrDist=q,t.sqrLen=z,t.squaredDistance=y,t.squaredLength=T,t.str=N,t.sub=C,t.subtract=s,t.transformMat2=I,t.transformMat2d=V,t.transformMat3=x,t.transformMat4=O,t.vec2=k,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports","../../../../chunks/vec32"],(function(t,e){"use strict";class r{static{this.ElementCount=3}constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.elementCount=3;const s=this.TypedArrayConstructor;void 0===n&&(n=3*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getVec(t,r){return t*=this.typedBufferStride,e.set(r,this.typedBuffer[t],this.typedBuffer[t+1],this.typedBuffer[t+2])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t]=e[2]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,n){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t]=n}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer;let s=t*this.typedBufferStride,o=r*e.typedBufferStride;n[s++]=i[o++],n[s++]=i[o++],n[s]=i[o]}get buffer(){return this.typedBuffer.buffer}}t.BufferViewVec3Impl=r,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports","../../../../chunks/vec42"],(function(t,e){"use strict";class r{static{this.ElementCount=4}constructor(t,e,r=0,n,i){this.TypedArrayConstructor=t,this.start=r,this.elementCount=4;const s=this.TypedArrayConstructor;void 0===n&&(n=4*s.BYTES_PER_ELEMENT);const o=0===e.byteLength?0:r;this.typedBuffer=null==i?new s(e,o):new s(e,o,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getVec(t,r){return t*=this.typedBufferStride,e.set(r,this.typedBuffer[t++],this.typedBuffer[t++],this.typedBuffer[t++],this.typedBuffer[t])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t++]=e[2],this.typedBuffer[t]=e[3]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,n,i){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t++]=n,this.typedBuffer[t]=i}copyFrom(t,e,r){const n=this.typedBuffer,i=e.typedBuffer;let s=t*this.typedBufferStride,o=r*e.typedBufferStride;n[s++]=i[o++],n[s++]=i[o++],n[s++]=i[o++],n[s]=i[o]}get buffer(){return this.typedBuffer.buffer}}t.BufferViewVec4Impl=r,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/buffer/types":function(){define(["exports"],(function(t){"use strict";t.elementTypeSize=function(t){switch(t){case"u8":case"i8":return 1;case"u16":case"i16":case"f16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}},t.isInteger=function(t){switch(t){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f16":case"f32":case"f64":return!1}},t.isSigned=function(t){switch(t){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f16":case"f32":case"f64":return!0}},t.maximumValue=function(t){switch(t){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f16":return 65504;case"f32":return 3402823e32;case"f64":return 179769e303}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],(function(t){"use strict";var e;t.VertexAttribute=void 0,(e=t.VertexAttribute||(t.VertexAttribute={})).POSITION="position",e.NORMAL="normal",e.NORMALCOMPRESSED="normalCompressed",e.UV0="uv0",e.UVI="uvi",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.ROTATION="rotation",e.TANGENT="tangent",e.OFFSET="offset",e.PERSPECTIVEDIVIDE="perspectiveDivide",e.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",e.LENGTH="length",e.NEXTDELTA="nextDelta",e.PREVIOUSDELTA="previousDelta",e.U0="u0",e.LINEPARAMETERS="lineParameters",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.PROFILEAUXDATA="profileAuxData",e.INSTANCEMODELORIGINHI="instanceModelOriginHi",e.INSTANCEMODELORIGINLO="instanceModelOriginLo",e.INSTANCEMODEL="instanceModel",e.INSTANCEMODELNORMAL="instanceModelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMAL2COMPRESSED="normal2Compressed",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.START_UP="startUp",e.END_UP="endUp",e.EXTRUDE="extrude",e.OLIDCOLOR="objectAndLayerIdColor",e.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor",t.affectsGeometry=function(e){return e===t.VertexAttribute.POSITION},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout","../VertexAttribute"],(function(t,e,r,n){"use strict";const i=r.newLayout().vec3f(n.VertexAttribute.POSITION).u16(n.VertexAttribute.COMPONENTINDEX).freeze(),s=r.newLayout().vec2u8(n.VertexAttribute.SIDENESS).freeze(),o=e.glLayout(s),a=r.newLayout().vec3f(n.VertexAttribute.POSITION0).vec3f(n.VertexAttribute.POSITION1).vec2i16(n.VertexAttribute.NORMALCOMPRESSED).u16(n.VertexAttribute.COMPONENTINDEX).u8(n.VertexAttribute.VARIANTOFFSET,{glNormalized:!0}).u8(n.VertexAttribute.VARIANTSTROKE).u8(n.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0}).freeze(),c=r.newLayout().vec3f(n.VertexAttribute.POSITION0).vec3f(n.VertexAttribute.POSITION1).vec2i16(n.VertexAttribute.NORMALCOMPRESSED).vec2i16(n.VertexAttribute.NORMAL2COMPRESSED).u16(n.VertexAttribute.COMPONENTINDEX).u8(n.VertexAttribute.VARIANTOFFSET,{glNormalized:!0}).u8(n.VertexAttribute.VARIANTSTROKE).u8(n.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0}).freeze(),u=new Map([[n.VertexAttribute.POSITION0,0],[n.VertexAttribute.POSITION1,1],[n.VertexAttribute.COMPONENTINDEX,2],[n.VertexAttribute.VARIANTOFFSET,3],[n.VertexAttribute.VARIANTSTROKE,4],[n.VertexAttribute.VARIANTEXTENSION,5],[n.VertexAttribute.NORMALCOMPRESSED,6],[n.VertexAttribute.NORMAL2COMPRESSED,7],[n.VertexAttribute.SIDENESS,8]]);t.EdgeInputBufferLayout=i,t.RegularEdgeInstancesLayout=a,t.SilhouetteEdgeInstancesLayout=c,t.VertexLayout=s,t.glVertexLayout=o,t.vertexAttributeLocations=u,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/support/buffer/glUtil":function(){define(["exports","../../../webgl/enums","../../../webgl/VertexElementDescriptor"],(function(t,e,r){"use strict";const n={u8:e.DataType.UNSIGNED_BYTE,u16:e.DataType.UNSIGNED_SHORT,u32:e.DataType.UNSIGNED_INT,i8:e.DataType.BYTE,i16:e.DataType.SHORT,i32:e.DataType.INT,f16:e.DataType.HALF_FLOAT,f32:e.DataType.FLOAT};t.glLayout=function(t,e=0){const i=t.stride;return Array.from(t.fields.keys()).map((s=>{const o=t.fields.get(s),a=o.constructor.ElementCount,c=function(t){const e=n[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}(o.constructor.ElementType),u=o.offset,f=o.optional?.glNormalized??!1;return new r.VertexElementDescriptor(s,a,c,u,i,f,e)}))},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define(["exports","../../../../../core/RandomLCG","../../../../../chunks/vec32","../../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../support/buffer/glUtil","../Normals","./bufferLayouts"],(function(t,e,r,n,i,s,o){"use strict";class a{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?d:l}write(t,e,r){T.seed=this._edgeHashFunction(r);const n=T.getIntRange(0,255),i=T.getIntRange(0,this.settings.variants-1),s=T.getFloat();var o;const a=255*(.5*(o=-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),Math.abs(o)**1.2*Math.sign(o))+.5);t.position0.setVec(e,r.position0),t.position1.setVec(e,r.position1),t.componentIndex.set(e,r.componentIndex),t.variantOffset.set(e,n),t.variantStroke.set(e,i),t.variantExtension.set(e,a)}}const c=new Float32Array(6),u=new Uint32Array(c.buffer),f=new Uint32Array(1);function l(t){return c[0]=t.position0[0],c[1]=t.position0[1],c[2]=t.position0[2],c[3]=t.position1[0],c[4]=t.position1[1],c[5]=t.position1[2],f[0]=31*(31*(31*(31*(31*(166811+u[0])+u[1])+u[2])+u[3])+u[4])+u[5],f[0]}function d(t){const e=c;e[0]=p(t.position0[0]),e[1]=p(t.position0[1]),e[2]=p(t.position0[2]),e[3]=p(t.position1[0]),e[4]=p(t.position1[1]),e[5]=p(t.position1[2]),f[0]=5381;for(let t=0;t<u.length;t++)f[0]=31*f[0]+u[t];return f[0]}const h=1e4;function p(t){return Math.round(t*h)/h}class m{constructor(){this._commonWriter=new a}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return o.RegularEdgeInstancesLayout.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),r.add(g,n.faceNormal0,n.faceNormal1),r.normalize(g,g);const{typedBuffer:i,typedBufferStride:o}=t.normalCompressed;s.compressNormal(i,e,g[0],g[1],g[2],o)}static{this.Layout=o.RegularEdgeInstancesLayout}static{this.glLayout=i.glLayout(o.RegularEdgeInstancesLayout,1)}}class y{constructor(){this._commonWriter=new a}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return o.SilhouetteEdgeInstancesLayout.createBuffer(t)}write(t,e,r){this._commonWriter.write(t,e,r);{const{typedBuffer:n,typedBufferStride:i}=t.normalCompressed;s.compressNormal(n,e,r.faceNormal0[0],r.faceNormal0[1],r.faceNormal0[2],i)}{const{typedBuffer:n,typedBufferStride:i}=t.normal2Compressed;s.compressNormal(n,e,r.faceNormal1[0],r.faceNormal1[1],r.faceNormal1[2],i)}}static{this.Layout=o.SilhouetteEdgeInstancesLayout}static{this.glLayout=i.glLayout(o.SilhouetteEdgeInstancesLayout,1)}}const g=n.create(),T=new e;t.RegularEdgeBufferWriter=m,t.SilhouetteEdgeBufferWriter=y,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/webgl-engine/lib/Normals":function(){define(["exports","../../../../core/mathUtils","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/support/FloatArray","../../../../geometry/support/ShortArray"],(function(t,e,r,n,i,s){"use strict";function o(t,e,r,n,i,s=2){const o=1/(Math.abs(r)+Math.abs(n)+Math.abs(i)),a=r*o,u=n*o,f=i<=0?(a>=0?1:-1)*(1-Math.abs(u)):a,l=i<=0?(u>=0?1:-1)*(1-Math.abs(a)):u,d=e*s;t[d]=c(f),t[d+1]=c(l)}function a(t,e,n,i=2){const s=n*i,o=u(e[s]),a=u(e[s+1]),c=1-Math.abs(o)-Math.abs(a);return t[2]=c,c<0?(t[0]=(o>=0?1:-1)*(1-Math.abs(a)),t[1]=(a>=0?1:-1)*(1-Math.abs(o))):(t[0]=o,t[1]=a),r.normalize(t,t)}function c(t){return e.clamp(Math.round(32767*t),-32767,32767)}function u(t){return e.clamp(t/32767,-1,1)}t.compressAndTransformNormals=function(t,e){const i=t.length/3,s=new Int16Array(2*i);let a=0;const c=n.create();for(let n=0;n<i;++n)c[0]=t[a++],c[1]=t[a++],c[2]=t[a++],r.transformMat3(c,c,e),o(s,n,c[0],c[1],c[2]);return s},t.compressNormal=o,t.compressNormals=function(t){const e=t.length/3,r=s.newShortArray(2*e);let n=0;for(let i=0;i<e;++i)o(r,i,t[n++],t[n++],t[n++]);return r},t.decodeInt16=u,t.decompressNormal=a,t.decompressNormals=function(t,e=2){const r=t.length/e,s=i.newFloatArray(3*r),o=n.create();let c=0;for(let n=0;n<r;++n)a(o,t,n,e),s[c++]=o[0],s[c++]=o[1],s[c++]=o[2];return s},t.encodeInt16=c,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/FloatArray":function(){define(["exports","../../core/typedArrayUtil"],(function(t,e){"use strict";t.compactFloatArray=function(t){return Array.isArray(t)?t.length<e.nativeArrayMaxSize?t:new Float32Array(t):t.length<e.nativeArrayMaxSize?Array.from(t):t},t.floatArrayFrom=function(t){return(Array.isArray(t)?t.length:t.byteLength/8)<=e.nativeArrayMaxSize?Array.from(t):new Float32Array(t)},t.floatSubArray=function(t,e,r){return Array.isArray(t)?t.slice(e,e+r):t.subarray(e,e+r)},t.newFloatArray=function(t,r=!1){return t<=e.nativeArrayMaxSize?r?new Array(t).fill(0):new Array(t):new Float32Array(t)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/geometry/support/ShortArray":function(){define(["exports","../../core/typedArrayUtil"],(function(t,e){"use strict";t.compactShortArray=function(t){return Array.isArray(t)?t.length<e.nativeArrayMaxSize?t:new Int16Array(t):t.length<e.nativeArrayMaxSize?Array.from(t):t},t.newShortArray=function(t){return t<=e.nativeArrayMaxSize?new Array(t):new Int16Array(t)},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define(["exports","../../../../../core/mathUtils","../../../../../core/PooledArray","../../../../../chunks/vec32","../../../../../core/libs/gl-matrix-2/factories/vec3f64","./Edge"],(function(t,e,r,n,i,s){"use strict";class o{constructor(){this.index=0,this.length=0}}const a=new r({allocator:t=>t||new o,deallocator:null}),c=new r({deallocator:null}),u=new r({deallocator:null}),f=new s.Edge,l=i.create(),d=i.create(),h=i.create(),p=i.create(),m=i.create(),y=e.deg2rad(4),g=Math.cos(y),T=e.deg2rad(35),b=Math.cos(T);t.extractEdges=function(t,r,i){const s=t.vertices.position,o=t.vertices.componentIndex,T=f.position0,M=f.position1,E=f.faceNormal0,S=f.faceNormal1,{edges:A,normals:_}=function(t){const e=t.faces.length/3,r=t.faces,i=t.neighbors,s=t.vertices.position;c.length=u.length=0;for(let t=0;t<e;t++){const e=3*t,o=i[e],a=i[e+1],f=i[e+2],l=r[e],d=r[e+1],y=r[e+2];s.getVec(l,h),s.getVec(d,p),s.getVec(y,m),n.subtract(p,p,h),n.subtract(m,m,h),n.cross(h,p,m),n.normalize(h,h),u.pushArray(h),(-1===o||l<d)&&(c.push(l),c.push(d),c.push(t),c.push(o)),(-1===a||d<y)&&(c.push(d),c.push(y),c.push(t),c.push(a)),(-1===f||y<l)&&(c.push(y),c.push(l),c.push(t),c.push(f))}return{edges:c,normals:u}}(t),B=A.length/4,I=r.allocate(B);let V=0;const x=B,O=i?.allocate(x);let w=0,v=0,N=0;a.length=0;for(let t=0;t<B;++t){const e=4*t;s.getVec(A.data[e],T),s.getVec(A.data[e+1],M);const r=a.pushNew();r.index=4*t,r.length=n.distance(T,M)}a.sort(((t,e)=>e.length-t.length));const P=new Array,R=new Array;a.forAll((({length:t,index:a})=>{const c=A.data[a],u=A.data[a+1],h=A.data[a+2],p=A.data[a+3],m=-1===p;if(s.getVec(c,T),s.getVec(u,M),m){const t=3*h;n.set(E,_.data[t],_.data[t+1],_.data[t+2]),n.copy(S,E),f.componentIndex=o.get(c),f.cosAngle=n.dot(E,S)}else{let t=3*h;if(n.set(E,_.data[t],_.data[t+1],_.data[t+2]),t=3*p,n.set(S,_.data[t],_.data[t+1],_.data[t+2]),f.componentIndex=o.get(c),f.cosAngle=n.dot(E,S),B=g,f.cosAngle>B)return;f.cosAngle<-.9999&&n.copy(S,E)}var B,x;v+=t,N++,m||(x=b,f.cosAngle<x)?(r.write(I,V++,f),P.push(t)):function(t,r){const i=e.acosClamped(t.cosAngle);return n.direction(d,t.position1,t.position0),i*(n.dot(n.cross(l,t.faceNormal0,t.faceNormal1),d)>0?-1:1)>r}(f,y)&&(O&&i&&i.write(O,w++,f),R.push(t))}));const F=new Float32Array(P.reverse()),L=new Float32Array(R.reverse()),C=O&&i?{instancesData:O.slice(0,w),lodInfo:{lengths:L}}:void 0;return{regular:{instancesData:I.slice(0,V),lodInfo:{lengths:F}},silhouette:C,averageEdgeLength:v/N}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/3d/webgl-engine/lib/edgeRendering/Edge":function(){define(["exports","../../../../../core/libs/gl-matrix-2/factories/vec3f64"],(function(t,e){"use strict";t.Edge=class{constructor(){this.position0=e.create(),this.position1=e.create(),this.faceNormal0=e.create(),this.faceNormal1=e.create(),this.componentIndex=0,this.cosAngle=0}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"esri/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils":function(){define(["exports","../../../../../chunks/vec32","../../../../../chunks/sphere"],(function(t,e,r){"use strict";t.boundsFromEdge=function(t,n,i){const s=r.create(),o=r.getCenter(s);return e.scaleAndAdd(o,o,t,.5),e.scaleAndAdd(o,o,n,.5),s[3]=e.distance(o,t),e.add(o,o,i),s},t.maxCandidateCount=1e3,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))},"*noref":1}}),define(["../../../../../chunks/tslib.es6","../../../../../core/promiseUtils","../../../../../core/Logger","../../../../../core/has","../../../../../core/RandomLCG","../../../../../core/Error","../../../../../core/accessorSupport/decorators/subclass","../../../../../chunks/vec32","../../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../../geometry/support/lineSegment","../../../../../chunks/sphere","../../../../3d/webgl-engine/lib/Octree","../../../../3d/webgl-engine/lib/edgeRendering/edgeProcessing","./sceneLayerSnappingUtils"],(function(t,e,r,n,i,s,o,a,c,u,f,l,d,h){"use strict";let p=class{constructor(){this._idToComponent=new Map,this._components=new l((t=>t.bounds)),this._edges=new l((t=>t.bounds)),this._tmpLineSegment=u.create(),this._tmpP1=c.create(),this._tmpP2=c.create(),this._tmpP3=c.create(),this.remoteClient=null}async fetchCandidates(t,r){await Promise.resolve(),e.throwIfAborted(r),await this._ensureEdgeLocations(t,r);const n=[];return this._edges.forEachNeighbor((e=>(this._addCandidates(t,e,n),n.length<h.maxCandidateCount)),t.bounds),{result:{candidates:n}}}async _ensureEdgeLocations(t,e){const r=[];if(this._components.forEachNeighbor((t=>{if(null==t.info){const{id:e,uid:n}=t;r.push({id:e,uid:n})}return!0}),t.bounds),!r.length)return;const n={components:r},i=await this.remoteClient.invoke("fetchAllEdgeLocations",n,e??{});for(const t of i.components)this._setFetchEdgeLocations(t)}async add(t){const e=new g(t.id,t.bounds);return this._idToComponent.set(e.id,e),this._components.add([e]),{result:{}}}async remove(t){const e=this._idToComponent.get(t.id);if(e){const t=[];this._edges.forEachNeighbor((r=>(r.component===e&&t.push(r),!0)),e.bounds),this._edges.remove(t),this._components.remove([e]),this._idToComponent.delete(e.id)}return{result:{}}}_setFetchEdgeLocations(t){const e=this._idToComponent.get(t.id);if(null==e||t.uid!==e.uid)return;const r=d.extractComponentsEdgeLocationsLayout.createView(t.locations),n=new Array(r.count),i=c.create(),s=c.create();for(let o=0;o<r.count;o++){r.position0.getVec(o,i),r.position1.getVec(o,s);const a=h.boundsFromEdge(i,s,t.origin),c=new T(e,o,a);n[o]=c}this._edges.add(n);const{objectIds:o,origin:a}=t;e.info={locations:r,objectIds:o,origin:a}}_addCandidates(t,e,r){const{info:n}=e.component,{origin:i,objectIds:s}=n,o=n.locations,c=o.position0.getVec(e.index,this._tmpP1),u=o.position1.getVec(e.index,this._tmpP2);a.add(c,c,i),a.add(u,u,i);const f=s[o.componentIndex.get(e.index)];this._addEdgeCandidate(t,f,c,u,r),y(t,f,c,r),y(t,f,u,r)}_addEdgeCandidate(t,e,r,n,i){if(!t.returnEdge)return;const s=f.getCenter(t.bounds),o=u.fromPoints(r,n,this._tmpLineSegment),l=u.projectPoint(o,s,this._tmpP3);f.containsPoint(t.bounds,l)&&i.push({type:"edge",objectId:e,target:c.clone(l),distance:a.distance(s,l),start:c.clone(r),end:c.clone(n)})}};p=t.__decorate([o.subclass("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],p);const m=p;function y(t,e,r,n){if(!t.returnVertex||!f.containsPoint(t.bounds,r))return;const i=f.getCenter(t.bounds);n.push({type:"vertex",objectId:e,target:c.clone(r),distance:a.distance(i,r)})}class g{constructor(t,e){this.id=t,this.bounds=e,this.info=null,this.uid=++g.uid}static{this.uid=0}}class T{constructor(t,e,r){this.component=t,this.index=e,this.bounds=r}}return m}));