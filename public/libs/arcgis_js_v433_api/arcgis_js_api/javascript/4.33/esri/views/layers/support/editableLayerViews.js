// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Logger","../../../geometry/support/spatialReferenceUtils","../../../layers/support/infoFor3D","../../ViewingMode"],(function(e,t,i,r,s){"use strict";const o="esri.views.layers.support.editableLayerViews";e.isGeometryEditableSceneLayer=function(e,n){const{associatedLayer:a}=e,d=a?.infoFor3D;if(!d)return!1;const c=r.getGlbFormatId(d);if(null==c||!d.queryFormats.includes(c))return t.getLogger(o).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits because it does not support GLB queries.`),!1;const l=e.spatialReference,g=a.spatialReference;if(!i.equals(l,g))return t.getLogger(o).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits because its spatial reference (wkid:${l.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${g.wkid}).`),!1;const u=a.sourceJSON.sourceSpatialReference;if(null!=u&&!i.equals(u,g))return t.getLogger(o).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits because the spatial reference of its associated FeatureLayer's service (wkid:${g.wkid}) is different from its source spatial reference (wkid:${u.wkid}).`),!1;const{view:p}=n;if(n.destroyed||null==p)return!1;const w=p.spatialReference,{viewingMode:f}=p.state,y=i.isGeographic(l),$=f===s.ViewingMode.Global;return y&&!$?(t.getLogger(o).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits in local viewing mode because its spatial reference (wkid:${l.wkid}) is geographic. Please consider changing the viewing mode to global.`),!1):!y&&$?(t.getLogger(o).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits in global viewing mode because its spatial reference (wkid:${l.wkid}) is projected. Please consider changing the viewing mode to local.`),!1):!!(i.equals(l,w)||$&&i.isWebMercator(w)&&i.isWGS84(l))||(t.getLogger(o).warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) does not support geometry edits because its spatial reference (wkid:${l.wkid}) does not match the view spatial reference (wkid:${w.wkid}).`),!1)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));