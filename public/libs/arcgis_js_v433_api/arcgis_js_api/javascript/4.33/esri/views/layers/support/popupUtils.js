// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../layers/support/fieldUtils"],(function(e,l){"use strict";function t(e,l){return e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}e.getFetchPopupTemplate=t,e.getRequiredFields=async function(e,t=e.popupTemplate){if(null==t)return[];const u=await t.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:d}=t,{objectIdField:p,typeIdField:n,globalIdField:i,relationships:s}=e;if(u.includes("*"))return["*"];const a=d?l.getFeatureEditFields(e):[],o=l.fixFields(e.fieldsIndex,[...u,...a]);return n&&o.push(n),o&&p&&e.fieldsIndex?.has(p)&&!o.includes(p)&&o.push(p),o&&i&&e.fieldsIndex?.has(i)&&!o.includes(i)&&o.push(i),s&&s.forEach((l=>{const{keyField:t}=l;o&&t&&e.fieldsIndex?.has(t)&&!o.includes(t)&&o.push(t)})),o},e.hasPopupTemplate=function(e,l){return null!=t(e,{defaultPopupTemplateEnabled:l})},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));