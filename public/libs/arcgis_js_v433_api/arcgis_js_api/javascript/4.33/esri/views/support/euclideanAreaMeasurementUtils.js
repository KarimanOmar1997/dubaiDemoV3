// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../core/quantityUtils","../../core/unitUtils","../../chunks/earcut","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","../../geometry/projection/projectVectorToVector","../../geometry/support/plane","../../geometry/support/triangle","./measurementUtils"],(function(e,t,r,n,o,a,c,i,l,s){"use strict";function u(e,n,u=e.hasZ){const g=s.computeEuclideanMeasurementSR(e.spatialReference),m=r.areaUnitFromSpatialReference(g);if(null==m)return null;let h=0;for(const t of e.rings){const r=t.length;if(r<3)continue;const{positionsWorldCoords:s}=n;for(;s.length<r;)s.push(a.create());const m=f,y=o.set(p,0,0,0),j=1/r;for(let n=0;n<r;n++){if(A=m,(P=t[n]).length<2||(o.set(A,P[0],P[1],u&&P[2]||0),0))return null;if(!c.projectVectorToVector(m,e.spatialReference,s[n],g))return null;o.scaleAndAdd(y,y,s[n],j)}const C=i.fromPoints(s[0],s[1],y,i.wrap());if(0===o.squaredLength(i.getNormal(C)))continue;for(let e=0;e<r;e++)i.projectPointLocal(C,y,s[e],s[e]);const v=d(s);for(let e=0;e<v.length;e+=3)h+=l.areaPoints2d(s[v[e]],s[v[e+1]],s[v[e+2]])}var A,P;return t.createArea(h,m)}const f=a.create(),p=a.create();function d(e){return n.earcut(function(e){const t=new Float64Array(2*e.length);for(let r=0;r<e.length;++r){const n=e[r],o=2*r;t[o]=n[0],t[o+1]=n[1]}return t}(e),[],2)}e.computeEuclideanPlanarArea=u,e.createEuclideanPlanarAreaCache=function(){return{positionsWorldCoords:[]}},e.euclideanHorizontalPlanarArea=function(e,t={positionsWorldCoords:[]}){return u(e,t,!1)},e.euclideanPlanarArea=function(e,t={positionsWorldCoords:[]}){return u(e,t)},e.triangulate=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));