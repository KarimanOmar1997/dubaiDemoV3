// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../core/quantityUtils","../../core/unitUtils","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64","../../geometry/projection/projectVectorToVector","../../geometry/support/spatialReferenceUtils","./measurementUtils"],(function(e,t,n,r,i,c,l,a){"use strict";var o;function u(e,r){const{hasZ:i,spatialReference:c}=e,l=a.computeEuclideanMeasurementSR(c);let u=0;const s=n.lengthUnitFromSpatialReference(l);if(null==s)return null;const f=r===o.Direct?h:d;for(const t of e.paths){if(t.length<2)continue;const e=t.length-1;for(let n=0;n<e;++n){const e=t[n];z[0]=e[0],z[1]=e[1],z[2]=i?e[2]:0;const r=t[n+1];v[0]=r[0],v[1]=r[1],v[2]=i?r[2]:0;const l=f(z,v,c);if(null==l)return null;u+=l.value}}return t.createLength(u,s)}function s(e,r){const i=n.verticalLengthUnitFromSpatialReference(r);return null!=i?t.createLength(e??0,i):null}function f(e,n,r){const i=p(e,n,r);return null!=i?{direct:t.createLength(i.direct,i.unit),horizontal:t.createLength(i.horizontal,i.unit),vertical:t.createLength(i.vertical,i.unit)}:null}function h(e,n,r){const i=p(e,n,r,o.Direct);return null!=i?t.createLength(i.direct,i.unit):null}function d(e,n,r){const i=p(e,n,r,o.Horizontal);return null!=i?t.createLength(i.horizontal,i.unit):null}function g(e,n,r){const i=p(e,n,r,o.Vertical);return null!=i?t.createLength(i.verticalSigned,i.unit):null}function p(e,t,i,l){const u=a.computeEuclideanMeasurementSR(i),s=n.lengthUnitFromSpatialReference(u);if(null==s)return null;const f=t[2]-e[2];if(l===o.Vertical)return{verticalSigned:f,unit:s};if(!c.projectVectorToVector(e,i,D,u)||!c.projectVectorToVector(t,i,R,u))return null;if(l===o.Direct)return{direct:r.distance(R,D),unit:s};if(r.set(m,e[0],e[1],t[2]),!c.projectVectorToVector(m,i,m,u))return null;const h=r.distance(m,R);return l===o.Horizontal?{horizontal:h,unit:s}:{direct:r.distance(R,D),horizontal:h,vertical:Math.abs(f),unit:s}}!function(e){e[e.Direct=0]="Direct",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(o||(o={}));const z=i.create(),v=i.create(),D=i.create(),R=i.create(),m=i.create();e.elevationFromPoint=function(e){return null!=e?s(e.hasZ?e.z:0,e.spatialReference):null},e.elevationFromZ=s,e.euclideanDirectDistance=h,e.euclideanDirectDistanceBetweenPoints=function(e,t){const{spatialReference:n}=e;return l.equals(n,t.spatialReference)?(z[0]=e.x,z[1]=e.y,z[2]=e.hasZ?e.z:0,v[0]=t.x,v[1]=t.y,v[2]=t.hasZ?t.z:0,h(z,v,n)):null},e.euclideanDistance=f,e.euclideanDistanceBetweenPoints=function(e,t){const{spatialReference:n}=e;return l.equals(n,t.spatialReference)?(z[0]=e.x,z[1]=e.y,z[2]=e.hasZ?e.z:0,v[0]=t.x,v[1]=t.y,v[2]=t.hasZ?t.z:0,f(z,v,n)):null},e.euclideanHorizontalDistance=d,e.euclideanHorizontalDistanceBetweenPoints=function(e,t){const{spatialReference:n}=e;return l.equals(n,t.spatialReference)?(z[0]=e.x,z[1]=e.y,z[2]=e.hasZ?e.z:0,v[0]=t.x,v[1]=t.y,v[2]=t.hasZ?t.z:0,d(z,v,n)):null},e.euclideanHorizontalLength=function(e){return u(e,o.Horizontal)},e.euclideanLength=function(e){return u(e,o.Direct)},e.verticalDistance=function(e,n,r){const i=p(e,n,r,o.Vertical);return null!=i?t.createLength(Math.abs(i.verticalSigned),i.unit):null},e.verticalSignedDistance=g,e.verticalSignedDistanceBetweenPoints=function(e,t){const{spatialReference:n}=e;return l.equals(n,t.spatialReference)?(z[0]=e.x,z[1]=e.y,z[2]=e.hasZ?e.z:0,v[0]=t.x,v[1]=t.y,v[2]=t.hasZ?t.z:0,g(z,v,n)):null},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));