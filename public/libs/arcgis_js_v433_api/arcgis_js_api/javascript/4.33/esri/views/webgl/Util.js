// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../core/has","./checkWebGLError","./enums","./getDataTypeBytes"],(function(e,t,r,i,a){"use strict";function o(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function s(e){return e[0].stride}e.bindVertexBufferLayout=function(e,t,i,s,c=0){const n=e.gl;e.bindBuffer(i);for(const i of s){const s=t.get(i.name);if(null==s){console.warn(`There is no location for vertex attribute '${i.name}' defined.`);continue}const l=c*i.stride;if(i.count<=4)n.vertexAttribPointer(s,i.count,i.type,i.normalized,i.stride,i.offset+l),n.enableVertexAttribArray(s),i.divisor>0&&e.gl.vertexAttribDivisor(s,i.divisor);else if(9===i.count)for(let t=0;t<3;t++)n.vertexAttribPointer(s+t,3,i.type,i.normalized,i.stride,i.offset+12*t+l),n.enableVertexAttribArray(s+t),i.divisor>0&&e.gl.vertexAttribDivisor(s+t,i.divisor);else if(16===i.count)for(let t=0;t<4;t++)n.vertexAttribPointer(s+t,4,i.type,i.normalized,i.stride,i.offset+16*t+l),n.enableVertexAttribArray(s+t),i.divisor>0&&e.gl?.vertexAttribDivisor(s+t,i.divisor);else console.error("Unsupported vertex attribute element count: "+i.count);if(r.webglDebugEnabled()){const t=o(e),r=a.getDataTypeBytes(i.type),s=i.offset,c=Math.round(r/s)!==r/s?`. Offset not a multiple of stride. DataType requires ${r} bytes, but descriptor has an offset of ${s}`:"";t&&console.error(`Unable to bind vertex attribute "${i.name}" with baseInstanceOffset ${l}${c}:`,t,i)}}},e.getBytesPerElementFormat=function(e){switch(e){case i.PixelFormat.ALPHA:case i.PixelFormat.LUMINANCE:case i.PixelFormat.RED:case i.PixelFormat.RED_INTEGER:case i.SizedPixelFormat.R8:case i.SizedPixelFormat.R8I:case i.SizedPixelFormat.R8UI:case i.SizedPixelFormat.R8_SNORM:case i.SizedStencilFormat.STENCIL_INDEX8:return 1;case i.PixelFormat.LUMINANCE_ALPHA:case i.PixelFormat.RG:case i.PixelFormat.RG_INTEGER:case i.SizedPixelFormat.RGBA4:case i.SizedPixelFormat.R16F:case i.SizedPixelFormat.R16I:case i.SizedPixelFormat.R16UI:case i.SizedPixelFormat.RG8:case i.SizedPixelFormat.RG8I:case i.SizedPixelFormat.RG8UI:case i.SizedPixelFormat.RG8_SNORM:case i.SizedPixelFormat.RGB565:case i.SizedPixelFormat.RGB5_A1:case i.SizedDepthFormat.DEPTH_COMPONENT16:return 2;case i.PixelFormat.RGB:case i.PixelFormat.RGB_INTEGER:case i.SizedPixelFormat.RGB8:case i.SizedPixelFormat.RGB8I:case i.SizedPixelFormat.RGB8UI:case i.SizedPixelFormat.RGB8_SNORM:case i.SizedPixelFormat.SRGB8:case i.SizedDepthFormat.DEPTH_COMPONENT24:return 3;case i.PixelFormat.RGBA:case i.PixelFormat.RGBA_INTEGER:case i.SizedPixelFormat.RGBA8:case i.SizedPixelFormat.R32F:case i.SizedPixelFormat.R11F_G11F_B10F:case i.SizedPixelFormat.RG16F:case i.SizedPixelFormat.R32I:case i.SizedPixelFormat.R32UI:case i.SizedPixelFormat.RG16I:case i.SizedPixelFormat.RG16UI:case i.SizedPixelFormat.RGBA8I:case i.SizedPixelFormat.RGBA8UI:case i.SizedPixelFormat.RGBA8_SNORM:case i.SizedPixelFormat.SRGB8_ALPHA8:case i.SizedPixelFormat.RGB9_E5:case i.SizedPixelFormat.RGB10_A2UI:case i.SizedPixelFormat.RGB10_A2:case i.SizedDepthFormat.DEPTH_COMPONENT32F:case i.SizedDepthStencilFormat.DEPTH24_STENCIL8:return 4;case i.SizedDepthStencilFormat.DEPTH32F_STENCIL8:return 5;case i.SizedPixelFormat.RGB16F:case i.SizedPixelFormat.RGB16I:case i.SizedPixelFormat.RGB16UI:return 6;case i.SizedPixelFormat.RG32F:case i.SizedPixelFormat.RG32I:case i.SizedPixelFormat.RG32UI:case i.SizedPixelFormat.RGBA16F:case i.SizedPixelFormat.RGBA16I:case i.SizedPixelFormat.RGBA16UI:return 8;case i.SizedPixelFormat.RGB32F:case i.SizedPixelFormat.RGB32I:case i.SizedPixelFormat.RGB32UI:return 12;case i.SizedPixelFormat.RGBA32F:case i.SizedPixelFormat.RGBA32I:case i.SizedPixelFormat.RGBA32UI:return 16;case i.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case i.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case i.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case i.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case i.CompressedTextureFormat.COMPRESSED_R11_EAC:case i.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case i.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case i.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case i.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case i.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case i.CompressedTextureFormat.COMPRESSED_RG11_EAC:case i.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case i.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case i.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0},e.getErrorString=o,e.getStride=s,e.unbindVertexBufferLayout=function(e,t,r,a){const o=e.gl;e.bindBuffer(r);for(const r of a){const i=t.get(r.name);if(r.count<=4)o.disableVertexAttribArray(i),r.divisor&&r.divisor>0&&e.gl?.vertexAttribDivisor(i,0);else if(9===r.count)for(let t=0;t<3;t++)o.disableVertexAttribArray(i+t),r.divisor&&r.divisor>0&&e.gl?.vertexAttribDivisor(i+t,0);else if(16===r.count)for(let t=0;t<4;t++)o.disableVertexAttribArray(i+t),r.divisor&&r.divisor>0&&e.gl?.vertexAttribDivisor(i+t,0);else console.error("Unsupported vertex attribute element count: "+r.count)}e.unbindBuffer(i.BufferType.ARRAY_BUFFER)},e.vertexCount=function(e,t){return(e.vertexBuffers.get(t)?.usedMemory??0)/s(e.layout.get(t))},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));