// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","./BufferObject","./enums","./FramebufferObject","./renderState","./TextureDescriptor","./VertexArrayObject","./VertexElementDescriptor","./WebGLDriverTestModule"],(function(e,r,t,o,n,i,a,s,p){"use strict";class l extends p.WebGLDriverTestModule{constructor(e){super(),this._rctx=e,e.gl&&e.capabilities.colorBufferFloat?.textureFloat&&e.capabilities.colorBufferFloat?.floatBlend&&(this._program=e.programCache.acquire("\n    precision highp float;\n    attribute vec2 a_pos;\n\n    void main() {\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n     precision highp float;\n\n     void main() {\n      gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\n     }\n    ",new Map([["a_pos",0]])))}_test(e){const p=this._rctx,l=new i.TextureDescriptor(1);l.wrapMode=t.TextureWrapMode.CLAMP_TO_EDGE,l.dataType=t.PixelType.FLOAT,l.internalFormat=t.SizedPixelFormat.RGBA32F,l.samplingMode=t.TextureSamplingMode.NEAREST;const c=new o.FramebufferObject(p,l),u=r.BufferObject.createVertex(p,t.Usage.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),d=new a.VertexArrayObject(p,new Map([["a_pos",0]]),new Map([["geometry",[new s.VertexElementDescriptor("a_pos",2,t.DataType.UNSIGNED_SHORT,0,4)]]]),new Map([["geometry",u]]));p.gl.getError(),p.useProgram(e);const f=p.getBoundFramebufferObject(),{x:b,y:g,width:m,height:T}=p.getViewport();p.bindFramebuffer(c),p.setViewport(0,0,1,1),p.bindVAO(d),p.drawArrays(t.PrimitiveType.TRIANGLE_STRIP,0,4);const _=n.makePipelineState({blending:n.destinationTimesOneMinusSourceAlpha});p.setPipelineState(_),p.drawArrays(t.PrimitiveType.TRIANGLE_STRIP,0,4);const x=p.gl.getError();return p.setViewport(b,g,m,T),p.bindFramebuffer(f),d.dispose(),c.dispose(),x!==t.ErrorConstant.INVALID_OPERATION||(console.warn("Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back."),!1)}}e.FloatBufferBlend=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));