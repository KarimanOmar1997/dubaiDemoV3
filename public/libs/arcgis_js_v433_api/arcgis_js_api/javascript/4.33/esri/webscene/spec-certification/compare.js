// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","./utils"],(function(e,t){"use strict";function n(e,t,p,o,i,r,c,u,f){if(c.has(o))return f;for(const l of o.properties){const d=t?`${t}.${l.name}`:l.name,m=p?`${p}.${l.name}`:l.name,y=i.get(m);if(y){const t=r.get(y[e].id);f.push({name:d,type:"ref",ref:y,refName:t,required:l.required}),a(e,m,y[e],i,r,u)}else"string"==typeof l.type?f.push(s(d,l)):(c.add(o),n(e,d,m,l.type,i,r,c,u,f))}return c.delete(o),f}function a(e,t,a,s,o,i){if(i.has(a.id))return i;const r={container:a,text:null,props:[]};return o.get(a.id).forEach((e=>i.set(e,r))),n(e,"",t,a,s,o,new Set,i,r.props),r.props.sort(p),i}function s(e,t){return{name:e,type:t.enum||("string"==typeof t.type?t.type:""),default:JSON.stringify(t.default),required:t.required}}function p(e,t){const n=e.name.localeCompare(t.name);if(0!==n)return n;const a=(e.type||"").localeCompare(t.type||"");return 0!==a?a:(e.default||"").localeCompare(t.default||"")}e.collect=function(e){const n=function(e){const n=t.collectClassPaths(e.api),a=t.collectClassPaths(e.spec),s=new Map;s.set("",{api:e.api,spec:e.spec});for(const[e,t]of n){const n=a.get(e);n&&s.set(e,{api:t,spec:n})}return s}(e),s=[],p=function(e){const t={api:new Map,spec:new Map};for(const n of e.values()){const e=`${n.api.name} (${n.spec.name})${n.api.typeValue?` <${n.api.typeValue}>`:""}`;let a=t.api.get(n.api.id);a||(a=new Set,t.api.set(n.api.id,a)),a.add(e);let s=t.spec.get(n.spec.id);s||(s=new Set,t.spec.set(n.spec.id,s)),s.add(e)}return t}(n),o=new Map;a("api","",e.api,n,p.api,o);const i=new Map;a("spec","",e.spec,n,p.spec,i);const r=function(e){const t=new Map;for(const n of e.keys()){const a=n?n.split(".").length:0,s=e.get(n).api.id;t.has("id")?t.set(s,Math.min(a,t.get(s))):t.set(s,a)}return t}(n);for(const[e,t]of o){const n=i.get(e),a=r.get(t.container.id),p=`${t.container.name} (${n.container.name})${t.container.typeValue?` <${t.container.typeValue}>`:""}`;s.push({name:p,api:t,spec:n,indent:a})}return s},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));