// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["../../chunks/tslib.es6","../../core/Accessor","../../core/deprecate","../../core/Logger","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/subclass","../../views/3d/environment/CloudyWeather","../../views/3d/environment/FoggyWeather","../../views/3d/environment/RainyWeather","../../views/3d/environment/SnowyWeather","../../views/3d/environment/SunnyWeather","../../views/3d/environment/weather","./enums"],(function(e,t,r,n,o,s,i,a,h,l,y,p,c,d){"use strict";let u=class extends t{constructor(e){super(e),this.view=null,this._weatherByType={sunny:new p,cloudy:new a,rainy:new l,snowy:new y,foggy:new h},this._settingWeather=!1,e?.isDefaultViewModel||r.deprecateUnnecessaryViewModel(n.getLogger(this),"Weather","arcgis-weather",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:t,...r}=e;return r}initialize(){this.addHandles([o.watch((()=>this.current),(e=>{this._settingWeather||null==e||(this._weatherByType={...this._weatherByType,[e.type]:e})}),o.syncAndInitial)])}get state(){const e=this.view;return null!=e&&e.ready?null!=this.error?this.error===d.WeatherError.NotVisible?d.WeatherState.Ready:d.WeatherState.Error:d.WeatherState.Ready:d.WeatherState.Disabled}get weatherByType(){return this._weatherByType}get error(){const e=this.view;return null!=e&&e.ready?"3d"!==e.type?d.WeatherError.UnsupportedView:"local"===e.viewingMode?d.WeatherError.LocalScene:e.environment.atmosphereEnabled?e.environment.weatherAvailable?null:d.WeatherError.NotVisible:d.WeatherError.NoAtmosphere:null}get current(){return this._environment?.weather??this._weatherByType.sunny}set current(e){const t=this._environment;t&&(t.weather=e)}get _environment(){const e=this.view;return null!=e&&"3d"===e.type?e.environment:null}setWeatherByType(e){if(!c.validateWeatherType(e,n.getLogger(this)))return;const t=this._environment;null!=t&&(this._settingWeather=!0,t.weather=this._weatherByType[e],this._settingWeather=!1)}setSnowCoverEnabled(e){const t=this.current;"snowCover"in t&&(t.snowCover=e?"enabled":"disabled")}};return e.__decorate([s.property()],u.prototype,"view",void 0),e.__decorate([s.property()],u.prototype,"state",null),e.__decorate([s.property()],u.prototype,"_weatherByType",void 0),e.__decorate([s.property()],u.prototype,"weatherByType",null),e.__decorate([s.property()],u.prototype,"error",null),e.__decorate([s.property()],u.prototype,"current",null),e.__decorate([s.property()],u.prototype,"_environment",null),u=e.__decorate([i.subclass("esri.widgets.Weather.WeatherViewModel")],u),u}));