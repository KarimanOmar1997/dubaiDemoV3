// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.33/esri/copyright.txt for details.
//>>built
define(["exports","../../../form/support/formUtils","../../../layers/support/domainUtils","../../../layers/support/fieldUtils","../dateUtils"],(function(t,e,n,r,i){"use strict";var a,u;function o(t){return null==t||""===t}function l(t){return"number"==typeof t&&t>-1?t:-1}t.FieldInputDataTypes=void 0,(a=t.FieldInputDataTypes||(t.FieldInputDataTypes={})).Text="text",a.Number="number",a.Date="date",a.Unsupported="unsupported",t.InputValidationError=void 0,(u=t.InputValidationError||(t.InputValidationError={})).CANNOT_BE_EMPTY="input-validation-error::cannot-be-empty",u.TOO_SHORT="length-validation-error::too-short",u.TOO_LONG="length-validation-error::too-long",t.capabilitiesAllowEditType=(t,e)=>{if(!t)return!0;const{operations:n}=t;switch(e){case"INSERT":return n.supportsAdd;case"UPDATE":case"DELETE":return n.supportsUpdate;default:return!0}},t.dateIsValid=t=>t&&!Number.isNaN(t.valueOf()),t.ensureMinOrMaxLength=l,t.getMaxLength=function({dataType:n,field:r,input:i}){if(n===t.FieldInputDataTypes.Date)return-1;const a=l(r.length);if(!i||!e.isTextInput(i))return a;const u=l(i.maxLength);return-1===u?a:-1===a?u:Math.min(a,u)},t.getMinLength=function({dataType:n,field:r,input:i}){if(n===t.FieldInputDataTypes.Date)return-1;if(!i||!e.isTextInput(i))return-1;const a=l(i.minLength);if(a<0)return-1;const u=l(r.length);return u>-1&&u<a?-1:a},t.getRangeErrorMessage=function(t,e){return null!=t.max&&null!=t.min?e.outsideRange:null!=t.max?e.outsideRangeMax:e.outsideRangeMin},t.isEmptyValue=o,t.numberFormatOptions={type:"number"},t.scientificNumberFormatOptions={type:"number",intlOptions:{notation:"scientific"}},t.shouldUseScientificNotation=function(t){return t>=1e7||t<=-1e7},t.validateFormValue=function(e,a){const{dataType:u,domain:o,field:l,maxLength:s,minLength:p,range:d,required:f}=a;if(null==e)return f?t.InputValidationError.CANNOT_BE_EMPTY:null;if("text"===u&&"string"==typeof e){if(p>-1&&e.length<p)return t.InputValidationError.TOO_SHORT;if(s>-1&&e.length>s)return t.InputValidationError.TOO_LONG}return"date"!==u||i.dateTimeIsInRange({type:l.type,range:d,value:e})?o?n.validateDomainValue(l,e,o):r.validateFieldValue(l,e)??n.validateDomainValue(l,e):r.NumericRangeValidationError.OUT_OF_RANGE},t.valuesAreEquivalent=function(t,e){return!(!o(t)||!o(e))||t===e},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));